{"ast":null,"code":"import React from'react';import{Target,Users,Activity,TrendingUp,CheckCircle,AlertCircle,Database,Star,Layers,Award,Info}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Stage2UserMatchingResults=_ref=>{var _data$stage_results,_data$data,_data$data$stage_resu;let{data}=_ref;// Handle multiple API response formats for data access\nlet stage2Data=null;if(data!==null&&data!==void 0&&(_data$stage_results=data.stage_results)!==null&&_data$stage_results!==void 0&&_data$stage_results.stage2){// Direct format: pipelineData.stage_results.stage2\nstage2Data=data.stage_results.stage2;}else if(data!==null&&data!==void 0&&(_data$data=data.data)!==null&&_data$data!==void 0&&(_data$data$stage_resu=_data$data.stage_results)!==null&&_data$data$stage_resu!==void 0&&_data$data$stage_resu.stage2){// Nested format: pipelineData.data.stage_results.stage2\nstage2Data=data.data.stage_results.stage2;}if(!stage2Data){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 dark:text-gray-400\",children:\"No Stage 2 data available. Run analysis to see user segment matching results.\"})});}const matchingStats=stage2Data.matching_stats||{};const usersWithSegments=stage2Data.users_with_segments||[];// Helper function to format numbers\nconst formatNumber=num=>{if(typeof num!=='number')return'0';return num.toLocaleString();};// Helper function to format percentages\nconst formatPercentage=(num,total)=>{if(!total||typeof num!=='number')return'0.0%';return(num/total*100).toFixed(1)+'%';};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-6\",children:[/*#__PURE__*/_jsx(Target,{size:24,className:\"text-green-600 dark:text-green-400\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:\"Stage 2: User-to-Segment Matching Results\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-auto flex items-center gap-1 text-green-600 dark:text-green-400 text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u2713\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Conversion Probability Segment Matching\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(CheckCircle,{size:20,className:\"text-green-600 dark:text-green-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-green-900 dark:text-green-200\",children:\"Successful Matches\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-green-600 dark:text-green-300\",children:formatNumber(matchingStats.successful_matches||0)}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-green-700 dark:text-green-400\",children:[formatPercentage(matchingStats.successful_matches,matchingStats.total_users),\" success rate\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:20,className:\"text-red-600 dark:text-red-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-red-900 dark:text-red-200\",children:\"Failed Matches\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-red-600 dark:text-red-300\",children:formatNumber(matchingStats.failed_matches||0)}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-700 dark:text-red-400\",children:\"No viable segments found\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(Layers,{size:20,className:\"text-blue-600 dark:text-blue-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-blue-900 dark:text-blue-200\",children:\"Rollups Applied\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-blue-600 dark:text-blue-300\",children:formatNumber(matchingStats.rollups_applied||0)}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-700 dark:text-blue-400\",children:[formatPercentage(matchingStats.rollups_applied,matchingStats.successful_matches),\" rollup rate\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(Award,{size:20,className:\"text-purple-600 dark:text-purple-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-purple-900 dark:text-purple-200\",children:\"Average Accuracy\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-purple-600 dark:text-purple-300\",children:Object.keys(matchingStats.accuracy_distribution||{}).length>0?Object.keys(matchingStats.accuracy_distribution)[0]:'N/A'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-purple-700 dark:text-purple-400\",children:\"Prediction quality score\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border border-blue-200 dark:border-blue-800\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Database,{size:20,className:\"text-blue-600 dark:text-blue-400\"}),\"Economic Tier Classification System\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-white dark:bg-gray-800 rounded border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-green-600 dark:text-green-400 mb-1\",children:\"Tier 1: High Income\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-700 dark:text-gray-300\",children:\"US, CA, UK, AU, DE, FR, etc.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 dark:text-gray-400 mt-1\",children:\"World Bank high-income classification\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-white dark:bg-gray-800 rounded border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-yellow-600 dark:text-yellow-400 mb-1\",children:\"Tier 2: Medium Income\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-700 dark:text-gray-300\",children:\"BR, MX, TR, RU, AR, etc.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 dark:text-gray-400 mt-1\",children:\"World Bank upper-middle-income\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-white dark:bg-gray-800 rounded border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-red-600 dark:text-red-400 mb-1\",children:\"Tier 3: Low Income\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-700 dark:text-gray-300\",children:\"IN, PH, VN, ID, EG, etc.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 dark:text-gray-400 mt-1\",children:\"World Bank lower-middle & low-income\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 dark:text-white mb-4\",children:\"Individual User Segment Matching Results\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-md font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Info,{size:16,className:\"text-yellow-600 dark:text-yellow-400\"}),\"How to Read This Table\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700 dark:text-gray-300\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-blue-600 dark:text-blue-400 mb-1\",children:\"\\uD83D\\uDCCA 4 Key Metrics Column:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-xs space-y-1 ml-4\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Trial Conv:\"}),\" % who convert from trial to paid\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Refund:\"}),\" % who refund after trial conversion\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Init. Refund:\"}),\" % who refund initial purchase\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Renewal Refund:\"}),\" % who refund renewals\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Sample:\"}),\" Number of users in this segment\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-green-600 dark:text-green-400 mb-1\",children:\"\\uD83C\\uDFAF Match Type Column:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-xs space-y-1 ml-4\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Direct:\"}),\" Exact match found at user's specific level\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Applied (X steps):\"}),\" Had to use more general segment\"]}),/*#__PURE__*/_jsx(\"li\",{children:\"More steps = less specific match = lower accuracy\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Rollup helps when exact match has too few users\"})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm border dark:border-gray-600\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50 dark:bg-gray-700\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"p-3 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white\",children:\"User Distinct ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white\",children:\"User Properties\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white\",children:\"Matched Segment\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white\",children:\"Target Segment (if rollup)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 border-b dark:border-gray-600 text-center text-gray-700 dark:text-white\",children:\"4 Key Metrics (Trial, Refunds)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 border-b dark:border-gray-600 text-center text-gray-700 dark:text-white\",children:\"Prediction Accuracy\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white dark:bg-gray-800\",children:usersWithSegments.slice(0,20).map((user,index)=>{var _match$matched_segmen,_initialSegment$prope,_initialSegment$prope2,_initialSegment$prope3,_initialSegment$prope4,_initialSegment$prope5,_initialSegment$prope6,_match$matched_segmen2,_match$final_viable_s,_finalSegment$propert,_finalSegment$propert2,_finalSegment$propert3,_finalSegment$propert4,_finalSegment$propert5,_finalSegment$propert6,_match$conversion_met,_match$conversion_met2,_match$conversion_met3,_match$conversion_met4,_match$conversion_met5;const match=user.segment_match_result||{};const properties=user.user_properties||{};// Get rollup chain information for segment properties\nconst rollupChain=match.rollup_chain||[];const initialSegment=rollupChain.length>0?rollupChain[0]:null;const finalSegment=rollupChain.length>0?rollupChain[rollupChain.length-1]:null;const hasRollup=match.rollup_applied&&rollupChain.length>1;return/*#__PURE__*/_jsxs(\"tr\",{className:index%2===0?'':'bg-gray-50 dark:bg-gray-700',children:[/*#__PURE__*/_jsxs(\"td\",{className:\"p-3 border-b dark:border-gray-600 font-mono text-xs text-gray-700 dark:text-gray-300\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"max-w-[200px] break-all\",children:user.user_id}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-500 dark:text-gray-400 text-xs mt-1\",children:[\"Short: \",user.user_id.substring(0,8),\"...\"]})]}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Product:\"}),\" \",properties.product_id||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Store:\"}),\" \",properties.app_store||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" \",properties.price_bucket||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Country:\"}),\" \",properties.country||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Economic Tier:\"}),\" \",properties.economic_tier||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Region:\"}),\" \",properties.region||'N/A']})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300\",children:match.success&&initialSegment?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium text-blue-600 dark:text-blue-400 mb-2\",children:[\"ID: \",((_match$matched_segmen=match.matched_segment_id)===null||_match$matched_segmen===void 0?void 0:_match$matched_segmen.substring(0,8))||'Unknown',\"...\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Product:\"}),\" \",((_initialSegment$prope=initialSegment.properties)===null||_initialSegment$prope===void 0?void 0:_initialSegment$prope.product_id)||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Store:\"}),\" \",((_initialSegment$prope2=initialSegment.properties)===null||_initialSegment$prope2===void 0?void 0:_initialSegment$prope2.app_store)||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" \",((_initialSegment$prope3=initialSegment.properties)===null||_initialSegment$prope3===void 0?void 0:_initialSegment$prope3.price_bucket)||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Country:\"}),\" \",((_initialSegment$prope4=initialSegment.properties)===null||_initialSegment$prope4===void 0?void 0:_initialSegment$prope4.country)||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Economic Tier:\"}),\" \",((_initialSegment$prope5=initialSegment.properties)===null||_initialSegment$prope5===void 0?void 0:_initialSegment$prope5.economic_tier)||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Region:\"}),\" \",((_initialSegment$prope6=initialSegment.properties)===null||_initialSegment$prope6===void 0?void 0:_initialSegment$prope6.region)||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-1 border-t border-gray-200 dark:border-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Users:\"}),\" \",initialSegment.cohort_size||0]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Level:\"}),\" \",initialSegment.level||'N/A']})]}):match.success?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium text-blue-600 dark:text-blue-400 mb-2\",children:[\"ID: \",((_match$matched_segmen2=match.matched_segment_id)===null||_match$matched_segmen2===void 0?void 0:_match$matched_segmen2.substring(0,8))||'Unknown',\"...\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500\",children:\"Segment properties not available\"}),match.conversion_metrics&&/*#__PURE__*/_jsxs(\"div\",{className:\"pt-1 border-t border-gray-200 dark:border-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Users:\"}),\" \",match.conversion_metrics.trial_started_count||0]})]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600 dark:text-red-400 text-xs\",children:\"No match found\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300\",children:hasRollup&&finalSegment?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium text-green-600 dark:text-green-400 mb-2\",children:[\"ID: \",((_match$final_viable_s=match.final_viable_segment_id)===null||_match$final_viable_s===void 0?void 0:_match$final_viable_s.substring(0,8))||'Unknown',\"...\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Product:\"}),\" \",((_finalSegment$propert=finalSegment.properties)===null||_finalSegment$propert===void 0?void 0:_finalSegment$propert.product_id)||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Store:\"}),\" \",((_finalSegment$propert2=finalSegment.properties)===null||_finalSegment$propert2===void 0?void 0:_finalSegment$propert2.app_store)||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" \",((_finalSegment$propert3=finalSegment.properties)===null||_finalSegment$propert3===void 0?void 0:_finalSegment$propert3.price_bucket)||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Country:\"}),\" \",((_finalSegment$propert4=finalSegment.properties)===null||_finalSegment$propert4===void 0?void 0:_finalSegment$propert4.country)||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Economic Tier:\"}),\" \",((_finalSegment$propert5=finalSegment.properties)===null||_finalSegment$propert5===void 0?void 0:_finalSegment$propert5.economic_tier)||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Region:\"}),\" \",((_finalSegment$propert6=finalSegment.properties)===null||_finalSegment$propert6===void 0?void 0:_finalSegment$propert6.region)||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-1 border-t border-gray-200 dark:border-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Users:\"}),\" \",finalSegment.cohort_size||0]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Level:\"}),\" \",finalSegment.level||'N/A']})]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400\",children:match.success?'Direct match - no rollup needed':''})}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 border-b dark:border-gray-600 text-center text-gray-700 dark:text-gray-300\",children:match.success?/*#__PURE__*/_jsx(\"div\",{className:\"text-xs\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-bold text-blue-600 dark:text-blue-400 text-sm\",children:[((((_match$conversion_met=match.conversion_metrics)===null||_match$conversion_met===void 0?void 0:_match$conversion_met.trial_conversion_rate)||0)*100).toFixed(1),\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 dark:text-gray-400 text-xs\",children:\"Trial Conv.\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium text-orange-600 dark:text-orange-400 text-xs\",children:[((((_match$conversion_met2=match.conversion_metrics)===null||_match$conversion_met2===void 0?void 0:_match$conversion_met2.trial_converted_to_refund_rate)||0)*100).toFixed(1),\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 dark:text-gray-400 text-xs\",children:\"Refund\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium text-red-600 dark:text-red-400 text-xs\",children:[((((_match$conversion_met3=match.conversion_metrics)===null||_match$conversion_met3===void 0?void 0:_match$conversion_met3.initial_purchase_to_refund_rate)||0)*100).toFixed(1),\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 dark:text-gray-400 text-xs\",children:\"Init. Refund\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium text-purple-600 dark:text-purple-400 text-xs\",children:[((((_match$conversion_met4=match.conversion_metrics)===null||_match$conversion_met4===void 0?void 0:_match$conversion_met4.renewal_to_refund_rate)||0)*100).toFixed(1),\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 dark:text-gray-400 text-xs\",children:\"Renewal Refund\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-1 border-t border-gray-200 dark:border-gray-600\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-500 dark:text-gray-400 text-xs\",children:[\"Sample: \",((_match$conversion_met5=match.conversion_metrics)===null||_match$conversion_met5===void 0?void 0:_match$conversion_met5.trial_started_count)||0]})})]})}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400 text-xs\",children:\"-\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 border-b dark:border-gray-600 text-center text-gray-700 dark:text-gray-300\",children:match.success?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-1\",children:[/*#__PURE__*/_jsx(Star,{size:12,className:\"text-yellow-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium px-2 py-1 rounded \".concat(match.accuracy_score==='very_high'?'bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200':match.accuracy_score==='high'?'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200':match.accuracy_score==='medium'?'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200':match.accuracy_score==='low'?'bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200':'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200'),children:match.accuracy_score||'Unknown'})]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400 text-xs\",children:\"-\"})})]},user.user_id);})})]})}),usersWithSegments.length>20&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-center text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-700 p-3 rounded\",children:[\"Showing first 20 users of \",usersWithSegments.length,\" total users\"]})]}),stage2Data.error&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:48,className:\"mx-auto text-red-400 mb-4\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-600 dark:text-red-400 mb-2\",children:[\"Stage 2 Error: \",stage2Data.error]})]}),usersWithSegments.length===0&&!stage2Data.error&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 bg-gray-50 dark:bg-gray-700 rounded-lg\",children:[/*#__PURE__*/_jsx(Target,{size:48,className:\"mx-auto text-gray-400 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400 mb-2\",children:\"No user segment matching data available\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-500\",children:\"Run Stage 2 analysis to see user-to-segment matching results\"})]})]});};export default Stage2UserMatchingResults;","map":{"version":3,"names":["React","Target","Users","Activity","TrendingUp","CheckCircle","AlertCircle","Database","Star","Layers","Award","Info","jsx","_jsx","jsxs","_jsxs","Stage2UserMatchingResults","_ref","_data$stage_results","_data$data","_data$data$stage_resu","data","stage2Data","stage_results","stage2","className","children","matchingStats","matching_stats","usersWithSegments","users_with_segments","formatNumber","num","toLocaleString","formatPercentage","total","toFixed","size","successful_matches","total_users","failed_matches","rollups_applied","Object","keys","accuracy_distribution","length","slice","map","user","index","_match$matched_segmen","_initialSegment$prope","_initialSegment$prope2","_initialSegment$prope3","_initialSegment$prope4","_initialSegment$prope5","_initialSegment$prope6","_match$matched_segmen2","_match$final_viable_s","_finalSegment$propert","_finalSegment$propert2","_finalSegment$propert3","_finalSegment$propert4","_finalSegment$propert5","_finalSegment$propert6","_match$conversion_met","_match$conversion_met2","_match$conversion_met3","_match$conversion_met4","_match$conversion_met5","match","segment_match_result","properties","user_properties","rollupChain","rollup_chain","initialSegment","finalSegment","hasRollup","rollup_applied","user_id","substring","product_id","app_store","price_bucket","country","economic_tier","region","success","matched_segment_id","cohort_size","level","conversion_metrics","trial_started_count","final_viable_segment_id","trial_conversion_rate","trial_converted_to_refund_rate","initial_purchase_to_refund_rate","renewal_to_refund_rate","concat","accuracy_score","error"],"sources":["/Users/joshuakaufman/untitled folder 3/orchestrator/dashboard/client/src/cohort-pipeline/components/Stage2UserMatchingResults.js"],"sourcesContent":["import React from 'react';\nimport { Target, Users, Activity, TrendingUp, CheckCircle, AlertCircle, Database, Star, Layers, Award, Info } from 'lucide-react';\n\nconst Stage2UserMatchingResults = ({ data }) => {\n    // Handle multiple API response formats for data access\n    let stage2Data = null;\n    \n    if (data?.stage_results?.stage2) {\n        // Direct format: pipelineData.stage_results.stage2\n        stage2Data = data.stage_results.stage2;\n    } else if (data?.data?.stage_results?.stage2) {\n        // Nested format: pipelineData.data.stage_results.stage2\n        stage2Data = data.data.stage_results.stage2;\n    }\n\n    if (!stage2Data) {\n        return (\n            <div className=\"text-center py-8\">\n                <p className=\"text-gray-500 dark:text-gray-400\">\n                    No Stage 2 data available. Run analysis to see user segment matching results.\n                </p>\n            </div>\n        );\n    }\n\n    const matchingStats = stage2Data.matching_stats || {};\n    const usersWithSegments = stage2Data.users_with_segments || [];\n\n    // Helper function to format numbers\n    const formatNumber = (num) => {\n        if (typeof num !== 'number') return '0';\n        return num.toLocaleString();\n    };\n\n    // Helper function to format percentages\n    const formatPercentage = (num, total) => {\n        if (!total || typeof num !== 'number') return '0.0%';\n        return ((num / total) * 100).toFixed(1) + '%';\n    };\n\n    return (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n            <div className=\"flex items-center gap-2 mb-6\">\n                <Target size={24} className=\"text-green-600 dark:text-green-400\" />\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                    Stage 2: User-to-Segment Matching Results\n                </h2>\n                <div className=\"ml-auto flex items-center gap-1 text-green-600 dark:text-green-400 text-sm\">\n                    <span>✓</span>\n                    <span>Conversion Probability Segment Matching</span>\n                </div>\n            </div>\n\n            {/* Summary Cards */}\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n                <div className=\"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                        <CheckCircle size={20} className=\"text-green-600 dark:text-green-400\" />\n                        <h3 className=\"font-semibold text-green-900 dark:text-green-200\">Successful Matches</h3>\n                    </div>\n                    <p className=\"text-2xl font-bold text-green-600 dark:text-green-300\">\n                        {formatNumber(matchingStats.successful_matches || 0)}\n                    </p>\n                    <p className=\"text-sm text-green-700 dark:text-green-400\">\n                        {formatPercentage(matchingStats.successful_matches, matchingStats.total_users)} success rate\n                    </p>\n                </div>\n\n                <div className=\"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                        <AlertCircle size={20} className=\"text-red-600 dark:text-red-400\" />\n                        <h3 className=\"font-semibold text-red-900 dark:text-red-200\">Failed Matches</h3>\n                    </div>\n                    <p className=\"text-2xl font-bold text-red-600 dark:text-red-300\">\n                        {formatNumber(matchingStats.failed_matches || 0)}\n                    </p>\n                    <p className=\"text-sm text-red-700 dark:text-red-400\">\n                        No viable segments found\n                    </p>\n                </div>\n\n                <div className=\"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                        <Layers size={20} className=\"text-blue-600 dark:text-blue-400\" />\n                        <h3 className=\"font-semibold text-blue-900 dark:text-blue-200\">Rollups Applied</h3>\n                    </div>\n                    <p className=\"text-2xl font-bold text-blue-600 dark:text-blue-300\">\n                        {formatNumber(matchingStats.rollups_applied || 0)}\n                    </p>\n                    <p className=\"text-sm text-blue-700 dark:text-blue-400\">\n                        {formatPercentage(matchingStats.rollups_applied, matchingStats.successful_matches)} rollup rate\n                    </p>\n                </div>\n\n                <div className=\"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                        <Award size={20} className=\"text-purple-600 dark:text-purple-400\" />\n                        <h3 className=\"font-semibold text-purple-900 dark:text-purple-200\">Average Accuracy</h3>\n                    </div>\n                    <p className=\"text-2xl font-bold text-purple-600 dark:text-purple-300\">\n                        {Object.keys(matchingStats.accuracy_distribution || {}).length > 0 ? \n                            Object.keys(matchingStats.accuracy_distribution)[0] : 'N/A'}\n                    </p>\n                    <p className=\"text-sm text-purple-700 dark:text-purple-400\">\n                        Prediction quality score\n                    </p>\n                </div>\n            </div>\n\n            {/* Economic Tier Explanation */}\n            <div className=\"mb-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border border-blue-200 dark:border-blue-800\">\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2\">\n                    <Database size={20} className=\"text-blue-600 dark:text-blue-400\" />\n                    Economic Tier Classification System\n                </h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\n                    <div className=\"p-3 bg-white dark:bg-gray-800 rounded border\">\n                        <div className=\"font-medium text-green-600 dark:text-green-400 mb-1\">Tier 1: High Income</div>\n                        <div className=\"text-gray-700 dark:text-gray-300\">\n                            US, CA, UK, AU, DE, FR, etc.\n                        </div>\n                        <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                            World Bank high-income classification\n                        </div>\n                    </div>\n                    <div className=\"p-3 bg-white dark:bg-gray-800 rounded border\">\n                        <div className=\"font-medium text-yellow-600 dark:text-yellow-400 mb-1\">Tier 2: Medium Income</div>\n                        <div className=\"text-gray-700 dark:text-gray-300\">\n                            BR, MX, TR, RU, AR, etc.\n                        </div>\n                        <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                            World Bank upper-middle-income\n                        </div>\n                    </div>\n                    <div className=\"p-3 bg-white dark:bg-gray-800 rounded border\">\n                        <div className=\"font-medium text-red-600 dark:text-red-400 mb-1\">Tier 3: Low Income</div>\n                        <div className=\"text-gray-700 dark:text-gray-300\">\n                            IN, PH, VN, ID, EG, etc.\n                        </div>\n                        <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                            World Bank lower-middle & low-income\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {/* Individual User Matching Results */}\n            <div className=\"mb-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n                    Individual User Segment Matching Results\n                </h3>\n                \n                {/* Explanation Section */}\n                <div className=\"mb-4 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800\">\n                    <h4 className=\"text-md font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2\">\n                        <Info size={16} className=\"text-yellow-600 dark:text-yellow-400\" />\n                        How to Read This Table\n                    </h4>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700 dark:text-gray-300\">\n                        <div>\n                            <div className=\"font-medium text-blue-600 dark:text-blue-400 mb-1\">📊 4 Key Metrics Column:</div>\n                            <ul className=\"text-xs space-y-1 ml-4\">\n                                <li><strong>Trial Conv:</strong> % who convert from trial to paid</li>\n                                <li><strong>Refund:</strong> % who refund after trial conversion</li>\n                                <li><strong>Init. Refund:</strong> % who refund initial purchase</li>\n                                <li><strong>Renewal Refund:</strong> % who refund renewals</li>\n                                <li><strong>Sample:</strong> Number of users in this segment</li>\n                            </ul>\n                        </div>\n                        <div>\n                            <div className=\"font-medium text-green-600 dark:text-green-400 mb-1\">🎯 Match Type Column:</div>\n                            <ul className=\"text-xs space-y-1 ml-4\">\n                                <li><strong>Direct:</strong> Exact match found at user's specific level</li>\n                                <li><strong>Applied (X steps):</strong> Had to use more general segment</li>\n                                <li>More steps = less specific match = lower accuracy</li>\n                                <li>Rollup helps when exact match has too few users</li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n                \n                <div className=\"overflow-x-auto\">\n                    <table className=\"min-w-full text-sm border dark:border-gray-600\">\n                        <thead className=\"bg-gray-50 dark:bg-gray-700\">\n                            <tr>\n                                <th className=\"p-3 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white\">\n                                    User Distinct ID\n                                </th>\n                                <th className=\"p-3 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white\">\n                                    User Properties\n                                </th>\n                                <th className=\"p-3 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white\">\n                                    Matched Segment\n                                </th>\n                                <th className=\"p-3 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white\">\n                                    Target Segment (if rollup)\n                                </th>\n                                <th className=\"p-3 border-b dark:border-gray-600 text-center text-gray-700 dark:text-white\">\n                                    4 Key Metrics (Trial, Refunds)\n                                </th>\n                                <th className=\"p-3 border-b dark:border-gray-600 text-center text-gray-700 dark:text-white\">\n                                    Prediction Accuracy\n                                </th>\n                            </tr>\n                        </thead>\n                        <tbody className=\"bg-white dark:bg-gray-800\">\n                            {usersWithSegments.slice(0, 20).map((user, index) => {\n                                const match = user.segment_match_result || {};\n                                const properties = user.user_properties || {};\n                                \n                                // Get rollup chain information for segment properties\n                                const rollupChain = match.rollup_chain || [];\n                                const initialSegment = rollupChain.length > 0 ? rollupChain[0] : null;\n                                const finalSegment = rollupChain.length > 0 ? rollupChain[rollupChain.length - 1] : null;\n                                const hasRollup = match.rollup_applied && rollupChain.length > 1;\n                                \n                                return (\n                                    <tr key={user.user_id} className={index % 2 === 0 ? '' : 'bg-gray-50 dark:bg-gray-700'}>\n                                        <td className=\"p-3 border-b dark:border-gray-600 font-mono text-xs text-gray-700 dark:text-gray-300\">\n                                            <div className=\"max-w-[200px] break-all\">\n                                                {user.user_id}\n                                            </div>\n                                            <div className=\"text-gray-500 dark:text-gray-400 text-xs mt-1\">\n                                                Short: {user.user_id.substring(0, 8)}...\n                                            </div>\n                                        </td>\n                                        <td className=\"p-3 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300\">\n                                            <div className=\"space-y-1 text-xs\">\n                                                <div><strong>Product:</strong> {properties.product_id || 'N/A'}</div>\n                                                <div><strong>Store:</strong> {properties.app_store || 'N/A'}</div>\n                                                <div><strong>Price:</strong> {properties.price_bucket || 'N/A'}</div>\n                                                <div><strong>Country:</strong> {properties.country || 'N/A'}</div>\n                                                <div><strong>Economic Tier:</strong> {properties.economic_tier || 'N/A'}</div>\n                                                <div><strong>Region:</strong> {properties.region || 'N/A'}</div>\n                                            </div>\n                                        </td>\n                                        <td className=\"p-3 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300\">\n                                            {match.success && initialSegment ? (\n                                                <div className=\"space-y-1 text-xs\">\n                                                    <div className=\"font-medium text-blue-600 dark:text-blue-400 mb-2\">\n                                                        ID: {match.matched_segment_id?.substring(0, 8) || 'Unknown'}...\n                                                    </div>\n                                                    <div><strong>Product:</strong> {initialSegment.properties?.product_id || 'N/A'}</div>\n                                                    <div><strong>Store:</strong> {initialSegment.properties?.app_store || 'N/A'}</div>\n                                                    <div><strong>Price:</strong> {initialSegment.properties?.price_bucket || 'N/A'}</div>\n                                                    <div><strong>Country:</strong> {initialSegment.properties?.country || 'N/A'}</div>\n                                                    <div><strong>Economic Tier:</strong> {initialSegment.properties?.economic_tier || 'N/A'}</div>\n                                                    <div><strong>Region:</strong> {initialSegment.properties?.region || 'N/A'}</div>\n                                                    <div className=\"pt-1 border-t border-gray-200 dark:border-gray-600\">\n                                                        <strong>Users:</strong> {initialSegment.cohort_size || 0}\n                                                    </div>\n                                                    <div><strong>Level:</strong> {initialSegment.level || 'N/A'}</div>\n                                                </div>\n                                            ) : match.success ? (\n                                                <div className=\"space-y-1 text-xs\">\n                                                    <div className=\"font-medium text-blue-600 dark:text-blue-400 mb-2\">\n                                                        ID: {match.matched_segment_id?.substring(0, 8) || 'Unknown'}...\n                                                    </div>\n                                                    <div className=\"text-gray-500\">Segment properties not available</div>\n                                                    {match.conversion_metrics && (\n                                                        <div className=\"pt-1 border-t border-gray-200 dark:border-gray-600\">\n                                                            <strong>Users:</strong> {match.conversion_metrics.trial_started_count || 0}\n                                                        </div>\n                                                    )}\n                                                </div>\n                                            ) : (\n                                                <span className=\"text-red-600 dark:text-red-400 text-xs\">No match found</span>\n                                            )}\n                                        </td>\n                                        <td className=\"p-3 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300\">\n                                            {hasRollup && finalSegment ? (\n                                                <div className=\"space-y-1 text-xs\">\n                                                    <div className=\"font-medium text-green-600 dark:text-green-400 mb-2\">\n                                                        ID: {match.final_viable_segment_id?.substring(0, 8) || 'Unknown'}...\n                                                    </div>\n                                                    <div><strong>Product:</strong> {finalSegment.properties?.product_id || 'N/A'}</div>\n                                                    <div><strong>Store:</strong> {finalSegment.properties?.app_store || 'N/A'}</div>\n                                                    <div><strong>Price:</strong> {finalSegment.properties?.price_bucket || 'N/A'}</div>\n                                                    <div><strong>Country:</strong> {finalSegment.properties?.country || 'N/A'}</div>\n                                                    <div><strong>Economic Tier:</strong> {finalSegment.properties?.economic_tier || 'N/A'}</div>\n                                                    <div><strong>Region:</strong> {finalSegment.properties?.region || 'N/A'}</div>\n                                                    <div className=\"pt-1 border-t border-gray-200 dark:border-gray-600\">\n                                                        <strong>Users:</strong> {finalSegment.cohort_size || 0}\n                                                    </div>\n                                                    <div><strong>Level:</strong> {finalSegment.level || 'N/A'}</div>\n                                                </div>\n                                            ) : (\n                                                <div className=\"text-xs text-gray-400\">\n                                                    {match.success ? 'Direct match - no rollup needed' : ''}\n                                                </div>\n                                            )}\n                                        </td>\n                                        <td className=\"p-3 border-b dark:border-gray-600 text-center text-gray-700 dark:text-gray-300\">\n                                            {match.success ? (\n                                                <div className=\"text-xs\">\n                                                    <div className=\"space-y-1\">\n                                                        <div>\n                                                            <div className=\"font-bold text-blue-600 dark:text-blue-400 text-sm\">\n                                                                {((match.conversion_metrics?.trial_conversion_rate || 0) * 100).toFixed(1)}%\n                                                            </div>\n                                                            <div className=\"text-gray-500 dark:text-gray-400 text-xs\">Trial Conv.</div>\n                                                        </div>\n                                                        <div>\n                                                            <div className=\"font-medium text-orange-600 dark:text-orange-400 text-xs\">\n                                                                {((match.conversion_metrics?.trial_converted_to_refund_rate || 0) * 100).toFixed(1)}%\n                                                            </div>\n                                                            <div className=\"text-gray-500 dark:text-gray-400 text-xs\">Refund</div>\n                                                        </div>\n                                                        <div>\n                                                            <div className=\"font-medium text-red-600 dark:text-red-400 text-xs\">\n                                                                {((match.conversion_metrics?.initial_purchase_to_refund_rate || 0) * 100).toFixed(1)}%\n                                                            </div>\n                                                            <div className=\"text-gray-500 dark:text-gray-400 text-xs\">Init. Refund</div>\n                                                        </div>\n                                                        <div>\n                                                            <div className=\"font-medium text-purple-600 dark:text-purple-400 text-xs\">\n                                                                {((match.conversion_metrics?.renewal_to_refund_rate || 0) * 100).toFixed(1)}%\n                                                            </div>\n                                                            <div className=\"text-gray-500 dark:text-gray-400 text-xs\">Renewal Refund</div>\n                                                        </div>\n                                                        <div className=\"pt-1 border-t border-gray-200 dark:border-gray-600\">\n                                                            <div className=\"text-gray-500 dark:text-gray-400 text-xs\">\n                                                                Sample: {match.conversion_metrics?.trial_started_count || 0}\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            ) : (\n                                                <span className=\"text-gray-400 text-xs\">-</span>\n                                            )}\n                                        </td>\n                                        <td className=\"p-3 border-b dark:border-gray-600 text-center text-gray-700 dark:text-gray-300\">\n                                            {match.success ? (\n                                                <div className=\"flex items-center justify-center gap-1\">\n                                                    <Star size={12} className=\"text-yellow-500\" />\n                                                    <span className={`text-xs font-medium px-2 py-1 rounded ${\n                                                        match.accuracy_score === 'very_high' ? 'bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200' :\n                                                        match.accuracy_score === 'high' ? 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200' :\n                                                        match.accuracy_score === 'medium' ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200' :\n                                                        match.accuracy_score === 'low' ? 'bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200' :\n                                                        'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200'\n                                                    }`}>\n                                                        {match.accuracy_score || 'Unknown'}\n                                                    </span>\n                                                </div>\n                                            ) : (\n                                                <span className=\"text-gray-400 text-xs\">-</span>\n                                            )}\n                                        </td>\n                                    </tr>\n                                );\n                            })}\n                        </tbody>\n                    </table>\n                </div>\n\n                {usersWithSegments.length > 20 && (\n                    <div className=\"mt-4 text-center text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-700 p-3 rounded\">\n                        Showing first 20 users of {usersWithSegments.length} total users\n                    </div>\n                )}\n            </div>\n\n            {/* Stage 2 Error Display */}\n            {stage2Data.error && (\n                <div className=\"text-center py-8 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800\">\n                    <AlertCircle size={48} className=\"mx-auto text-red-400 mb-4\" />\n                    <p className=\"text-red-600 dark:text-red-400 mb-2\">\n                        Stage 2 Error: {stage2Data.error}\n                    </p>\n                </div>\n            )}\n\n            {/* No Data Message */}\n            {usersWithSegments.length === 0 && !stage2Data.error && (\n                <div className=\"text-center py-8 bg-gray-50 dark:bg-gray-700 rounded-lg\">\n                    <Target size={48} className=\"mx-auto text-gray-400 mb-4\" />\n                    <p className=\"text-gray-600 dark:text-gray-400 mb-2\">\n                        No user segment matching data available\n                    </p>\n                    <p className=\"text-sm text-gray-500 dark:text-gray-500\">\n                        Run Stage 2 analysis to see user-to-segment matching results\n                    </p>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default Stage2UserMatchingResults; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}