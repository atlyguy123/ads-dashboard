{"ast":null,"code":"import _objectSpread from\"/Users/joshuakaufman/untitled folder 3/orchestrator/dashboard/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{RefreshCw,Search,Filter,BarChart3,AlertTriangle,CheckCircle,Clock,Database,TrendingUp,Users,DollarSign,Eye,EyeOff,Grid,List,Settings,XCircle}from'lucide-react';import{DashboardGrid}from'../components/DashboardGrid';import{DebugModal}from'../components/DebugModal';import{GraphModal}from'../components/GraphModal';import TimelineModal from'../components/TimelineModal';import AnalyticsPipelineControls from'../components/dashboard/AnalyticsPipelineControls';import{DashboardControls}from'../components/dashboard/DashboardControls';import{dashboardApi}from'../services/dashboardApi';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const Dashboard=()=>{// Main dashboard state\nconst[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[dashboardData,setDashboardData]=useState([]);const[lastUpdated,setLastUpdated]=useState(null);// Dashboard controls state\nconst[dateRange,setDateRange]=useState(()=>{const saved=localStorage.getItem('dashboard_date_range');if(saved){try{return JSON.parse(saved);}catch(e){console.warn('Failed to parse saved date range:',e);}}return{start_date:'2024-01-01',end_date:new Date().toISOString().split('T')[0]};});const[breakdown,setBreakdown]=useState(()=>{return localStorage.getItem('dashboard_breakdown')||'all';});const[hierarchy,setHierarchy]=useState(()=>{return localStorage.getItem('dashboard_hierarchy')||'campaign';});const[textFilter,setTextFilter]=useState('');// Modal states\nconst[isDebugModalOpen,setIsDebugModalOpen]=useState(false);const[isGraphModalOpen,setIsGraphModalOpen]=useState(false);const[isTimelineModalOpen,setIsTimelineModalOpen]=useState(false);const[selectedRowData,setSelectedRowData]=useState(null);// UI state\nconst[viewMode,setViewMode]=useState('grid');const[showSettings,setShowSettings]=useState(false);// Column visibility state\nconst[columnVisibility,setColumnVisibility]=useState(()=>{const saved=localStorage.getItem('dashboard_column_visibility');if(saved){try{return JSON.parse(saved);}catch(e){console.warn('Failed to parse saved column visibility:',e);}}// Default column visibility\nreturn{name:true,campaign_name:true,adset_name:true,impressions:true,clicks:true,spend:true,meta_trials_started:true,mixpanel_trials_started:true,meta_purchases:true,mixpanel_purchases:true,mixpanel_revenue_usd:true,estimated_roas:true,profit:true,trial_accuracy_ratio:true};});// Column order state\nconst[columnOrder,setColumnOrder]=useState([]);// Row order state  \nconst[rowOrder,setRowOrder]=useState([]);// Save states to localStorage\nuseEffect(()=>{localStorage.setItem('dashboard_date_range',JSON.stringify(dateRange));},[dateRange]);useEffect(()=>{localStorage.setItem('dashboard_breakdown',breakdown);},[breakdown]);useEffect(()=>{localStorage.setItem('dashboard_hierarchy',hierarchy);},[hierarchy]);useEffect(()=>{localStorage.setItem('dashboard_column_visibility',JSON.stringify(columnVisibility));},[columnVisibility]);// Filter data based on text filter\nconst filteredData=React.useMemo(()=>{if(!textFilter.trim())return dashboardData;const filterText=textFilter.toLowerCase();const filterRecursive=items=>{return items.reduce((acc,item)=>{// Check if this item matches the filter\nconst matches=item.name&&item.name.toLowerCase().includes(filterText)||item.campaign_name&&item.campaign_name.toLowerCase().includes(filterText)||item.adset_name&&item.adset_name.toLowerCase().includes(filterText)||item.ad_name&&item.ad_name.toLowerCase().includes(filterText);// Filter children recursively\nconst filteredChildren=item.children?filterRecursive(item.children):[];// Include this item if it matches OR if it has matching children\nif(matches||filteredChildren.length>0){acc.push(_objectSpread(_objectSpread({},item),{},{children:filteredChildren}));}return acc;},[]);};return filterRecursive(dashboardData);},[dashboardData,textFilter]);// Handle dashboard data refresh (fast, pre-computed data)\nconst handleRefresh=async()=>{setLoading(true);setError(null);try{console.log('ðŸ”„ Fetching pre-computed analytics data:',{dateRange,breakdown,hierarchy});const response=await dashboardApi.getAnalyticsData({start_date:dateRange.start_date,end_date:dateRange.end_date,breakdown:breakdown,group_by:hierarchy// Fix parameter name to match backend API\n});if(response.success){var _response$data;setDashboardData(response.data||[]);setLastUpdated(new Date().toISOString());// Initialize row order with data IDs\nif(response.data&&response.data.length>0){setRowOrder(response.data.map(r=>r.id));}console.log('âœ… Dashboard data loaded successfully');console.log('ðŸ“Š Data summary:',{totalRows:((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.length)||0,breakdown:breakdown,hierarchy:hierarchy});}else{setError(response.error||'Failed to fetch analytics data');}}catch(error){console.error('Dashboard refresh error:',error);setError(error.message||'Failed to refresh dashboard data');}finally{setLoading(false);}};// Handle row actions\nconst handleRowAction=(action,rowData)=>{setSelectedRowData(rowData);if(action==='graph'){setIsGraphModalOpen(true);}else if(action==='debug'){setIsDebugModalOpen(true);}else if(action==='timeline'){setIsTimelineModalOpen(true);}};// Modal close handlers\nconst closeDebugModal=()=>{setIsDebugModalOpen(false);setSelectedRowData(null);};const closeGraphModal=()=>{setIsGraphModalOpen(false);setSelectedRowData(null);};const closeTimelineModal=()=>{setIsTimelineModalOpen(false);setSelectedRowData(null);};// Get stats for summary cards\nconst getDashboardStats=()=>{if(!dashboardData.length)return null;const calculateStats=items=>{let totalSpend=0;let totalRevenue=0;let totalImpressions=0;let totalClicks=0;let totalTrials=0;let totalPurchases=0;let count=0;items.forEach(item=>{// Only sum the top-level items (campaigns) - their totals already include adsets/ads\ntotalSpend+=parseFloat(item.spend||0);totalRevenue+=parseFloat(item.mixpanel_revenue_usd||item.estimated_revenue_usd||0);totalImpressions+=parseInt(item.impressions||0);totalClicks+=parseInt(item.clicks||0);totalTrials+=parseInt(item.mixpanel_trials_started||0);totalPurchases+=parseInt(item.mixpanel_purchases||0);count++;// DO NOT add children stats - they're already included in the campaign totals\n// This prevents double-counting since campaign metrics are aggregated from their adsets/ads\n});return{totalSpend,totalRevenue,totalImpressions,totalClicks,totalTrials,totalPurchases,count};};const stats=calculateStats(dashboardData);const profit=stats.totalRevenue-stats.totalSpend;const roas=stats.totalSpend>0?stats.totalRevenue/stats.totalSpend:0;return _objectSpread(_objectSpread({},stats),{},{profit,roas});};const stats=getDashboardStats();if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 dark:bg-gray-900\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"mx-auto h-12 w-12 text-red-500\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"mt-4 text-3xl font-bold text-gray-900 dark:text-gray-100\",children:\"Dashboard Error\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600 dark:text-gray-400\",children:error}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setError(null);handleRefresh();},className:\"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\",children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"mr-2 h-4 w-4\"}),\"Retry\"]})]})})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 dark:bg-gray-900\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-full px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 dark:text-gray-100\",children:\"Campaign Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600 dark:text-gray-400\",children:\"Advanced analytics for Meta advertising performance\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setViewMode(viewMode==='grid'?'list':'grid'),className:\"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\",children:viewMode==='grid'?/*#__PURE__*/_jsx(List,{className:\"h-5 w-5\"}):/*#__PURE__*/_jsx(Grid,{className:\"h-5 w-5\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSettings(!showSettings),className:\"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\",children:/*#__PURE__*/_jsx(Settings,{className:\"h-5 w-5\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(AnalyticsPipelineControls,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-4 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Date Range\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:dateRange.start_date,onChange:e=>setDateRange(prev=>_objectSpread(_objectSpread({},prev),{},{start_date:e.target.value})),className:\"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:dateRange.end_date,onChange:e=>setDateRange(prev=>_objectSpread(_objectSpread({},prev),{},{end_date:e.target.value})),className:\"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Breakdown\"}),/*#__PURE__*/_jsxs(\"select\",{value:breakdown,onChange:e=>setBreakdown(e.target.value),className:\"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All\"}),/*#__PURE__*/_jsx(\"option\",{value:\"country\",children:\"Country\"}),/*#__PURE__*/_jsx(\"option\",{value:\"region\",children:\"Region\"}),/*#__PURE__*/_jsx(\"option\",{value:\"device\",children:\"Device\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Hierarchy\"}),/*#__PURE__*/_jsxs(\"select\",{value:hierarchy,onChange:e=>setHierarchy(e.target.value),className:\"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"campaign\",children:\"Campaign \\u2192 Ad Set \\u2192 Ad\"}),/*#__PURE__*/_jsx(\"option\",{value:\"adset\",children:\"Ad Set \\u2192 Ad\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ad\",children:\"Ad Only\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleRefresh,disabled:loading,className:\"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"mr-2 h-4 w-4 animate-spin\"}),\"Refreshing...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"mr-2 h-4 w-4\"}),\"Refresh Data\"]})})})]})})})}),showSettings&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 dark:text-gray-100\",children:\"Column Settings\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSettings(false),className:\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\",children:/*#__PURE__*/_jsx(XCircle,{className:\"h-5 w-5\"})})]}),/*#__PURE__*/_jsx(DashboardControls,{onColumnVisibilityChange:setColumnVisibility,onColumnOrderChange:setColumnOrder})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search campaigns, ad sets, or ads...\",value:textFilter,onChange:e=>setTextFilter(e.target.value),className:\"pl-10 pr-4 py-3 w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})]})}),stats&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(DollarSign,{className:\"h-8 w-8 text-blue-500\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 dark:text-gray-400\",children:\"Total Spend\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-gray-900 dark:text-gray-100\",children:[\"$\",stats.totalSpend.toLocaleString()]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"h-8 w-8 text-green-500\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 dark:text-gray-400\",children:\"Revenue\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-gray-900 dark:text-gray-100\",children:[\"$\",stats.totalRevenue.toLocaleString()]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"h-8 w-8 \".concat(stats.profit>=0?'text-green-500':'text-red-500')}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 dark:text-gray-400\",children:\"Profit\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold \".concat(stats.profit>=0?'text-green-600':'text-red-600'),children:[\"$\",stats.profit.toLocaleString()]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Users,{className:\"h-8 w-8 text-purple-500\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 dark:text-gray-400\",children:\"ROAS\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold \".concat(stats.roas>=1.5?'text-green-600':stats.roas>=1.0?'text-yellow-600':'text-red-600'),children:[stats.roas.toFixed(2),\"x\"]})]})]})})]}),lastUpdated&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 flex items-center text-sm text-gray-500 dark:text-gray-400\",children:[/*#__PURE__*/_jsx(Clock,{className:\"mr-2 h-4 w-4\"}),\"Last updated: \",new Date(lastUpdated).toLocaleString()]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"mx-auto h-8 w-8 text-blue-500 animate-spin\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-lg font-medium text-gray-900 dark:text-gray-100\",children:\"Loading dashboard data...\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:\"Fetching pre-computed analytics data\"})]})}):filteredData.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsx(DashboardGrid,{data:filteredData,rowOrder:rowOrder,onRowOrderChange:setRowOrder,onRowAction:handleRowAction,columnVisibility:columnVisibility,columnOrder:columnOrder,onColumnOrderChange:setColumnOrder,dashboardParams:{start_date:dateRange.start_date,end_date:dateRange.end_date,breakdown:breakdown,hierarchy:hierarchy}})}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8 text-center\",children:[/*#__PURE__*/_jsx(Database,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-4 text-lg font-semibold text-gray-900 dark:text-gray-100\",children:\"No Data Available\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600 dark:text-gray-400 max-w-md mx-auto\",children:textFilter?\"No results found for \\\"\".concat(textFilter,\"\\\". Try adjusting your search terms.\"):'Click \"Refresh Data\" to load campaign information for the selected date range and settings.'}),!textFilter&&/*#__PURE__*/_jsxs(\"button\",{onClick:handleRefresh,className:\"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\",children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"mr-2 h-4 w-4\"}),\"Refresh Data\"]})]})]}),selectedRowData&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DebugModal,{isOpen:isDebugModalOpen,onClose:closeDebugModal,data:selectedRowData}),/*#__PURE__*/_jsx(GraphModal,{isOpen:isGraphModalOpen,onClose:closeGraphModal,data:selectedRowData,dashboardParams:{start_date:dateRange.start_date,end_date:dateRange.end_date,breakdown:breakdown,hierarchy:hierarchy}}),/*#__PURE__*/_jsx(TimelineModal,{isOpen:isTimelineModalOpen,onClose:closeTimelineModal,data:selectedRowData,rowData:selectedRowData})]})]});};","map":{"version":3,"names":["React","useState","useEffect","RefreshCw","Search","Filter","BarChart3","AlertTriangle","CheckCircle","Clock","Database","TrendingUp","Users","DollarSign","Eye","EyeOff","Grid","List","Settings","XCircle","DashboardGrid","DebugModal","GraphModal","TimelineModal","AnalyticsPipelineControls","DashboardControls","dashboardApi","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","loading","setLoading","error","setError","dashboardData","setDashboardData","lastUpdated","setLastUpdated","dateRange","setDateRange","saved","localStorage","getItem","JSON","parse","e","console","warn","start_date","end_date","Date","toISOString","split","breakdown","setBreakdown","hierarchy","setHierarchy","textFilter","setTextFilter","isDebugModalOpen","setIsDebugModalOpen","isGraphModalOpen","setIsGraphModalOpen","isTimelineModalOpen","setIsTimelineModalOpen","selectedRowData","setSelectedRowData","viewMode","setViewMode","showSettings","setShowSettings","columnVisibility","setColumnVisibility","name","campaign_name","adset_name","impressions","clicks","spend","meta_trials_started","mixpanel_trials_started","meta_purchases","mixpanel_purchases","mixpanel_revenue_usd","estimated_roas","profit","trial_accuracy_ratio","columnOrder","setColumnOrder","rowOrder","setRowOrder","setItem","stringify","filteredData","useMemo","trim","filterText","toLowerCase","filterRecursive","items","reduce","acc","item","matches","includes","ad_name","filteredChildren","children","length","push","_objectSpread","handleRefresh","log","response","getAnalyticsData","group_by","success","_response$data","data","map","r","id","totalRows","message","handleRowAction","action","rowData","closeDebugModal","closeGraphModal","closeTimelineModal","getDashboardStats","calculateStats","totalSpend","totalRevenue","totalImpressions","totalClicks","totalTrials","totalPurchases","count","forEach","parseFloat","estimated_revenue_usd","parseInt","stats","roas","className","onClick","type","value","onChange","prev","target","disabled","onColumnVisibilityChange","onColumnOrderChange","placeholder","toLocaleString","concat","toFixed","onRowOrderChange","onRowAction","dashboardParams","isOpen","onClose"],"sources":["/Users/joshuakaufman/untitled folder 3/orchestrator/dashboard/client/src/pages/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  RefreshCw, \n  Search, \n  Filter, \n  BarChart3, \n  AlertTriangle, \n  CheckCircle, \n  Clock,\n  Database,\n  TrendingUp,\n  Users,\n  DollarSign,\n  Eye,\n  EyeOff,\n  Grid,\n  List,\n  Settings,\n  XCircle\n} from 'lucide-react';\nimport { DashboardGrid } from '../components/DashboardGrid';\nimport { DebugModal } from '../components/DebugModal';\nimport { GraphModal } from '../components/GraphModal';\nimport TimelineModal from '../components/TimelineModal';\nimport AnalyticsPipelineControls from '../components/dashboard/AnalyticsPipelineControls';\nimport { DashboardControls } from '../components/dashboard/DashboardControls';\nimport { dashboardApi } from '../services/dashboardApi';\n\nexport const Dashboard = () => {\n  // Main dashboard state\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [dashboardData, setDashboardData] = useState([]);\n  const [lastUpdated, setLastUpdated] = useState(null);\n  \n  // Dashboard controls state\n  const [dateRange, setDateRange] = useState(() => {\n    const saved = localStorage.getItem('dashboard_date_range');\n    if (saved) {\n      try {\n        return JSON.parse(saved);\n      } catch (e) {\n        console.warn('Failed to parse saved date range:', e);\n      }\n    }\n    return {\n      start_date: '2024-01-01',\n      end_date: new Date().toISOString().split('T')[0]\n    };\n  });\n\n  const [breakdown, setBreakdown] = useState(() => {\n    return localStorage.getItem('dashboard_breakdown') || 'all';\n  });\n\n  const [hierarchy, setHierarchy] = useState(() => {\n    return localStorage.getItem('dashboard_hierarchy') || 'campaign';\n  });\n\n  const [textFilter, setTextFilter] = useState('');\n  \n  // Modal states\n  const [isDebugModalOpen, setIsDebugModalOpen] = useState(false);\n  const [isGraphModalOpen, setIsGraphModalOpen] = useState(false);\n  const [isTimelineModalOpen, setIsTimelineModalOpen] = useState(false);\n  const [selectedRowData, setSelectedRowData] = useState(null);\n  \n  // UI state\n  const [viewMode, setViewMode] = useState('grid');\n  const [showSettings, setShowSettings] = useState(false);\n  \n  // Column visibility state\n  const [columnVisibility, setColumnVisibility] = useState(() => {\n    const saved = localStorage.getItem('dashboard_column_visibility');\n    if (saved) {\n      try {\n        return JSON.parse(saved);\n      } catch (e) {\n        console.warn('Failed to parse saved column visibility:', e);\n      }\n    }\n    // Default column visibility\n    return {\n      name: true,\n      campaign_name: true,\n      adset_name: true,\n      impressions: true,\n      clicks: true,\n      spend: true,\n      meta_trials_started: true,\n      mixpanel_trials_started: true,\n      meta_purchases: true,\n      mixpanel_purchases: true,\n      mixpanel_revenue_usd: true,\n      estimated_roas: true,\n      profit: true,\n      trial_accuracy_ratio: true\n    };\n  });\n\n  // Column order state\n  const [columnOrder, setColumnOrder] = useState([]);\n  \n  // Row order state  \n  const [rowOrder, setRowOrder] = useState([]);\n\n  // Save states to localStorage\n  useEffect(() => {\n    localStorage.setItem('dashboard_date_range', JSON.stringify(dateRange));\n  }, [dateRange]);\n\n  useEffect(() => {\n    localStorage.setItem('dashboard_breakdown', breakdown);\n  }, [breakdown]);\n\n  useEffect(() => {\n    localStorage.setItem('dashboard_hierarchy', hierarchy);\n  }, [hierarchy]);\n\n  useEffect(() => {\n    localStorage.setItem('dashboard_column_visibility', JSON.stringify(columnVisibility));\n  }, [columnVisibility]);\n\n  // Filter data based on text filter\n  const filteredData = React.useMemo(() => {\n    if (!textFilter.trim()) return dashboardData;\n    \n    const filterText = textFilter.toLowerCase();\n    \n    const filterRecursive = (items) => {\n      return items.reduce((acc, item) => {\n        // Check if this item matches the filter\n        const matches = (\n          (item.name && item.name.toLowerCase().includes(filterText)) ||\n          (item.campaign_name && item.campaign_name.toLowerCase().includes(filterText)) ||\n          (item.adset_name && item.adset_name.toLowerCase().includes(filterText)) ||\n          (item.ad_name && item.ad_name.toLowerCase().includes(filterText))\n        );\n        \n        // Filter children recursively\n        const filteredChildren = item.children ? filterRecursive(item.children) : [];\n        \n        // Include this item if it matches OR if it has matching children\n        if (matches || filteredChildren.length > 0) {\n          acc.push({\n            ...item,\n            children: filteredChildren\n          });\n        }\n        \n        return acc;\n      }, []);\n    };\n    \n    return filterRecursive(dashboardData);\n  }, [dashboardData, textFilter]);\n\n  // Handle dashboard data refresh (fast, pre-computed data)\n  const handleRefresh = async () => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      console.log('ðŸ”„ Fetching pre-computed analytics data:', {\n        dateRange,\n        breakdown,\n        hierarchy\n      });\n      \n      const response = await dashboardApi.getAnalyticsData({\n        start_date: dateRange.start_date,\n        end_date: dateRange.end_date,\n        breakdown: breakdown,\n        group_by: hierarchy  // Fix parameter name to match backend API\n      });\n      \n      if (response.success) {\n        setDashboardData(response.data || []);\n        setLastUpdated(new Date().toISOString());\n        \n        // Initialize row order with data IDs\n        if (response.data && response.data.length > 0) {\n          setRowOrder(response.data.map(r => r.id));\n        }\n        \n        console.log('âœ… Dashboard data loaded successfully');\n        console.log('ðŸ“Š Data summary:', {\n          totalRows: response.data?.length || 0,\n          breakdown: breakdown,\n          hierarchy: hierarchy\n        });\n        \n      } else {\n        setError(response.error || 'Failed to fetch analytics data');\n      }\n    } catch (error) {\n      console.error('Dashboard refresh error:', error);\n      setError(error.message || 'Failed to refresh dashboard data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle row actions\n  const handleRowAction = (action, rowData) => {\n    setSelectedRowData(rowData);\n    if (action === 'graph') {\n      setIsGraphModalOpen(true);\n    } else if (action === 'debug') {\n      setIsDebugModalOpen(true);\n    } else if (action === 'timeline') {\n      setIsTimelineModalOpen(true);\n    }\n  };\n\n  // Modal close handlers\n  const closeDebugModal = () => {\n    setIsDebugModalOpen(false);\n    setSelectedRowData(null);\n  };\n\n  const closeGraphModal = () => {\n    setIsGraphModalOpen(false);\n    setSelectedRowData(null);\n  };\n\n  const closeTimelineModal = () => {\n    setIsTimelineModalOpen(false);\n    setSelectedRowData(null);\n  };\n\n  // Get stats for summary cards\n  const getDashboardStats = () => {\n    if (!dashboardData.length) return null;\n    \n    const calculateStats = (items) => {\n      let totalSpend = 0;\n      let totalRevenue = 0;\n      let totalImpressions = 0;\n      let totalClicks = 0;\n      let totalTrials = 0;\n      let totalPurchases = 0;\n      let count = 0;\n      \n      items.forEach(item => {\n        // Only sum the top-level items (campaigns) - their totals already include adsets/ads\n        totalSpend += parseFloat(item.spend || 0);\n        totalRevenue += parseFloat(item.mixpanel_revenue_usd || item.estimated_revenue_usd || 0);\n        totalImpressions += parseInt(item.impressions || 0);\n        totalClicks += parseInt(item.clicks || 0);\n        totalTrials += parseInt(item.mixpanel_trials_started || 0);\n        totalPurchases += parseInt(item.mixpanel_purchases || 0);\n        count++;\n        \n        // DO NOT add children stats - they're already included in the campaign totals\n        // This prevents double-counting since campaign metrics are aggregated from their adsets/ads\n      });\n      \n      return {\n        totalSpend,\n        totalRevenue,\n        totalImpressions,\n        totalClicks,\n        totalTrials,\n        totalPurchases,\n        count\n      };\n    };\n    \n    const stats = calculateStats(dashboardData);\n    const profit = stats.totalRevenue - stats.totalSpend;\n    const roas = stats.totalSpend > 0 ? stats.totalRevenue / stats.totalSpend : 0;\n    \n    return { ...stats, profit, roas };\n  };\n\n  const stats = getDashboardStats();\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          <div className=\"text-center\">\n            <AlertTriangle className=\"mx-auto h-12 w-12 text-red-500\" />\n            <h1 className=\"mt-4 text-3xl font-bold text-gray-900 dark:text-gray-100\">\n              Dashboard Error\n            </h1>\n            <p className=\"mt-2 text-gray-600 dark:text-gray-400\">{error}</p>\n            <button \n              onClick={() => {\n                setError(null);\n                handleRefresh();\n              }}\n              className=\"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"\n            >\n              <RefreshCw className=\"mr-2 h-4 w-4\" />\n              Retry\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\n      <div className=\"w-full px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900 dark:text-gray-100\">\n                Campaign Dashboard\n              </h1>\n              <p className=\"mt-2 text-gray-600 dark:text-gray-400\">\n                Advanced analytics for Meta advertising performance\n              </p>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <button\n                onClick={() => setViewMode(viewMode === 'grid' ? 'list' : 'grid')}\n                className=\"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n              >\n                {viewMode === 'grid' ? <List className=\"h-5 w-5\" /> : <Grid className=\"h-5 w-5\" />}\n              </button>\n              <button\n                onClick={() => setShowSettings(!showSettings)}\n                className=\"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n              >\n                <Settings className=\"h-5 w-5\" />\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Analytics Pipeline Status */}\n        <div className=\"mb-6\">\n          <AnalyticsPipelineControls />\n        </div>\n\n        {/* Dashboard Controls */}\n        <div className=\"mb-6\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n            <div className=\"p-6\">\n              <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n                {/* Date Range */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                    Date Range\n                  </label>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <input\n                      type=\"date\"\n                      value={dateRange.start_date}\n                      onChange={(e) => setDateRange(prev => ({ ...prev, start_date: e.target.value }))}\n                      className=\"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\n                    />\n                    <input\n                      type=\"date\"\n                      value={dateRange.end_date}\n                      onChange={(e) => setDateRange(prev => ({ ...prev, end_date: e.target.value }))}\n                      className=\"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\n                    />\n                  </div>\n                </div>\n\n                {/* Breakdown */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                    Breakdown\n                  </label>\n                  <select\n                    value={breakdown}\n                    onChange={(e) => setBreakdown(e.target.value)}\n                    className=\"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\n                  >\n                    <option value=\"all\">All</option>\n                    <option value=\"country\">Country</option>\n                    <option value=\"region\">Region</option>\n                    <option value=\"device\">Device</option>\n                  </select>\n                </div>\n\n                {/* Hierarchy */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                    Hierarchy\n                  </label>\n                  <select\n                    value={hierarchy}\n                    onChange={(e) => setHierarchy(e.target.value)}\n                    className=\"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\n                  >\n                    <option value=\"campaign\">Campaign â†’ Ad Set â†’ Ad</option>\n                    <option value=\"adset\">Ad Set â†’ Ad</option>\n                    <option value=\"ad\">Ad Only</option>\n                  </select>\n                </div>\n\n                {/* Actions */}\n                <div className=\"flex flex-col justify-end\">\n                  <button\n                    onClick={handleRefresh}\n                    disabled={loading}\n                    className=\"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    {loading ? (\n                      <>\n                        <RefreshCw className=\"mr-2 h-4 w-4 animate-spin\" />\n                        Refreshing...\n                      </>\n                    ) : (\n                      <>\n                        <RefreshCw className=\"mr-2 h-4 w-4\" />\n                        Refresh Data\n                      </>\n                    )}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Column Management Settings Panel */}\n        {showSettings && (\n          <div className=\"mb-6\">\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n              <div className=\"p-6\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100\">\n                    Column Settings\n                  </h3>\n                  <button\n                    onClick={() => setShowSettings(false)}\n                    className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n                  >\n                    <XCircle className=\"h-5 w-5\" />\n                  </button>\n                </div>\n                <DashboardControls\n                  onColumnVisibilityChange={setColumnVisibility}\n                  onColumnOrderChange={setColumnOrder}\n                />\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Search and Filter */}\n        <div className=\"mb-6\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search campaigns, ad sets, or ads...\"\n              value={textFilter}\n              onChange={(e) => setTextFilter(e.target.value)}\n              className=\"pl-10 pr-4 py-3 w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n            />\n          </div>\n        </div>\n\n        {/* Summary Stats */}\n        {stats && (\n          <div className=\"mb-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n            <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n              <div className=\"flex items-center\">\n                <DollarSign className=\"h-8 w-8 text-blue-500\" />\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">Total Spend</p>\n                  <p className=\"text-2xl font-bold text-gray-900 dark:text-gray-100\">\n                    ${stats.totalSpend.toLocaleString()}\n                  </p>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n              <div className=\"flex items-center\">\n                <TrendingUp className=\"h-8 w-8 text-green-500\" />\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">Revenue</p>\n                  <p className=\"text-2xl font-bold text-gray-900 dark:text-gray-100\">\n                    ${stats.totalRevenue.toLocaleString()}\n                  </p>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n              <div className=\"flex items-center\">\n                <BarChart3 className={`h-8 w-8 ${stats.profit >= 0 ? 'text-green-500' : 'text-red-500'}`} />\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">Profit</p>\n                  <p className={`text-2xl font-bold ${stats.profit >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                    ${stats.profit.toLocaleString()}\n                  </p>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n              <div className=\"flex items-center\">\n                <Users className=\"h-8 w-8 text-purple-500\" />\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">ROAS</p>\n                  <p className={`text-2xl font-bold ${stats.roas >= 1.5 ? 'text-green-600' : stats.roas >= 1.0 ? 'text-yellow-600' : 'text-red-600'}`}>\n                    {stats.roas.toFixed(2)}x\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Last Updated */}\n        {lastUpdated && (\n          <div className=\"mb-4 flex items-center text-sm text-gray-500 dark:text-gray-400\">\n            <Clock className=\"mr-2 h-4 w-4\" />\n            Last updated: {new Date(lastUpdated).toLocaleString()}\n          </div>\n        )}\n\n        {/* Dashboard Content */}\n        {loading ? (\n          <div className=\"flex items-center justify-center h-64 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n            <div className=\"text-center\">\n              <RefreshCw className=\"mx-auto h-8 w-8 text-blue-500 animate-spin\" />\n              <p className=\"mt-2 text-lg font-medium text-gray-900 dark:text-gray-100\">\n                Loading dashboard data...\n              </p>\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                Fetching pre-computed analytics data\n              </p>\n            </div>\n          </div>\n        ) : filteredData.length > 0 ? (\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n            <DashboardGrid \n              data={filteredData}\n              rowOrder={rowOrder}\n              onRowOrderChange={setRowOrder}\n              onRowAction={handleRowAction}\n              columnVisibility={columnVisibility}\n              columnOrder={columnOrder}\n              onColumnOrderChange={setColumnOrder}\n              dashboardParams={{\n                start_date: dateRange.start_date,\n                end_date: dateRange.end_date,\n                breakdown: breakdown,\n                hierarchy: hierarchy\n              }}\n            />\n          </div>\n        ) : (\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8 text-center\">\n            <Database className=\"mx-auto h-12 w-12 text-gray-400\" />\n            <h3 className=\"mt-4 text-lg font-semibold text-gray-900 dark:text-gray-100\">\n              No Data Available\n            </h3>\n            <p className=\"mt-2 text-gray-600 dark:text-gray-400 max-w-md mx-auto\">\n              {textFilter ? \n                `No results found for \"${textFilter}\". Try adjusting your search terms.` :\n                'Click \"Refresh Data\" to load campaign information for the selected date range and settings.'\n              }\n            </p>\n            {!textFilter && (\n              <button \n                onClick={handleRefresh}\n                className=\"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"\n              >\n                <RefreshCw className=\"mr-2 h-4 w-4\" />\n                Refresh Data\n              </button>\n            )}\n          </div>\n        )}\n      </div>\n      \n      {/* Modals */}\n      {selectedRowData && (\n        <>\n          <DebugModal \n            isOpen={isDebugModalOpen} \n            onClose={closeDebugModal} \n            data={selectedRowData} \n          />\n          <GraphModal \n            isOpen={isGraphModalOpen} \n            onClose={closeGraphModal} \n            data={selectedRowData}\n            dashboardParams={{\n              start_date: dateRange.start_date,\n              end_date: dateRange.end_date,\n              breakdown: breakdown,\n              hierarchy: hierarchy\n            }}\n          />\n          <TimelineModal \n            isOpen={isTimelineModalOpen} \n            onClose={closeTimelineModal} \n            data={selectedRowData}\n            rowData={selectedRowData}\n          />\n        </>\n      )}\n    </div>\n  );\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}