{"ast":null,"code":"var _jsxFileName = \"/Users/joshuakaufman/untitled folder 3/orchestrator/dashboard/client/src/cohort-pipeline/components/ProductFilterConfig.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Select from 'react-select';\nimport { PlusCircle, XCircle } from 'lucide-react';\nimport { api } from '../../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductFilterConfig = ({\n  config,\n  analysisParams,\n  onConfigChange\n}) => {\n  _s();\n  var _analysisParams$optio, _config$product_filte, _config$product_filte2, _config$product_filte3, _config$product_filte4, _config$product_filte5, _config$product_filte6, _config$lifecycle, _config$lifecycle2, _config$lifecycle3, _config$timeline, _config$timeline2, _config$detailed_even;\n  const [showAdvanced, setShowAdvanced] = useState(false);\n  const [availableEventProperties, setAvailableEventProperties] = useState([]);\n  const [availableUserProperties, setAvailableUserProperties] = useState([]);\n  const [propertyValueOptions, setPropertyValueOptions] = useState({});\n  const [isLoadingProperties, setIsLoadingProperties] = useState(false);\n  const [propertyDiscoveryMessage, setPropertyDiscoveryMessage] = useState('');\n\n  // Load available properties on component mount\n  useEffect(() => {\n    initializeProperties();\n  }, []);\n  const initializeProperties = async () => {\n    setIsLoadingProperties(true);\n    try {\n      const data = await api.getDiscoverableCohortProperties();\n      if (data.event_properties) {\n        setAvailableEventProperties(data.event_properties);\n      }\n      if (data.user_properties) {\n        setAvailableUserProperties(data.user_properties);\n      }\n    } catch (error) {\n      console.error('Failed to load properties:', error);\n      setPropertyDiscoveryMessage('Failed to load available properties. Some features may be limited.');\n    }\n    setIsLoadingProperties(false);\n  };\n  const fetchPropertyValues = async (propertyName, propertySource, filterIdentifier) => {\n    if (!propertyName || !propertySource) return;\n    try {\n      const data = await api.getDiscoverableCohortPropertyValues(propertyName, propertySource);\n      setPropertyValueOptions(prev => ({\n        ...prev,\n        [filterIdentifier + '_' + propertyName]: data.values || []\n      }));\n    } catch (err) {\n      console.error(`Error fetching values for ${propertyName}:`, err);\n      setPropertyValueOptions(prev => ({\n        ...prev,\n        [filterIdentifier + '_' + propertyName]: []\n      }));\n    }\n  };\n  const triggerPropertyDiscovery = async () => {\n    setIsLoadingProperties(true);\n    setPropertyDiscoveryMessage('Discovering available properties...');\n    try {\n      await initializeProperties();\n      setPropertyDiscoveryMessage('Property discovery completed successfully!');\n      setTimeout(() => setPropertyDiscoveryMessage(''), 3000);\n    } catch (error) {\n      setPropertyDiscoveryMessage('Property discovery failed. Please try again.');\n      setTimeout(() => setPropertyDiscoveryMessage(''), 5000);\n    }\n    setIsLoadingProperties(false);\n  };\n  const getSelectTheme = () => ({\n    control: (provided, state) => ({\n      ...provided,\n      backgroundColor: 'var(--select-bg, white)',\n      borderColor: state.isFocused ? '#3b82f6' : '#d1d5db',\n      boxShadow: state.isFocused ? '0 0 0 1px #3b82f6' : 'none',\n      '&:hover': {\n        borderColor: '#3b82f6'\n      }\n    }),\n    menu: provided => ({\n      ...provided,\n      backgroundColor: 'var(--select-menu-bg, white)',\n      zIndex: 9999\n    }),\n    option: (provided, state) => ({\n      ...provided,\n      backgroundColor: state.isSelected ? '#3b82f6' : state.isFocused ? '#eff6ff' : 'var(--select-option-bg, white)',\n      color: state.isSelected ? 'white' : 'var(--select-option-color, black)'\n    }),\n    multiValue: provided => ({\n      ...provided,\n      backgroundColor: '#eff6ff'\n    }),\n    multiValueLabel: provided => ({\n      ...provided,\n      color: '#1e40af'\n    }),\n    multiValueRemove: provided => ({\n      ...provided,\n      color: '#1e40af',\n      '&:hover': {\n        backgroundColor: '#dbeafe',\n        color: '#1e40af'\n      }\n    })\n  });\n  const handleConfigUpdate = newConfig => {\n    const updatedParams = {\n      ...analysisParams,\n      config: {\n        ...analysisParams.config,\n        ...newConfig\n      }\n    };\n    onConfigChange(updatedParams);\n  };\n  const handleProductFilterChange = (field, value) => {\n    const newProductFilter = {\n      ...config.product_filter,\n      [field]: value\n    };\n    handleConfigUpdate({\n      product_filter: newProductFilter\n    });\n  };\n  const handleLifecycleConfigChange = (field, value) => {\n    const newLifecycleConfig = {\n      ...config.lifecycle,\n      [field]: value\n    };\n    handleConfigUpdate({\n      lifecycle: newLifecycleConfig\n    });\n  };\n  const handleTimelineConfigChange = (field, value) => {\n    const newTimelineConfig = {\n      ...config.timeline,\n      [field]: value\n    };\n    handleConfigUpdate({\n      timeline: newTimelineConfig\n    });\n  };\n  const handleDetailedEventsConfigChange = (field, value) => {\n    const newDetailedEventsConfig = {\n      ...config.detailed_events,\n      [field]: value\n    };\n    handleConfigUpdate({\n      detailed_events: newDetailedEventsConfig\n    });\n  };\n  const handleDateChange = (field, value) => {\n    const updatedParams = {\n      ...analysisParams,\n      [field]: value\n    };\n    onConfigChange(updatedParams);\n  };\n\n  // Enhanced filter handler with property value fetching\n  const handleFilterChange = (field, value) => {\n    const updatedParams = {\n      ...analysisParams,\n      [field]: value\n    };\n    onConfigChange(updatedParams);\n  };\n\n  // Optional filters management (replaces both primary and secondary filters)\n  const addOptionalFilter = () => {\n    const updatedParams = {\n      ...analysisParams,\n      optional_filters: [...(analysisParams.optional_filters || []), {\n        id: Date.now().toString(),\n        property_name: '',\n        property_values: [],\n        property_source: 'event'\n      }]\n    };\n    onConfigChange(updatedParams);\n  };\n  const removeOptionalFilter = idToRemove => {\n    const updatedParams = {\n      ...analysisParams,\n      optional_filters: (analysisParams.optional_filters || []).filter(f => f.id !== idToRemove)\n    };\n    onConfigChange(updatedParams);\n  };\n  const handleOptionalFilterChange = (type, value, index) => {\n    const newOptionalFilters = [...(analysisParams.optional_filters || [])];\n    const filter = newOptionalFilters[index];\n    if (type === 'property_source') {\n      filter.property_source = value;\n      filter.property_values = []; // Reset values when source changes\n      // Re-fetch values if property name exists\n      if (filter.property_name) {\n        fetchPropertyValues(filter.property_name, value, `optional_filter_${index}`);\n      }\n    } else if (type === 'property_name') {\n      filter.property_name = value;\n      filter.property_values = []; // Reset values when property changes\n      // Fetch property values for the new property\n      if (value && filter.property_source) {\n        fetchPropertyValues(value, filter.property_source, `optional_filter_${index}`);\n      }\n    } else if (type === 'property_values') {\n      filter.property_values = value;\n    }\n    const updatedParams = {\n      ...analysisParams,\n      optional_filters: newOptionalFilters\n    };\n    onConfigChange(updatedParams);\n  };\n  const addToList = (list, newItem) => {\n    if (newItem && !list.includes(newItem)) {\n      return [...list, newItem];\n    }\n    return list;\n  };\n  const removeFromList = (list, item) => {\n    return list.filter(i => i !== item);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-gray-900 dark:text-white\",\n        children: \"Analysis Configuration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: triggerPropertyDiscovery,\n          disabled: isLoadingProperties,\n          className: \"px-3 py-1 text-sm bg-teal-200 hover:bg-teal-300 dark:bg-teal-700 dark:hover:bg-teal-600 text-teal-700 dark:text-teal-300 rounded-lg transition-colors disabled:opacity-50\",\n          title: \"Refresh available properties\",\n          children: isLoadingProperties ? 'Loading...' : 'Discover Properties'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowAdvanced(!showAdvanced),\n          className: \"px-3 py-1 text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors\",\n          children: showAdvanced ? 'Hide Advanced' : 'Show Advanced'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 13\n    }, this), propertyDiscoveryMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4 p-3 bg-teal-50 dark:bg-teal-900/40 border border-teal-200 dark:border-teal-600 rounded-md\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-teal-700 dark:text-teal-300\",\n        children: propertyDiscoveryMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",\n            children: \"Date From\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            value: analysisParams.date_from,\n            onChange: e => handleDateChange('date_from', e.target.value),\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",\n            children: \"Date To\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            value: analysisParams.date_to,\n            onChange: e => handleDateChange('date_to', e.target.value),\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border-t pt-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-900 dark:text-white\",\n            children: \"User & Event Property Filters\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: addOptionalFilter,\n            className: \"p-1.5 bg-teal-100 dark:bg-teal-600 text-teal-700 dark:text-white rounded-full hover:bg-teal-200 dark:hover:bg-teal-500 transition-colors\",\n            title: \"Add optional filter\",\n            children: /*#__PURE__*/_jsxDEV(PlusCircle, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-600 dark:text-gray-400 mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Optional:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 25\n          }, this), \" Add filters to narrow down your cohort. User property filters will only include users with the specified property values. Event property filters will only include users who have events with the specified property values.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 21\n        }, this), (((_analysisParams$optio = analysisParams.optional_filters) === null || _analysisParams$optio === void 0 ? void 0 : _analysisParams$optio.length) === 0 || !analysisParams.optional_filters) && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-600 dark:text-gray-400 italic mb-4\",\n          children: \"No filters applied. All users with trial/purchase events in the time frame will be included. Click the + button to add a filter.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 25\n        }, this), (analysisParams.optional_filters || []).map((filter, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-4 gap-3 items-end mb-4 p-4 border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 rounded-md\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1\",\n              children: \"Source Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: filter.property_source,\n              onChange: e => handleOptionalFilterChange('property_source', e.target.value, index),\n              className: \"block w-full p-2 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-600 text-gray-900 dark:text-white\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"event\",\n                children: \"Event Property\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"user\",\n                children: \"User Property\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1\",\n              children: \"Property Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: filter.property_name,\n              onChange: e => handleOptionalFilterChange('property_name', e.target.value, index),\n              className: \"block w-full p-2 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-600 text-gray-900 dark:text-white\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"-- Select Property --\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 37\n              }, this), (filter.property_source === 'event' ? availableEventProperties : availableUserProperties).map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: p.key,\n                children: p.display_name || p.key\n              }, p.key, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 41\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1\",\n              children: \"Property Value(s)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              isMulti: true,\n              isDisabled: !filter.property_name || !filter.property_source,\n              options: (propertyValueOptions[`optional_filter_${index}_${filter.property_name}`] || []).map(val => ({\n                value: val,\n                label: val\n              })),\n              value: filter.property_values.map(val => ({\n                value: val,\n                label: val\n              })),\n              onChange: selected => handleOptionalFilterChange('property_values', selected ? selected.map(option => option.value) : [], index),\n              styles: getSelectTheme(),\n              placeholder: \"Select values...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => removeOptionalFilter(filter.id),\n              className: \"p-1.5 bg-red-100 dark:bg-red-700 text-red-600 dark:text-white rounded-full hover:bg-red-200 dark:hover:bg-red-600 transition-colors\",\n              title: \"Remove this filter\",\n              children: /*#__PURE__*/_jsxDEV(XCircle, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 29\n          }, this)]\n        }, filter.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border-t pt-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-gray-900 dark:text-white mb-4\",\n          children: \"Product Filtering\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",\n              children: \"Include Products Containing (comma-separated)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: ((_config$product_filte = config.product_filter) === null || _config$product_filte === void 0 ? void 0 : (_config$product_filte2 = _config$product_filte.include_patterns) === null || _config$product_filte2 === void 0 ? void 0 : _config$product_filte2.join(', ')) || '',\n              onChange: e => handleProductFilterChange('include_patterns', e.target.value.split(',').map(v => v.trim()).filter(v => v)),\n              placeholder: \"e.g., gluten, premium, pro\",\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500 dark:text-gray-400 mt-1\",\n              children: \"Products containing any of these patterns will be included\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",\n              children: \"Specific Product IDs (comma-separated)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: ((_config$product_filte3 = config.product_filter) === null || _config$product_filte3 === void 0 ? void 0 : (_config$product_filte4 = _config$product_filte3.specific_product_ids) === null || _config$product_filte4 === void 0 ? void 0 : _config$product_filte4.join(', ')) || '',\n              onChange: e => handleProductFilterChange('specific_product_ids', e.target.value.split(',').map(v => v.trim()).filter(v => v)),\n              placeholder: \"e.g., prod_R7oYuL3bSUecnr, prod_ABC123\",\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500 dark:text-gray-400 mt-1\",\n              children: \"These exact product IDs will always be included\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",\n              children: \"Exclude Products Containing (comma-separated)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: ((_config$product_filte5 = config.product_filter) === null || _config$product_filte5 === void 0 ? void 0 : (_config$product_filte6 = _config$product_filte5.exclude_patterns) === null || _config$product_filte6 === void 0 ? void 0 : _config$product_filte6.join(', ')) || '',\n              onChange: e => handleProductFilterChange('exclude_patterns', e.target.value.split(',').map(v => v.trim()).filter(v => v)),\n              placeholder: \"e.g., test, demo, staging\",\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500 dark:text-gray-400 mt-1\",\n              children: \"Products containing any of these patterns will be excluded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 17\n      }, this), showAdvanced && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border-t pt-6 space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-gray-900 dark:text-white mb-4\",\n          children: \"Advanced Configuration\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-md font-medium text-gray-900 dark:text-white mb-3\",\n            children: \"Lifecycle Rate Settings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-3 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm text-gray-700 dark:text-gray-300 mb-1\",\n                children: \"Trial Window (days)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 471,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: ((_config$lifecycle = config.lifecycle) === null || _config$lifecycle === void 0 ? void 0 : _config$lifecycle.trial_window_days) || 7,\n                onChange: e => handleLifecycleConfigChange('trial_window_days', parseInt(e.target.value)),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm text-gray-700 dark:text-gray-300 mb-1\",\n                children: \"Cancellation Window (days)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: ((_config$lifecycle2 = config.lifecycle) === null || _config$lifecycle2 === void 0 ? void 0 : _config$lifecycle2.cancellation_window_days) || 30,\n                onChange: e => handleLifecycleConfigChange('cancellation_window_days', parseInt(e.target.value)),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: ((_config$lifecycle3 = config.lifecycle) === null || _config$lifecycle3 === void 0 ? void 0 : _config$lifecycle3.smoothing_enabled) !== false,\n                  onChange: e => handleLifecycleConfigChange('smoothing_enabled', e.target.checked),\n                  className: \"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 494,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-gray-700 dark:text-gray-300\",\n                  children: \"Smoothing Enabled\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 500,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 493,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-md font-medium text-gray-900 dark:text-white mb-3\",\n            children: \"Timeline Settings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: ((_config$timeline = config.timeline) === null || _config$timeline === void 0 ? void 0 : _config$timeline.include_estimates) !== false,\n                  onChange: e => handleTimelineConfigChange('include_estimates', e.target.checked),\n                  className: \"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 516,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-gray-700 dark:text-gray-300\",\n                  children: \"Include Revenue Estimates\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 522,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 515,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: ((_config$timeline2 = config.timeline) === null || _config$timeline2 === void 0 ? void 0 : _config$timeline2.include_confidence_intervals) !== false,\n                  onChange: e => handleTimelineConfigChange('include_confidence_intervals', e.target.checked),\n                  className: \"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 529,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-gray-700 dark:text-gray-300\",\n                  children: \"Include Confidence Intervals\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 535,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 528,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 527,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-md font-medium text-gray-900 dark:text-white mb-3\",\n            children: \"Detailed Events Analysis\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm text-gray-700 dark:text-gray-300 mb-1\",\n              children: \"Specific User ID (for detailed event analysis)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: ((_config$detailed_even = config.detailed_events) === null || _config$detailed_even === void 0 ? void 0 : _config$detailed_even.user_id) || '',\n              onChange: e => handleDetailedEventsConfigChange('user_id', e.target.value),\n              placeholder: \"e.g., user_12345 or distinct_id\",\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 552,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500 dark:text-gray-400 mt-1\",\n              children: \"Leave empty for cohort-wide analysis, or enter a specific user ID to see detailed events for that user\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 559,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 247,\n    columnNumber: 9\n  }, this);\n};\n_s(ProductFilterConfig, \"qmo0LlJuGzw9Rp7x7y7sWUYkkzg=\");\n_c = ProductFilterConfig;\nexport default ProductFilterConfig;\nvar _c;\n$RefreshReg$(_c, \"ProductFilterConfig\");","map":{"version":3,"names":["React","useState","useEffect","Select","PlusCircle","XCircle","api","jsxDEV","_jsxDEV","ProductFilterConfig","config","analysisParams","onConfigChange","_s","_analysisParams$optio","_config$product_filte","_config$product_filte2","_config$product_filte3","_config$product_filte4","_config$product_filte5","_config$product_filte6","_config$lifecycle","_config$lifecycle2","_config$lifecycle3","_config$timeline","_config$timeline2","_config$detailed_even","showAdvanced","setShowAdvanced","availableEventProperties","setAvailableEventProperties","availableUserProperties","setAvailableUserProperties","propertyValueOptions","setPropertyValueOptions","isLoadingProperties","setIsLoadingProperties","propertyDiscoveryMessage","setPropertyDiscoveryMessage","initializeProperties","data","getDiscoverableCohortProperties","event_properties","user_properties","error","console","fetchPropertyValues","propertyName","propertySource","filterIdentifier","getDiscoverableCohortPropertyValues","prev","values","err","triggerPropertyDiscovery","setTimeout","getSelectTheme","control","provided","state","backgroundColor","borderColor","isFocused","boxShadow","menu","zIndex","option","isSelected","color","multiValue","multiValueLabel","multiValueRemove","handleConfigUpdate","newConfig","updatedParams","handleProductFilterChange","field","value","newProductFilter","product_filter","handleLifecycleConfigChange","newLifecycleConfig","lifecycle","handleTimelineConfigChange","newTimelineConfig","timeline","handleDetailedEventsConfigChange","newDetailedEventsConfig","detailed_events","handleDateChange","handleFilterChange","addOptionalFilter","optional_filters","id","Date","now","toString","property_name","property_values","property_source","removeOptionalFilter","idToRemove","filter","f","handleOptionalFilterChange","type","index","newOptionalFilters","addToList","list","newItem","includes","removeFromList","item","i","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","title","date_from","onChange","e","target","date_to","size","length","map","p","key","display_name","isMulti","isDisabled","options","val","label","selected","styles","placeholder","include_patterns","join","split","v","trim","specific_product_ids","exclude_patterns","trial_window_days","parseInt","cancellation_window_days","checked","smoothing_enabled","include_estimates","include_confidence_intervals","user_id","_c","$RefreshReg$"],"sources":["/Users/joshuakaufman/untitled folder 3/orchestrator/dashboard/client/src/cohort-pipeline/components/ProductFilterConfig.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Select from 'react-select';\nimport { PlusCircle, XCircle } from 'lucide-react';\nimport { api } from '../../services/api';\n\nconst ProductFilterConfig = ({ config, analysisParams, onConfigChange }) => {\n    const [showAdvanced, setShowAdvanced] = useState(false);\n    const [availableEventProperties, setAvailableEventProperties] = useState([]);\n    const [availableUserProperties, setAvailableUserProperties] = useState([]);\n    const [propertyValueOptions, setPropertyValueOptions] = useState({});\n    const [isLoadingProperties, setIsLoadingProperties] = useState(false);\n    const [propertyDiscoveryMessage, setPropertyDiscoveryMessage] = useState('');\n\n    // Load available properties on component mount\n    useEffect(() => {\n        initializeProperties();\n    }, []);\n\n    const initializeProperties = async () => {\n        setIsLoadingProperties(true);\n        try {\n            const data = await api.getDiscoverableCohortProperties();\n            if (data.event_properties) {\n                setAvailableEventProperties(data.event_properties);\n            }\n            if (data.user_properties) {\n                setAvailableUserProperties(data.user_properties);\n            }\n        } catch (error) {\n            console.error('Failed to load properties:', error);\n            setPropertyDiscoveryMessage('Failed to load available properties. Some features may be limited.');\n        }\n        setIsLoadingProperties(false);\n    };\n\n    const fetchPropertyValues = async (propertyName, propertySource, filterIdentifier) => {\n        if (!propertyName || !propertySource) return;\n        try {\n            const data = await api.getDiscoverableCohortPropertyValues(propertyName, propertySource);\n            setPropertyValueOptions(prev => ({ \n                ...prev, \n                [filterIdentifier + '_' + propertyName]: data.values || [] \n            }));\n        } catch (err) {\n            console.error(`Error fetching values for ${propertyName}:`, err);\n            setPropertyValueOptions(prev => ({ \n                ...prev, \n                [filterIdentifier + '_' + propertyName]: [] \n            }));\n        }\n    };\n\n    const triggerPropertyDiscovery = async () => {\n        setIsLoadingProperties(true);\n        setPropertyDiscoveryMessage('Discovering available properties...');\n        try {\n            await initializeProperties();\n            setPropertyDiscoveryMessage('Property discovery completed successfully!');\n            setTimeout(() => setPropertyDiscoveryMessage(''), 3000);\n        } catch (error) {\n            setPropertyDiscoveryMessage('Property discovery failed. Please try again.');\n            setTimeout(() => setPropertyDiscoveryMessage(''), 5000);\n        }\n        setIsLoadingProperties(false);\n    };\n\n    const getSelectTheme = () => ({\n        control: (provided, state) => ({\n            ...provided,\n            backgroundColor: 'var(--select-bg, white)',\n            borderColor: state.isFocused ? '#3b82f6' : '#d1d5db',\n            boxShadow: state.isFocused ? '0 0 0 1px #3b82f6' : 'none',\n            '&:hover': {\n                borderColor: '#3b82f6'\n            }\n        }),\n        menu: (provided) => ({\n            ...provided,\n            backgroundColor: 'var(--select-menu-bg, white)',\n            zIndex: 9999\n        }),\n        option: (provided, state) => ({\n            ...provided,\n            backgroundColor: state.isSelected \n                ? '#3b82f6' \n                : state.isFocused \n                    ? '#eff6ff' \n                    : 'var(--select-option-bg, white)',\n            color: state.isSelected ? 'white' : 'var(--select-option-color, black)'\n        }),\n        multiValue: (provided) => ({\n            ...provided,\n            backgroundColor: '#eff6ff'\n        }),\n        multiValueLabel: (provided) => ({\n            ...provided,\n            color: '#1e40af'\n        }),\n        multiValueRemove: (provided) => ({\n            ...provided,\n            color: '#1e40af',\n            '&:hover': {\n                backgroundColor: '#dbeafe',\n                color: '#1e40af'\n            }\n        })\n    });\n\n    const handleConfigUpdate = (newConfig) => {\n        const updatedParams = {\n            ...analysisParams,\n            config: {\n                ...analysisParams.config,\n                ...newConfig\n            }\n        };\n        onConfigChange(updatedParams);\n    };\n\n    const handleProductFilterChange = (field, value) => {\n        const newProductFilter = {\n            ...config.product_filter,\n            [field]: value\n        };\n        \n        handleConfigUpdate({\n            product_filter: newProductFilter\n        });\n    };\n\n    const handleLifecycleConfigChange = (field, value) => {\n        const newLifecycleConfig = {\n            ...config.lifecycle,\n            [field]: value\n        };\n        \n        handleConfigUpdate({\n            lifecycle: newLifecycleConfig\n        });\n    };\n\n    const handleTimelineConfigChange = (field, value) => {\n        const newTimelineConfig = {\n            ...config.timeline,\n            [field]: value\n        };\n        \n        handleConfigUpdate({\n            timeline: newTimelineConfig\n        });\n    };\n\n    const handleDetailedEventsConfigChange = (field, value) => {\n        const newDetailedEventsConfig = {\n            ...config.detailed_events,\n            [field]: value\n        };\n        \n        handleConfigUpdate({\n            detailed_events: newDetailedEventsConfig\n        });\n    };\n\n    const handleDateChange = (field, value) => {\n        const updatedParams = {\n            ...analysisParams,\n            [field]: value\n        };\n        onConfigChange(updatedParams);\n    };\n\n    // Enhanced filter handler with property value fetching\n    const handleFilterChange = (field, value) => {\n        const updatedParams = {\n            ...analysisParams,\n            [field]: value\n        };\n        onConfigChange(updatedParams);\n    };\n\n    // Optional filters management (replaces both primary and secondary filters)\n    const addOptionalFilter = () => {\n        const updatedParams = {\n            ...analysisParams,\n            optional_filters: [\n                ...(analysisParams.optional_filters || []),\n                {\n                    id: Date.now().toString(),\n                    property_name: '',\n                    property_values: [],\n                    property_source: 'event'\n                }\n            ]\n        };\n        onConfigChange(updatedParams);\n    };\n\n    const removeOptionalFilter = (idToRemove) => {\n        const updatedParams = {\n            ...analysisParams,\n            optional_filters: (analysisParams.optional_filters || []).filter(f => f.id !== idToRemove)\n        };\n        onConfigChange(updatedParams);\n    };\n\n    const handleOptionalFilterChange = (type, value, index) => {\n        const newOptionalFilters = [...(analysisParams.optional_filters || [])];\n        const filter = newOptionalFilters[index];\n        \n        if (type === 'property_source') {\n            filter.property_source = value;\n            filter.property_values = []; // Reset values when source changes\n            // Re-fetch values if property name exists\n            if (filter.property_name) {\n                fetchPropertyValues(filter.property_name, value, `optional_filter_${index}`);\n            }\n        } else if (type === 'property_name') {\n            filter.property_name = value;\n            filter.property_values = []; // Reset values when property changes\n            // Fetch property values for the new property\n            if (value && filter.property_source) {\n                fetchPropertyValues(value, filter.property_source, `optional_filter_${index}`);\n            }\n        } else if (type === 'property_values') {\n            filter.property_values = value;\n        }\n        \n        const updatedParams = {\n            ...analysisParams,\n            optional_filters: newOptionalFilters\n        };\n        onConfigChange(updatedParams);\n    };\n\n    const addToList = (list, newItem) => {\n        if (newItem && !list.includes(newItem)) {\n            return [...list, newItem];\n        }\n        return list;\n    };\n\n    const removeFromList = (list, item) => {\n        return list.filter(i => i !== item);\n    };\n\n    return (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                    Analysis Configuration\n                </h2>\n                <div className=\"flex items-center space-x-2\">\n                    <button\n                        onClick={triggerPropertyDiscovery}\n                        disabled={isLoadingProperties}\n                        className=\"px-3 py-1 text-sm bg-teal-200 hover:bg-teal-300 dark:bg-teal-700 dark:hover:bg-teal-600 text-teal-700 dark:text-teal-300 rounded-lg transition-colors disabled:opacity-50\"\n                        title=\"Refresh available properties\"\n                    >\n                        {isLoadingProperties ? 'Loading...' : 'Discover Properties'}\n                    </button>\n                    <button\n                        onClick={() => setShowAdvanced(!showAdvanced)}\n                        className=\"px-3 py-1 text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors\"\n                    >\n                        {showAdvanced ? 'Hide Advanced' : 'Show Advanced'}\n                    </button>\n                </div>\n            </div>\n\n            {propertyDiscoveryMessage && (\n                <div className=\"mb-4 p-3 bg-teal-50 dark:bg-teal-900/40 border border-teal-200 dark:border-teal-600 rounded-md\">\n                    <p className=\"text-sm text-teal-700 dark:text-teal-300\">{propertyDiscoveryMessage}</p>\n                </div>\n            )}\n\n            <div className=\"space-y-6\">\n                {/* Basic Configuration */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    {/* Date Range */}\n                    <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                            Date From\n                        </label>\n                        <input\n                            type=\"date\"\n                            value={analysisParams.date_from}\n                            onChange={(e) => handleDateChange('date_from', e.target.value)}\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                        />\n                    </div>\n\n                    <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                            Date To\n                        </label>\n                        <input\n                            type=\"date\"\n                            value={analysisParams.date_to}\n                            onChange={(e) => handleDateChange('date_to', e.target.value)}\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                        />\n                    </div>\n                </div>\n\n                {/* User & Event Property Filters Section */}\n                <div className=\"border-t pt-6\">\n                    <div className=\"flex justify-between items-center mb-4\">\n                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                            User & Event Property Filters\n                        </h3>\n                        <button \n                            type=\"button\" \n                            onClick={addOptionalFilter}\n                            className=\"p-1.5 bg-teal-100 dark:bg-teal-600 text-teal-700 dark:text-white rounded-full hover:bg-teal-200 dark:hover:bg-teal-500 transition-colors\"\n                            title=\"Add optional filter\"\n                        >\n                            <PlusCircle size={18} />\n                        </button>\n                    </div>\n                    \n                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-4\">\n                        <strong>Optional:</strong> Add filters to narrow down your cohort. User property filters will only include users with the specified property values. Event property filters will only include users who have events with the specified property values.\n                    </p>\n                    \n                    {(analysisParams.optional_filters?.length === 0 || !analysisParams.optional_filters) && (\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 italic mb-4\">\n                            No filters applied. All users with trial/purchase events in the time frame will be included. Click the + button to add a filter.\n                        </p>\n                    )}\n                    \n                    {(analysisParams.optional_filters || []).map((filter, index) => (\n                        <div key={filter.id} className=\"grid grid-cols-1 md:grid-cols-4 gap-3 items-end mb-4 p-4 border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 rounded-md\">\n                            <div>\n                                <label className=\"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1\">\n                                    Source Type\n                                </label>\n                                <select \n                                    value={filter.property_source}\n                                    onChange={e => handleOptionalFilterChange('property_source', e.target.value, index)}\n                                    className=\"block w-full p-2 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-600 text-gray-900 dark:text-white\"\n                                >\n                                    <option value=\"event\">Event Property</option>\n                                    <option value=\"user\">User Property</option>\n                                </select>\n                            </div>\n                            <div>\n                                <label className=\"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1\">\n                                    Property Name\n                                </label>\n                                <select \n                                    value={filter.property_name}\n                                    onChange={e => handleOptionalFilterChange('property_name', e.target.value, index)}\n                                    className=\"block w-full p-2 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-600 text-gray-900 dark:text-white\"\n                                >\n                                    <option value=\"\">-- Select Property --</option>\n                                    {(filter.property_source === 'event' ? availableEventProperties : availableUserProperties).map(p => (\n                                        <option key={p.key} value={p.key}>\n                                            {p.display_name || p.key}\n                                        </option>\n                                    ))}\n                                </select>\n                            </div>\n                            <div>\n                                <label className=\"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1\">\n                                    Property Value(s)\n                                </label>\n                                <Select\n                                    isMulti\n                                    isDisabled={!filter.property_name || !filter.property_source}\n                                    options={(propertyValueOptions[`optional_filter_${index}_${filter.property_name}`] || []).map(val => ({ value: val, label: val }))}\n                                    value={filter.property_values.map(val => ({ value: val, label: val }))}\n                                    onChange={(selected) => handleOptionalFilterChange('property_values', selected ? selected.map(option => option.value) : [], index)}\n                                    styles={getSelectTheme()}\n                                    placeholder=\"Select values...\"\n                                />\n                            </div>\n                            <div className=\"flex justify-end\">\n                                <button \n                                    type=\"button\" \n                                    onClick={() => removeOptionalFilter(filter.id)}\n                                    className=\"p-1.5 bg-red-100 dark:bg-red-700 text-red-600 dark:text-white rounded-full hover:bg-red-200 dark:hover:bg-red-600 transition-colors\"\n                                    title=\"Remove this filter\"\n                                >\n                                    <XCircle size={18} />\n                                </button>\n                            </div>\n                        </div>\n                    ))}\n                </div>\n\n                {/* Product Filter Configuration */}\n                <div className=\"border-t pt-6\">\n                    <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n                        Product Filtering\n                    </h3>\n                    \n                    <div className=\"space-y-4\">\n                        {/* Include Patterns */}\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                                Include Products Containing (comma-separated)\n                            </label>\n                            <input\n                                type=\"text\"\n                                value={config.product_filter?.include_patterns?.join(', ') || ''}\n                                onChange={(e) => handleProductFilterChange('include_patterns', \n                                    e.target.value.split(',').map(v => v.trim()).filter(v => v)\n                                )}\n                                placeholder=\"e.g., gluten, premium, pro\"\n                                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                            />\n                            <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                                Products containing any of these patterns will be included\n                            </p>\n                        </div>\n\n                        {/* Specific Product IDs */}\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                                Specific Product IDs (comma-separated)\n                            </label>\n                            <input\n                                type=\"text\"\n                                value={config.product_filter?.specific_product_ids?.join(', ') || ''}\n                                onChange={(e) => handleProductFilterChange('specific_product_ids', \n                                    e.target.value.split(',').map(v => v.trim()).filter(v => v)\n                                )}\n                                placeholder=\"e.g., prod_R7oYuL3bSUecnr, prod_ABC123\"\n                                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                            />\n                            <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                                These exact product IDs will always be included\n                            </p>\n                        </div>\n\n                        {/* Exclude Patterns */}\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                                Exclude Products Containing (comma-separated)\n                            </label>\n                            <input\n                                type=\"text\"\n                                value={config.product_filter?.exclude_patterns?.join(', ') || ''}\n                                onChange={(e) => handleProductFilterChange('exclude_patterns', \n                                    e.target.value.split(',').map(v => v.trim()).filter(v => v)\n                                )}\n                                placeholder=\"e.g., test, demo, staging\"\n                                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                            />\n                            <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                                Products containing any of these patterns will be excluded\n                            </p>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Advanced Configuration */}\n                {showAdvanced && (\n                    <div className=\"border-t pt-6 space-y-6\">\n                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n                            Advanced Configuration\n                        </h3>\n\n                        {/* Lifecycle Configuration */}\n                        <div>\n                            <h4 className=\"text-md font-medium text-gray-900 dark:text-white mb-3\">\n                                Lifecycle Rate Settings\n                            </h4>\n                            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                                <div>\n                                    <label className=\"block text-sm text-gray-700 dark:text-gray-300 mb-1\">\n                                        Trial Window (days)\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={config.lifecycle?.trial_window_days || 7}\n                                        onChange={(e) => handleLifecycleConfigChange('trial_window_days', parseInt(e.target.value))}\n                                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                                    />\n                                </div>\n                                <div>\n                                    <label className=\"block text-sm text-gray-700 dark:text-gray-300 mb-1\">\n                                        Cancellation Window (days)\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={config.lifecycle?.cancellation_window_days || 30}\n                                        onChange={(e) => handleLifecycleConfigChange('cancellation_window_days', parseInt(e.target.value))}\n                                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                                    />\n                                </div>\n                                <div className=\"flex items-center\">\n                                    <label className=\"flex items-center space-x-2\">\n                                        <input\n                                            type=\"checkbox\"\n                                            checked={config.lifecycle?.smoothing_enabled !== false}\n                                            onChange={(e) => handleLifecycleConfigChange('smoothing_enabled', e.target.checked)}\n                                            className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500\"\n                                        />\n                                        <span className=\"text-sm text-gray-700 dark:text-gray-300\">\n                                            Smoothing Enabled\n                                        </span>\n                                    </label>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Timeline Configuration */}\n                        <div>\n                            <h4 className=\"text-md font-medium text-gray-900 dark:text-white mb-3\">\n                                Timeline Settings\n                            </h4>\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                <div className=\"flex items-center\">\n                                    <label className=\"flex items-center space-x-2\">\n                                        <input\n                                            type=\"checkbox\"\n                                            checked={config.timeline?.include_estimates !== false}\n                                            onChange={(e) => handleTimelineConfigChange('include_estimates', e.target.checked)}\n                                            className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500\"\n                                        />\n                                        <span className=\"text-sm text-gray-700 dark:text-gray-300\">\n                                            Include Revenue Estimates\n                                        </span>\n                                    </label>\n                                </div>\n                                <div className=\"flex items-center\">\n                                    <label className=\"flex items-center space-x-2\">\n                                        <input\n                                            type=\"checkbox\"\n                                            checked={config.timeline?.include_confidence_intervals !== false}\n                                            onChange={(e) => handleTimelineConfigChange('include_confidence_intervals', e.target.checked)}\n                                            className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500\"\n                                        />\n                                        <span className=\"text-sm text-gray-700 dark:text-gray-300\">\n                                            Include Confidence Intervals\n                                        </span>\n                                    </label>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Detailed Events Configuration */}\n                        <div>\n                            <h4 className=\"text-md font-medium text-gray-900 dark:text-white mb-3\">\n                                Detailed Events Analysis\n                            </h4>\n                            <div>\n                                <label className=\"block text-sm text-gray-700 dark:text-gray-300 mb-1\">\n                                    Specific User ID (for detailed event analysis)\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    value={config.detailed_events?.user_id || ''}\n                                    onChange={(e) => handleDetailedEventsConfigChange('user_id', e.target.value)}\n                                    placeholder=\"e.g., user_12345 or distinct_id\"\n                                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                                />\n                                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                                    Leave empty for cohort-wide analysis, or enter a specific user ID to see detailed events for that user\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default ProductFilterConfig; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}