{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ARPUDisplay=_ref=>{var _data$data,_data$data$structured,_data$data2,_data$structured_form,_data$data3,_data$data4,_data$data4$structure,_data$data4$structure2,_data$structured_form6,_data$structured_form7,_extendedCohortInfo,_extendedCohortInfo2,_extendedCohortInfo3,_extendedCohortInfo4,_extendedCohortInfo5,_extendedCohortInfo6,_extendedCohortInfo7;let{data}=_ref;const[showCalculationDetails,setShowCalculationDetails]=useState(false);// Comprehensive debugging\nconsole.log('ARPUDisplay received data:',data);console.log('Data structure:',{hasData:!!data,hasDataData:!!(data!==null&&data!==void 0&&data.data),dataKeys:data?Object.keys(data):[],dataDataKeys:data!==null&&data!==void 0&&data.data?Object.keys(data.data):[]});// COMPLETELY REWRITTEN: More robust data extraction\nlet arpuData=null;let cohortSummary=null;let extendedCohortInfo=null;let baseVsLookbackBreakdown=null;// Primary extraction from structured format\nif(data!==null&&data!==void 0&&(_data$data=data.data)!==null&&_data$data!==void 0&&(_data$data$structured=_data$data.structured_format)!==null&&_data$data$structured!==void 0&&_data$data$structured.arpu_analysis){var _data$data$structured2,_data$data$structured3,_data$data$structured4,_data$data$structured5;console.log('Using structured_format.arpu_analysis');arpuData=data.data.structured_format.arpu_analysis;// Get cohort breakdown\nextendedCohortInfo=(_data$data$structured2=data.data.structured_format.cohort_analysis)===null||_data$data$structured2===void 0?void 0:_data$data$structured2.cohort_breakdown;cohortSummary=(_data$data$structured3=data.data.structured_format)===null||_data$data$structured3===void 0?void 0:(_data$data$structured4=_data$data$structured3.cohort_data)===null||_data$data$structured4===void 0?void 0:(_data$data$structured5=_data$data$structured4.cleaned_cohort)===null||_data$data$structured5===void 0?void 0:_data$data$structured5.metadata;console.log('Structured format data:',{arpuData,extendedCohortInfo,cohortSummary});}// Secondary extraction from legacy format\nelse if(data!==null&&data!==void 0&&(_data$data2=data.data)!==null&&_data$data2!==void 0&&_data$data2.legacy_format){var _legacyData$metadata;console.log('Using legacy_format');const legacyData=data.data.legacy_format;// Extract ARPU data from legacy format\narpuData={cohort_wide:{arpu:legacyData.arpu||0,total_revenue:0,paying_users:0,net_revenue:0},per_product:{},metadata:{calculation_method:'legacy_format',message:'Data from legacy format',lookback_days:((_legacyData$metadata=legacyData.metadata)===null||_legacyData$metadata===void 0?void 0:_legacyData$metadata.lookback_days_used)||0}};// Convert legacy per-product ARPU to new format\nif(legacyData.arpu_per_product){Object.entries(legacyData.arpu_per_product).forEach(_ref2=>{let[productId,arpu]=_ref2;arpuData.per_product[productId]={arpu:arpu,total_revenue:0,paying_users:0,event_count:0,net_revenue:0};});}// Extract extended cohort info\nextendedCohortInfo={base_users:legacyData.base_users||0,lookback_users:legacyData.lookback_users||0,total_users:legacyData.comprehensive_cohort_size||0,base_percentage:0,lookback_percentage:0};if(extendedCohortInfo.total_users>0){extendedCohortInfo.base_percentage=extendedCohortInfo.base_users/extendedCohortInfo.total_users*100;extendedCohortInfo.lookback_percentage=extendedCohortInfo.lookback_users/extendedCohortInfo.total_users*100;}cohortSummary={user_count:legacyData.cohort_size||0,event_count:legacyData.total_events||0};console.log('Legacy format data:',{arpuData,extendedCohortInfo,cohortSummary,legacyData});}// Tertiary extraction from direct structured format\nelse if(data!==null&&data!==void 0&&(_data$structured_form=data.structured_format)!==null&&_data$structured_form!==void 0&&_data$structured_form.arpu_analysis){var _data$structured_form2,_data$structured_form3,_data$structured_form4,_data$structured_form5;console.log('Using direct structured_format.arpu_analysis');arpuData=data.structured_format.arpu_analysis;extendedCohortInfo=(_data$structured_form2=data.structured_format.cohort_analysis)===null||_data$structured_form2===void 0?void 0:_data$structured_form2.cohort_breakdown;cohortSummary=(_data$structured_form3=data.structured_format)===null||_data$structured_form3===void 0?void 0:(_data$structured_form4=_data$structured_form3.cohort_data)===null||_data$structured_form4===void 0?void 0:(_data$structured_form5=_data$structured_form4.cleaned_cohort)===null||_data$structured_form5===void 0?void 0:_data$structured_form5.metadata;}// Quaternary extraction from direct legacy format\nelse if(data!==null&&data!==void 0&&data.legacy_format){var _legacyData$metadata2;console.log('Using direct legacy_format');const legacyData=data.legacy_format;arpuData={cohort_wide:{arpu:legacyData.arpu||0,total_revenue:0,paying_users:0,net_revenue:0},per_product:{},metadata:{calculation_method:'legacy_format',message:'Data from legacy format',lookback_days:((_legacyData$metadata2=legacyData.metadata)===null||_legacyData$metadata2===void 0?void 0:_legacyData$metadata2.lookback_days_used)||0}};if(legacyData.arpu_per_product){Object.entries(legacyData.arpu_per_product).forEach(_ref3=>{let[productId,arpu]=_ref3;arpuData.per_product[productId]={arpu:arpu,total_revenue:0,paying_users:0,event_count:0,net_revenue:0};});}extendedCohortInfo={base_users:legacyData.base_users||0,lookback_users:legacyData.lookback_users||0,total_users:legacyData.comprehensive_cohort_size||0,base_percentage:0,lookback_percentage:0};if(extendedCohortInfo.total_users>0){extendedCohortInfo.base_percentage=extendedCohortInfo.base_users/extendedCohortInfo.total_users*100;extendedCohortInfo.lookback_percentage=extendedCohortInfo.lookback_users/extendedCohortInfo.total_users*100;}cohortSummary={user_count:legacyData.cohort_size||0,event_count:legacyData.total_events||0};}// Final fallback from regular arpu_data\nelse if(data!==null&&data!==void 0&&(_data$data3=data.data)!==null&&_data$data3!==void 0&&_data$data3.arpu_data){console.log('Using regular arpu_data');arpuData=data.data.arpu_data;cohortSummary=data.data.cohort_summary;}console.log('FINAL EXTRACTED ARPU DATA:',{arpuData,extendedCohortInfo,cohortSummary,hasArpuData:!!arpuData});if(!arpuData){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 dark:text-gray-400\",children:\"No ARPU data available. Run an analysis to see results.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-xs text-gray-400\",children:[\"Debug: \",JSON.stringify({hasData:!!data,hasDataData:!!(data!==null&&data!==void 0&&data.data),dataKeys:data?Object.keys(data):[],dataDataKeys:data!==null&&data!==void 0&&data.data?Object.keys(data.data):[]})]})]});}const cohortWide=arpuData.cohort_wide||{};const perProduct=arpuData.per_product||{};const metadata=arpuData.metadata||{};// Extract base vs lookback breakdown information\nconst baseRevenue=metadata.base_revenue||0;const lookbackRevenue=metadata.lookback_revenue||0;const totalRevenue=baseRevenue+lookbackRevenue||cohortWide.total_revenue||0;const baseContributionPct=metadata.base_contribution_pct||0;const lookbackContributionPct=metadata.lookback_contribution_pct||0;// Get lookback days\nconst lookbackDaysUsed=metadata.lookback_days_used||metadata.lookback_days||(data===null||data===void 0?void 0:(_data$data4=data.data)===null||_data$data4===void 0?void 0:(_data$data4$structure=_data$data4.structured_format)===null||_data$data4$structure===void 0?void 0:(_data$data4$structure2=_data$data4$structure.metadata)===null||_data$data4$structure2===void 0?void 0:_data$data4$structure2.lookback_days_used)||(data===null||data===void 0?void 0:(_data$structured_form6=data.structured_format)===null||_data$structured_form6===void 0?void 0:(_data$structured_form7=_data$structured_form6.metadata)===null||_data$structured_form7===void 0?void 0:_data$structured_form7.lookback_days_used)||0;const formatCurrency=value=>{if(value===null||value===undefined||isNaN(value))return'$0.00';return\"$\".concat(Number(value).toLocaleString('en-US',{minimumFractionDigits:2,maximumFractionDigits:2}));};const formatNumber=value=>{if(value===null||value===undefined||isNaN(value))return'0';return Number(value).toLocaleString();};const formatPercentage=value=>{if(value===null||value===undefined||isNaN(value))return'0.0%';return\"\".concat(Number(value).toFixed(1),\"%\");};// Sort products by ARPU (highest first)\nconst sortedProducts=Object.entries(perProduct).sort((_ref4,_ref5)=>{let[,a]=_ref4;let[,b]=_ref5;return(b.arpu||0)-(a.arpu||0);});// NEW: Check for products with zero ARPU that might be hidden\nconst zeroArpuProducts=Object.entries(perProduct).filter(_ref6=>{let[,productData]=_ref6;return(productData.arpu||0)===0;});const hasHiddenProducts=zeroArpuProducts.length>0;// NEW: Calculate separate ARPU for base and lookback periods\nconst calculateSeparateARPU=()=>{const baseUsers=metadata.base_non_refunded_users||0;const lookbackUsers=metadata.lookback_non_refunded_users||0;const baseRevenue=metadata.base_revenue||0;const lookbackRevenue=metadata.lookback_revenue||0;const baseRefunds=metadata.base_refunds||0;const lookbackRefunds=metadata.lookback_refunds||0;// Calculate NET revenue for each period (gross revenue - refunds)\nconst baseNetRevenue=baseRevenue-baseRefunds;const lookbackNetRevenue=lookbackRevenue-lookbackRefunds;return{baseARPU:baseUsers>0?baseNetRevenue/baseUsers:0,lookbackARPU:lookbackUsers>0?lookbackNetRevenue/lookbackUsers:0,hasData:baseUsers>0||lookbackUsers>0,baseNetRevenue,lookbackNetRevenue};};const separateARPU=calculateSeparateARPU();return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900 dark:text-white mb-4\",children:\"Cohort-Wide ARPU Analysis\"}),((_extendedCohortInfo=extendedCohortInfo)===null||_extendedCohortInfo===void 0?void 0:_extendedCohortInfo.base_users)>0&&((_extendedCohortInfo2=extendedCohortInfo)===null||_extendedCohortInfo2===void 0?void 0:_extendedCohortInfo2.lookback_users)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-amber-800 dark:text-amber-200\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Extended Timeline Analysis:\"}),\" This ARPU calculation includes data from an extended timeline.\",/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 text-xs\",children:[\"Total Users: \",(_extendedCohortInfo3=extendedCohortInfo)===null||_extendedCohortInfo3===void 0?void 0:_extendedCohortInfo3.total_users.toLocaleString(),\" (\",(_extendedCohortInfo4=extendedCohortInfo)===null||_extendedCohortInfo4===void 0?void 0:_extendedCohortInfo4.base_users.toLocaleString(),\" base period + \",(_extendedCohortInfo5=extendedCohortInfo)===null||_extendedCohortInfo5===void 0?void 0:_extendedCohortInfo5.lookback_users.toLocaleString(),\" lookback period)\",lookbackDaysUsed>0&&\" \\u2022 Lookback: \".concat(lookbackDaysUsed,\" days\")]})]})}),separateARPU.hasData&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg border border-indigo-200 dark:border-indigo-800\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-indigo-800 dark:text-indigo-200 mb-2\",children:\"Quick ARPU Comparison by Period (Net Revenue \\xF7 Non-Refunded Users):\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-bold text-indigo-600 dark:text-indigo-400\",children:formatCurrency(separateARPU.baseARPU)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-indigo-700 dark:text-indigo-300\",children:\"Base Period ARPU\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-indigo-600 dark:text-indigo-400\",children:[formatCurrency(separateARPU.baseNetRevenue),\" \\xF7 \",formatNumber(metadata.base_non_refunded_users||0),\" users\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-bold text-indigo-600 dark:text-indigo-400\",children:formatCurrency(separateARPU.lookbackARPU)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-indigo-700 dark:text-indigo-300\",children:\"Lookback Period ARPU\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-indigo-600 dark:text-indigo-400\",children:[formatCurrency(separateARPU.lookbackNetRevenue),\" \\xF7 \",formatNumber(metadata.lookback_non_refunded_users||0),\" users\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-blue-600 dark:text-blue-400\",children:formatCurrency(cohortWide.arpu)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-blue-700 dark:text-blue-300\",children:\"ARPU (Net Revenue \\xF7 Non-Refunded Users)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-blue-600 dark:text-blue-400 mt-1\",children:[formatNumber((metadata.base_non_refunded_users||0)+(metadata.lookback_non_refunded_users||0)||cohortWide.paying_users),\" users, \",formatCurrency(cohortWide.net_revenue||cohortWide.total_revenue),\" net revenue\"]}),(baseRevenue>0||lookbackRevenue>0)&&totalRevenue>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 pt-3 border-t border-blue-200 dark:border-blue-700\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium text-blue-800 dark:text-blue-300 mb-2\",children:\"Revenue Timeline Breakdown:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-500 dark:text-blue-500\",children:\"Base Period:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-blue-600 dark:text-blue-400\",children:[formatCurrency(baseRevenue),\" (\",baseContributionPct.toFixed(1),\"%)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-500 dark:text-blue-500\",children:\"Lookback Period:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-blue-600 dark:text-blue-400\",children:[formatCurrency(lookbackRevenue),\" (\",lookbackContributionPct.toFixed(1),\"%)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs font-medium border-t border-blue-200 dark:border-blue-700 pt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 dark:text-blue-400\",children:\"Total:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-700 dark:text-blue-300\",children:formatCurrency(totalRevenue)})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-semibold text-gray-700 dark:text-gray-300\",children:formatCurrency(cohortWide.total_revenue||totalRevenue)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Total Revenue\"}),cohortWide.total_refunds>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600 dark:text-gray-400 mt-1\",children:[formatCurrency(cohortWide.total_refunds),\" refunded\"]}),(baseRevenue>0||lookbackRevenue>0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Revenue Sources:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 dark:text-gray-500\",children:\"Base Period:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-400\",children:formatCurrency(baseRevenue)})]}),metadata.base_refunds>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs ml-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500 dark:text-red-400\",children:\"Base Refunds:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-red-600 dark:text-red-400\",children:[\"-\",formatCurrency(metadata.base_refunds)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 dark:text-gray-500\",children:\"Lookback Period:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-400\",children:formatCurrency(lookbackRevenue)})]}),metadata.lookback_refunds>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs ml-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500 dark:text-red-400\",children:\"Lookback Refunds:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-red-600 dark:text-red-400\",children:[\"-\",formatCurrency(metadata.lookback_refunds)]})]}),cohortWide.total_refunds>0&&!(metadata.base_refunds>0)&&!(metadata.lookback_refunds>0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs text-red-600 dark:text-red-400\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Refunds:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\",formatCurrency(cohortWide.total_refunds)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs font-medium border-t border-gray-200 dark:border-gray-600 pt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Net Revenue:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700 dark:text-gray-300\",children:formatCurrency(cohortWide.net_revenue||totalRevenue)})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-semibold text-gray-700 dark:text-gray-300\",children:formatNumber(cohortWide.total_paying_users||cohortWide.paying_users)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Total Paying Users\"}),cohortWide.refund_users>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600 dark:text-gray-400 mt-1\",children:[formatNumber(cohortWide.refund_users),\" refunded (\",(cohortWide.refund_users/(cohortWide.total_paying_users||cohortWide.paying_users)*100).toFixed(1),\"%)\"]}),((metadata.base_paying_users||0)>0||(metadata.lookback_paying_users||0)>0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"User Timeline Distribution:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 dark:text-gray-500\",children:\"Base Period:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600 dark:text-gray-400\",children:[formatNumber(metadata.base_paying_users||0),\" paying\"]})]}),(metadata.base_refund_users||0)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs ml-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500 dark:text-red-400\",children:\"Base Refunds:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-red-600 dark:text-red-400\",children:[formatNumber(metadata.base_refund_users),\" users (\",(metadata.base_refund_users/metadata.base_paying_users*100).toFixed(1),\"%)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 dark:text-gray-500\",children:\"Lookback Period:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600 dark:text-gray-400\",children:[formatNumber(metadata.lookback_paying_users||0),\" paying\"]})]}),(metadata.lookback_refund_users||0)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs ml-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500 dark:text-red-400\",children:\"Lookback Refunds:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-red-600 dark:text-red-400\",children:[formatNumber(metadata.lookback_refund_users),\" users (\",(metadata.lookback_refund_users/metadata.lookback_paying_users*100).toFixed(1),\"%)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs font-medium border-t border-gray-200 dark:border-gray-600 pt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Non-Refunded Users:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700 dark:text-gray-300\",children:formatNumber((metadata.base_non_refunded_users||0)+(metadata.lookback_non_refunded_users||0))})]}),lookbackDaysUsed>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 dark:text-gray-500 mt-1\",children:[\"Lookback: \",lookbackDaysUsed,\" days\"]})]})]}),!((metadata.base_paying_users||0)>0||(metadata.lookback_paying_users||0)>0)&&((_extendedCohortInfo6=extendedCohortInfo)===null||_extendedCohortInfo6===void 0?void 0:_extendedCohortInfo6.base_users)>0&&((_extendedCohortInfo7=extendedCohortInfo)===null||_extendedCohortInfo7===void 0?void 0:_extendedCohortInfo7.lookback_users)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"User Timeline Distribution:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 dark:text-gray-500\",children:\"Base Period:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600 dark:text-gray-400\",children:[formatNumber(extendedCohortInfo.base_users),\" (\",extendedCohortInfo.base_percentage.toFixed(1),\"%)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 dark:text-gray-500\",children:\"Lookback Period:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600 dark:text-gray-400\",children:[formatNumber(extendedCohortInfo.lookback_users),\" (\",extendedCohortInfo.lookback_percentage.toFixed(1),\"%)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs font-medium border-t border-gray-200 dark:border-gray-600 pt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Total Extended:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700 dark:text-gray-300\",children:formatNumber(extendedCohortInfo.total_users)})]}),lookbackDaysUsed>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 dark:text-gray-500 mt-1\",children:[\"Lookback: \",lookbackDaysUsed,\" days\"]})]})]})]})]}),metadata.calculation_method&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 text-sm rounded-full \".concat(metadata.calculation_method==='standard'?'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300':metadata.calculation_method==='extended_lookback'?'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300':'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300'),children:metadata.calculation_method==='standard'?'Standard Calculation - No Lookback Used':metadata.calculation_method==='extended_lookback'?\"Extended Lookback - \".concat(metadata.lookback_days,\" Days\"):'Fallback Method - Insufficient Data'}),metadata.lookback_days>0&&metadata.calculation_method==='extended_lookback'&&/*#__PURE__*/_jsxs(\"span\",{className:\"px-3 py-1 text-sm bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 rounded-full\",children:[\"Extended by \",metadata.lookback_days,\" days for sufficient sample size\"]})]})]}),sortedProducts.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-semibold text-gray-900 dark:text-white\",children:[\"ARPU by Product (\",sortedProducts.length,\" products\",hasHiddenProducts?\" + \".concat(zeroArpuProducts.length,\" with $0 ARPU\"):'',\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowCalculationDetails(!showCalculationDetails),className:\"text-sm text-blue-600 dark:text-blue-400 hover:underline\",children:[showCalculationDetails?'Hide':'Show',\" calculation details\"]})]}),hasHiddenProducts&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-yellow-800 dark:text-yellow-200\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Note:\"}),\" \",zeroArpuProducts.length,\" product\",zeroArpuProducts.length>1?'s':'',\" with $0.00 ARPU \",zeroArpuProducts.length>1?'are':'is',\" not displayed above.\",/*#__PURE__*/_jsx(\"div\",{className:\"text-xs mt-1\",children:zeroArpuProducts.length>5?\"\".concat(zeroArpuProducts.slice(0,5).map(_ref7=>{let[id]=_ref7;return id;}).join(', '),\" and \").concat(zeroArpuProducts.length-5,\" more...\"):zeroArpuProducts.map(_ref8=>{let[id]=_ref8;return id;}).join(', ')})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6\",children:sortedProducts.filter(_ref9=>{let[,productData]=_ref9;return(productData.arpu||0)>0;}).map(_ref0=>{let[productId,productData]=_ref0;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-5 hover:shadow-lg transition-all duration-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"font-semibold text-gray-900 dark:text-white text-sm leading-tight\",title:productId,children:productId.length>45?\"\".concat(productId.substring(0,45),\"...\"):productId})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-4 py-3 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border border-blue-200 dark:border-blue-700\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-blue-600 dark:text-blue-400\",children:formatCurrency(productData.arpu)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-blue-700 dark:text-blue-300 font-medium\",children:\"ARPU\"})]}),(productData.base_revenue>0||productData.lookback_revenue>0)&&(productData.base_non_refunded_users>0||productData.lookback_non_refunded_users>0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded border border-indigo-200 dark:border-indigo-700\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium text-indigo-800 dark:text-indigo-300 mb-2\",children:\"Period ARPU (Net Revenue \\xF7 Non-Refunded Users):\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-bold text-indigo-600 dark:text-indigo-400\",children:formatCurrency(productData.base_non_refunded_users>0?(productData.base_revenue-(productData.base_refunds||0))/productData.base_non_refunded_users:0)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-indigo-700 dark:text-indigo-300\",children:\"Base\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-indigo-600 dark:text-indigo-400\",children:[formatCurrency((productData.base_revenue||0)-(productData.base_refunds||0)),\" \\xF7 \",formatNumber(productData.base_non_refunded_users||0)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-bold text-indigo-600 dark:text-indigo-400\",children:formatCurrency(productData.lookback_non_refunded_users>0?(productData.lookback_revenue-(productData.lookback_refunds||0))/productData.lookback_non_refunded_users:0)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-indigo-700 dark:text-indigo-300\",children:\"Lookback\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-indigo-600 dark:text-indigo-400\",children:[formatCurrency((productData.lookback_revenue||0)-(productData.lookback_refunds||0)),\" \\xF7 \",formatNumber(productData.lookback_non_refunded_users||0)]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-gray-700 rounded\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-600 dark:text-gray-400\",children:productData.net_revenue?'Net Revenue':'Total Revenue'}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-semibold text-gray-900 dark:text-white\",children:[formatCurrency(productData.net_revenue||productData.total_revenue),productData.total_refunds>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600 dark:text-gray-400 mt-1\",children:[formatCurrency(productData.total_revenue),\" total - \",formatCurrency(productData.total_refunds),\" refunded\"]})]})]}),(productData.base_revenue>0||productData.lookback_revenue>0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"py-2 px-3 bg-amber-50 dark:bg-amber-900/20 rounded border border-amber-200 dark:border-amber-700\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium text-amber-800 dark:text-amber-300 mb-2\",children:\"Revenue Timeline:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-amber-700 dark:text-amber-400\",children:\"Base Period:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-amber-800 dark:text-amber-300 font-medium\",children:formatCurrency(productData.base_revenue||0)})]}),productData.base_refunds>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs ml-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600 dark:text-red-400\",children:\"Base Refunds:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-red-700 dark:text-red-400 font-medium\",children:[\"-\",formatCurrency(productData.base_refunds)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-amber-700 dark:text-amber-400\",children:\"Lookback Period:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-amber-800 dark:text-amber-300 font-medium\",children:formatCurrency(productData.lookback_revenue||0)})]}),productData.lookback_refunds>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs ml-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600 dark:text-red-400\",children:\"Lookback Refunds:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-red-700 dark:text-red-400 font-medium\",children:[\"-\",formatCurrency(productData.lookback_refunds)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs font-medium border-t border-amber-300 dark:border-amber-600 pt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-amber-800 dark:text-amber-300\",children:\"Net Revenue:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-amber-900 dark:text-amber-200\",children:formatCurrency(productData.net_revenue||productData.base_revenue+productData.lookback_revenue-(productData.base_refunds||0)-(productData.lookback_refunds||0))})]}),productData.base_revenue>0&&productData.lookback_revenue>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-amber-600 dark:text-amber-400 mt-1 pt-1 border-t border-amber-300 dark:border-amber-600\",children:[\"Base: \",(productData.base_revenue/(productData.base_revenue+productData.lookback_revenue)*100).toFixed(1),\"% \\u2022 Lookback: \",(productData.lookback_revenue/(productData.base_revenue+productData.lookback_revenue)*100).toFixed(1),\"%\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-gray-700 rounded\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-600 dark:text-gray-400\",children:\"Total Paying Users\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-semibold text-gray-900 dark:text-white\",children:[formatNumber(productData.paying_users),productData.refund_users>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-red-600 dark:text-red-400 ml-1\",children:[\"(\",formatNumber(productData.refund_users),\" refunded - \",(productData.refund_users/productData.paying_users*100).toFixed(1),\"%)\"]})]})]}),(productData.base_non_refunded_users>0||productData.lookback_non_refunded_users>0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"py-2 px-3 bg-purple-50 dark:bg-purple-900/20 rounded border border-purple-200 dark:border-purple-700\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium text-purple-800 dark:text-purple-300 mb-2\",children:\"User Timeline (Used in ARPU):\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-purple-700 dark:text-purple-400\",children:\"Base Period:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-purple-800 dark:text-purple-300 font-medium\",children:[formatNumber(productData.base_paying_users||0),\" paying\"]})]}),(productData.base_refund_users||0)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs ml-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600 dark:text-red-400\",children:\"Base Refunds:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-red-700 dark:text-red-400 font-medium\",children:[\"-\",formatNumber(productData.base_refund_users),\" users (\",(productData.base_refund_users/productData.base_paying_users*100).toFixed(1),\"%)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-purple-700 dark:text-purple-400\",children:\"Lookback Period:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-purple-800 dark:text-purple-300 font-medium\",children:[formatNumber(productData.lookback_paying_users||0),\" paying\"]})]}),(productData.lookback_refund_users||0)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs ml-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600 dark:text-red-400\",children:\"Lookback Refunds:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-red-700 dark:text-red-400 font-medium\",children:[\"-\",formatNumber(productData.lookback_refund_users),\" users (\",(productData.lookback_refund_users/productData.lookback_paying_users*100).toFixed(1),\"%)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs font-medium border-t border-purple-300 dark:border-purple-600 pt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-purple-800 dark:text-purple-300\",children:\"Non-Refunded Users:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-purple-900 dark:text-purple-200\",children:formatNumber((productData.base_non_refunded_users||0)+(productData.lookback_non_refunded_users||0))})]}),(productData.base_paying_users||0)>0&&(productData.lookback_paying_users||0)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-purple-600 dark:text-purple-400 mt-1 pt-1 border-t border-purple-300 dark:border-purple-600\",children:[\"Base: \",((productData.base_paying_users||0)/((productData.base_paying_users||0)+(productData.lookback_paying_users||0))*100).toFixed(1),\"% \\u2022 Lookback: \",((productData.lookback_paying_users||0)/((productData.base_paying_users||0)+(productData.lookback_paying_users||0))*100).toFixed(1),\"%\"]})]})]})]})]},productId);})}),showCalculationDetails&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 dark:bg-gray-800 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-lg font-semibold text-gray-900 dark:text-white mb-3\",children:\"Calculation Details\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-blue-800 dark:text-blue-200\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"ARPU Calculation Method:\"}),\" All ARPU values use \",/*#__PURE__*/_jsx(\"strong\",{children:\"Net Revenue \\xF7 Non-Refunded Users\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs mt-1 text-blue-700 dark:text-blue-300\",children:[\"\\u2022 Base ARPU = (Base Revenue - Base Refunds) \\xF7 Base Non-Refunded Users\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 Lookback ARPU = (Lookback Revenue - Lookback Refunds) \\xF7 Lookback Non-Refunded Users\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 Combined ARPU = Total Net Revenue \\xF7 Total Non-Refunded Users\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-100 dark:bg-gray-700\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-gray-700 dark:text-gray-300\",children:\"Product ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",children:\"Total Revenue\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",children:\"Base Revenue\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",children:\"Lookback Revenue\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",children:\"Base Refunds\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",children:\"Lookback Refunds\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",children:\"Net Revenue\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",children:\"Total Paying Users\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",children:\"Refund %\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",children:\"Non-Refunded Users\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",children:\"Base ARPU\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",children:\"Lookback ARPU\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",children:\"Combined ARPU\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",children:\"% of Net Revenue\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-gray-200 dark:divide-gray-600\",children:sortedProducts.map(_ref1=>{let[productId,productData]=_ref1;const netRevenue=productData.net_revenue||productData.total_revenue;const cohortNetRevenue=cohortWide.net_revenue||cohortWide.total_revenue;const revenuePercentage=cohortNetRevenue>0?netRevenue/cohortNetRevenue*100:0;const nonRefundedUsers=(productData.base_non_refunded_users||0)+(productData.lookback_non_refunded_users||0)||productData.paying_users;const refundPercentage=productData.paying_users>0?(productData.refund_users||0)/productData.paying_users*100:0;const baseARPU=productData.base_non_refunded_users>0?(productData.base_revenue-(productData.base_refunds||0))/productData.base_non_refunded_users:0;const lookbackARPU=productData.lookback_non_refunded_users>0?(productData.lookback_revenue-(productData.lookback_refunds||0))/productData.lookback_non_refunded_users:0;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50 dark:hover:bg-gray-700\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-gray-900 dark:text-white\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-xs truncate\",title:productId,children:productId})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",children:formatCurrency(productData.total_revenue)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",children:formatCurrency(productData.base_revenue||0)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",children:formatCurrency(productData.lookback_revenue||0)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-right text-red-600 dark:text-red-400\",children:formatCurrency(productData.base_refunds||0)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-right text-red-600 dark:text-red-400\",children:formatCurrency(productData.lookback_refunds||0)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",children:formatCurrency(productData.net_revenue||productData.total_revenue)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",children:formatNumber(productData.paying_users)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-right text-red-600 dark:text-red-400\",children:formatPercentage(refundPercentage)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-right text-purple-600 dark:text-purple-400 font-medium\",children:formatNumber(nonRefundedUsers)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-right text-indigo-600 dark:text-indigo-400\",children:formatCurrency(baseARPU)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-right text-indigo-600 dark:text-indigo-400\",children:formatCurrency(lookbackARPU)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-right font-semibold text-green-600 dark:text-green-400\",children:formatCurrency(productData.arpu)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",children:formatPercentage(revenuePercentage)})]},productId);})})]})})]})]})]});};export default ARPUDisplay;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","ARPUDisplay","_ref","_data$data","_data$data$structured","_data$data2","_data$structured_form","_data$data3","_data$data4","_data$data4$structure","_data$data4$structure2","_data$structured_form6","_data$structured_form7","_extendedCohortInfo","_extendedCohortInfo2","_extendedCohortInfo3","_extendedCohortInfo4","_extendedCohortInfo5","_extendedCohortInfo6","_extendedCohortInfo7","data","showCalculationDetails","setShowCalculationDetails","console","log","hasData","hasDataData","dataKeys","Object","keys","dataDataKeys","arpuData","cohortSummary","extendedCohortInfo","baseVsLookbackBreakdown","structured_format","arpu_analysis","_data$data$structured2","_data$data$structured3","_data$data$structured4","_data$data$structured5","cohort_analysis","cohort_breakdown","cohort_data","cleaned_cohort","metadata","legacy_format","_legacyData$metadata","legacyData","cohort_wide","arpu","total_revenue","paying_users","net_revenue","per_product","calculation_method","message","lookback_days","lookback_days_used","arpu_per_product","entries","forEach","_ref2","productId","event_count","base_users","lookback_users","total_users","comprehensive_cohort_size","base_percentage","lookback_percentage","user_count","cohort_size","total_events","_data$structured_form2","_data$structured_form3","_data$structured_form4","_data$structured_form5","_legacyData$metadata2","_ref3","arpu_data","cohort_summary","hasArpuData","className","children","JSON","stringify","cohortWide","perProduct","baseRevenue","base_revenue","lookbackRevenue","lookback_revenue","totalRevenue","baseContributionPct","base_contribution_pct","lookbackContributionPct","lookback_contribution_pct","lookbackDaysUsed","formatCurrency","value","undefined","isNaN","concat","Number","toLocaleString","minimumFractionDigits","maximumFractionDigits","formatNumber","formatPercentage","toFixed","sortedProducts","sort","_ref4","_ref5","a","b","zeroArpuProducts","filter","_ref6","productData","hasHiddenProducts","length","calculateSeparateARPU","baseUsers","base_non_refunded_users","lookbackUsers","lookback_non_refunded_users","baseRefunds","base_refunds","lookbackRefunds","lookback_refunds","baseNetRevenue","lookbackNetRevenue","baseARPU","lookbackARPU","separateARPU","total_refunds","total_paying_users","refund_users","base_paying_users","lookback_paying_users","base_refund_users","lookback_refund_users","onClick","slice","map","_ref7","id","join","_ref8","_ref9","_ref0","title","substring","_ref1","netRevenue","cohortNetRevenue","revenuePercentage","nonRefundedUsers","refundPercentage"],"sources":["/Users/joshuakaufman/untitled folder 3/orchestrator/dashboard/client/src/cohort-pipeline/components/ARPUDisplay.js"],"sourcesContent":["import React, { useState } from 'react';\n\nconst ARPUDisplay = ({ data }) => {\n    const [showCalculationDetails, setShowCalculationDetails] = useState(false);\n\n    // Comprehensive debugging\n    console.log('ARPUDisplay received data:', data);\n    console.log('Data structure:', {\n        hasData: !!data,\n        hasDataData: !!data?.data,\n        dataKeys: data ? Object.keys(data) : [],\n        dataDataKeys: data?.data ? Object.keys(data.data) : []\n    });\n\n    // COMPLETELY REWRITTEN: More robust data extraction\n    let arpuData = null;\n    let cohortSummary = null;\n    let extendedCohortInfo = null;\n    let baseVsLookbackBreakdown = null;\n\n    // Primary extraction from structured format\n    if (data?.data?.structured_format?.arpu_analysis) {\n        console.log('Using structured_format.arpu_analysis');\n        arpuData = data.data.structured_format.arpu_analysis;\n        \n        // Get cohort breakdown\n        extendedCohortInfo = data.data.structured_format.cohort_analysis?.cohort_breakdown;\n        cohortSummary = data.data.structured_format?.cohort_data?.cleaned_cohort?.metadata;\n        \n        console.log('Structured format data:', {\n            arpuData,\n            extendedCohortInfo,\n            cohortSummary\n        });\n    } \n    // Secondary extraction from legacy format\n    else if (data?.data?.legacy_format) {\n        console.log('Using legacy_format');\n        const legacyData = data.data.legacy_format;\n        \n        // Extract ARPU data from legacy format\n        arpuData = {\n            cohort_wide: {\n                arpu: legacyData.arpu || 0,\n                total_revenue: 0,\n                paying_users: 0,\n                net_revenue: 0\n            },\n            per_product: {},\n            metadata: {\n                calculation_method: 'legacy_format',\n                message: 'Data from legacy format',\n                lookback_days: legacyData.metadata?.lookback_days_used || 0\n            }\n        };\n        \n        // Convert legacy per-product ARPU to new format\n        if (legacyData.arpu_per_product) {\n            Object.entries(legacyData.arpu_per_product).forEach(([productId, arpu]) => {\n                arpuData.per_product[productId] = {\n                    arpu: arpu,\n                    total_revenue: 0,\n                    paying_users: 0,\n                    event_count: 0,\n                    net_revenue: 0\n                };\n            });\n        }\n        \n        // Extract extended cohort info\n        extendedCohortInfo = {\n            base_users: legacyData.base_users || 0,\n            lookback_users: legacyData.lookback_users || 0,\n            total_users: legacyData.comprehensive_cohort_size || 0,\n            base_percentage: 0,\n            lookback_percentage: 0\n        };\n        \n        if (extendedCohortInfo.total_users > 0) {\n            extendedCohortInfo.base_percentage = (extendedCohortInfo.base_users / extendedCohortInfo.total_users) * 100;\n            extendedCohortInfo.lookback_percentage = (extendedCohortInfo.lookback_users / extendedCohortInfo.total_users) * 100;\n        }\n        \n        cohortSummary = {\n            user_count: legacyData.cohort_size || 0,\n            event_count: legacyData.total_events || 0\n        };\n        \n        console.log('Legacy format data:', {\n            arpuData,\n            extendedCohortInfo,\n            cohortSummary,\n            legacyData\n        });\n    }\n    // Tertiary extraction from direct structured format\n    else if (data?.structured_format?.arpu_analysis) {\n        console.log('Using direct structured_format.arpu_analysis');\n        arpuData = data.structured_format.arpu_analysis;\n        extendedCohortInfo = data.structured_format.cohort_analysis?.cohort_breakdown;\n        cohortSummary = data.structured_format?.cohort_data?.cleaned_cohort?.metadata;\n    }\n    // Quaternary extraction from direct legacy format\n    else if (data?.legacy_format) {\n        console.log('Using direct legacy_format');\n        const legacyData = data.legacy_format;\n        \n        arpuData = {\n            cohort_wide: {\n                arpu: legacyData.arpu || 0,\n                total_revenue: 0,\n                paying_users: 0,\n                net_revenue: 0\n            },\n            per_product: {},\n            metadata: {\n                calculation_method: 'legacy_format',\n                message: 'Data from legacy format',\n                lookback_days: legacyData.metadata?.lookback_days_used || 0\n            }\n        };\n        \n        if (legacyData.arpu_per_product) {\n            Object.entries(legacyData.arpu_per_product).forEach(([productId, arpu]) => {\n                arpuData.per_product[productId] = {\n                    arpu: arpu,\n                    total_revenue: 0,\n                    paying_users: 0,\n                    event_count: 0,\n                    net_revenue: 0\n                };\n            });\n        }\n        \n        extendedCohortInfo = {\n            base_users: legacyData.base_users || 0,\n            lookback_users: legacyData.lookback_users || 0,\n            total_users: legacyData.comprehensive_cohort_size || 0,\n            base_percentage: 0,\n            lookback_percentage: 0\n        };\n        \n        if (extendedCohortInfo.total_users > 0) {\n            extendedCohortInfo.base_percentage = (extendedCohortInfo.base_users / extendedCohortInfo.total_users) * 100;\n            extendedCohortInfo.lookback_percentage = (extendedCohortInfo.lookback_users / extendedCohortInfo.total_users) * 100;\n        }\n        \n        cohortSummary = {\n            user_count: legacyData.cohort_size || 0,\n            event_count: legacyData.total_events || 0\n        };\n    }\n    // Final fallback from regular arpu_data\n    else if (data?.data?.arpu_data) {\n        console.log('Using regular arpu_data');\n        arpuData = data.data.arpu_data;\n        cohortSummary = data.data.cohort_summary;\n    }\n\n    console.log('FINAL EXTRACTED ARPU DATA:', {\n        arpuData,\n        extendedCohortInfo,\n        cohortSummary,\n        hasArpuData: !!arpuData\n    });\n\n    if (!arpuData) {\n        return (\n            <div className=\"text-center py-8\">\n                <p className=\"text-gray-500 dark:text-gray-400\">\n                    No ARPU data available. Run an analysis to see results.\n                </p>\n                <div className=\"mt-4 text-xs text-gray-400\">\n                    Debug: {JSON.stringify({\n                        hasData: !!data,\n                        hasDataData: !!data?.data,\n                        dataKeys: data ? Object.keys(data) : [],\n                        dataDataKeys: data?.data ? Object.keys(data.data) : []\n                    })}\n                </div>\n            </div>\n        );\n    }\n\n    const cohortWide = arpuData.cohort_wide || {};\n    const perProduct = arpuData.per_product || {};\n    const metadata = arpuData.metadata || {};\n\n    // Extract base vs lookback breakdown information\n    const baseRevenue = metadata.base_revenue || 0;\n    const lookbackRevenue = metadata.lookback_revenue || 0;\n    const totalRevenue = baseRevenue + lookbackRevenue || cohortWide.total_revenue || 0;\n    const baseContributionPct = metadata.base_contribution_pct || 0;\n    const lookbackContributionPct = metadata.lookback_contribution_pct || 0;\n    \n    // Get lookback days\n    const lookbackDaysUsed = metadata.lookback_days_used || \n                            metadata.lookback_days || \n                            (data?.data?.structured_format?.metadata?.lookback_days_used) ||\n                            (data?.structured_format?.metadata?.lookback_days_used) ||\n                            0;\n\n    const formatCurrency = (value) => {\n        if (value === null || value === undefined || isNaN(value)) return '$0.00';\n        return `$${Number(value).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;\n    };\n\n    const formatNumber = (value) => {\n        if (value === null || value === undefined || isNaN(value)) return '0';\n        return Number(value).toLocaleString();\n    };\n\n    const formatPercentage = (value) => {\n        if (value === null || value === undefined || isNaN(value)) return '0.0%';\n        return `${Number(value).toFixed(1)}%`;\n    };\n\n    // Sort products by ARPU (highest first)\n    const sortedProducts = Object.entries(perProduct).sort(([,a], [,b]) => (b.arpu || 0) - (a.arpu || 0));\n\n    // NEW: Check for products with zero ARPU that might be hidden\n    const zeroArpuProducts = Object.entries(perProduct).filter(([,productData]) => (productData.arpu || 0) === 0);\n    const hasHiddenProducts = zeroArpuProducts.length > 0;\n\n    // NEW: Calculate separate ARPU for base and lookback periods\n    const calculateSeparateARPU = () => {\n        const baseUsers = (metadata.base_non_refunded_users || 0);\n        const lookbackUsers = (metadata.lookback_non_refunded_users || 0);\n        const baseRevenue = (metadata.base_revenue || 0);\n        const lookbackRevenue = (metadata.lookback_revenue || 0);\n        const baseRefunds = (metadata.base_refunds || 0);\n        const lookbackRefunds = (metadata.lookback_refunds || 0);\n        \n        // Calculate NET revenue for each period (gross revenue - refunds)\n        const baseNetRevenue = baseRevenue - baseRefunds;\n        const lookbackNetRevenue = lookbackRevenue - lookbackRefunds;\n        \n        return {\n            baseARPU: baseUsers > 0 ? baseNetRevenue / baseUsers : 0,\n            lookbackARPU: lookbackUsers > 0 ? lookbackNetRevenue / lookbackUsers : 0,\n            hasData: baseUsers > 0 || lookbackUsers > 0,\n            baseNetRevenue,\n            lookbackNetRevenue\n        };\n    };\n\n    const separateARPU = calculateSeparateARPU();\n\n    return (\n        <div className=\"space-y-6\">\n            {/* Header with Key Metrics */}\n            <div className=\"mb-4\">\n                <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\n                    Cohort-Wide ARPU Analysis\n                </h3>\n                \n                {/* NEW: Extended Timeline Note */}\n                {(extendedCohortInfo?.base_users > 0 && extendedCohortInfo?.lookback_users > 0) && (\n                    <div className=\"mb-4 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800\">\n                        <div className=\"text-sm text-amber-800 dark:text-amber-200\">\n                            <strong>Extended Timeline Analysis:</strong> This ARPU calculation includes data from an extended timeline.\n                            <div className=\"mt-1 text-xs\">\n                                Total Users: {extendedCohortInfo?.total_users.toLocaleString()} ({extendedCohortInfo?.base_users.toLocaleString()} base period + {extendedCohortInfo?.lookback_users.toLocaleString()} lookback period)\n                                {lookbackDaysUsed > 0 && ` • Lookback: ${lookbackDaysUsed} days`}\n                            </div>\n                        </div>\n                    </div>\n                )}\n\n                {/* NEW: Separate Base vs Lookback ARPU Quick View */}\n                {separateARPU.hasData && (\n                    <div className=\"mb-4 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg border border-indigo-200 dark:border-indigo-800\">\n                        <div className=\"text-sm font-medium text-indigo-800 dark:text-indigo-200 mb-2\">\n                            Quick ARPU Comparison by Period (Net Revenue ÷ Non-Refunded Users):\n                        </div>\n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <div className=\"text-center\">\n                                <div className=\"text-lg font-bold text-indigo-600 dark:text-indigo-400\">\n                                    {formatCurrency(separateARPU.baseARPU)}\n                                </div>\n                                <div className=\"text-xs text-indigo-700 dark:text-indigo-300\">\n                                    Base Period ARPU\n                                </div>\n                                <div className=\"text-xs text-indigo-600 dark:text-indigo-400\">\n                                    {formatCurrency(separateARPU.baseNetRevenue)} ÷ {formatNumber(metadata.base_non_refunded_users || 0)} users\n                                </div>\n                            </div>\n                            <div className=\"text-center\">\n                                <div className=\"text-lg font-bold text-indigo-600 dark:text-indigo-400\">\n                                    {formatCurrency(separateARPU.lookbackARPU)}\n                                </div>\n                                <div className=\"text-xs text-indigo-700 dark:text-indigo-300\">\n                                    Lookback Period ARPU\n                                </div>\n                                <div className=\"text-xs text-indigo-600 dark:text-indigo-400\">\n                                    {formatCurrency(separateARPU.lookbackNetRevenue)} ÷ {formatNumber(metadata.lookback_non_refunded_users || 0)} users\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                )}\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n                    <div className=\"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800\">\n                        <div className=\"text-3xl font-bold text-blue-600 dark:text-blue-400\">\n                            {formatCurrency(cohortWide.arpu)}\n                        </div>\n                        <div className=\"text-sm text-blue-700 dark:text-blue-300\">\n                            ARPU (Net Revenue ÷ Non-Refunded Users)\n                        </div>\n                        <div className=\"text-xs text-blue-600 dark:text-blue-400 mt-1\">\n                            {formatNumber((metadata.base_non_refunded_users || 0) + (metadata.lookback_non_refunded_users || 0) || cohortWide.paying_users)} users, {formatCurrency(cohortWide.net_revenue || cohortWide.total_revenue)} net revenue\n                        </div>\n                        \n                        {/* Enhanced: Comprehensive Base vs Lookback breakdown */}\n                        {(baseRevenue > 0 || lookbackRevenue > 0) && totalRevenue > 0 && (\n                            <div className=\"mt-3 pt-3 border-t border-blue-200 dark:border-blue-700\">\n                                <div className=\"text-xs font-medium text-blue-800 dark:text-blue-300 mb-2\">\n                                    Revenue Timeline Breakdown:\n                                </div>\n                                <div className=\"space-y-1\">\n                                    <div className=\"flex justify-between text-xs\">\n                                        <span className=\"text-blue-500 dark:text-blue-500\">Base Period:</span>\n                                        <span className=\"text-blue-600 dark:text-blue-400\">\n                                            {formatCurrency(baseRevenue)} ({baseContributionPct.toFixed(1)}%)\n                                        </span>\n                                    </div>\n                                    <div className=\"flex justify-between text-xs\">\n                                        <span className=\"text-blue-500 dark:text-blue-500\">Lookback Period:</span>\n                                        <span className=\"text-blue-600 dark:text-blue-400\">\n                                            {formatCurrency(lookbackRevenue)} ({lookbackContributionPct.toFixed(1)}%)\n                                        </span>\n                                    </div>\n                                    <div className=\"flex justify-between text-xs font-medium border-t border-blue-200 dark:border-blue-700 pt-1\">\n                                        <span className=\"text-blue-600 dark:text-blue-400\">Total:</span>\n                                        <span className=\"text-blue-700 dark:text-blue-300\">\n                                            {formatCurrency(totalRevenue)}\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n                    </div>\n                    \n                    <div className=\"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                        <div className=\"text-2xl font-semibold text-gray-700 dark:text-gray-300\">\n                            {formatCurrency(cohortWide.total_revenue || totalRevenue)}\n                        </div>\n                        <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                            Total Revenue\n                        </div>\n                        {cohortWide.total_refunds > 0 && (\n                            <div className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\n                                {formatCurrency(cohortWide.total_refunds)} refunded\n                            </div>\n                        )}\n                        \n                        {/* Enhanced: Detailed revenue breakdown with period-specific refunds */}\n                        {(baseRevenue > 0 || lookbackRevenue > 0) && (\n                            <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600\">\n                                <div className=\"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                                    Revenue Sources:\n                                </div>\n                                <div className=\"space-y-1\">\n                                    <div className=\"flex justify-between text-xs\">\n                                        <span className=\"text-gray-500 dark:text-gray-500\">Base Period:</span>\n                                        <span className=\"text-gray-600 dark:text-gray-400\">\n                                            {formatCurrency(baseRevenue)}\n                                        </span>\n                                    </div>\n                                    {/* Base period refunds */}\n                                    {(metadata.base_refunds > 0) && (\n                                        <div className=\"flex justify-between text-xs ml-2\">\n                                            <span className=\"text-red-500 dark:text-red-400\">Base Refunds:</span>\n                                            <span className=\"text-red-600 dark:text-red-400\">\n                                                -{formatCurrency(metadata.base_refunds)}\n                                            </span>\n                                        </div>\n                                    )}\n                                    <div className=\"flex justify-between text-xs\">\n                                        <span className=\"text-gray-500 dark:text-gray-500\">Lookback Period:</span>\n                                        <span className=\"text-gray-600 dark:text-gray-400\">\n                                            {formatCurrency(lookbackRevenue)}\n                                        </span>\n                                    </div>\n                                    {/* Lookback period refunds */}\n                                    {(metadata.lookback_refunds > 0) && (\n                                        <div className=\"flex justify-between text-xs ml-2\">\n                                            <span className=\"text-red-500 dark:text-red-400\">Lookback Refunds:</span>\n                                            <span className=\"text-red-600 dark:text-red-400\">\n                                                -{formatCurrency(metadata.lookback_refunds)}\n                                            </span>\n                                        </div>\n                                    )}\n                                    {/* Fallback: Total refunds if period-specific not available */}\n                                    {cohortWide.total_refunds > 0 && !(metadata.base_refunds > 0) && !(metadata.lookback_refunds > 0) && (\n                                        <div className=\"flex justify-between text-xs text-red-600 dark:text-red-400\">\n                                            <span>Total Refunds:</span>\n                                            <span>-{formatCurrency(cohortWide.total_refunds)}</span>\n                                        </div>\n                                    )}\n                                    <div className=\"flex justify-between text-xs font-medium border-t border-gray-200 dark:border-gray-600 pt-1\">\n                                        <span className=\"text-gray-600 dark:text-gray-400\">Net Revenue:</span>\n                                        <span className=\"text-gray-700 dark:text-gray-300\">\n                                            {formatCurrency(cohortWide.net_revenue || totalRevenue)}\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n                    </div>\n                    \n                    <div className=\"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                        <div className=\"text-2xl font-semibold text-gray-700 dark:text-gray-300\">\n                            {formatNumber(cohortWide.total_paying_users || cohortWide.paying_users)}\n                        </div>\n                        <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                            Total Paying Users\n                        </div>\n                        {cohortWide.refund_users > 0 && (\n                            <div className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\n                                {formatNumber(cohortWide.refund_users)} refunded ({((cohortWide.refund_users / (cohortWide.total_paying_users || cohortWide.paying_users)) * 100).toFixed(1)}%)\n                            </div>\n                        )}\n                        \n                        {/* Enhanced: User timeline breakdown with refund information */}\n                        {((metadata.base_paying_users || 0) > 0 || (metadata.lookback_paying_users || 0) > 0) && (\n                            <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600\">\n                                <div className=\"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                                    User Timeline Distribution:\n                                </div>\n                                <div className=\"space-y-1\">\n                                    <div className=\"flex justify-between text-xs\">\n                                        <span className=\"text-gray-500 dark:text-gray-500\">Base Period:</span>\n                                        <span className=\"text-gray-600 dark:text-gray-400\">\n                                            {formatNumber(metadata.base_paying_users || 0)} paying\n                                        </span>\n                                    </div>\n                                    {(metadata.base_refund_users || 0) > 0 && (\n                                        <div className=\"flex justify-between text-xs ml-2\">\n                                            <span className=\"text-red-500 dark:text-red-400\">Base Refunds:</span>\n                                            <span className=\"text-red-600 dark:text-red-400\">\n                                                {formatNumber(metadata.base_refund_users)} users ({((metadata.base_refund_users / metadata.base_paying_users) * 100).toFixed(1)}%)\n                                            </span>\n                                        </div>\n                                    )}\n                                    <div className=\"flex justify-between text-xs\">\n                                        <span className=\"text-gray-500 dark:text-gray-500\">Lookback Period:</span>\n                                        <span className=\"text-gray-600 dark:text-gray-400\">\n                                            {formatNumber(metadata.lookback_paying_users || 0)} paying\n                                        </span>\n                                    </div>\n                                    {(metadata.lookback_refund_users || 0) > 0 && (\n                                        <div className=\"flex justify-between text-xs ml-2\">\n                                            <span className=\"text-red-500 dark:text-red-400\">Lookback Refunds:</span>\n                                            <span className=\"text-red-600 dark:text-red-400\">\n                                                {formatNumber(metadata.lookback_refund_users)} users ({((metadata.lookback_refund_users / metadata.lookback_paying_users) * 100).toFixed(1)}%)\n                                            </span>\n                                        </div>\n                                    )}\n                                    <div className=\"flex justify-between text-xs font-medium border-t border-gray-200 dark:border-gray-600 pt-1\">\n                                        <span className=\"text-gray-600 dark:text-gray-400\">Non-Refunded Users:</span>\n                                        <span className=\"text-gray-700 dark:text-gray-300\">\n                                            {formatNumber((metadata.base_non_refunded_users || 0) + (metadata.lookback_non_refunded_users || 0))}\n                                        </span>\n                                    </div>\n                                    {lookbackDaysUsed > 0 && (\n                                        <div className=\"text-xs text-gray-500 dark:text-gray-500 mt-1\">\n                                            Lookback: {lookbackDaysUsed} days\n                                        </div>\n                                    )}\n                                </div>\n                            </div>\n                        )}\n                        \n                        {/* Fallback: Extended cohort info if metadata not available */}\n                        {!((metadata.base_paying_users || 0) > 0 || (metadata.lookback_paying_users || 0) > 0) && \n                         (extendedCohortInfo?.base_users > 0 && extendedCohortInfo?.lookback_users > 0) && (\n                            <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600\">\n                                <div className=\"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                                    User Timeline Distribution:\n                                </div>\n                                <div className=\"space-y-1\">\n                                    <div className=\"flex justify-between text-xs\">\n                                        <span className=\"text-gray-500 dark:text-gray-500\">Base Period:</span>\n                                        <span className=\"text-gray-600 dark:text-gray-400\">\n                                            {formatNumber(extendedCohortInfo.base_users)} ({extendedCohortInfo.base_percentage.toFixed(1)}%)\n                                        </span>\n                                    </div>\n                                    <div className=\"flex justify-between text-xs\">\n                                        <span className=\"text-gray-500 dark:text-gray-500\">Lookback Period:</span>\n                                        <span className=\"text-gray-600 dark:text-gray-400\">\n                                            {formatNumber(extendedCohortInfo.lookback_users)} ({extendedCohortInfo.lookback_percentage.toFixed(1)}%)\n                                        </span>\n                                    </div>\n                                    <div className=\"flex justify-between text-xs font-medium border-t border-gray-200 dark:border-gray-600 pt-1\">\n                                        <span className=\"text-gray-600 dark:text-gray-400\">Total Extended:</span>\n                                        <span className=\"text-gray-700 dark:text-gray-300\">\n                                            {formatNumber(extendedCohortInfo.total_users)}\n                                        </span>\n                                    </div>\n                                    {lookbackDaysUsed > 0 && (\n                                        <div className=\"text-xs text-gray-500 dark:text-gray-500 mt-1\">\n                                            Lookback: {lookbackDaysUsed} days\n                                        </div>\n                                    )}\n                                </div>\n                            </div>\n                        )}\n                    </div>\n                </div>\n\n                {/* Method Badge */}\n                {metadata.calculation_method && (\n                    <div className=\"flex items-center space-x-2 mb-4\">\n                        <span className={`px-3 py-1 text-sm rounded-full ${\n                            metadata.calculation_method === 'standard' \n                                ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300'\n                                : metadata.calculation_method === 'extended_lookback'\n                                ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300'\n                                : 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300'\n                        }`}>\n                            {metadata.calculation_method === 'standard' ? 'Standard Calculation - No Lookback Used' : \n                             metadata.calculation_method === 'extended_lookback' ? `Extended Lookback - ${metadata.lookback_days} Days` : 'Fallback Method - Insufficient Data'}\n                        </span>\n                        {metadata.lookback_days > 0 && metadata.calculation_method === 'extended_lookback' && (\n                            <span className=\"px-3 py-1 text-sm bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 rounded-full\">\n                                Extended by {metadata.lookback_days} days for sufficient sample size\n                            </span>\n                        )}\n                    </div>\n                )}\n            </div>\n\n            {/* Per-Product ARPU Breakdown */}\n            {sortedProducts.length > 0 && (\n                <div>\n                    <div className=\"flex items-center justify-between mb-4\">\n                        <h4 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                            ARPU by Product ({sortedProducts.length} products{hasHiddenProducts ? ` + ${zeroArpuProducts.length} with $0 ARPU` : ''})\n                        </h4>\n                        <button\n                            onClick={() => setShowCalculationDetails(!showCalculationDetails)}\n                            className=\"text-sm text-blue-600 dark:text-blue-400 hover:underline\"\n                        >\n                            {showCalculationDetails ? 'Hide' : 'Show'} calculation details\n                        </button>\n                    </div>\n\n                    {/* NEW: Warning about hidden zero ARPU products */}\n                    {hasHiddenProducts && (\n                        <div className=\"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800\">\n                            <div className=\"text-sm text-yellow-800 dark:text-yellow-200\">\n                                <strong>Note:</strong> {zeroArpuProducts.length} product{zeroArpuProducts.length > 1 ? 's' : ''} with $0.00 ARPU {zeroArpuProducts.length > 1 ? 'are' : 'is'} not displayed above.\n                                <div className=\"text-xs mt-1\">\n                                    {zeroArpuProducts.length > 5 \n                                        ? `${zeroArpuProducts.slice(0, 5).map(([id]) => id).join(', ')} and ${zeroArpuProducts.length - 5} more...`\n                                        : zeroArpuProducts.map(([id]) => id).join(', ')\n                                    }\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {/* Product Cards */}\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6\">\n                        {sortedProducts.filter(([,productData]) => (productData.arpu || 0) > 0).map(([productId, productData]) => (\n                            <div\n                                key={productId}\n                                className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-5 hover:shadow-lg transition-all duration-200\"\n                            >\n                                {/* Product Name */}\n                                <div className=\"mb-4\">\n                                    <h5 className=\"font-semibold text-gray-900 dark:text-white text-sm leading-tight\" title={productId}>\n                                        {productId.length > 45 ? `${productId.substring(0, 45)}...` : productId}\n                                    </h5>\n                                </div>\n\n                                {/* Main ARPU Display */}\n                                <div className=\"text-center mb-4 py-3 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border border-blue-200 dark:border-blue-700\">\n                                    <div className=\"text-2xl font-bold text-blue-600 dark:text-blue-400\">\n                                        {formatCurrency(productData.arpu)}\n                                    </div>\n                                    <div className=\"text-xs text-blue-700 dark:text-blue-300 font-medium\">\n                                        ARPU\n                                    </div>\n                                </div>\n\n                                {/* NEW: Separate Base vs Lookback ARPU for this product */}\n                                {(productData.base_revenue > 0 || productData.lookback_revenue > 0) && \n                                 (productData.base_non_refunded_users > 0 || productData.lookback_non_refunded_users > 0) && (\n                                    <div className=\"mb-4 p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded border border-indigo-200 dark:border-indigo-700\">\n                                        <div className=\"text-xs font-medium text-indigo-800 dark:text-indigo-300 mb-2\">Period ARPU (Net Revenue ÷ Non-Refunded Users):</div>\n                                        <div className=\"grid grid-cols-2 gap-2\">\n                                            <div className=\"text-center\">\n                                                <div className=\"text-sm font-bold text-indigo-600 dark:text-indigo-400\">\n                                                    {formatCurrency(productData.base_non_refunded_users > 0 ? (productData.base_revenue - (productData.base_refunds || 0)) / productData.base_non_refunded_users : 0)}\n                                                </div>\n                                                <div className=\"text-xs text-indigo-700 dark:text-indigo-300\">Base</div>\n                                                <div className=\"text-xs text-indigo-600 dark:text-indigo-400\">\n                                                    {formatCurrency((productData.base_revenue || 0) - (productData.base_refunds || 0))} ÷ {formatNumber(productData.base_non_refunded_users || 0)}\n                                                </div>\n                                            </div>\n                                            <div className=\"text-center\">\n                                                <div className=\"text-sm font-bold text-indigo-600 dark:text-indigo-400\">\n                                                    {formatCurrency(productData.lookback_non_refunded_users > 0 ? (productData.lookback_revenue - (productData.lookback_refunds || 0)) / productData.lookback_non_refunded_users : 0)}\n                                                </div>\n                                                <div className=\"text-xs text-indigo-700 dark:text-indigo-300\">Lookback</div>\n                                                <div className=\"text-xs text-indigo-600 dark:text-indigo-400\">\n                                                    {formatCurrency((productData.lookback_revenue || 0) - (productData.lookback_refunds || 0))} ÷ {formatNumber(productData.lookback_non_refunded_users || 0)}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                )}\n                                \n                                {/* Revenue and User Stats */}\n                                <div className=\"space-y-3\">\n                                    <div className=\"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-gray-700 rounded\">\n                                        <span className=\"text-xs text-gray-600 dark:text-gray-400\">\n                                            {productData.net_revenue ? 'Net Revenue' : 'Total Revenue'}\n                                        </span>\n                                        <span className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                                            {formatCurrency(productData.net_revenue || productData.total_revenue)}\n                                            {productData.total_refunds > 0 && (\n                                                <div className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\n                                                    {formatCurrency(productData.total_revenue)} total - {formatCurrency(productData.total_refunds)} refunded\n                                                </div>\n                                            )}\n                                        </span>\n                                    </div>\n                                    \n                                    {/* Enhanced: Comprehensive Base vs Lookback revenue breakdown with period-specific refunds */}\n                                    {(productData.base_revenue > 0 || productData.lookback_revenue > 0) && (\n                                        <div className=\"py-2 px-3 bg-amber-50 dark:bg-amber-900/20 rounded border border-amber-200 dark:border-amber-700\">\n                                            <div className=\"text-xs font-medium text-amber-800 dark:text-amber-300 mb-2\">Revenue Timeline:</div>\n                                            <div className=\"space-y-1\">\n                                                <div className=\"flex justify-between text-xs\">\n                                                    <span className=\"text-amber-700 dark:text-amber-400\">Base Period:</span>\n                                                    <span className=\"text-amber-800 dark:text-amber-300 font-medium\">\n                                                        {formatCurrency(productData.base_revenue || 0)}\n                                                    </span>\n                                                </div>\n                                                {/* NEW: Base period refunds for this product */}\n                                                {productData.base_refunds > 0 && (\n                                                    <div className=\"flex justify-between text-xs ml-2\">\n                                                        <span className=\"text-red-600 dark:text-red-400\">Base Refunds:</span>\n                                                        <span className=\"text-red-700 dark:text-red-400 font-medium\">\n                                                            -{formatCurrency(productData.base_refunds)}\n                                                        </span>\n                                                    </div>\n                                                )}\n                                                <div className=\"flex justify-between text-xs\">\n                                                    <span className=\"text-amber-700 dark:text-amber-400\">Lookback Period:</span>\n                                                    <span className=\"text-amber-800 dark:text-amber-300 font-medium\">\n                                                        {formatCurrency(productData.lookback_revenue || 0)}\n                                                    </span>\n                                                </div>\n                                                {/* NEW: Lookback period refunds for this product */}\n                                                {productData.lookback_refunds > 0 && (\n                                                    <div className=\"flex justify-between text-xs ml-2\">\n                                                        <span className=\"text-red-600 dark:text-red-400\">Lookback Refunds:</span>\n                                                        <span className=\"text-red-700 dark:text-red-400 font-medium\">\n                                                            -{formatCurrency(productData.lookback_refunds)}\n                                                        </span>\n                                                    </div>\n                                                )}\n                                                {/* Net revenue calculation */}\n                                                <div className=\"flex justify-between text-xs font-medium border-t border-amber-300 dark:border-amber-600 pt-1\">\n                                                    <span className=\"text-amber-800 dark:text-amber-300\">Net Revenue:</span>\n                                                    <span className=\"text-amber-900 dark:text-amber-200\">\n                                                        {formatCurrency(productData.net_revenue || (productData.base_revenue + productData.lookback_revenue - (productData.base_refunds || 0) - (productData.lookback_refunds || 0)))}\n                                                    </span>\n                                                </div>\n                                                {(productData.base_revenue > 0 && productData.lookback_revenue > 0) && (\n                                                    <div className=\"text-xs text-amber-600 dark:text-amber-400 mt-1 pt-1 border-t border-amber-300 dark:border-amber-600\">\n                                                        Base: {((productData.base_revenue / (productData.base_revenue + productData.lookback_revenue)) * 100).toFixed(1)}% • \n                                                        Lookback: {((productData.lookback_revenue / (productData.base_revenue + productData.lookback_revenue)) * 100).toFixed(1)}%\n                                                    </div>\n                                                )}\n                                            </div>\n                                        </div>\n                                    )}\n                                    \n                                    <div className=\"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-gray-700 rounded\">\n                                        <span className=\"text-xs text-gray-600 dark:text-gray-400\">Total Paying Users</span>\n                                        <span className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                                            {formatNumber(productData.paying_users)}\n                                            {productData.refund_users > 0 && (\n                                                <span className=\"text-xs text-red-600 dark:text-red-400 ml-1\">\n                                                    ({formatNumber(productData.refund_users)} refunded - {((productData.refund_users / productData.paying_users) * 100).toFixed(1)}%)\n                                                </span>\n                                            )}\n                                        </span>\n                                    </div>\n                                    \n                                    {/* Non-refunded users breakdown */}\n                                    {(productData.base_non_refunded_users > 0 || productData.lookback_non_refunded_users > 0) && (\n                                        <div className=\"py-2 px-3 bg-purple-50 dark:bg-purple-900/20 rounded border border-purple-200 dark:border-purple-700\">\n                                            <div className=\"text-xs font-medium text-purple-800 dark:text-purple-300 mb-2\">User Timeline (Used in ARPU):</div>\n                                            <div className=\"space-y-1\">\n                                                <div className=\"flex justify-between text-xs\">\n                                                    <span className=\"text-purple-700 dark:text-purple-400\">Base Period:</span>\n                                                    <span className=\"text-purple-800 dark:text-purple-300 font-medium\">\n                                                        {formatNumber(productData.base_paying_users || 0)} paying\n                                                    </span>\n                                                </div>\n                                                {(productData.base_refund_users || 0) > 0 && (\n                                                    <div className=\"flex justify-between text-xs ml-2\">\n                                                        <span className=\"text-red-600 dark:text-red-400\">Base Refunds:</span>\n                                                        <span className=\"text-red-700 dark:text-red-400 font-medium\">\n                                                            -{formatNumber(productData.base_refund_users)} users ({((productData.base_refund_users / productData.base_paying_users) * 100).toFixed(1)}%)\n                                                        </span>\n                                                    </div>\n                                                )}\n                                                <div className=\"flex justify-between text-xs\">\n                                                    <span className=\"text-purple-700 dark:text-purple-400\">Lookback Period:</span>\n                                                    <span className=\"text-purple-800 dark:text-purple-300 font-medium\">\n                                                        {formatNumber(productData.lookback_paying_users || 0)} paying\n                                                    </span>\n                                                </div>\n                                                {(productData.lookback_refund_users || 0) > 0 && (\n                                                    <div className=\"flex justify-between text-xs ml-2\">\n                                                        <span className=\"text-red-600 dark:text-red-400\">Lookback Refunds:</span>\n                                                        <span className=\"text-red-700 dark:text-red-400 font-medium\">\n                                                            -{formatNumber(productData.lookback_refund_users)} users ({((productData.lookback_refund_users / productData.lookback_paying_users) * 100).toFixed(1)}%)\n                                                        </span>\n                                                    </div>\n                                                )}\n                                                <div className=\"flex justify-between text-xs font-medium border-t border-purple-300 dark:border-purple-600 pt-1\">\n                                                    <span className=\"text-purple-800 dark:text-purple-300\">Non-Refunded Users:</span>\n                                                    <span className=\"text-purple-900 dark:text-purple-200\">\n                                                        {formatNumber((productData.base_non_refunded_users || 0) + (productData.lookback_non_refunded_users || 0))}\n                                                    </span>\n                                                </div>\n                                                {((productData.base_paying_users || 0) > 0 && (productData.lookback_paying_users || 0) > 0) && (\n                                                    <div className=\"text-xs text-purple-600 dark:text-purple-400 mt-1 pt-1 border-t border-purple-300 dark:border-purple-600\">\n                                                        Base: {(((productData.base_paying_users || 0) / ((productData.base_paying_users || 0) + (productData.lookback_paying_users || 0))) * 100).toFixed(1)}% • \n                                                        Lookback: {(((productData.lookback_paying_users || 0) / ((productData.base_paying_users || 0) + (productData.lookback_paying_users || 0))) * 100).toFixed(1)}%\n                                                    </div>\n                                                )}\n                                            </div>\n                                        </div>\n                                    )}\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n\n                    {/* Detailed Table View */}\n                    {showCalculationDetails && (\n                        <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-4\">\n                            <h5 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-3\">\n                                Calculation Details\n                            </h5>\n                            \n                            {/* NEW: Calculation Method Note */}\n                            <div className=\"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800\">\n                                <div className=\"text-sm text-blue-800 dark:text-blue-200\">\n                                    <strong>ARPU Calculation Method:</strong> All ARPU values use <strong>Net Revenue ÷ Non-Refunded Users</strong>\n                                    <div className=\"text-xs mt-1 text-blue-700 dark:text-blue-300\">\n                                        • Base ARPU = (Base Revenue - Base Refunds) ÷ Base Non-Refunded Users<br/>\n                                        • Lookback ARPU = (Lookback Revenue - Lookback Refunds) ÷ Lookback Non-Refunded Users<br/>\n                                        • Combined ARPU = Total Net Revenue ÷ Total Non-Refunded Users\n                                    </div>\n                                </div>\n                            </div>\n                            \n                            <div className=\"overflow-x-auto\">\n                                <table className=\"min-w-full text-sm\">\n                                    <thead className=\"bg-gray-100 dark:bg-gray-700\">\n                                        <tr>\n                                            <th className=\"px-3 py-2 text-left text-gray-700 dark:text-gray-300\">Product ID</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Total Revenue</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Base Revenue</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Lookback Revenue</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Base Refunds</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Lookback Refunds</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Net Revenue</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Total Paying Users</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Refund %</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Non-Refunded Users</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Base ARPU</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Lookback ARPU</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Combined ARPU</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">% of Net Revenue</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody className=\"divide-y divide-gray-200 dark:divide-gray-600\">\n                                        {sortedProducts.map(([productId, productData]) => {\n                                            const netRevenue = productData.net_revenue || productData.total_revenue;\n                                            const cohortNetRevenue = cohortWide.net_revenue || cohortWide.total_revenue;\n                                            const revenuePercentage = cohortNetRevenue > 0 \n                                                ? (netRevenue / cohortNetRevenue) * 100 \n                                                : 0;\n                                            const nonRefundedUsers = (productData.base_non_refunded_users || 0) + (productData.lookback_non_refunded_users || 0) || productData.paying_users;\n                                            const refundPercentage = productData.paying_users > 0 ? ((productData.refund_users || 0) / productData.paying_users) * 100 : 0;\n                                            const baseARPU = productData.base_non_refunded_users > 0 ? (productData.base_revenue - (productData.base_refunds || 0)) / productData.base_non_refunded_users : 0;\n                                            const lookbackARPU = productData.lookback_non_refunded_users > 0 ? (productData.lookback_revenue - (productData.lookback_refunds || 0)) / productData.lookback_non_refunded_users : 0;\n                                            \n                                            return (\n                                                <tr key={productId} className=\"hover:bg-gray-50 dark:hover:bg-gray-700\">\n                                                    <td className=\"px-3 py-2 text-gray-900 dark:text-white\">\n                                                        <div className=\"max-w-xs truncate\" title={productId}>\n                                                            {productId}\n                                                        </div>\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">\n                                                        {formatCurrency(productData.total_revenue)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">\n                                                        {formatCurrency(productData.base_revenue || 0)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">\n                                                        {formatCurrency(productData.lookback_revenue || 0)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-red-600 dark:text-red-400\">\n                                                        {formatCurrency(productData.base_refunds || 0)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-red-600 dark:text-red-400\">\n                                                        {formatCurrency(productData.lookback_refunds || 0)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">\n                                                        {formatCurrency(productData.net_revenue || productData.total_revenue)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">\n                                                        {formatNumber(productData.paying_users)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-red-600 dark:text-red-400\">\n                                                        {formatPercentage(refundPercentage)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-purple-600 dark:text-purple-400 font-medium\">\n                                                        {formatNumber(nonRefundedUsers)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-indigo-600 dark:text-indigo-400\">\n                                                        {formatCurrency(baseARPU)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-indigo-600 dark:text-indigo-400\">\n                                                        {formatCurrency(lookbackARPU)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right font-semibold text-green-600 dark:text-green-400\">\n                                                        {formatCurrency(productData.arpu)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">\n                                                        {formatPercentage(revenuePercentage)}\n                                                    </td>\n                                                </tr>\n                                            );\n                                        })}\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n                    )}\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default ARPUDisplay; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}