{"ast":null,"code":"var _jsxFileName = \"/Users/joshuakaufman/untitled folder 3/orchestrator/dashboard/client/src/cohort-pipeline/components/ARPUDisplay.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ARPUDisplay = ({\n  data\n}) => {\n  _s();\n  var _data$data, _data$data$structured, _data$data2, _data$structured_form, _data$data3, _data$data4, _data$data4$structure, _data$data4$structure2, _data$structured_form6, _data$structured_form7, _extendedCohortInfo, _extendedCohortInfo2, _extendedCohortInfo3, _extendedCohortInfo4, _extendedCohortInfo5, _extendedCohortInfo6, _extendedCohortInfo7;\n  const [showCalculationDetails, setShowCalculationDetails] = useState(false);\n\n  // Comprehensive debugging\n  console.log('ARPUDisplay received data:', data);\n  console.log('Data structure:', {\n    hasData: !!data,\n    hasDataData: !!(data !== null && data !== void 0 && data.data),\n    dataKeys: data ? Object.keys(data) : [],\n    dataDataKeys: data !== null && data !== void 0 && data.data ? Object.keys(data.data) : []\n  });\n\n  // COMPLETELY REWRITTEN: More robust data extraction\n  let arpuData = null;\n  let cohortSummary = null;\n  let extendedCohortInfo = null;\n  let baseVsLookbackBreakdown = null;\n\n  // Primary extraction from structured format\n  if (data !== null && data !== void 0 && (_data$data = data.data) !== null && _data$data !== void 0 && (_data$data$structured = _data$data.structured_format) !== null && _data$data$structured !== void 0 && _data$data$structured.arpu_analysis) {\n    var _data$data$structured2, _data$data$structured3, _data$data$structured4, _data$data$structured5;\n    console.log('Using structured_format.arpu_analysis');\n    arpuData = data.data.structured_format.arpu_analysis;\n\n    // Get cohort breakdown\n    extendedCohortInfo = (_data$data$structured2 = data.data.structured_format.cohort_analysis) === null || _data$data$structured2 === void 0 ? void 0 : _data$data$structured2.cohort_breakdown;\n    cohortSummary = (_data$data$structured3 = data.data.structured_format) === null || _data$data$structured3 === void 0 ? void 0 : (_data$data$structured4 = _data$data$structured3.cohort_data) === null || _data$data$structured4 === void 0 ? void 0 : (_data$data$structured5 = _data$data$structured4.cleaned_cohort) === null || _data$data$structured5 === void 0 ? void 0 : _data$data$structured5.metadata;\n    console.log('Structured format data:', {\n      arpuData,\n      extendedCohortInfo,\n      cohortSummary\n    });\n  }\n  // Secondary extraction from legacy format\n  else if (data !== null && data !== void 0 && (_data$data2 = data.data) !== null && _data$data2 !== void 0 && _data$data2.legacy_format) {\n    var _legacyData$metadata;\n    console.log('Using legacy_format');\n    const legacyData = data.data.legacy_format;\n\n    // Extract ARPU data from legacy format\n    arpuData = {\n      cohort_wide: {\n        arpu: legacyData.arpu || 0,\n        total_revenue: 0,\n        paying_users: 0,\n        net_revenue: 0\n      },\n      per_product: {},\n      metadata: {\n        calculation_method: 'legacy_format',\n        message: 'Data from legacy format',\n        lookback_days: ((_legacyData$metadata = legacyData.metadata) === null || _legacyData$metadata === void 0 ? void 0 : _legacyData$metadata.lookback_days_used) || 0\n      }\n    };\n\n    // Convert legacy per-product ARPU to new format\n    if (legacyData.arpu_per_product) {\n      Object.entries(legacyData.arpu_per_product).forEach(([productId, arpu]) => {\n        arpuData.per_product[productId] = {\n          arpu: arpu,\n          total_revenue: 0,\n          paying_users: 0,\n          event_count: 0,\n          net_revenue: 0\n        };\n      });\n    }\n\n    // Extract extended cohort info\n    extendedCohortInfo = {\n      base_users: legacyData.base_users || 0,\n      lookback_users: legacyData.lookback_users || 0,\n      total_users: legacyData.comprehensive_cohort_size || 0,\n      base_percentage: 0,\n      lookback_percentage: 0\n    };\n    if (extendedCohortInfo.total_users > 0) {\n      extendedCohortInfo.base_percentage = extendedCohortInfo.base_users / extendedCohortInfo.total_users * 100;\n      extendedCohortInfo.lookback_percentage = extendedCohortInfo.lookback_users / extendedCohortInfo.total_users * 100;\n    }\n    cohortSummary = {\n      user_count: legacyData.cohort_size || 0,\n      event_count: legacyData.total_events || 0\n    };\n    console.log('Legacy format data:', {\n      arpuData,\n      extendedCohortInfo,\n      cohortSummary,\n      legacyData\n    });\n  }\n  // Tertiary extraction from direct structured format\n  else if (data !== null && data !== void 0 && (_data$structured_form = data.structured_format) !== null && _data$structured_form !== void 0 && _data$structured_form.arpu_analysis) {\n    var _data$structured_form2, _data$structured_form3, _data$structured_form4, _data$structured_form5;\n    console.log('Using direct structured_format.arpu_analysis');\n    arpuData = data.structured_format.arpu_analysis;\n    extendedCohortInfo = (_data$structured_form2 = data.structured_format.cohort_analysis) === null || _data$structured_form2 === void 0 ? void 0 : _data$structured_form2.cohort_breakdown;\n    cohortSummary = (_data$structured_form3 = data.structured_format) === null || _data$structured_form3 === void 0 ? void 0 : (_data$structured_form4 = _data$structured_form3.cohort_data) === null || _data$structured_form4 === void 0 ? void 0 : (_data$structured_form5 = _data$structured_form4.cleaned_cohort) === null || _data$structured_form5 === void 0 ? void 0 : _data$structured_form5.metadata;\n  }\n  // Quaternary extraction from direct legacy format\n  else if (data !== null && data !== void 0 && data.legacy_format) {\n    var _legacyData$metadata2;\n    console.log('Using direct legacy_format');\n    const legacyData = data.legacy_format;\n    arpuData = {\n      cohort_wide: {\n        arpu: legacyData.arpu || 0,\n        total_revenue: 0,\n        paying_users: 0,\n        net_revenue: 0\n      },\n      per_product: {},\n      metadata: {\n        calculation_method: 'legacy_format',\n        message: 'Data from legacy format',\n        lookback_days: ((_legacyData$metadata2 = legacyData.metadata) === null || _legacyData$metadata2 === void 0 ? void 0 : _legacyData$metadata2.lookback_days_used) || 0\n      }\n    };\n    if (legacyData.arpu_per_product) {\n      Object.entries(legacyData.arpu_per_product).forEach(([productId, arpu]) => {\n        arpuData.per_product[productId] = {\n          arpu: arpu,\n          total_revenue: 0,\n          paying_users: 0,\n          event_count: 0,\n          net_revenue: 0\n        };\n      });\n    }\n    extendedCohortInfo = {\n      base_users: legacyData.base_users || 0,\n      lookback_users: legacyData.lookback_users || 0,\n      total_users: legacyData.comprehensive_cohort_size || 0,\n      base_percentage: 0,\n      lookback_percentage: 0\n    };\n    if (extendedCohortInfo.total_users > 0) {\n      extendedCohortInfo.base_percentage = extendedCohortInfo.base_users / extendedCohortInfo.total_users * 100;\n      extendedCohortInfo.lookback_percentage = extendedCohortInfo.lookback_users / extendedCohortInfo.total_users * 100;\n    }\n    cohortSummary = {\n      user_count: legacyData.cohort_size || 0,\n      event_count: legacyData.total_events || 0\n    };\n  }\n  // Final fallback from regular arpu_data\n  else if (data !== null && data !== void 0 && (_data$data3 = data.data) !== null && _data$data3 !== void 0 && _data$data3.arpu_data) {\n    console.log('Using regular arpu_data');\n    arpuData = data.data.arpu_data;\n    cohortSummary = data.data.cohort_summary;\n  }\n  console.log('FINAL EXTRACTED ARPU DATA:', {\n    arpuData,\n    extendedCohortInfo,\n    cohortSummary,\n    hasArpuData: !!arpuData\n  });\n  if (!arpuData) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-500 dark:text-gray-400\",\n        children: \"No ARPU data available. Run an analysis to see results.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 text-xs text-gray-400\",\n        children: [\"Debug: \", JSON.stringify({\n          hasData: !!data,\n          hasDataData: !!(data !== null && data !== void 0 && data.data),\n          dataKeys: data ? Object.keys(data) : [],\n          dataDataKeys: data !== null && data !== void 0 && data.data ? Object.keys(data.data) : []\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }, this);\n  }\n  const cohortWide = arpuData.cohort_wide || {};\n  const perProduct = arpuData.per_product || {};\n  const metadata = arpuData.metadata || {};\n\n  // Extract base vs lookback breakdown information\n  const baseRevenue = metadata.base_revenue || 0;\n  const lookbackRevenue = metadata.lookback_revenue || 0;\n  const totalRevenue = baseRevenue + lookbackRevenue || cohortWide.total_revenue || 0;\n  const baseContributionPct = metadata.base_contribution_pct || 0;\n  const lookbackContributionPct = metadata.lookback_contribution_pct || 0;\n\n  // Get lookback days\n  const lookbackDaysUsed = metadata.lookback_days_used || metadata.lookback_days || (data === null || data === void 0 ? void 0 : (_data$data4 = data.data) === null || _data$data4 === void 0 ? void 0 : (_data$data4$structure = _data$data4.structured_format) === null || _data$data4$structure === void 0 ? void 0 : (_data$data4$structure2 = _data$data4$structure.metadata) === null || _data$data4$structure2 === void 0 ? void 0 : _data$data4$structure2.lookback_days_used) || (data === null || data === void 0 ? void 0 : (_data$structured_form6 = data.structured_format) === null || _data$structured_form6 === void 0 ? void 0 : (_data$structured_form7 = _data$structured_form6.metadata) === null || _data$structured_form7 === void 0 ? void 0 : _data$structured_form7.lookback_days_used) || 0;\n  const formatCurrency = value => {\n    if (value === null || value === undefined || isNaN(value)) return '$0.00';\n    return `$${Number(value).toLocaleString('en-US', {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    })}`;\n  };\n  const formatNumber = value => {\n    if (value === null || value === undefined || isNaN(value)) return '0';\n    return Number(value).toLocaleString();\n  };\n  const formatPercentage = value => {\n    if (value === null || value === undefined || isNaN(value)) return '0.0%';\n    return `${Number(value).toFixed(1)}%`;\n  };\n\n  // Sort products by ARPU (highest first)\n  const sortedProducts = Object.entries(perProduct).sort(([, a], [, b]) => (b.arpu || 0) - (a.arpu || 0));\n\n  // NEW: Check for products with zero ARPU that might be hidden\n  const zeroArpuProducts = Object.entries(perProduct).filter(([, productData]) => (productData.arpu || 0) === 0);\n  const hasHiddenProducts = zeroArpuProducts.length > 0;\n\n  // NEW: Calculate separate ARPU for base and lookback periods\n  const calculateSeparateARPU = () => {\n    const baseUsers = metadata.base_non_refunded_users || 0;\n    const lookbackUsers = metadata.lookback_non_refunded_users || 0;\n    const baseRevenue = metadata.base_revenue || 0;\n    const lookbackRevenue = metadata.lookback_revenue || 0;\n    const baseRefunds = metadata.base_refunds || 0;\n    const lookbackRefunds = metadata.lookback_refunds || 0;\n\n    // Calculate NET revenue for each period (gross revenue - refunds)\n    const baseNetRevenue = baseRevenue - baseRefunds;\n    const lookbackNetRevenue = lookbackRevenue - lookbackRefunds;\n    return {\n      baseARPU: baseUsers > 0 ? baseNetRevenue / baseUsers : 0,\n      lookbackARPU: lookbackUsers > 0 ? lookbackNetRevenue / lookbackUsers : 0,\n      hasData: baseUsers > 0 || lookbackUsers > 0,\n      baseNetRevenue,\n      lookbackNetRevenue\n    };\n  };\n  const separateARPU = calculateSeparateARPU();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-semibold text-gray-900 dark:text-white mb-4\",\n        children: \"Cohort-Wide ARPU Analysis\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }, this), ((_extendedCohortInfo = extendedCohortInfo) === null || _extendedCohortInfo === void 0 ? void 0 : _extendedCohortInfo.base_users) > 0 && ((_extendedCohortInfo2 = extendedCohortInfo) === null || _extendedCohortInfo2 === void 0 ? void 0 : _extendedCohortInfo2.lookback_users) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-amber-800 dark:text-amber-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Extended Timeline Analysis:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 29\n          }, this), \" This ARPU calculation includes data from an extended timeline.\", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-1 text-xs\",\n            children: [\"Total Users: \", (_extendedCohortInfo3 = extendedCohortInfo) === null || _extendedCohortInfo3 === void 0 ? void 0 : _extendedCohortInfo3.total_users.toLocaleString(), \" (\", (_extendedCohortInfo4 = extendedCohortInfo) === null || _extendedCohortInfo4 === void 0 ? void 0 : _extendedCohortInfo4.base_users.toLocaleString(), \" base period + \", (_extendedCohortInfo5 = extendedCohortInfo) === null || _extendedCohortInfo5 === void 0 ? void 0 : _extendedCohortInfo5.lookback_users.toLocaleString(), \" lookback period)\", lookbackDaysUsed > 0 && ` • Lookback: ${lookbackDaysUsed} days`]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 21\n      }, this), separateARPU.hasData && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg border border-indigo-200 dark:border-indigo-800\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm font-medium text-indigo-800 dark:text-indigo-200 mb-2\",\n          children: \"Quick ARPU Comparison by Period (Net Revenue \\xF7 Non-Refunded Users):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-2 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-lg font-bold text-indigo-600 dark:text-indigo-400\",\n              children: formatCurrency(separateARPU.baseARPU)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-indigo-700 dark:text-indigo-300\",\n              children: \"Base Period ARPU\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-indigo-600 dark:text-indigo-400\",\n              children: [formatCurrency(separateARPU.baseNetRevenue), \" \\xF7 \", formatNumber(metadata.base_non_refunded_users || 0), \" users\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-lg font-bold text-indigo-600 dark:text-indigo-400\",\n              children: formatCurrency(separateARPU.lookbackARPU)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-indigo-700 dark:text-indigo-300\",\n              children: \"Lookback Period ARPU\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-indigo-600 dark:text-indigo-400\",\n              children: [formatCurrency(separateARPU.lookbackNetRevenue), \" \\xF7 \", formatNumber(metadata.lookback_non_refunded_users || 0), \" users\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-3xl font-bold text-blue-600 dark:text-blue-400\",\n            children: formatCurrency(cohortWide.arpu)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-blue-700 dark:text-blue-300\",\n            children: \"ARPU (Net Revenue \\xF7 Non-Refunded Users)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-blue-600 dark:text-blue-400 mt-1\",\n            children: [formatNumber((metadata.base_non_refunded_users || 0) + (metadata.lookback_non_refunded_users || 0) || cohortWide.paying_users), \" users, \", formatCurrency(cohortWide.net_revenue || cohortWide.total_revenue), \" net revenue\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 25\n          }, this), (baseRevenue > 0 || lookbackRevenue > 0) && totalRevenue > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 pt-3 border-t border-blue-200 dark:border-blue-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs font-medium text-blue-800 dark:text-blue-300 mb-2\",\n              children: \"Revenue Timeline Breakdown:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-blue-500 dark:text-blue-500\",\n                  children: \"Base Period:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-blue-600 dark:text-blue-400\",\n                  children: [formatCurrency(baseRevenue), \" (\", baseContributionPct.toFixed(1), \"%)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-blue-500 dark:text-blue-500\",\n                  children: \"Lookback Period:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-blue-600 dark:text-blue-400\",\n                  children: [formatCurrency(lookbackRevenue), \" (\", lookbackContributionPct.toFixed(1), \"%)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs font-medium border-t border-blue-200 dark:border-blue-700 pt-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-blue-600 dark:text-blue-400\",\n                  children: \"Total:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 335,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-blue-700 dark:text-blue-300\",\n                  children: formatCurrency(totalRevenue)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 336,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-semibold text-gray-700 dark:text-gray-300\",\n            children: formatCurrency(cohortWide.total_revenue || totalRevenue)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-600 dark:text-gray-400\",\n            children: \"Total Revenue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 25\n          }, this), cohortWide.total_refunds > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-600 dark:text-gray-400 mt-1\",\n            children: [formatCurrency(cohortWide.total_refunds), \" refunded\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 29\n          }, this), (baseRevenue > 0 || lookbackRevenue > 0) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2\",\n              children: \"Revenue Sources:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-500 dark:text-gray-500\",\n                  children: \"Base Period:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600 dark:text-gray-400\",\n                  children: formatCurrency(baseRevenue)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 37\n              }, this), metadata.base_refunds > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs ml-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-red-500 dark:text-red-400\",\n                  children: \"Base Refunds:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-red-600 dark:text-red-400\",\n                  children: [\"-\", formatCurrency(metadata.base_refunds)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 375,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-500 dark:text-gray-500\",\n                  children: \"Lookback Period:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 381,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600 dark:text-gray-400\",\n                  children: formatCurrency(lookbackRevenue)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 382,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 37\n              }, this), metadata.lookback_refunds > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs ml-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-red-500 dark:text-red-400\",\n                  children: \"Lookback Refunds:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 389,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-red-600 dark:text-red-400\",\n                  children: [\"-\", formatCurrency(metadata.lookback_refunds)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 41\n              }, this), cohortWide.total_refunds > 0 && !(metadata.base_refunds > 0) && !(metadata.lookback_refunds > 0) && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs text-red-600 dark:text-red-400\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Total Refunds:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 398,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"-\", formatCurrency(cohortWide.total_refunds)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs font-medium border-t border-gray-200 dark:border-gray-600 pt-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600 dark:text-gray-400\",\n                  children: \"Net Revenue:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 403,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-700 dark:text-gray-300\",\n                  children: formatCurrency(cohortWide.net_revenue || totalRevenue)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 404,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-semibold text-gray-700 dark:text-gray-300\",\n            children: formatNumber(cohortWide.total_paying_users || cohortWide.paying_users)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-600 dark:text-gray-400\",\n            children: \"Total Paying Users\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 25\n          }, this), cohortWide.refund_users > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-600 dark:text-gray-400 mt-1\",\n            children: [formatNumber(cohortWide.refund_users), \" refunded (\", (cohortWide.refund_users / (cohortWide.total_paying_users || cohortWide.paying_users) * 100).toFixed(1), \"%)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 29\n          }, this), ((metadata.base_paying_users || 0) > 0 || (metadata.lookback_paying_users || 0) > 0) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2\",\n              children: \"User Timeline Distribution:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 429,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-500 dark:text-gray-500\",\n                  children: \"Base Period:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 434,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600 dark:text-gray-400\",\n                  children: [formatNumber(metadata.base_paying_users || 0), \" paying\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 435,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 37\n              }, this), (metadata.base_refund_users || 0) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs ml-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-red-500 dark:text-red-400\",\n                  children: \"Base Refunds:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 441,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-red-600 dark:text-red-400\",\n                  children: [formatNumber(metadata.base_refund_users), \" users (\", (metadata.base_refund_users / metadata.base_paying_users * 100).toFixed(1), \"%)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 442,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-500 dark:text-gray-500\",\n                  children: \"Lookback Period:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600 dark:text-gray-400\",\n                  children: [formatNumber(metadata.lookback_paying_users || 0), \" paying\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 37\n              }, this), (metadata.lookback_refund_users || 0) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs ml-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-red-500 dark:text-red-400\",\n                  children: \"Lookback Refunds:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 455,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-red-600 dark:text-red-400\",\n                  children: [formatNumber(metadata.lookback_refund_users), \" users (\", (metadata.lookback_refund_users / metadata.lookback_paying_users * 100).toFixed(1), \"%)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 456,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 454,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs font-medium border-t border-gray-200 dark:border-gray-600 pt-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600 dark:text-gray-400\",\n                  children: \"Non-Refunded Users:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-700 dark:text-gray-300\",\n                  children: formatNumber((metadata.base_non_refunded_users || 0) + (metadata.lookback_non_refunded_users || 0))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 463,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 461,\n                columnNumber: 37\n              }, this), lookbackDaysUsed > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-500 dark:text-gray-500 mt-1\",\n                children: [\"Lookback: \", lookbackDaysUsed, \" days\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 29\n          }, this), !((metadata.base_paying_users || 0) > 0 || (metadata.lookback_paying_users || 0) > 0) && ((_extendedCohortInfo6 = extendedCohortInfo) === null || _extendedCohortInfo6 === void 0 ? void 0 : _extendedCohortInfo6.base_users) > 0 && ((_extendedCohortInfo7 = extendedCohortInfo) === null || _extendedCohortInfo7 === void 0 ? void 0 : _extendedCohortInfo7.lookback_users) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2\",\n              children: \"User Timeline Distribution:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-500 dark:text-gray-500\",\n                  children: \"Base Period:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 485,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600 dark:text-gray-400\",\n                  children: [formatNumber(extendedCohortInfo.base_users), \" (\", extendedCohortInfo.base_percentage.toFixed(1), \"%)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 484,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-500 dark:text-gray-500\",\n                  children: \"Lookback Period:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 491,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600 dark:text-gray-400\",\n                  children: [formatNumber(extendedCohortInfo.lookback_users), \" (\", extendedCohortInfo.lookback_percentage.toFixed(1), \"%)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 492,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs font-medium border-t border-gray-200 dark:border-gray-600 pt-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600 dark:text-gray-400\",\n                  children: \"Total Extended:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 497,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-700 dark:text-gray-300\",\n                  children: formatNumber(extendedCohortInfo.total_users)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 498,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 37\n              }, this), lookbackDaysUsed > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-500 dark:text-gray-500 mt-1\",\n                children: [\"Lookback: \", lookbackDaysUsed, \" days\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 503,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 17\n      }, this), metadata.calculation_method && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: `px-3 py-1 text-sm rounded-full ${metadata.calculation_method === 'standard' ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300' : metadata.calculation_method === 'extended_lookback' ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300' : 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300'}`,\n          children: metadata.calculation_method === 'standard' ? 'Standard Calculation - No Lookback Used' : metadata.calculation_method === 'extended_lookback' ? `Extended Lookback - ${metadata.lookback_days} Days` : 'Fallback Method - Insufficient Data'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 25\n        }, this), metadata.lookback_days > 0 && metadata.calculation_method === 'extended_lookback' && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"px-3 py-1 text-sm bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 rounded-full\",\n          children: [\"Extended by \", metadata.lookback_days, \" days for sufficient sample size\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 13\n    }, this), sortedProducts.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-lg font-semibold text-gray-900 dark:text-white\",\n          children: [\"ARPU by Product (\", sortedProducts.length, \" products\", hasHiddenProducts ? ` + ${zeroArpuProducts.length} with $0 ARPU` : '', \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowCalculationDetails(!showCalculationDetails),\n          className: \"text-sm text-blue-600 dark:text-blue-400 hover:underline\",\n          children: [showCalculationDetails ? 'Hide' : 'Show', \" calculation details\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 538,\n        columnNumber: 21\n      }, this), hasHiddenProducts && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-yellow-800 dark:text-yellow-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Note:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 33\n          }, this), \" \", zeroArpuProducts.length, \" product\", zeroArpuProducts.length > 1 ? 's' : '', \" with $0.00 ARPU \", zeroArpuProducts.length > 1 ? 'are' : 'is', \" not displayed above.\", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs mt-1\",\n            children: zeroArpuProducts.length > 5 ? `${zeroArpuProducts.slice(0, 5).map(([id]) => id).join(', ')} and ${zeroArpuProducts.length - 5} more...` : zeroArpuProducts.map(([id]) => id).join(', ')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6\",\n        children: sortedProducts.filter(([, productData]) => (productData.arpu || 0) > 0).map(([productId, productData]) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-5 hover:shadow-lg transition-all duration-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"font-semibold text-gray-900 dark:text-white text-sm leading-tight\",\n              title: productId,\n              children: productId.length > 45 ? `${productId.substring(0, 45)}...` : productId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center mb-4 py-3 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border border-blue-200 dark:border-blue-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-blue-600 dark:text-blue-400\",\n              children: formatCurrency(productData.arpu)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-blue-700 dark:text-blue-300 font-medium\",\n              children: \"ARPU\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 584,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 580,\n            columnNumber: 33\n          }, this), (productData.base_revenue > 0 || productData.lookback_revenue > 0) && (productData.base_non_refunded_users > 0 || productData.lookback_non_refunded_users > 0) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4 p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded border border-indigo-200 dark:border-indigo-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs font-medium text-indigo-800 dark:text-indigo-300 mb-2\",\n              children: \"Period ARPU (Net Revenue \\xF7 Non-Refunded Users):\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 593,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm font-bold text-indigo-600 dark:text-indigo-400\",\n                  children: formatCurrency(productData.base_non_refunded_users > 0 ? (productData.base_revenue - (productData.base_refunds || 0)) / productData.base_non_refunded_users : 0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 596,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-indigo-700 dark:text-indigo-300\",\n                  children: \"Base\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 599,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-indigo-600 dark:text-indigo-400\",\n                  children: [formatCurrency((productData.base_revenue || 0) - (productData.base_refunds || 0)), \" \\xF7 \", formatNumber(productData.base_non_refunded_users || 0)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 600,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 595,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm font-bold text-indigo-600 dark:text-indigo-400\",\n                  children: formatCurrency(productData.lookback_non_refunded_users > 0 ? (productData.lookback_revenue - (productData.lookback_refunds || 0)) / productData.lookback_non_refunded_users : 0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 605,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-indigo-700 dark:text-indigo-300\",\n                  children: \"Lookback\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 608,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-indigo-600 dark:text-indigo-400\",\n                  children: [formatCurrency((productData.lookback_revenue || 0) - (productData.lookback_refunds || 0)), \" \\xF7 \", formatNumber(productData.lookback_non_refunded_users || 0)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 609,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 604,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 594,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-gray-700 rounded\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-gray-600 dark:text-gray-400\",\n                children: productData.net_revenue ? 'Net Revenue' : 'Total Revenue'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 620,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm font-semibold text-gray-900 dark:text-white\",\n                children: [formatCurrency(productData.net_revenue || productData.total_revenue), productData.total_refunds > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-600 dark:text-gray-400 mt-1\",\n                  children: [formatCurrency(productData.total_revenue), \" total - \", formatCurrency(productData.total_refunds), \" refunded\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 626,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 623,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 619,\n              columnNumber: 37\n            }, this), (productData.base_revenue > 0 || productData.lookback_revenue > 0) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"py-2 px-3 bg-amber-50 dark:bg-amber-900/20 rounded border border-amber-200 dark:border-amber-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs font-medium text-amber-800 dark:text-amber-300 mb-2\",\n                children: \"Revenue Timeline:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 636,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-xs\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-amber-700 dark:text-amber-400\",\n                    children: \"Base Period:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 639,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-amber-800 dark:text-amber-300 font-medium\",\n                    children: formatCurrency(productData.base_revenue || 0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 640,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 638,\n                  columnNumber: 49\n                }, this), productData.base_refunds > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-xs ml-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-red-600 dark:text-red-400\",\n                    children: \"Base Refunds:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 647,\n                    columnNumber: 57\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-red-700 dark:text-red-400 font-medium\",\n                    children: [\"-\", formatCurrency(productData.base_refunds)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 648,\n                    columnNumber: 57\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 646,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-xs\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-amber-700 dark:text-amber-400\",\n                    children: \"Lookback Period:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 654,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-amber-800 dark:text-amber-300 font-medium\",\n                    children: formatCurrency(productData.lookback_revenue || 0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 655,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 653,\n                  columnNumber: 49\n                }, this), productData.lookback_refunds > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-xs ml-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-red-600 dark:text-red-400\",\n                    children: \"Lookback Refunds:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 662,\n                    columnNumber: 57\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-red-700 dark:text-red-400 font-medium\",\n                    children: [\"-\", formatCurrency(productData.lookback_refunds)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 663,\n                    columnNumber: 57\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 661,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-xs font-medium border-t border-amber-300 dark:border-amber-600 pt-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-amber-800 dark:text-amber-300\",\n                    children: \"Net Revenue:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 670,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-amber-900 dark:text-amber-200\",\n                    children: formatCurrency(productData.net_revenue || productData.base_revenue + productData.lookback_revenue - (productData.base_refunds || 0) - (productData.lookback_refunds || 0))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 671,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 669,\n                  columnNumber: 49\n                }, this), productData.base_revenue > 0 && productData.lookback_revenue > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-amber-600 dark:text-amber-400 mt-1 pt-1 border-t border-amber-300 dark:border-amber-600\",\n                  children: [\"Base: \", (productData.base_revenue / (productData.base_revenue + productData.lookback_revenue) * 100).toFixed(1), \"% \\u2022 Lookback: \", (productData.lookback_revenue / (productData.base_revenue + productData.lookback_revenue) * 100).toFixed(1), \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 676,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 637,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 635,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-gray-700 rounded\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-gray-600 dark:text-gray-400\",\n                children: \"Total Paying Users\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 686,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm font-semibold text-gray-900 dark:text-white\",\n                children: [formatNumber(productData.paying_users), productData.refund_users > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-red-600 dark:text-red-400 ml-1\",\n                  children: [\"(\", formatNumber(productData.refund_users), \" refunded - \", (productData.refund_users / productData.paying_users * 100).toFixed(1), \"%)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 690,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 687,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 685,\n              columnNumber: 37\n            }, this), (productData.base_non_refunded_users > 0 || productData.lookback_non_refunded_users > 0) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"py-2 px-3 bg-purple-50 dark:bg-purple-900/20 rounded border border-purple-200 dark:border-purple-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs font-medium text-purple-800 dark:text-purple-300 mb-2\",\n                children: \"User Timeline (Used in ARPU):\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 700,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-xs\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-purple-700 dark:text-purple-400\",\n                    children: \"Base Period:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 703,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-purple-800 dark:text-purple-300 font-medium\",\n                    children: [formatNumber(productData.base_paying_users || 0), \" paying\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 704,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 702,\n                  columnNumber: 49\n                }, this), (productData.base_refund_users || 0) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-xs ml-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-red-600 dark:text-red-400\",\n                    children: \"Base Refunds:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 710,\n                    columnNumber: 57\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-red-700 dark:text-red-400 font-medium\",\n                    children: [\"-\", formatNumber(productData.base_refund_users), \" users (\", (productData.base_refund_users / productData.base_paying_users * 100).toFixed(1), \"%)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 711,\n                    columnNumber: 57\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 709,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-xs\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-purple-700 dark:text-purple-400\",\n                    children: \"Lookback Period:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 717,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-purple-800 dark:text-purple-300 font-medium\",\n                    children: [formatNumber(productData.lookback_paying_users || 0), \" paying\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 718,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 716,\n                  columnNumber: 49\n                }, this), (productData.lookback_refund_users || 0) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-xs ml-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-red-600 dark:text-red-400\",\n                    children: \"Lookback Refunds:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 724,\n                    columnNumber: 57\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-red-700 dark:text-red-400 font-medium\",\n                    children: [\"-\", formatNumber(productData.lookback_refund_users), \" users (\", (productData.lookback_refund_users / productData.lookback_paying_users * 100).toFixed(1), \"%)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 725,\n                    columnNumber: 57\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 723,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-xs font-medium border-t border-purple-300 dark:border-purple-600 pt-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-purple-800 dark:text-purple-300\",\n                    children: \"Non-Refunded Users:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 731,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-purple-900 dark:text-purple-200\",\n                    children: formatNumber((productData.base_non_refunded_users || 0) + (productData.lookback_non_refunded_users || 0))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 732,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 730,\n                  columnNumber: 49\n                }, this), (productData.base_paying_users || 0) > 0 && (productData.lookback_paying_users || 0) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-purple-600 dark:text-purple-400 mt-1 pt-1 border-t border-purple-300 dark:border-purple-600\",\n                  children: [\"Base: \", ((productData.base_paying_users || 0) / ((productData.base_paying_users || 0) + (productData.lookback_paying_users || 0)) * 100).toFixed(1), \"% \\u2022 Lookback: \", ((productData.lookback_paying_users || 0) / ((productData.base_paying_users || 0) + (productData.lookback_paying_users || 0)) * 100).toFixed(1), \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 737,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 701,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 699,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 618,\n            columnNumber: 33\n          }, this)]\n        }, productId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 21\n      }, this), showCalculationDetails && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-50 dark:bg-gray-800 rounded-lg p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"text-lg font-semibold text-gray-900 dark:text-white mb-3\",\n          children: \"Calculation Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 753,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-blue-800 dark:text-blue-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"ARPU Calculation Method:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 760,\n              columnNumber: 37\n            }, this), \" All ARPU values use \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Net Revenue \\xF7 Non-Refunded Users\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 760,\n              columnNumber: 99\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs mt-1 text-blue-700 dark:text-blue-300\",\n              children: [\"\\u2022 Base ARPU = (Base Revenue - Base Refunds) \\xF7 Base Non-Refunded Users\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 762,\n                columnNumber: 110\n              }, this), \"\\u2022 Lookback ARPU = (Lookback Revenue - Lookback Refunds) \\xF7 Lookback Non-Refunded Users\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 763,\n                columnNumber: 126\n              }, this), \"\\u2022 Combined ARPU = Total Net Revenue \\xF7 Total Non-Refunded Users\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 761,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 759,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 758,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-x-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"min-w-full text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"bg-gray-100 dark:bg-gray-700\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-3 py-2 text-left text-gray-700 dark:text-gray-300\",\n                  children: \"Product ID\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 773,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",\n                  children: \"Total Revenue\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 774,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",\n                  children: \"Base Revenue\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 775,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",\n                  children: \"Lookback Revenue\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 776,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",\n                  children: \"Base Refunds\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 777,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",\n                  children: \"Lookback Refunds\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 778,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",\n                  children: \"Net Revenue\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 779,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",\n                  children: \"Total Paying Users\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 780,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",\n                  children: \"Refund %\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 781,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",\n                  children: \"Non-Refunded Users\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 782,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",\n                  children: \"Base ARPU\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 783,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",\n                  children: \"Lookback ARPU\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 784,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",\n                  children: \"Combined ARPU\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 785,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",\n                  children: \"% of Net Revenue\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 786,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 772,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 771,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              className: \"divide-y divide-gray-200 dark:divide-gray-600\",\n              children: sortedProducts.map(([productId, productData]) => {\n                const netRevenue = productData.net_revenue || productData.total_revenue;\n                const cohortNetRevenue = cohortWide.net_revenue || cohortWide.total_revenue;\n                const revenuePercentage = cohortNetRevenue > 0 ? netRevenue / cohortNetRevenue * 100 : 0;\n                const nonRefundedUsers = (productData.base_non_refunded_users || 0) + (productData.lookback_non_refunded_users || 0) || productData.paying_users;\n                const refundPercentage = productData.paying_users > 0 ? (productData.refund_users || 0) / productData.paying_users * 100 : 0;\n                const baseARPU = productData.base_non_refunded_users > 0 ? (productData.base_revenue - (productData.base_refunds || 0)) / productData.base_non_refunded_users : 0;\n                const lookbackARPU = productData.lookback_non_refunded_users > 0 ? (productData.lookback_revenue - (productData.lookback_refunds || 0)) / productData.lookback_non_refunded_users : 0;\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"hover:bg-gray-50 dark:hover:bg-gray-700\",\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-3 py-2 text-gray-900 dark:text-white\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"max-w-xs truncate\",\n                      title: productId,\n                      children: productId\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 804,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 803,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",\n                    children: formatCurrency(productData.total_revenue)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 808,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",\n                    children: formatCurrency(productData.base_revenue || 0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 811,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",\n                    children: formatCurrency(productData.lookback_revenue || 0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 814,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-3 py-2 text-right text-red-600 dark:text-red-400\",\n                    children: formatCurrency(productData.base_refunds || 0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 817,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-3 py-2 text-right text-red-600 dark:text-red-400\",\n                    children: formatCurrency(productData.lookback_refunds || 0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 820,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",\n                    children: formatCurrency(productData.net_revenue || productData.total_revenue)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 823,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",\n                    children: formatNumber(productData.paying_users)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 826,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-3 py-2 text-right text-red-600 dark:text-red-400\",\n                    children: formatPercentage(refundPercentage)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 829,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-3 py-2 text-right text-purple-600 dark:text-purple-400 font-medium\",\n                    children: formatNumber(nonRefundedUsers)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 832,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-3 py-2 text-right text-indigo-600 dark:text-indigo-400\",\n                    children: formatCurrency(baseARPU)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 835,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-3 py-2 text-right text-indigo-600 dark:text-indigo-400\",\n                    children: formatCurrency(lookbackARPU)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 838,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-3 py-2 text-right font-semibold text-green-600 dark:text-green-400\",\n                    children: formatCurrency(productData.arpu)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 841,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-3 py-2 text-right text-gray-700 dark:text-gray-300\",\n                    children: formatPercentage(revenuePercentage)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 844,\n                    columnNumber: 53\n                  }, this)]\n                }, productId, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 802,\n                  columnNumber: 49\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 789,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 770,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 769,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 752,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 537,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 250,\n    columnNumber: 9\n  }, this);\n};\n_s(ARPUDisplay, \"F9VOYbTBRfrriskUyNhOy/mKglY=\");\n_c = ARPUDisplay;\nexport default ARPUDisplay;\nvar _c;\n$RefreshReg$(_c, \"ARPUDisplay\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","ARPUDisplay","data","_s","_data$data","_data$data$structured","_data$data2","_data$structured_form","_data$data3","_data$data4","_data$data4$structure","_data$data4$structure2","_data$structured_form6","_data$structured_form7","_extendedCohortInfo","_extendedCohortInfo2","_extendedCohortInfo3","_extendedCohortInfo4","_extendedCohortInfo5","_extendedCohortInfo6","_extendedCohortInfo7","showCalculationDetails","setShowCalculationDetails","console","log","hasData","hasDataData","dataKeys","Object","keys","dataDataKeys","arpuData","cohortSummary","extendedCohortInfo","baseVsLookbackBreakdown","structured_format","arpu_analysis","_data$data$structured2","_data$data$structured3","_data$data$structured4","_data$data$structured5","cohort_analysis","cohort_breakdown","cohort_data","cleaned_cohort","metadata","legacy_format","_legacyData$metadata","legacyData","cohort_wide","arpu","total_revenue","paying_users","net_revenue","per_product","calculation_method","message","lookback_days","lookback_days_used","arpu_per_product","entries","forEach","productId","event_count","base_users","lookback_users","total_users","comprehensive_cohort_size","base_percentage","lookback_percentage","user_count","cohort_size","total_events","_data$structured_form2","_data$structured_form3","_data$structured_form4","_data$structured_form5","_legacyData$metadata2","arpu_data","cohort_summary","hasArpuData","className","children","fileName","_jsxFileName","lineNumber","columnNumber","JSON","stringify","cohortWide","perProduct","baseRevenue","base_revenue","lookbackRevenue","lookback_revenue","totalRevenue","baseContributionPct","base_contribution_pct","lookbackContributionPct","lookback_contribution_pct","lookbackDaysUsed","formatCurrency","value","undefined","isNaN","Number","toLocaleString","minimumFractionDigits","maximumFractionDigits","formatNumber","formatPercentage","toFixed","sortedProducts","sort","a","b","zeroArpuProducts","filter","productData","hasHiddenProducts","length","calculateSeparateARPU","baseUsers","base_non_refunded_users","lookbackUsers","lookback_non_refunded_users","baseRefunds","base_refunds","lookbackRefunds","lookback_refunds","baseNetRevenue","lookbackNetRevenue","baseARPU","lookbackARPU","separateARPU","total_refunds","total_paying_users","refund_users","base_paying_users","lookback_paying_users","base_refund_users","lookback_refund_users","onClick","slice","map","id","join","title","substring","netRevenue","cohortNetRevenue","revenuePercentage","nonRefundedUsers","refundPercentage","_c","$RefreshReg$"],"sources":["/Users/joshuakaufman/untitled folder 3/orchestrator/dashboard/client/src/cohort-pipeline/components/ARPUDisplay.js"],"sourcesContent":["import React, { useState } from 'react';\n\nconst ARPUDisplay = ({ data }) => {\n    const [showCalculationDetails, setShowCalculationDetails] = useState(false);\n\n    // Comprehensive debugging\n    console.log('ARPUDisplay received data:', data);\n    console.log('Data structure:', {\n        hasData: !!data,\n        hasDataData: !!data?.data,\n        dataKeys: data ? Object.keys(data) : [],\n        dataDataKeys: data?.data ? Object.keys(data.data) : []\n    });\n\n    // COMPLETELY REWRITTEN: More robust data extraction\n    let arpuData = null;\n    let cohortSummary = null;\n    let extendedCohortInfo = null;\n    let baseVsLookbackBreakdown = null;\n\n    // Primary extraction from structured format\n    if (data?.data?.structured_format?.arpu_analysis) {\n        console.log('Using structured_format.arpu_analysis');\n        arpuData = data.data.structured_format.arpu_analysis;\n        \n        // Get cohort breakdown\n        extendedCohortInfo = data.data.structured_format.cohort_analysis?.cohort_breakdown;\n        cohortSummary = data.data.structured_format?.cohort_data?.cleaned_cohort?.metadata;\n        \n        console.log('Structured format data:', {\n            arpuData,\n            extendedCohortInfo,\n            cohortSummary\n        });\n    } \n    // Secondary extraction from legacy format\n    else if (data?.data?.legacy_format) {\n        console.log('Using legacy_format');\n        const legacyData = data.data.legacy_format;\n        \n        // Extract ARPU data from legacy format\n        arpuData = {\n            cohort_wide: {\n                arpu: legacyData.arpu || 0,\n                total_revenue: 0,\n                paying_users: 0,\n                net_revenue: 0\n            },\n            per_product: {},\n            metadata: {\n                calculation_method: 'legacy_format',\n                message: 'Data from legacy format',\n                lookback_days: legacyData.metadata?.lookback_days_used || 0\n            }\n        };\n        \n        // Convert legacy per-product ARPU to new format\n        if (legacyData.arpu_per_product) {\n            Object.entries(legacyData.arpu_per_product).forEach(([productId, arpu]) => {\n                arpuData.per_product[productId] = {\n                    arpu: arpu,\n                    total_revenue: 0,\n                    paying_users: 0,\n                    event_count: 0,\n                    net_revenue: 0\n                };\n            });\n        }\n        \n        // Extract extended cohort info\n        extendedCohortInfo = {\n            base_users: legacyData.base_users || 0,\n            lookback_users: legacyData.lookback_users || 0,\n            total_users: legacyData.comprehensive_cohort_size || 0,\n            base_percentage: 0,\n            lookback_percentage: 0\n        };\n        \n        if (extendedCohortInfo.total_users > 0) {\n            extendedCohortInfo.base_percentage = (extendedCohortInfo.base_users / extendedCohortInfo.total_users) * 100;\n            extendedCohortInfo.lookback_percentage = (extendedCohortInfo.lookback_users / extendedCohortInfo.total_users) * 100;\n        }\n        \n        cohortSummary = {\n            user_count: legacyData.cohort_size || 0,\n            event_count: legacyData.total_events || 0\n        };\n        \n        console.log('Legacy format data:', {\n            arpuData,\n            extendedCohortInfo,\n            cohortSummary,\n            legacyData\n        });\n    }\n    // Tertiary extraction from direct structured format\n    else if (data?.structured_format?.arpu_analysis) {\n        console.log('Using direct structured_format.arpu_analysis');\n        arpuData = data.structured_format.arpu_analysis;\n        extendedCohortInfo = data.structured_format.cohort_analysis?.cohort_breakdown;\n        cohortSummary = data.structured_format?.cohort_data?.cleaned_cohort?.metadata;\n    }\n    // Quaternary extraction from direct legacy format\n    else if (data?.legacy_format) {\n        console.log('Using direct legacy_format');\n        const legacyData = data.legacy_format;\n        \n        arpuData = {\n            cohort_wide: {\n                arpu: legacyData.arpu || 0,\n                total_revenue: 0,\n                paying_users: 0,\n                net_revenue: 0\n            },\n            per_product: {},\n            metadata: {\n                calculation_method: 'legacy_format',\n                message: 'Data from legacy format',\n                lookback_days: legacyData.metadata?.lookback_days_used || 0\n            }\n        };\n        \n        if (legacyData.arpu_per_product) {\n            Object.entries(legacyData.arpu_per_product).forEach(([productId, arpu]) => {\n                arpuData.per_product[productId] = {\n                    arpu: arpu,\n                    total_revenue: 0,\n                    paying_users: 0,\n                    event_count: 0,\n                    net_revenue: 0\n                };\n            });\n        }\n        \n        extendedCohortInfo = {\n            base_users: legacyData.base_users || 0,\n            lookback_users: legacyData.lookback_users || 0,\n            total_users: legacyData.comprehensive_cohort_size || 0,\n            base_percentage: 0,\n            lookback_percentage: 0\n        };\n        \n        if (extendedCohortInfo.total_users > 0) {\n            extendedCohortInfo.base_percentage = (extendedCohortInfo.base_users / extendedCohortInfo.total_users) * 100;\n            extendedCohortInfo.lookback_percentage = (extendedCohortInfo.lookback_users / extendedCohortInfo.total_users) * 100;\n        }\n        \n        cohortSummary = {\n            user_count: legacyData.cohort_size || 0,\n            event_count: legacyData.total_events || 0\n        };\n    }\n    // Final fallback from regular arpu_data\n    else if (data?.data?.arpu_data) {\n        console.log('Using regular arpu_data');\n        arpuData = data.data.arpu_data;\n        cohortSummary = data.data.cohort_summary;\n    }\n\n    console.log('FINAL EXTRACTED ARPU DATA:', {\n        arpuData,\n        extendedCohortInfo,\n        cohortSummary,\n        hasArpuData: !!arpuData\n    });\n\n    if (!arpuData) {\n        return (\n            <div className=\"text-center py-8\">\n                <p className=\"text-gray-500 dark:text-gray-400\">\n                    No ARPU data available. Run an analysis to see results.\n                </p>\n                <div className=\"mt-4 text-xs text-gray-400\">\n                    Debug: {JSON.stringify({\n                        hasData: !!data,\n                        hasDataData: !!data?.data,\n                        dataKeys: data ? Object.keys(data) : [],\n                        dataDataKeys: data?.data ? Object.keys(data.data) : []\n                    })}\n                </div>\n            </div>\n        );\n    }\n\n    const cohortWide = arpuData.cohort_wide || {};\n    const perProduct = arpuData.per_product || {};\n    const metadata = arpuData.metadata || {};\n\n    // Extract base vs lookback breakdown information\n    const baseRevenue = metadata.base_revenue || 0;\n    const lookbackRevenue = metadata.lookback_revenue || 0;\n    const totalRevenue = baseRevenue + lookbackRevenue || cohortWide.total_revenue || 0;\n    const baseContributionPct = metadata.base_contribution_pct || 0;\n    const lookbackContributionPct = metadata.lookback_contribution_pct || 0;\n    \n    // Get lookback days\n    const lookbackDaysUsed = metadata.lookback_days_used || \n                            metadata.lookback_days || \n                            (data?.data?.structured_format?.metadata?.lookback_days_used) ||\n                            (data?.structured_format?.metadata?.lookback_days_used) ||\n                            0;\n\n    const formatCurrency = (value) => {\n        if (value === null || value === undefined || isNaN(value)) return '$0.00';\n        return `$${Number(value).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;\n    };\n\n    const formatNumber = (value) => {\n        if (value === null || value === undefined || isNaN(value)) return '0';\n        return Number(value).toLocaleString();\n    };\n\n    const formatPercentage = (value) => {\n        if (value === null || value === undefined || isNaN(value)) return '0.0%';\n        return `${Number(value).toFixed(1)}%`;\n    };\n\n    // Sort products by ARPU (highest first)\n    const sortedProducts = Object.entries(perProduct).sort(([,a], [,b]) => (b.arpu || 0) - (a.arpu || 0));\n\n    // NEW: Check for products with zero ARPU that might be hidden\n    const zeroArpuProducts = Object.entries(perProduct).filter(([,productData]) => (productData.arpu || 0) === 0);\n    const hasHiddenProducts = zeroArpuProducts.length > 0;\n\n    // NEW: Calculate separate ARPU for base and lookback periods\n    const calculateSeparateARPU = () => {\n        const baseUsers = (metadata.base_non_refunded_users || 0);\n        const lookbackUsers = (metadata.lookback_non_refunded_users || 0);\n        const baseRevenue = (metadata.base_revenue || 0);\n        const lookbackRevenue = (metadata.lookback_revenue || 0);\n        const baseRefunds = (metadata.base_refunds || 0);\n        const lookbackRefunds = (metadata.lookback_refunds || 0);\n        \n        // Calculate NET revenue for each period (gross revenue - refunds)\n        const baseNetRevenue = baseRevenue - baseRefunds;\n        const lookbackNetRevenue = lookbackRevenue - lookbackRefunds;\n        \n        return {\n            baseARPU: baseUsers > 0 ? baseNetRevenue / baseUsers : 0,\n            lookbackARPU: lookbackUsers > 0 ? lookbackNetRevenue / lookbackUsers : 0,\n            hasData: baseUsers > 0 || lookbackUsers > 0,\n            baseNetRevenue,\n            lookbackNetRevenue\n        };\n    };\n\n    const separateARPU = calculateSeparateARPU();\n\n    return (\n        <div className=\"space-y-6\">\n            {/* Header with Key Metrics */}\n            <div className=\"mb-4\">\n                <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\n                    Cohort-Wide ARPU Analysis\n                </h3>\n                \n                {/* NEW: Extended Timeline Note */}\n                {(extendedCohortInfo?.base_users > 0 && extendedCohortInfo?.lookback_users > 0) && (\n                    <div className=\"mb-4 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800\">\n                        <div className=\"text-sm text-amber-800 dark:text-amber-200\">\n                            <strong>Extended Timeline Analysis:</strong> This ARPU calculation includes data from an extended timeline.\n                            <div className=\"mt-1 text-xs\">\n                                Total Users: {extendedCohortInfo?.total_users.toLocaleString()} ({extendedCohortInfo?.base_users.toLocaleString()} base period + {extendedCohortInfo?.lookback_users.toLocaleString()} lookback period)\n                                {lookbackDaysUsed > 0 && ` • Lookback: ${lookbackDaysUsed} days`}\n                            </div>\n                        </div>\n                    </div>\n                )}\n\n                {/* NEW: Separate Base vs Lookback ARPU Quick View */}\n                {separateARPU.hasData && (\n                    <div className=\"mb-4 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg border border-indigo-200 dark:border-indigo-800\">\n                        <div className=\"text-sm font-medium text-indigo-800 dark:text-indigo-200 mb-2\">\n                            Quick ARPU Comparison by Period (Net Revenue ÷ Non-Refunded Users):\n                        </div>\n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <div className=\"text-center\">\n                                <div className=\"text-lg font-bold text-indigo-600 dark:text-indigo-400\">\n                                    {formatCurrency(separateARPU.baseARPU)}\n                                </div>\n                                <div className=\"text-xs text-indigo-700 dark:text-indigo-300\">\n                                    Base Period ARPU\n                                </div>\n                                <div className=\"text-xs text-indigo-600 dark:text-indigo-400\">\n                                    {formatCurrency(separateARPU.baseNetRevenue)} ÷ {formatNumber(metadata.base_non_refunded_users || 0)} users\n                                </div>\n                            </div>\n                            <div className=\"text-center\">\n                                <div className=\"text-lg font-bold text-indigo-600 dark:text-indigo-400\">\n                                    {formatCurrency(separateARPU.lookbackARPU)}\n                                </div>\n                                <div className=\"text-xs text-indigo-700 dark:text-indigo-300\">\n                                    Lookback Period ARPU\n                                </div>\n                                <div className=\"text-xs text-indigo-600 dark:text-indigo-400\">\n                                    {formatCurrency(separateARPU.lookbackNetRevenue)} ÷ {formatNumber(metadata.lookback_non_refunded_users || 0)} users\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                )}\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n                    <div className=\"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800\">\n                        <div className=\"text-3xl font-bold text-blue-600 dark:text-blue-400\">\n                            {formatCurrency(cohortWide.arpu)}\n                        </div>\n                        <div className=\"text-sm text-blue-700 dark:text-blue-300\">\n                            ARPU (Net Revenue ÷ Non-Refunded Users)\n                        </div>\n                        <div className=\"text-xs text-blue-600 dark:text-blue-400 mt-1\">\n                            {formatNumber((metadata.base_non_refunded_users || 0) + (metadata.lookback_non_refunded_users || 0) || cohortWide.paying_users)} users, {formatCurrency(cohortWide.net_revenue || cohortWide.total_revenue)} net revenue\n                        </div>\n                        \n                        {/* Enhanced: Comprehensive Base vs Lookback breakdown */}\n                        {(baseRevenue > 0 || lookbackRevenue > 0) && totalRevenue > 0 && (\n                            <div className=\"mt-3 pt-3 border-t border-blue-200 dark:border-blue-700\">\n                                <div className=\"text-xs font-medium text-blue-800 dark:text-blue-300 mb-2\">\n                                    Revenue Timeline Breakdown:\n                                </div>\n                                <div className=\"space-y-1\">\n                                    <div className=\"flex justify-between text-xs\">\n                                        <span className=\"text-blue-500 dark:text-blue-500\">Base Period:</span>\n                                        <span className=\"text-blue-600 dark:text-blue-400\">\n                                            {formatCurrency(baseRevenue)} ({baseContributionPct.toFixed(1)}%)\n                                        </span>\n                                    </div>\n                                    <div className=\"flex justify-between text-xs\">\n                                        <span className=\"text-blue-500 dark:text-blue-500\">Lookback Period:</span>\n                                        <span className=\"text-blue-600 dark:text-blue-400\">\n                                            {formatCurrency(lookbackRevenue)} ({lookbackContributionPct.toFixed(1)}%)\n                                        </span>\n                                    </div>\n                                    <div className=\"flex justify-between text-xs font-medium border-t border-blue-200 dark:border-blue-700 pt-1\">\n                                        <span className=\"text-blue-600 dark:text-blue-400\">Total:</span>\n                                        <span className=\"text-blue-700 dark:text-blue-300\">\n                                            {formatCurrency(totalRevenue)}\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n                    </div>\n                    \n                    <div className=\"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                        <div className=\"text-2xl font-semibold text-gray-700 dark:text-gray-300\">\n                            {formatCurrency(cohortWide.total_revenue || totalRevenue)}\n                        </div>\n                        <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                            Total Revenue\n                        </div>\n                        {cohortWide.total_refunds > 0 && (\n                            <div className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\n                                {formatCurrency(cohortWide.total_refunds)} refunded\n                            </div>\n                        )}\n                        \n                        {/* Enhanced: Detailed revenue breakdown with period-specific refunds */}\n                        {(baseRevenue > 0 || lookbackRevenue > 0) && (\n                            <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600\">\n                                <div className=\"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                                    Revenue Sources:\n                                </div>\n                                <div className=\"space-y-1\">\n                                    <div className=\"flex justify-between text-xs\">\n                                        <span className=\"text-gray-500 dark:text-gray-500\">Base Period:</span>\n                                        <span className=\"text-gray-600 dark:text-gray-400\">\n                                            {formatCurrency(baseRevenue)}\n                                        </span>\n                                    </div>\n                                    {/* Base period refunds */}\n                                    {(metadata.base_refunds > 0) && (\n                                        <div className=\"flex justify-between text-xs ml-2\">\n                                            <span className=\"text-red-500 dark:text-red-400\">Base Refunds:</span>\n                                            <span className=\"text-red-600 dark:text-red-400\">\n                                                -{formatCurrency(metadata.base_refunds)}\n                                            </span>\n                                        </div>\n                                    )}\n                                    <div className=\"flex justify-between text-xs\">\n                                        <span className=\"text-gray-500 dark:text-gray-500\">Lookback Period:</span>\n                                        <span className=\"text-gray-600 dark:text-gray-400\">\n                                            {formatCurrency(lookbackRevenue)}\n                                        </span>\n                                    </div>\n                                    {/* Lookback period refunds */}\n                                    {(metadata.lookback_refunds > 0) && (\n                                        <div className=\"flex justify-between text-xs ml-2\">\n                                            <span className=\"text-red-500 dark:text-red-400\">Lookback Refunds:</span>\n                                            <span className=\"text-red-600 dark:text-red-400\">\n                                                -{formatCurrency(metadata.lookback_refunds)}\n                                            </span>\n                                        </div>\n                                    )}\n                                    {/* Fallback: Total refunds if period-specific not available */}\n                                    {cohortWide.total_refunds > 0 && !(metadata.base_refunds > 0) && !(metadata.lookback_refunds > 0) && (\n                                        <div className=\"flex justify-between text-xs text-red-600 dark:text-red-400\">\n                                            <span>Total Refunds:</span>\n                                            <span>-{formatCurrency(cohortWide.total_refunds)}</span>\n                                        </div>\n                                    )}\n                                    <div className=\"flex justify-between text-xs font-medium border-t border-gray-200 dark:border-gray-600 pt-1\">\n                                        <span className=\"text-gray-600 dark:text-gray-400\">Net Revenue:</span>\n                                        <span className=\"text-gray-700 dark:text-gray-300\">\n                                            {formatCurrency(cohortWide.net_revenue || totalRevenue)}\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n                    </div>\n                    \n                    <div className=\"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\n                        <div className=\"text-2xl font-semibold text-gray-700 dark:text-gray-300\">\n                            {formatNumber(cohortWide.total_paying_users || cohortWide.paying_users)}\n                        </div>\n                        <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                            Total Paying Users\n                        </div>\n                        {cohortWide.refund_users > 0 && (\n                            <div className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\n                                {formatNumber(cohortWide.refund_users)} refunded ({((cohortWide.refund_users / (cohortWide.total_paying_users || cohortWide.paying_users)) * 100).toFixed(1)}%)\n                            </div>\n                        )}\n                        \n                        {/* Enhanced: User timeline breakdown with refund information */}\n                        {((metadata.base_paying_users || 0) > 0 || (metadata.lookback_paying_users || 0) > 0) && (\n                            <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600\">\n                                <div className=\"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                                    User Timeline Distribution:\n                                </div>\n                                <div className=\"space-y-1\">\n                                    <div className=\"flex justify-between text-xs\">\n                                        <span className=\"text-gray-500 dark:text-gray-500\">Base Period:</span>\n                                        <span className=\"text-gray-600 dark:text-gray-400\">\n                                            {formatNumber(metadata.base_paying_users || 0)} paying\n                                        </span>\n                                    </div>\n                                    {(metadata.base_refund_users || 0) > 0 && (\n                                        <div className=\"flex justify-between text-xs ml-2\">\n                                            <span className=\"text-red-500 dark:text-red-400\">Base Refunds:</span>\n                                            <span className=\"text-red-600 dark:text-red-400\">\n                                                {formatNumber(metadata.base_refund_users)} users ({((metadata.base_refund_users / metadata.base_paying_users) * 100).toFixed(1)}%)\n                                            </span>\n                                        </div>\n                                    )}\n                                    <div className=\"flex justify-between text-xs\">\n                                        <span className=\"text-gray-500 dark:text-gray-500\">Lookback Period:</span>\n                                        <span className=\"text-gray-600 dark:text-gray-400\">\n                                            {formatNumber(metadata.lookback_paying_users || 0)} paying\n                                        </span>\n                                    </div>\n                                    {(metadata.lookback_refund_users || 0) > 0 && (\n                                        <div className=\"flex justify-between text-xs ml-2\">\n                                            <span className=\"text-red-500 dark:text-red-400\">Lookback Refunds:</span>\n                                            <span className=\"text-red-600 dark:text-red-400\">\n                                                {formatNumber(metadata.lookback_refund_users)} users ({((metadata.lookback_refund_users / metadata.lookback_paying_users) * 100).toFixed(1)}%)\n                                            </span>\n                                        </div>\n                                    )}\n                                    <div className=\"flex justify-between text-xs font-medium border-t border-gray-200 dark:border-gray-600 pt-1\">\n                                        <span className=\"text-gray-600 dark:text-gray-400\">Non-Refunded Users:</span>\n                                        <span className=\"text-gray-700 dark:text-gray-300\">\n                                            {formatNumber((metadata.base_non_refunded_users || 0) + (metadata.lookback_non_refunded_users || 0))}\n                                        </span>\n                                    </div>\n                                    {lookbackDaysUsed > 0 && (\n                                        <div className=\"text-xs text-gray-500 dark:text-gray-500 mt-1\">\n                                            Lookback: {lookbackDaysUsed} days\n                                        </div>\n                                    )}\n                                </div>\n                            </div>\n                        )}\n                        \n                        {/* Fallback: Extended cohort info if metadata not available */}\n                        {!((metadata.base_paying_users || 0) > 0 || (metadata.lookback_paying_users || 0) > 0) && \n                         (extendedCohortInfo?.base_users > 0 && extendedCohortInfo?.lookback_users > 0) && (\n                            <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600\">\n                                <div className=\"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                                    User Timeline Distribution:\n                                </div>\n                                <div className=\"space-y-1\">\n                                    <div className=\"flex justify-between text-xs\">\n                                        <span className=\"text-gray-500 dark:text-gray-500\">Base Period:</span>\n                                        <span className=\"text-gray-600 dark:text-gray-400\">\n                                            {formatNumber(extendedCohortInfo.base_users)} ({extendedCohortInfo.base_percentage.toFixed(1)}%)\n                                        </span>\n                                    </div>\n                                    <div className=\"flex justify-between text-xs\">\n                                        <span className=\"text-gray-500 dark:text-gray-500\">Lookback Period:</span>\n                                        <span className=\"text-gray-600 dark:text-gray-400\">\n                                            {formatNumber(extendedCohortInfo.lookback_users)} ({extendedCohortInfo.lookback_percentage.toFixed(1)}%)\n                                        </span>\n                                    </div>\n                                    <div className=\"flex justify-between text-xs font-medium border-t border-gray-200 dark:border-gray-600 pt-1\">\n                                        <span className=\"text-gray-600 dark:text-gray-400\">Total Extended:</span>\n                                        <span className=\"text-gray-700 dark:text-gray-300\">\n                                            {formatNumber(extendedCohortInfo.total_users)}\n                                        </span>\n                                    </div>\n                                    {lookbackDaysUsed > 0 && (\n                                        <div className=\"text-xs text-gray-500 dark:text-gray-500 mt-1\">\n                                            Lookback: {lookbackDaysUsed} days\n                                        </div>\n                                    )}\n                                </div>\n                            </div>\n                        )}\n                    </div>\n                </div>\n\n                {/* Method Badge */}\n                {metadata.calculation_method && (\n                    <div className=\"flex items-center space-x-2 mb-4\">\n                        <span className={`px-3 py-1 text-sm rounded-full ${\n                            metadata.calculation_method === 'standard' \n                                ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300'\n                                : metadata.calculation_method === 'extended_lookback'\n                                ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300'\n                                : 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300'\n                        }`}>\n                            {metadata.calculation_method === 'standard' ? 'Standard Calculation - No Lookback Used' : \n                             metadata.calculation_method === 'extended_lookback' ? `Extended Lookback - ${metadata.lookback_days} Days` : 'Fallback Method - Insufficient Data'}\n                        </span>\n                        {metadata.lookback_days > 0 && metadata.calculation_method === 'extended_lookback' && (\n                            <span className=\"px-3 py-1 text-sm bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 rounded-full\">\n                                Extended by {metadata.lookback_days} days for sufficient sample size\n                            </span>\n                        )}\n                    </div>\n                )}\n            </div>\n\n            {/* Per-Product ARPU Breakdown */}\n            {sortedProducts.length > 0 && (\n                <div>\n                    <div className=\"flex items-center justify-between mb-4\">\n                        <h4 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                            ARPU by Product ({sortedProducts.length} products{hasHiddenProducts ? ` + ${zeroArpuProducts.length} with $0 ARPU` : ''})\n                        </h4>\n                        <button\n                            onClick={() => setShowCalculationDetails(!showCalculationDetails)}\n                            className=\"text-sm text-blue-600 dark:text-blue-400 hover:underline\"\n                        >\n                            {showCalculationDetails ? 'Hide' : 'Show'} calculation details\n                        </button>\n                    </div>\n\n                    {/* NEW: Warning about hidden zero ARPU products */}\n                    {hasHiddenProducts && (\n                        <div className=\"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800\">\n                            <div className=\"text-sm text-yellow-800 dark:text-yellow-200\">\n                                <strong>Note:</strong> {zeroArpuProducts.length} product{zeroArpuProducts.length > 1 ? 's' : ''} with $0.00 ARPU {zeroArpuProducts.length > 1 ? 'are' : 'is'} not displayed above.\n                                <div className=\"text-xs mt-1\">\n                                    {zeroArpuProducts.length > 5 \n                                        ? `${zeroArpuProducts.slice(0, 5).map(([id]) => id).join(', ')} and ${zeroArpuProducts.length - 5} more...`\n                                        : zeroArpuProducts.map(([id]) => id).join(', ')\n                                    }\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {/* Product Cards */}\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6\">\n                        {sortedProducts.filter(([,productData]) => (productData.arpu || 0) > 0).map(([productId, productData]) => (\n                            <div\n                                key={productId}\n                                className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-5 hover:shadow-lg transition-all duration-200\"\n                            >\n                                {/* Product Name */}\n                                <div className=\"mb-4\">\n                                    <h5 className=\"font-semibold text-gray-900 dark:text-white text-sm leading-tight\" title={productId}>\n                                        {productId.length > 45 ? `${productId.substring(0, 45)}...` : productId}\n                                    </h5>\n                                </div>\n\n                                {/* Main ARPU Display */}\n                                <div className=\"text-center mb-4 py-3 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border border-blue-200 dark:border-blue-700\">\n                                    <div className=\"text-2xl font-bold text-blue-600 dark:text-blue-400\">\n                                        {formatCurrency(productData.arpu)}\n                                    </div>\n                                    <div className=\"text-xs text-blue-700 dark:text-blue-300 font-medium\">\n                                        ARPU\n                                    </div>\n                                </div>\n\n                                {/* NEW: Separate Base vs Lookback ARPU for this product */}\n                                {(productData.base_revenue > 0 || productData.lookback_revenue > 0) && \n                                 (productData.base_non_refunded_users > 0 || productData.lookback_non_refunded_users > 0) && (\n                                    <div className=\"mb-4 p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded border border-indigo-200 dark:border-indigo-700\">\n                                        <div className=\"text-xs font-medium text-indigo-800 dark:text-indigo-300 mb-2\">Period ARPU (Net Revenue ÷ Non-Refunded Users):</div>\n                                        <div className=\"grid grid-cols-2 gap-2\">\n                                            <div className=\"text-center\">\n                                                <div className=\"text-sm font-bold text-indigo-600 dark:text-indigo-400\">\n                                                    {formatCurrency(productData.base_non_refunded_users > 0 ? (productData.base_revenue - (productData.base_refunds || 0)) / productData.base_non_refunded_users : 0)}\n                                                </div>\n                                                <div className=\"text-xs text-indigo-700 dark:text-indigo-300\">Base</div>\n                                                <div className=\"text-xs text-indigo-600 dark:text-indigo-400\">\n                                                    {formatCurrency((productData.base_revenue || 0) - (productData.base_refunds || 0))} ÷ {formatNumber(productData.base_non_refunded_users || 0)}\n                                                </div>\n                                            </div>\n                                            <div className=\"text-center\">\n                                                <div className=\"text-sm font-bold text-indigo-600 dark:text-indigo-400\">\n                                                    {formatCurrency(productData.lookback_non_refunded_users > 0 ? (productData.lookback_revenue - (productData.lookback_refunds || 0)) / productData.lookback_non_refunded_users : 0)}\n                                                </div>\n                                                <div className=\"text-xs text-indigo-700 dark:text-indigo-300\">Lookback</div>\n                                                <div className=\"text-xs text-indigo-600 dark:text-indigo-400\">\n                                                    {formatCurrency((productData.lookback_revenue || 0) - (productData.lookback_refunds || 0))} ÷ {formatNumber(productData.lookback_non_refunded_users || 0)}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                )}\n                                \n                                {/* Revenue and User Stats */}\n                                <div className=\"space-y-3\">\n                                    <div className=\"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-gray-700 rounded\">\n                                        <span className=\"text-xs text-gray-600 dark:text-gray-400\">\n                                            {productData.net_revenue ? 'Net Revenue' : 'Total Revenue'}\n                                        </span>\n                                        <span className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                                            {formatCurrency(productData.net_revenue || productData.total_revenue)}\n                                            {productData.total_refunds > 0 && (\n                                                <div className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\n                                                    {formatCurrency(productData.total_revenue)} total - {formatCurrency(productData.total_refunds)} refunded\n                                                </div>\n                                            )}\n                                        </span>\n                                    </div>\n                                    \n                                    {/* Enhanced: Comprehensive Base vs Lookback revenue breakdown with period-specific refunds */}\n                                    {(productData.base_revenue > 0 || productData.lookback_revenue > 0) && (\n                                        <div className=\"py-2 px-3 bg-amber-50 dark:bg-amber-900/20 rounded border border-amber-200 dark:border-amber-700\">\n                                            <div className=\"text-xs font-medium text-amber-800 dark:text-amber-300 mb-2\">Revenue Timeline:</div>\n                                            <div className=\"space-y-1\">\n                                                <div className=\"flex justify-between text-xs\">\n                                                    <span className=\"text-amber-700 dark:text-amber-400\">Base Period:</span>\n                                                    <span className=\"text-amber-800 dark:text-amber-300 font-medium\">\n                                                        {formatCurrency(productData.base_revenue || 0)}\n                                                    </span>\n                                                </div>\n                                                {/* NEW: Base period refunds for this product */}\n                                                {productData.base_refunds > 0 && (\n                                                    <div className=\"flex justify-between text-xs ml-2\">\n                                                        <span className=\"text-red-600 dark:text-red-400\">Base Refunds:</span>\n                                                        <span className=\"text-red-700 dark:text-red-400 font-medium\">\n                                                            -{formatCurrency(productData.base_refunds)}\n                                                        </span>\n                                                    </div>\n                                                )}\n                                                <div className=\"flex justify-between text-xs\">\n                                                    <span className=\"text-amber-700 dark:text-amber-400\">Lookback Period:</span>\n                                                    <span className=\"text-amber-800 dark:text-amber-300 font-medium\">\n                                                        {formatCurrency(productData.lookback_revenue || 0)}\n                                                    </span>\n                                                </div>\n                                                {/* NEW: Lookback period refunds for this product */}\n                                                {productData.lookback_refunds > 0 && (\n                                                    <div className=\"flex justify-between text-xs ml-2\">\n                                                        <span className=\"text-red-600 dark:text-red-400\">Lookback Refunds:</span>\n                                                        <span className=\"text-red-700 dark:text-red-400 font-medium\">\n                                                            -{formatCurrency(productData.lookback_refunds)}\n                                                        </span>\n                                                    </div>\n                                                )}\n                                                {/* Net revenue calculation */}\n                                                <div className=\"flex justify-between text-xs font-medium border-t border-amber-300 dark:border-amber-600 pt-1\">\n                                                    <span className=\"text-amber-800 dark:text-amber-300\">Net Revenue:</span>\n                                                    <span className=\"text-amber-900 dark:text-amber-200\">\n                                                        {formatCurrency(productData.net_revenue || (productData.base_revenue + productData.lookback_revenue - (productData.base_refunds || 0) - (productData.lookback_refunds || 0)))}\n                                                    </span>\n                                                </div>\n                                                {(productData.base_revenue > 0 && productData.lookback_revenue > 0) && (\n                                                    <div className=\"text-xs text-amber-600 dark:text-amber-400 mt-1 pt-1 border-t border-amber-300 dark:border-amber-600\">\n                                                        Base: {((productData.base_revenue / (productData.base_revenue + productData.lookback_revenue)) * 100).toFixed(1)}% • \n                                                        Lookback: {((productData.lookback_revenue / (productData.base_revenue + productData.lookback_revenue)) * 100).toFixed(1)}%\n                                                    </div>\n                                                )}\n                                            </div>\n                                        </div>\n                                    )}\n                                    \n                                    <div className=\"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-gray-700 rounded\">\n                                        <span className=\"text-xs text-gray-600 dark:text-gray-400\">Total Paying Users</span>\n                                        <span className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                                            {formatNumber(productData.paying_users)}\n                                            {productData.refund_users > 0 && (\n                                                <span className=\"text-xs text-red-600 dark:text-red-400 ml-1\">\n                                                    ({formatNumber(productData.refund_users)} refunded - {((productData.refund_users / productData.paying_users) * 100).toFixed(1)}%)\n                                                </span>\n                                            )}\n                                        </span>\n                                    </div>\n                                    \n                                    {/* Non-refunded users breakdown */}\n                                    {(productData.base_non_refunded_users > 0 || productData.lookback_non_refunded_users > 0) && (\n                                        <div className=\"py-2 px-3 bg-purple-50 dark:bg-purple-900/20 rounded border border-purple-200 dark:border-purple-700\">\n                                            <div className=\"text-xs font-medium text-purple-800 dark:text-purple-300 mb-2\">User Timeline (Used in ARPU):</div>\n                                            <div className=\"space-y-1\">\n                                                <div className=\"flex justify-between text-xs\">\n                                                    <span className=\"text-purple-700 dark:text-purple-400\">Base Period:</span>\n                                                    <span className=\"text-purple-800 dark:text-purple-300 font-medium\">\n                                                        {formatNumber(productData.base_paying_users || 0)} paying\n                                                    </span>\n                                                </div>\n                                                {(productData.base_refund_users || 0) > 0 && (\n                                                    <div className=\"flex justify-between text-xs ml-2\">\n                                                        <span className=\"text-red-600 dark:text-red-400\">Base Refunds:</span>\n                                                        <span className=\"text-red-700 dark:text-red-400 font-medium\">\n                                                            -{formatNumber(productData.base_refund_users)} users ({((productData.base_refund_users / productData.base_paying_users) * 100).toFixed(1)}%)\n                                                        </span>\n                                                    </div>\n                                                )}\n                                                <div className=\"flex justify-between text-xs\">\n                                                    <span className=\"text-purple-700 dark:text-purple-400\">Lookback Period:</span>\n                                                    <span className=\"text-purple-800 dark:text-purple-300 font-medium\">\n                                                        {formatNumber(productData.lookback_paying_users || 0)} paying\n                                                    </span>\n                                                </div>\n                                                {(productData.lookback_refund_users || 0) > 0 && (\n                                                    <div className=\"flex justify-between text-xs ml-2\">\n                                                        <span className=\"text-red-600 dark:text-red-400\">Lookback Refunds:</span>\n                                                        <span className=\"text-red-700 dark:text-red-400 font-medium\">\n                                                            -{formatNumber(productData.lookback_refund_users)} users ({((productData.lookback_refund_users / productData.lookback_paying_users) * 100).toFixed(1)}%)\n                                                        </span>\n                                                    </div>\n                                                )}\n                                                <div className=\"flex justify-between text-xs font-medium border-t border-purple-300 dark:border-purple-600 pt-1\">\n                                                    <span className=\"text-purple-800 dark:text-purple-300\">Non-Refunded Users:</span>\n                                                    <span className=\"text-purple-900 dark:text-purple-200\">\n                                                        {formatNumber((productData.base_non_refunded_users || 0) + (productData.lookback_non_refunded_users || 0))}\n                                                    </span>\n                                                </div>\n                                                {((productData.base_paying_users || 0) > 0 && (productData.lookback_paying_users || 0) > 0) && (\n                                                    <div className=\"text-xs text-purple-600 dark:text-purple-400 mt-1 pt-1 border-t border-purple-300 dark:border-purple-600\">\n                                                        Base: {(((productData.base_paying_users || 0) / ((productData.base_paying_users || 0) + (productData.lookback_paying_users || 0))) * 100).toFixed(1)}% • \n                                                        Lookback: {(((productData.lookback_paying_users || 0) / ((productData.base_paying_users || 0) + (productData.lookback_paying_users || 0))) * 100).toFixed(1)}%\n                                                    </div>\n                                                )}\n                                            </div>\n                                        </div>\n                                    )}\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n\n                    {/* Detailed Table View */}\n                    {showCalculationDetails && (\n                        <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-4\">\n                            <h5 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-3\">\n                                Calculation Details\n                            </h5>\n                            \n                            {/* NEW: Calculation Method Note */}\n                            <div className=\"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800\">\n                                <div className=\"text-sm text-blue-800 dark:text-blue-200\">\n                                    <strong>ARPU Calculation Method:</strong> All ARPU values use <strong>Net Revenue ÷ Non-Refunded Users</strong>\n                                    <div className=\"text-xs mt-1 text-blue-700 dark:text-blue-300\">\n                                        • Base ARPU = (Base Revenue - Base Refunds) ÷ Base Non-Refunded Users<br/>\n                                        • Lookback ARPU = (Lookback Revenue - Lookback Refunds) ÷ Lookback Non-Refunded Users<br/>\n                                        • Combined ARPU = Total Net Revenue ÷ Total Non-Refunded Users\n                                    </div>\n                                </div>\n                            </div>\n                            \n                            <div className=\"overflow-x-auto\">\n                                <table className=\"min-w-full text-sm\">\n                                    <thead className=\"bg-gray-100 dark:bg-gray-700\">\n                                        <tr>\n                                            <th className=\"px-3 py-2 text-left text-gray-700 dark:text-gray-300\">Product ID</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Total Revenue</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Base Revenue</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Lookback Revenue</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Base Refunds</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Lookback Refunds</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Net Revenue</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Total Paying Users</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Refund %</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Non-Refunded Users</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Base ARPU</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Lookback ARPU</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">Combined ARPU</th>\n                                            <th className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">% of Net Revenue</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody className=\"divide-y divide-gray-200 dark:divide-gray-600\">\n                                        {sortedProducts.map(([productId, productData]) => {\n                                            const netRevenue = productData.net_revenue || productData.total_revenue;\n                                            const cohortNetRevenue = cohortWide.net_revenue || cohortWide.total_revenue;\n                                            const revenuePercentage = cohortNetRevenue > 0 \n                                                ? (netRevenue / cohortNetRevenue) * 100 \n                                                : 0;\n                                            const nonRefundedUsers = (productData.base_non_refunded_users || 0) + (productData.lookback_non_refunded_users || 0) || productData.paying_users;\n                                            const refundPercentage = productData.paying_users > 0 ? ((productData.refund_users || 0) / productData.paying_users) * 100 : 0;\n                                            const baseARPU = productData.base_non_refunded_users > 0 ? (productData.base_revenue - (productData.base_refunds || 0)) / productData.base_non_refunded_users : 0;\n                                            const lookbackARPU = productData.lookback_non_refunded_users > 0 ? (productData.lookback_revenue - (productData.lookback_refunds || 0)) / productData.lookback_non_refunded_users : 0;\n                                            \n                                            return (\n                                                <tr key={productId} className=\"hover:bg-gray-50 dark:hover:bg-gray-700\">\n                                                    <td className=\"px-3 py-2 text-gray-900 dark:text-white\">\n                                                        <div className=\"max-w-xs truncate\" title={productId}>\n                                                            {productId}\n                                                        </div>\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">\n                                                        {formatCurrency(productData.total_revenue)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">\n                                                        {formatCurrency(productData.base_revenue || 0)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">\n                                                        {formatCurrency(productData.lookback_revenue || 0)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-red-600 dark:text-red-400\">\n                                                        {formatCurrency(productData.base_refunds || 0)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-red-600 dark:text-red-400\">\n                                                        {formatCurrency(productData.lookback_refunds || 0)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">\n                                                        {formatCurrency(productData.net_revenue || productData.total_revenue)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">\n                                                        {formatNumber(productData.paying_users)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-red-600 dark:text-red-400\">\n                                                        {formatPercentage(refundPercentage)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-purple-600 dark:text-purple-400 font-medium\">\n                                                        {formatNumber(nonRefundedUsers)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-indigo-600 dark:text-indigo-400\">\n                                                        {formatCurrency(baseARPU)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-indigo-600 dark:text-indigo-400\">\n                                                        {formatCurrency(lookbackARPU)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right font-semibold text-green-600 dark:text-green-400\">\n                                                        {formatCurrency(productData.arpu)}\n                                                    </td>\n                                                    <td className=\"px-3 py-2 text-right text-gray-700 dark:text-gray-300\">\n                                                        {formatPercentage(revenuePercentage)}\n                                                    </td>\n                                                </tr>\n                                            );\n                                        })}\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n                    )}\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default ARPUDisplay; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,MAAMC,WAAW,GAAGA,CAAC;EAAEC;AAAK,CAAC,KAAK;EAAAC,EAAA;EAAA,IAAAC,UAAA,EAAAC,qBAAA,EAAAC,WAAA,EAAAC,qBAAA,EAAAC,WAAA,EAAAC,WAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,mBAAA,EAAAC,oBAAA,EAAAC,oBAAA,EAAAC,oBAAA,EAAAC,oBAAA,EAAAC,oBAAA,EAAAC,oBAAA;EAC9B,MAAM,CAACC,sBAAsB,EAAEC,yBAAyB,CAAC,GAAGxB,QAAQ,CAAC,KAAK,CAAC;;EAE3E;EACAyB,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEtB,IAAI,CAAC;EAC/CqB,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAE;IAC3BC,OAAO,EAAE,CAAC,CAACvB,IAAI;IACfwB,WAAW,EAAE,CAAC,EAACxB,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEA,IAAI;IACzByB,QAAQ,EAAEzB,IAAI,GAAG0B,MAAM,CAACC,IAAI,CAAC3B,IAAI,CAAC,GAAG,EAAE;IACvC4B,YAAY,EAAE5B,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEA,IAAI,GAAG0B,MAAM,CAACC,IAAI,CAAC3B,IAAI,CAACA,IAAI,CAAC,GAAG;EACxD,CAAC,CAAC;;EAEF;EACA,IAAI6B,QAAQ,GAAG,IAAI;EACnB,IAAIC,aAAa,GAAG,IAAI;EACxB,IAAIC,kBAAkB,GAAG,IAAI;EAC7B,IAAIC,uBAAuB,GAAG,IAAI;;EAElC;EACA,IAAIhC,IAAI,aAAJA,IAAI,gBAAAE,UAAA,GAAJF,IAAI,CAAEA,IAAI,cAAAE,UAAA,gBAAAC,qBAAA,GAAVD,UAAA,CAAY+B,iBAAiB,cAAA9B,qBAAA,eAA7BA,qBAAA,CAA+B+B,aAAa,EAAE;IAAA,IAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA;IAC9CjB,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC;IACpDO,QAAQ,GAAG7B,IAAI,CAACA,IAAI,CAACiC,iBAAiB,CAACC,aAAa;;IAEpD;IACAH,kBAAkB,IAAAI,sBAAA,GAAGnC,IAAI,CAACA,IAAI,CAACiC,iBAAiB,CAACM,eAAe,cAAAJ,sBAAA,uBAA3CA,sBAAA,CAA6CK,gBAAgB;IAClFV,aAAa,IAAAM,sBAAA,GAAGpC,IAAI,CAACA,IAAI,CAACiC,iBAAiB,cAAAG,sBAAA,wBAAAC,sBAAA,GAA3BD,sBAAA,CAA6BK,WAAW,cAAAJ,sBAAA,wBAAAC,sBAAA,GAAxCD,sBAAA,CAA0CK,cAAc,cAAAJ,sBAAA,uBAAxDA,sBAAA,CAA0DK,QAAQ;IAElFtB,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAE;MACnCO,QAAQ;MACRE,kBAAkB;MAClBD;IACJ,CAAC,CAAC;EACN;EACA;EAAA,KACK,IAAI9B,IAAI,aAAJA,IAAI,gBAAAI,WAAA,GAAJJ,IAAI,CAAEA,IAAI,cAAAI,WAAA,eAAVA,WAAA,CAAYwC,aAAa,EAAE;IAAA,IAAAC,oBAAA;IAChCxB,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;IAClC,MAAMwB,UAAU,GAAG9C,IAAI,CAACA,IAAI,CAAC4C,aAAa;;IAE1C;IACAf,QAAQ,GAAG;MACPkB,WAAW,EAAE;QACTC,IAAI,EAAEF,UAAU,CAACE,IAAI,IAAI,CAAC;QAC1BC,aAAa,EAAE,CAAC;QAChBC,YAAY,EAAE,CAAC;QACfC,WAAW,EAAE;MACjB,CAAC;MACDC,WAAW,EAAE,CAAC,CAAC;MACfT,QAAQ,EAAE;QACNU,kBAAkB,EAAE,eAAe;QACnCC,OAAO,EAAE,yBAAyB;QAClCC,aAAa,EAAE,EAAAV,oBAAA,GAAAC,UAAU,CAACH,QAAQ,cAAAE,oBAAA,uBAAnBA,oBAAA,CAAqBW,kBAAkB,KAAI;MAC9D;IACJ,CAAC;;IAED;IACA,IAAIV,UAAU,CAACW,gBAAgB,EAAE;MAC7B/B,MAAM,CAACgC,OAAO,CAACZ,UAAU,CAACW,gBAAgB,CAAC,CAACE,OAAO,CAAC,CAAC,CAACC,SAAS,EAAEZ,IAAI,CAAC,KAAK;QACvEnB,QAAQ,CAACuB,WAAW,CAACQ,SAAS,CAAC,GAAG;UAC9BZ,IAAI,EAAEA,IAAI;UACVC,aAAa,EAAE,CAAC;UAChBC,YAAY,EAAE,CAAC;UACfW,WAAW,EAAE,CAAC;UACdV,WAAW,EAAE;QACjB,CAAC;MACL,CAAC,CAAC;IACN;;IAEA;IACApB,kBAAkB,GAAG;MACjB+B,UAAU,EAAEhB,UAAU,CAACgB,UAAU,IAAI,CAAC;MACtCC,cAAc,EAAEjB,UAAU,CAACiB,cAAc,IAAI,CAAC;MAC9CC,WAAW,EAAElB,UAAU,CAACmB,yBAAyB,IAAI,CAAC;MACtDC,eAAe,EAAE,CAAC;MAClBC,mBAAmB,EAAE;IACzB,CAAC;IAED,IAAIpC,kBAAkB,CAACiC,WAAW,GAAG,CAAC,EAAE;MACpCjC,kBAAkB,CAACmC,eAAe,GAAInC,kBAAkB,CAAC+B,UAAU,GAAG/B,kBAAkB,CAACiC,WAAW,GAAI,GAAG;MAC3GjC,kBAAkB,CAACoC,mBAAmB,GAAIpC,kBAAkB,CAACgC,cAAc,GAAGhC,kBAAkB,CAACiC,WAAW,GAAI,GAAG;IACvH;IAEAlC,aAAa,GAAG;MACZsC,UAAU,EAAEtB,UAAU,CAACuB,WAAW,IAAI,CAAC;MACvCR,WAAW,EAAEf,UAAU,CAACwB,YAAY,IAAI;IAC5C,CAAC;IAEDjD,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAE;MAC/BO,QAAQ;MACRE,kBAAkB;MAClBD,aAAa;MACbgB;IACJ,CAAC,CAAC;EACN;EACA;EAAA,KACK,IAAI9C,IAAI,aAAJA,IAAI,gBAAAK,qBAAA,GAAJL,IAAI,CAAEiC,iBAAiB,cAAA5B,qBAAA,eAAvBA,qBAAA,CAAyB6B,aAAa,EAAE;IAAA,IAAAqC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA;IAC7CrD,OAAO,CAACC,GAAG,CAAC,8CAA8C,CAAC;IAC3DO,QAAQ,GAAG7B,IAAI,CAACiC,iBAAiB,CAACC,aAAa;IAC/CH,kBAAkB,IAAAwC,sBAAA,GAAGvE,IAAI,CAACiC,iBAAiB,CAACM,eAAe,cAAAgC,sBAAA,uBAAtCA,sBAAA,CAAwC/B,gBAAgB;IAC7EV,aAAa,IAAA0C,sBAAA,GAAGxE,IAAI,CAACiC,iBAAiB,cAAAuC,sBAAA,wBAAAC,sBAAA,GAAtBD,sBAAA,CAAwB/B,WAAW,cAAAgC,sBAAA,wBAAAC,sBAAA,GAAnCD,sBAAA,CAAqC/B,cAAc,cAAAgC,sBAAA,uBAAnDA,sBAAA,CAAqD/B,QAAQ;EACjF;EACA;EAAA,KACK,IAAI3C,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAE4C,aAAa,EAAE;IAAA,IAAA+B,qBAAA;IAC1BtD,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC;IACzC,MAAMwB,UAAU,GAAG9C,IAAI,CAAC4C,aAAa;IAErCf,QAAQ,GAAG;MACPkB,WAAW,EAAE;QACTC,IAAI,EAAEF,UAAU,CAACE,IAAI,IAAI,CAAC;QAC1BC,aAAa,EAAE,CAAC;QAChBC,YAAY,EAAE,CAAC;QACfC,WAAW,EAAE;MACjB,CAAC;MACDC,WAAW,EAAE,CAAC,CAAC;MACfT,QAAQ,EAAE;QACNU,kBAAkB,EAAE,eAAe;QACnCC,OAAO,EAAE,yBAAyB;QAClCC,aAAa,EAAE,EAAAoB,qBAAA,GAAA7B,UAAU,CAACH,QAAQ,cAAAgC,qBAAA,uBAAnBA,qBAAA,CAAqBnB,kBAAkB,KAAI;MAC9D;IACJ,CAAC;IAED,IAAIV,UAAU,CAACW,gBAAgB,EAAE;MAC7B/B,MAAM,CAACgC,OAAO,CAACZ,UAAU,CAACW,gBAAgB,CAAC,CAACE,OAAO,CAAC,CAAC,CAACC,SAAS,EAAEZ,IAAI,CAAC,KAAK;QACvEnB,QAAQ,CAACuB,WAAW,CAACQ,SAAS,CAAC,GAAG;UAC9BZ,IAAI,EAAEA,IAAI;UACVC,aAAa,EAAE,CAAC;UAChBC,YAAY,EAAE,CAAC;UACfW,WAAW,EAAE,CAAC;UACdV,WAAW,EAAE;QACjB,CAAC;MACL,CAAC,CAAC;IACN;IAEApB,kBAAkB,GAAG;MACjB+B,UAAU,EAAEhB,UAAU,CAACgB,UAAU,IAAI,CAAC;MACtCC,cAAc,EAAEjB,UAAU,CAACiB,cAAc,IAAI,CAAC;MAC9CC,WAAW,EAAElB,UAAU,CAACmB,yBAAyB,IAAI,CAAC;MACtDC,eAAe,EAAE,CAAC;MAClBC,mBAAmB,EAAE;IACzB,CAAC;IAED,IAAIpC,kBAAkB,CAACiC,WAAW,GAAG,CAAC,EAAE;MACpCjC,kBAAkB,CAACmC,eAAe,GAAInC,kBAAkB,CAAC+B,UAAU,GAAG/B,kBAAkB,CAACiC,WAAW,GAAI,GAAG;MAC3GjC,kBAAkB,CAACoC,mBAAmB,GAAIpC,kBAAkB,CAACgC,cAAc,GAAGhC,kBAAkB,CAACiC,WAAW,GAAI,GAAG;IACvH;IAEAlC,aAAa,GAAG;MACZsC,UAAU,EAAEtB,UAAU,CAACuB,WAAW,IAAI,CAAC;MACvCR,WAAW,EAAEf,UAAU,CAACwB,YAAY,IAAI;IAC5C,CAAC;EACL;EACA;EAAA,KACK,IAAItE,IAAI,aAAJA,IAAI,gBAAAM,WAAA,GAAJN,IAAI,CAAEA,IAAI,cAAAM,WAAA,eAAVA,WAAA,CAAYsE,SAAS,EAAE;IAC5BvD,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;IACtCO,QAAQ,GAAG7B,IAAI,CAACA,IAAI,CAAC4E,SAAS;IAC9B9C,aAAa,GAAG9B,IAAI,CAACA,IAAI,CAAC6E,cAAc;EAC5C;EAEAxD,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAE;IACtCO,QAAQ;IACRE,kBAAkB;IAClBD,aAAa;IACbgD,WAAW,EAAE,CAAC,CAACjD;EACnB,CAAC,CAAC;EAEF,IAAI,CAACA,QAAQ,EAAE;IACX,oBACI/B,OAAA;MAAKiF,SAAS,EAAC,kBAAkB;MAAAC,QAAA,gBAC7BlF,OAAA;QAAGiF,SAAS,EAAC,kCAAkC;QAAAC,QAAA,EAAC;MAEhD;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eACJtF,OAAA;QAAKiF,SAAS,EAAC,4BAA4B;QAAAC,QAAA,GAAC,SACjC,EAACK,IAAI,CAACC,SAAS,CAAC;UACnB/D,OAAO,EAAE,CAAC,CAACvB,IAAI;UACfwB,WAAW,EAAE,CAAC,EAACxB,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEA,IAAI;UACzByB,QAAQ,EAAEzB,IAAI,GAAG0B,MAAM,CAACC,IAAI,CAAC3B,IAAI,CAAC,GAAG,EAAE;UACvC4B,YAAY,EAAE5B,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEA,IAAI,GAAG0B,MAAM,CAACC,IAAI,CAAC3B,IAAI,CAACA,IAAI,CAAC,GAAG;QACxD,CAAC,CAAC;MAAA;QAAAiF,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC;EAEd;EAEA,MAAMG,UAAU,GAAG1D,QAAQ,CAACkB,WAAW,IAAI,CAAC,CAAC;EAC7C,MAAMyC,UAAU,GAAG3D,QAAQ,CAACuB,WAAW,IAAI,CAAC,CAAC;EAC7C,MAAMT,QAAQ,GAAGd,QAAQ,CAACc,QAAQ,IAAI,CAAC,CAAC;;EAExC;EACA,MAAM8C,WAAW,GAAG9C,QAAQ,CAAC+C,YAAY,IAAI,CAAC;EAC9C,MAAMC,eAAe,GAAGhD,QAAQ,CAACiD,gBAAgB,IAAI,CAAC;EACtD,MAAMC,YAAY,GAAGJ,WAAW,GAAGE,eAAe,IAAIJ,UAAU,CAACtC,aAAa,IAAI,CAAC;EACnF,MAAM6C,mBAAmB,GAAGnD,QAAQ,CAACoD,qBAAqB,IAAI,CAAC;EAC/D,MAAMC,uBAAuB,GAAGrD,QAAQ,CAACsD,yBAAyB,IAAI,CAAC;;EAEvE;EACA,MAAMC,gBAAgB,GAAGvD,QAAQ,CAACa,kBAAkB,IAC5Bb,QAAQ,CAACY,aAAa,KACrBvD,IAAI,aAAJA,IAAI,wBAAAO,WAAA,GAAJP,IAAI,CAAEA,IAAI,cAAAO,WAAA,wBAAAC,qBAAA,GAAVD,WAAA,CAAY0B,iBAAiB,cAAAzB,qBAAA,wBAAAC,sBAAA,GAA7BD,qBAAA,CAA+BmC,QAAQ,cAAAlC,sBAAA,uBAAvCA,sBAAA,CAAyC+C,kBAAkB,CAAC,KAC5DxD,IAAI,aAAJA,IAAI,wBAAAU,sBAAA,GAAJV,IAAI,CAAEiC,iBAAiB,cAAAvB,sBAAA,wBAAAC,sBAAA,GAAvBD,sBAAA,CAAyBiC,QAAQ,cAAAhC,sBAAA,uBAAjCA,sBAAA,CAAmC6C,kBAAkB,CAAC,IACvD,CAAC;EAEzB,MAAM2C,cAAc,GAAIC,KAAK,IAAK;IAC9B,IAAIA,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKC,SAAS,IAAIC,KAAK,CAACF,KAAK,CAAC,EAAE,OAAO,OAAO;IACzE,OAAO,IAAIG,MAAM,CAACH,KAAK,CAAC,CAACI,cAAc,CAAC,OAAO,EAAE;MAAEC,qBAAqB,EAAE,CAAC;MAAEC,qBAAqB,EAAE;IAAE,CAAC,CAAC,EAAE;EAC9G,CAAC;EAED,MAAMC,YAAY,GAAIP,KAAK,IAAK;IAC5B,IAAIA,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKC,SAAS,IAAIC,KAAK,CAACF,KAAK,CAAC,EAAE,OAAO,GAAG;IACrE,OAAOG,MAAM,CAACH,KAAK,CAAC,CAACI,cAAc,CAAC,CAAC;EACzC,CAAC;EAED,MAAMI,gBAAgB,GAAIR,KAAK,IAAK;IAChC,IAAIA,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKC,SAAS,IAAIC,KAAK,CAACF,KAAK,CAAC,EAAE,OAAO,MAAM;IACxE,OAAO,GAAGG,MAAM,CAACH,KAAK,CAAC,CAACS,OAAO,CAAC,CAAC,CAAC,GAAG;EACzC,CAAC;;EAED;EACA,MAAMC,cAAc,GAAGpF,MAAM,CAACgC,OAAO,CAAC8B,UAAU,CAAC,CAACuB,IAAI,CAAC,CAAC,GAAEC,CAAC,CAAC,EAAE,GAAEC,CAAC,CAAC,KAAK,CAACA,CAAC,CAACjE,IAAI,IAAI,CAAC,KAAKgE,CAAC,CAAChE,IAAI,IAAI,CAAC,CAAC,CAAC;;EAErG;EACA,MAAMkE,gBAAgB,GAAGxF,MAAM,CAACgC,OAAO,CAAC8B,UAAU,CAAC,CAAC2B,MAAM,CAAC,CAAC,GAAEC,WAAW,CAAC,KAAK,CAACA,WAAW,CAACpE,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC;EAC7G,MAAMqE,iBAAiB,GAAGH,gBAAgB,CAACI,MAAM,GAAG,CAAC;;EAErD;EACA,MAAMC,qBAAqB,GAAGA,CAAA,KAAM;IAChC,MAAMC,SAAS,GAAI7E,QAAQ,CAAC8E,uBAAuB,IAAI,CAAE;IACzD,MAAMC,aAAa,GAAI/E,QAAQ,CAACgF,2BAA2B,IAAI,CAAE;IACjE,MAAMlC,WAAW,GAAI9C,QAAQ,CAAC+C,YAAY,IAAI,CAAE;IAChD,MAAMC,eAAe,GAAIhD,QAAQ,CAACiD,gBAAgB,IAAI,CAAE;IACxD,MAAMgC,WAAW,GAAIjF,QAAQ,CAACkF,YAAY,IAAI,CAAE;IAChD,MAAMC,eAAe,GAAInF,QAAQ,CAACoF,gBAAgB,IAAI,CAAE;;IAExD;IACA,MAAMC,cAAc,GAAGvC,WAAW,GAAGmC,WAAW;IAChD,MAAMK,kBAAkB,GAAGtC,eAAe,GAAGmC,eAAe;IAE5D,OAAO;MACHI,QAAQ,EAAEV,SAAS,GAAG,CAAC,GAAGQ,cAAc,GAAGR,SAAS,GAAG,CAAC;MACxDW,YAAY,EAAET,aAAa,GAAG,CAAC,GAAGO,kBAAkB,GAAGP,aAAa,GAAG,CAAC;MACxEnG,OAAO,EAAEiG,SAAS,GAAG,CAAC,IAAIE,aAAa,GAAG,CAAC;MAC3CM,cAAc;MACdC;IACJ,CAAC;EACL,CAAC;EAED,MAAMG,YAAY,GAAGb,qBAAqB,CAAC,CAAC;EAE5C,oBACIzH,OAAA;IAAKiF,SAAS,EAAC,WAAW;IAAAC,QAAA,gBAEtBlF,OAAA;MAAKiF,SAAS,EAAC,MAAM;MAAAC,QAAA,gBACjBlF,OAAA;QAAIiF,SAAS,EAAC,0DAA0D;QAAAC,QAAA,EAAC;MAEzE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EAGH,EAAAxE,mBAAA,GAAAmB,kBAAkB,cAAAnB,mBAAA,uBAAlBA,mBAAA,CAAoBkD,UAAU,IAAG,CAAC,IAAI,EAAAjD,oBAAA,GAAAkB,kBAAkB,cAAAlB,oBAAA,uBAAlBA,oBAAA,CAAoBkD,cAAc,IAAG,CAAC,iBAC1EjE,OAAA;QAAKiF,SAAS,EAAC,oGAAoG;QAAAC,QAAA,eAC/GlF,OAAA;UAAKiF,SAAS,EAAC,4CAA4C;UAAAC,QAAA,gBACvDlF,OAAA;YAAAkF,QAAA,EAAQ;UAA2B;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,mEAC5C,eAAAtF,OAAA;YAAKiF,SAAS,EAAC,cAAc;YAAAC,QAAA,GAAC,eACb,GAAAlE,oBAAA,GAACiB,kBAAkB,cAAAjB,oBAAA,uBAAlBA,oBAAA,CAAoBkD,WAAW,CAACwC,cAAc,CAAC,CAAC,EAAC,IAAE,GAAAzF,oBAAA,GAACgB,kBAAkB,cAAAhB,oBAAA,uBAAlBA,oBAAA,CAAoB+C,UAAU,CAAC0C,cAAc,CAAC,CAAC,EAAC,iBAAe,GAAAxF,oBAAA,GAACe,kBAAkB,cAAAf,oBAAA,uBAAlBA,oBAAA,CAAoB+C,cAAc,CAACyC,cAAc,CAAC,CAAC,EAAC,mBACtL,EAACN,gBAAgB,GAAG,CAAC,IAAI,gBAAgBA,gBAAgB,OAAO;UAAA;YAAAjB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/D,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CACR,EAGAgD,YAAY,CAAC7G,OAAO,iBACjBzB,OAAA;QAAKiF,SAAS,EAAC,wGAAwG;QAAAC,QAAA,gBACnHlF,OAAA;UAAKiF,SAAS,EAAC,+DAA+D;UAAAC,QAAA,EAAC;QAE/E;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACNtF,OAAA;UAAKiF,SAAS,EAAC,wBAAwB;UAAAC,QAAA,gBACnClF,OAAA;YAAKiF,SAAS,EAAC,aAAa;YAAAC,QAAA,gBACxBlF,OAAA;cAAKiF,SAAS,EAAC,wDAAwD;cAAAC,QAAA,EAClEmB,cAAc,CAACiC,YAAY,CAACF,QAAQ;YAAC;cAAAjD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrC,CAAC,eACNtF,OAAA;cAAKiF,SAAS,EAAC,8CAA8C;cAAAC,QAAA,EAAC;YAE9D;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACNtF,OAAA;cAAKiF,SAAS,EAAC,8CAA8C;cAAAC,QAAA,GACxDmB,cAAc,CAACiC,YAAY,CAACJ,cAAc,CAAC,EAAC,QAAG,EAACrB,YAAY,CAAChE,QAAQ,CAAC8E,uBAAuB,IAAI,CAAC,CAAC,EAAC,QACzG;YAAA;cAAAxC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC,eACNtF,OAAA;YAAKiF,SAAS,EAAC,aAAa;YAAAC,QAAA,gBACxBlF,OAAA;cAAKiF,SAAS,EAAC,wDAAwD;cAAAC,QAAA,EAClEmB,cAAc,CAACiC,YAAY,CAACD,YAAY;YAAC;cAAAlD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACzC,CAAC,eACNtF,OAAA;cAAKiF,SAAS,EAAC,8CAA8C;cAAAC,QAAA,EAAC;YAE9D;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACNtF,OAAA;cAAKiF,SAAS,EAAC,8CAA8C;cAAAC,QAAA,GACxDmB,cAAc,CAACiC,YAAY,CAACH,kBAAkB,CAAC,EAAC,QAAG,EAACtB,YAAY,CAAChE,QAAQ,CAACgF,2BAA2B,IAAI,CAAC,CAAC,EAAC,QACjH;YAAA;cAAA1C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CACR,eAEDtF,OAAA;QAAKiF,SAAS,EAAC,4CAA4C;QAAAC,QAAA,gBACvDlF,OAAA;UAAKiF,SAAS,EAAC,uGAAuG;UAAAC,QAAA,gBAClHlF,OAAA;YAAKiF,SAAS,EAAC,qDAAqD;YAAAC,QAAA,EAC/DmB,cAAc,CAACZ,UAAU,CAACvC,IAAI;UAAC;YAAAiC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/B,CAAC,eACNtF,OAAA;YAAKiF,SAAS,EAAC,0CAA0C;YAAAC,QAAA,EAAC;UAE1D;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eACNtF,OAAA;YAAKiF,SAAS,EAAC,+CAA+C;YAAAC,QAAA,GACzD2B,YAAY,CAAC,CAAChE,QAAQ,CAAC8E,uBAAuB,IAAI,CAAC,KAAK9E,QAAQ,CAACgF,2BAA2B,IAAI,CAAC,CAAC,IAAIpC,UAAU,CAACrC,YAAY,CAAC,EAAC,UAAQ,EAACiD,cAAc,CAACZ,UAAU,CAACpC,WAAW,IAAIoC,UAAU,CAACtC,aAAa,CAAC,EAAC,cAChN;UAAA;YAAAgC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,EAGL,CAACK,WAAW,GAAG,CAAC,IAAIE,eAAe,GAAG,CAAC,KAAKE,YAAY,GAAG,CAAC,iBACzD/F,OAAA;YAAKiF,SAAS,EAAC,yDAAyD;YAAAC,QAAA,gBACpElF,OAAA;cAAKiF,SAAS,EAAC,2DAA2D;cAAAC,QAAA,EAAC;YAE3E;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACNtF,OAAA;cAAKiF,SAAS,EAAC,WAAW;cAAAC,QAAA,gBACtBlF,OAAA;gBAAKiF,SAAS,EAAC,8BAA8B;gBAAAC,QAAA,gBACzClF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,EAAC;gBAAY;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACtEtF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,GAC7CmB,cAAc,CAACV,WAAW,CAAC,EAAC,IAAE,EAACK,mBAAmB,CAACe,OAAO,CAAC,CAAC,CAAC,EAAC,IACnE;gBAAA;kBAAA5B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,eACNtF,OAAA;gBAAKiF,SAAS,EAAC,8BAA8B;gBAAAC,QAAA,gBACzClF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,EAAC;gBAAgB;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAC1EtF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,GAC7CmB,cAAc,CAACR,eAAe,CAAC,EAAC,IAAE,EAACK,uBAAuB,CAACa,OAAO,CAAC,CAAC,CAAC,EAAC,IAC3E;gBAAA;kBAAA5B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,eACNtF,OAAA;gBAAKiF,SAAS,EAAC,6FAA6F;gBAAAC,QAAA,gBACxGlF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,EAAC;gBAAM;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAChEtF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,EAC7CmB,cAAc,CAACN,YAAY;gBAAC;kBAAAZ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC3B,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CACR;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC,eAENtF,OAAA;UAAKiF,SAAS,EAAC,oGAAoG;UAAAC,QAAA,gBAC/GlF,OAAA;YAAKiF,SAAS,EAAC,yDAAyD;YAAAC,QAAA,EACnEmB,cAAc,CAACZ,UAAU,CAACtC,aAAa,IAAI4C,YAAY;UAAC;YAAAZ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxD,CAAC,eACNtF,OAAA;YAAKiF,SAAS,EAAC,0CAA0C;YAAAC,QAAA,EAAC;UAE1D;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,EACLG,UAAU,CAAC8C,aAAa,GAAG,CAAC,iBACzBvI,OAAA;YAAKiF,SAAS,EAAC,+CAA+C;YAAAC,QAAA,GACzDmB,cAAc,CAACZ,UAAU,CAAC8C,aAAa,CAAC,EAAC,WAC9C;UAAA;YAAApD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CACR,EAGA,CAACK,WAAW,GAAG,CAAC,IAAIE,eAAe,GAAG,CAAC,kBACpC7F,OAAA;YAAKiF,SAAS,EAAC,yDAAyD;YAAAC,QAAA,gBACpElF,OAAA;cAAKiF,SAAS,EAAC,2DAA2D;cAAAC,QAAA,EAAC;YAE3E;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACNtF,OAAA;cAAKiF,SAAS,EAAC,WAAW;cAAAC,QAAA,gBACtBlF,OAAA;gBAAKiF,SAAS,EAAC,8BAA8B;gBAAAC,QAAA,gBACzClF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,EAAC;gBAAY;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACtEtF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,EAC7CmB,cAAc,CAACV,WAAW;gBAAC;kBAAAR,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC1B,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,EAEJzC,QAAQ,CAACkF,YAAY,GAAG,CAAC,iBACvB/H,OAAA;gBAAKiF,SAAS,EAAC,mCAAmC;gBAAAC,QAAA,gBAC9ClF,OAAA;kBAAMiF,SAAS,EAAC,gCAAgC;kBAAAC,QAAA,EAAC;gBAAa;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACrEtF,OAAA;kBAAMiF,SAAS,EAAC,gCAAgC;kBAAAC,QAAA,GAAC,GAC5C,EAACmB,cAAc,CAACxD,QAAQ,CAACkF,YAAY,CAAC;gBAAA;kBAAA5C,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACrC,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CACR,eACDtF,OAAA;gBAAKiF,SAAS,EAAC,8BAA8B;gBAAAC,QAAA,gBACzClF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,EAAC;gBAAgB;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAC1EtF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,EAC7CmB,cAAc,CAACR,eAAe;gBAAC;kBAAAV,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC9B,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,EAEJzC,QAAQ,CAACoF,gBAAgB,GAAG,CAAC,iBAC3BjI,OAAA;gBAAKiF,SAAS,EAAC,mCAAmC;gBAAAC,QAAA,gBAC9ClF,OAAA;kBAAMiF,SAAS,EAAC,gCAAgC;kBAAAC,QAAA,EAAC;gBAAiB;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACzEtF,OAAA;kBAAMiF,SAAS,EAAC,gCAAgC;kBAAAC,QAAA,GAAC,GAC5C,EAACmB,cAAc,CAACxD,QAAQ,CAACoF,gBAAgB,CAAC;gBAAA;kBAAA9C,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACzC,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CACR,EAEAG,UAAU,CAAC8C,aAAa,GAAG,CAAC,IAAI,EAAE1F,QAAQ,CAACkF,YAAY,GAAG,CAAC,CAAC,IAAI,EAAElF,QAAQ,CAACoF,gBAAgB,GAAG,CAAC,CAAC,iBAC7FjI,OAAA;gBAAKiF,SAAS,EAAC,6DAA6D;gBAAAC,QAAA,gBACxElF,OAAA;kBAAAkF,QAAA,EAAM;gBAAc;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAC3BtF,OAAA;kBAAAkF,QAAA,GAAM,GAAC,EAACmB,cAAc,CAACZ,UAAU,CAAC8C,aAAa,CAAC;gBAAA;kBAAApD,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACvD,CACR,eACDtF,OAAA;gBAAKiF,SAAS,EAAC,6FAA6F;gBAAAC,QAAA,gBACxGlF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,EAAC;gBAAY;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACtEtF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,EAC7CmB,cAAc,CAACZ,UAAU,CAACpC,WAAW,IAAI0C,YAAY;gBAAC;kBAAAZ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACrD,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CACR;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC,eAENtF,OAAA;UAAKiF,SAAS,EAAC,oGAAoG;UAAAC,QAAA,gBAC/GlF,OAAA;YAAKiF,SAAS,EAAC,yDAAyD;YAAAC,QAAA,EACnE2B,YAAY,CAACpB,UAAU,CAAC+C,kBAAkB,IAAI/C,UAAU,CAACrC,YAAY;UAAC;YAAA+B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtE,CAAC,eACNtF,OAAA;YAAKiF,SAAS,EAAC,0CAA0C;YAAAC,QAAA,EAAC;UAE1D;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,EACLG,UAAU,CAACgD,YAAY,GAAG,CAAC,iBACxBzI,OAAA;YAAKiF,SAAS,EAAC,+CAA+C;YAAAC,QAAA,GACzD2B,YAAY,CAACpB,UAAU,CAACgD,YAAY,CAAC,EAAC,aAAW,EAAC,CAAEhD,UAAU,CAACgD,YAAY,IAAIhD,UAAU,CAAC+C,kBAAkB,IAAI/C,UAAU,CAACrC,YAAY,CAAC,GAAI,GAAG,EAAE2D,OAAO,CAAC,CAAC,CAAC,EAAC,IACjK;UAAA;YAAA5B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CACR,EAGA,CAAC,CAACzC,QAAQ,CAAC6F,iBAAiB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC7F,QAAQ,CAAC8F,qBAAqB,IAAI,CAAC,IAAI,CAAC,kBAChF3I,OAAA;YAAKiF,SAAS,EAAC,yDAAyD;YAAAC,QAAA,gBACpElF,OAAA;cAAKiF,SAAS,EAAC,2DAA2D;cAAAC,QAAA,EAAC;YAE3E;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACNtF,OAAA;cAAKiF,SAAS,EAAC,WAAW;cAAAC,QAAA,gBACtBlF,OAAA;gBAAKiF,SAAS,EAAC,8BAA8B;gBAAAC,QAAA,gBACzClF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,EAAC;gBAAY;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACtEtF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,GAC7C2B,YAAY,CAAChE,QAAQ,CAAC6F,iBAAiB,IAAI,CAAC,CAAC,EAAC,SACnD;gBAAA;kBAAAvD,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,EACL,CAACzC,QAAQ,CAAC+F,iBAAiB,IAAI,CAAC,IAAI,CAAC,iBAClC5I,OAAA;gBAAKiF,SAAS,EAAC,mCAAmC;gBAAAC,QAAA,gBAC9ClF,OAAA;kBAAMiF,SAAS,EAAC,gCAAgC;kBAAAC,QAAA,EAAC;gBAAa;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACrEtF,OAAA;kBAAMiF,SAAS,EAAC,gCAAgC;kBAAAC,QAAA,GAC3C2B,YAAY,CAAChE,QAAQ,CAAC+F,iBAAiB,CAAC,EAAC,UAAQ,EAAC,CAAE/F,QAAQ,CAAC+F,iBAAiB,GAAG/F,QAAQ,CAAC6F,iBAAiB,GAAI,GAAG,EAAE3B,OAAO,CAAC,CAAC,CAAC,EAAC,IACpI;gBAAA;kBAAA5B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CACR,eACDtF,OAAA;gBAAKiF,SAAS,EAAC,8BAA8B;gBAAAC,QAAA,gBACzClF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,EAAC;gBAAgB;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAC1EtF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,GAC7C2B,YAAY,CAAChE,QAAQ,CAAC8F,qBAAqB,IAAI,CAAC,CAAC,EAAC,SACvD;gBAAA;kBAAAxD,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,EACL,CAACzC,QAAQ,CAACgG,qBAAqB,IAAI,CAAC,IAAI,CAAC,iBACtC7I,OAAA;gBAAKiF,SAAS,EAAC,mCAAmC;gBAAAC,QAAA,gBAC9ClF,OAAA;kBAAMiF,SAAS,EAAC,gCAAgC;kBAAAC,QAAA,EAAC;gBAAiB;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACzEtF,OAAA;kBAAMiF,SAAS,EAAC,gCAAgC;kBAAAC,QAAA,GAC3C2B,YAAY,CAAChE,QAAQ,CAACgG,qBAAqB,CAAC,EAAC,UAAQ,EAAC,CAAEhG,QAAQ,CAACgG,qBAAqB,GAAGhG,QAAQ,CAAC8F,qBAAqB,GAAI,GAAG,EAAE5B,OAAO,CAAC,CAAC,CAAC,EAAC,IAChJ;gBAAA;kBAAA5B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CACR,eACDtF,OAAA;gBAAKiF,SAAS,EAAC,6FAA6F;gBAAAC,QAAA,gBACxGlF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,EAAC;gBAAmB;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAC7EtF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,EAC7C2B,YAAY,CAAC,CAAChE,QAAQ,CAAC8E,uBAAuB,IAAI,CAAC,KAAK9E,QAAQ,CAACgF,2BAA2B,IAAI,CAAC,CAAC;gBAAC;kBAAA1C,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAClG,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,EACLc,gBAAgB,GAAG,CAAC,iBACjBpG,OAAA;gBAAKiF,SAAS,EAAC,+CAA+C;gBAAAC,QAAA,GAAC,YACjD,EAACkB,gBAAgB,EAAC,OAChC;cAAA;gBAAAjB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CACR;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CACR,EAGA,EAAE,CAACzC,QAAQ,CAAC6F,iBAAiB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC7F,QAAQ,CAAC8F,qBAAqB,IAAI,CAAC,IAAI,CAAC,CAAC,IACpF,EAAAxH,oBAAA,GAAAc,kBAAkB,cAAAd,oBAAA,uBAAlBA,oBAAA,CAAoB6C,UAAU,IAAG,CAAC,IAAI,EAAA5C,oBAAA,GAAAa,kBAAkB,cAAAb,oBAAA,uBAAlBA,oBAAA,CAAoB6C,cAAc,IAAG,CAAE,iBAC3EjE,OAAA;YAAKiF,SAAS,EAAC,yDAAyD;YAAAC,QAAA,gBACpElF,OAAA;cAAKiF,SAAS,EAAC,2DAA2D;cAAAC,QAAA,EAAC;YAE3E;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACNtF,OAAA;cAAKiF,SAAS,EAAC,WAAW;cAAAC,QAAA,gBACtBlF,OAAA;gBAAKiF,SAAS,EAAC,8BAA8B;gBAAAC,QAAA,gBACzClF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,EAAC;gBAAY;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACtEtF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,GAC7C2B,YAAY,CAAC5E,kBAAkB,CAAC+B,UAAU,CAAC,EAAC,IAAE,EAAC/B,kBAAkB,CAACmC,eAAe,CAAC2C,OAAO,CAAC,CAAC,CAAC,EAAC,IAClG;gBAAA;kBAAA5B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,eACNtF,OAAA;gBAAKiF,SAAS,EAAC,8BAA8B;gBAAAC,QAAA,gBACzClF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,EAAC;gBAAgB;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAC1EtF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,GAC7C2B,YAAY,CAAC5E,kBAAkB,CAACgC,cAAc,CAAC,EAAC,IAAE,EAAChC,kBAAkB,CAACoC,mBAAmB,CAAC0C,OAAO,CAAC,CAAC,CAAC,EAAC,IAC1G;gBAAA;kBAAA5B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,eACNtF,OAAA;gBAAKiF,SAAS,EAAC,6FAA6F;gBAAAC,QAAA,gBACxGlF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,EAAC;gBAAe;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACzEtF,OAAA;kBAAMiF,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,EAC7C2B,YAAY,CAAC5E,kBAAkB,CAACiC,WAAW;gBAAC;kBAAAiB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC3C,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,EACLc,gBAAgB,GAAG,CAAC,iBACjBpG,OAAA;gBAAKiF,SAAS,EAAC,+CAA+C;gBAAAC,QAAA,GAAC,YACjD,EAACkB,gBAAgB,EAAC,OAChC;cAAA;gBAAAjB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CACR;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CACR;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,EAGLzC,QAAQ,CAACU,kBAAkB,iBACxBvD,OAAA;QAAKiF,SAAS,EAAC,kCAAkC;QAAAC,QAAA,gBAC7ClF,OAAA;UAAMiF,SAAS,EAAE,kCACbpC,QAAQ,CAACU,kBAAkB,KAAK,UAAU,GACpC,sEAAsE,GACtEV,QAAQ,CAACU,kBAAkB,KAAK,mBAAmB,GACnD,0EAA0E,GAC1E,8DAA8D,EACrE;UAAA2B,QAAA,EACErC,QAAQ,CAACU,kBAAkB,KAAK,UAAU,GAAG,yCAAyC,GACtFV,QAAQ,CAACU,kBAAkB,KAAK,mBAAmB,GAAG,uBAAuBV,QAAQ,CAACY,aAAa,OAAO,GAAG;QAAqC;UAAA0B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjJ,CAAC,EACNzC,QAAQ,CAACY,aAAa,GAAG,CAAC,IAAIZ,QAAQ,CAACU,kBAAkB,KAAK,mBAAmB,iBAC9EvD,OAAA;UAAMiF,SAAS,EAAC,iGAAiG;UAAAC,QAAA,GAAC,cAClG,EAACrC,QAAQ,CAACY,aAAa,EAAC,kCACxC;QAAA;UAAA0B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CACT;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CACR;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC,EAGL0B,cAAc,CAACQ,MAAM,GAAG,CAAC,iBACtBxH,OAAA;MAAAkF,QAAA,gBACIlF,OAAA;QAAKiF,SAAS,EAAC,wCAAwC;QAAAC,QAAA,gBACnDlF,OAAA;UAAIiF,SAAS,EAAC,qDAAqD;UAAAC,QAAA,GAAC,mBAC/C,EAAC8B,cAAc,CAACQ,MAAM,EAAC,WAAS,EAACD,iBAAiB,GAAG,MAAMH,gBAAgB,CAACI,MAAM,eAAe,GAAG,EAAE,EAAC,GAC5H;QAAA;UAAArC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACLtF,OAAA;UACI8I,OAAO,EAAEA,CAAA,KAAMxH,yBAAyB,CAAC,CAACD,sBAAsB,CAAE;UAClE4D,SAAS,EAAC,0DAA0D;UAAAC,QAAA,GAEnE7D,sBAAsB,GAAG,MAAM,GAAG,MAAM,EAAC,sBAC9C;QAAA;UAAA8D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC,EAGLiC,iBAAiB,iBACdvH,OAAA;QAAKiF,SAAS,EAAC,wGAAwG;QAAAC,QAAA,eACnHlF,OAAA;UAAKiF,SAAS,EAAC,8CAA8C;UAAAC,QAAA,gBACzDlF,OAAA;YAAAkF,QAAA,EAAQ;UAAK;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,KAAC,EAAC8B,gBAAgB,CAACI,MAAM,EAAC,UAAQ,EAACJ,gBAAgB,CAACI,MAAM,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE,EAAC,mBAAiB,EAACJ,gBAAgB,CAACI,MAAM,GAAG,CAAC,GAAG,KAAK,GAAG,IAAI,EAAC,uBAC7J,eAAAxH,OAAA;YAAKiF,SAAS,EAAC,cAAc;YAAAC,QAAA,EACxBkC,gBAAgB,CAACI,MAAM,GAAG,CAAC,GACtB,GAAGJ,gBAAgB,CAAC2B,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAACC,GAAG,CAAC,CAAC,CAACC,EAAE,CAAC,KAAKA,EAAE,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC,QAAQ9B,gBAAgB,CAACI,MAAM,GAAG,CAAC,UAAU,GACzGJ,gBAAgB,CAAC4B,GAAG,CAAC,CAAC,CAACC,EAAE,CAAC,KAAKA,EAAE,CAAC,CAACC,IAAI,CAAC,IAAI;UAAC;YAAA/D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAElD,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CACR,eAGDtF,OAAA;QAAKiF,SAAS,EAAC,2DAA2D;QAAAC,QAAA,EACrE8B,cAAc,CAACK,MAAM,CAAC,CAAC,GAAEC,WAAW,CAAC,KAAK,CAACA,WAAW,CAACpE,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC8F,GAAG,CAAC,CAAC,CAAClF,SAAS,EAAEwD,WAAW,CAAC,kBACjGtH,OAAA;UAEIiF,SAAS,EAAC,kIAAkI;UAAAC,QAAA,gBAG5IlF,OAAA;YAAKiF,SAAS,EAAC,MAAM;YAAAC,QAAA,eACjBlF,OAAA;cAAIiF,SAAS,EAAC,mEAAmE;cAACkE,KAAK,EAAErF,SAAU;cAAAoB,QAAA,EAC9FpB,SAAS,CAAC0D,MAAM,GAAG,EAAE,GAAG,GAAG1D,SAAS,CAACsF,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,KAAK,GAAGtF;YAAS;cAAAqB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACvE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC,eAGNtF,OAAA;YAAKiF,SAAS,EAAC,qKAAqK;YAAAC,QAAA,gBAChLlF,OAAA;cAAKiF,SAAS,EAAC,qDAAqD;cAAAC,QAAA,EAC/DmB,cAAc,CAACiB,WAAW,CAACpE,IAAI;YAAC;cAAAiC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChC,CAAC,eACNtF,OAAA;cAAKiF,SAAS,EAAC,sDAAsD;cAAAC,QAAA,EAAC;YAEtE;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC,EAGL,CAACgC,WAAW,CAAC1B,YAAY,GAAG,CAAC,IAAI0B,WAAW,CAACxB,gBAAgB,GAAG,CAAC,MAChEwB,WAAW,CAACK,uBAAuB,GAAG,CAAC,IAAIL,WAAW,CAACO,2BAA2B,GAAG,CAAC,CAAC,iBACrF7H,OAAA;YAAKiF,SAAS,EAAC,qGAAqG;YAAAC,QAAA,gBAChHlF,OAAA;cAAKiF,SAAS,EAAC,+DAA+D;cAAAC,QAAA,EAAC;YAA+C;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACpItF,OAAA;cAAKiF,SAAS,EAAC,wBAAwB;cAAAC,QAAA,gBACnClF,OAAA;gBAAKiF,SAAS,EAAC,aAAa;gBAAAC,QAAA,gBACxBlF,OAAA;kBAAKiF,SAAS,EAAC,wDAAwD;kBAAAC,QAAA,EAClEmB,cAAc,CAACiB,WAAW,CAACK,uBAAuB,GAAG,CAAC,GAAG,CAACL,WAAW,CAAC1B,YAAY,IAAI0B,WAAW,CAACS,YAAY,IAAI,CAAC,CAAC,IAAIT,WAAW,CAACK,uBAAuB,GAAG,CAAC;gBAAC;kBAAAxC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAChK,CAAC,eACNtF,OAAA;kBAAKiF,SAAS,EAAC,8CAA8C;kBAAAC,QAAA,EAAC;gBAAI;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eACxEtF,OAAA;kBAAKiF,SAAS,EAAC,8CAA8C;kBAAAC,QAAA,GACxDmB,cAAc,CAAC,CAACiB,WAAW,CAAC1B,YAAY,IAAI,CAAC,KAAK0B,WAAW,CAACS,YAAY,IAAI,CAAC,CAAC,CAAC,EAAC,QAAG,EAAClB,YAAY,CAACS,WAAW,CAACK,uBAAuB,IAAI,CAAC,CAAC;gBAAA;kBAAAxC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC5I,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL,CAAC,eACNtF,OAAA;gBAAKiF,SAAS,EAAC,aAAa;gBAAAC,QAAA,gBACxBlF,OAAA;kBAAKiF,SAAS,EAAC,wDAAwD;kBAAAC,QAAA,EAClEmB,cAAc,CAACiB,WAAW,CAACO,2BAA2B,GAAG,CAAC,GAAG,CAACP,WAAW,CAACxB,gBAAgB,IAAIwB,WAAW,CAACW,gBAAgB,IAAI,CAAC,CAAC,IAAIX,WAAW,CAACO,2BAA2B,GAAG,CAAC;gBAAC;kBAAA1C,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAChL,CAAC,eACNtF,OAAA;kBAAKiF,SAAS,EAAC,8CAA8C;kBAAAC,QAAA,EAAC;gBAAQ;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eAC5EtF,OAAA;kBAAKiF,SAAS,EAAC,8CAA8C;kBAAAC,QAAA,GACxDmB,cAAc,CAAC,CAACiB,WAAW,CAACxB,gBAAgB,IAAI,CAAC,KAAKwB,WAAW,CAACW,gBAAgB,IAAI,CAAC,CAAC,CAAC,EAAC,QAAG,EAACpB,YAAY,CAACS,WAAW,CAACO,2BAA2B,IAAI,CAAC,CAAC;gBAAA;kBAAA1C,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACxJ,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CACR,eAGDtF,OAAA;YAAKiF,SAAS,EAAC,WAAW;YAAAC,QAAA,gBACtBlF,OAAA;cAAKiF,SAAS,EAAC,iFAAiF;cAAAC,QAAA,gBAC5FlF,OAAA;gBAAMiF,SAAS,EAAC,0CAA0C;gBAAAC,QAAA,EACrDoC,WAAW,CAACjE,WAAW,GAAG,aAAa,GAAG;cAAe;gBAAA8B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACxD,CAAC,eACPtF,OAAA;gBAAMiF,SAAS,EAAC,qDAAqD;gBAAAC,QAAA,GAChEmB,cAAc,CAACiB,WAAW,CAACjE,WAAW,IAAIiE,WAAW,CAACnE,aAAa,CAAC,EACpEmE,WAAW,CAACiB,aAAa,GAAG,CAAC,iBAC1BvI,OAAA;kBAAKiF,SAAS,EAAC,+CAA+C;kBAAAC,QAAA,GACzDmB,cAAc,CAACiB,WAAW,CAACnE,aAAa,CAAC,EAAC,WAAS,EAACkD,cAAc,CAACiB,WAAW,CAACiB,aAAa,CAAC,EAAC,WACnG;gBAAA;kBAAApD,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CACR;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,EAGL,CAACgC,WAAW,CAAC1B,YAAY,GAAG,CAAC,IAAI0B,WAAW,CAACxB,gBAAgB,GAAG,CAAC,kBAC9D9F,OAAA;cAAKiF,SAAS,EAAC,kGAAkG;cAAAC,QAAA,gBAC7GlF,OAAA;gBAAKiF,SAAS,EAAC,6DAA6D;gBAAAC,QAAA,EAAC;cAAiB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eACpGtF,OAAA;gBAAKiF,SAAS,EAAC,WAAW;gBAAAC,QAAA,gBACtBlF,OAAA;kBAAKiF,SAAS,EAAC,8BAA8B;kBAAAC,QAAA,gBACzClF,OAAA;oBAAMiF,SAAS,EAAC,oCAAoC;oBAAAC,QAAA,EAAC;kBAAY;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eACxEtF,OAAA;oBAAMiF,SAAS,EAAC,gDAAgD;oBAAAC,QAAA,EAC3DmB,cAAc,CAACiB,WAAW,CAAC1B,YAAY,IAAI,CAAC;kBAAC;oBAAAT,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC5C,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC,EAELgC,WAAW,CAACS,YAAY,GAAG,CAAC,iBACzB/H,OAAA;kBAAKiF,SAAS,EAAC,mCAAmC;kBAAAC,QAAA,gBAC9ClF,OAAA;oBAAMiF,SAAS,EAAC,gCAAgC;oBAAAC,QAAA,EAAC;kBAAa;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eACrEtF,OAAA;oBAAMiF,SAAS,EAAC,4CAA4C;oBAAAC,QAAA,GAAC,GACxD,EAACmB,cAAc,CAACiB,WAAW,CAACS,YAAY,CAAC;kBAAA;oBAAA5C,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACxC,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CACR,eACDtF,OAAA;kBAAKiF,SAAS,EAAC,8BAA8B;kBAAAC,QAAA,gBACzClF,OAAA;oBAAMiF,SAAS,EAAC,oCAAoC;oBAAAC,QAAA,EAAC;kBAAgB;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAC5EtF,OAAA;oBAAMiF,SAAS,EAAC,gDAAgD;oBAAAC,QAAA,EAC3DmB,cAAc,CAACiB,WAAW,CAACxB,gBAAgB,IAAI,CAAC;kBAAC;oBAAAX,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAChD,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC,EAELgC,WAAW,CAACW,gBAAgB,GAAG,CAAC,iBAC7BjI,OAAA;kBAAKiF,SAAS,EAAC,mCAAmC;kBAAAC,QAAA,gBAC9ClF,OAAA;oBAAMiF,SAAS,EAAC,gCAAgC;oBAAAC,QAAA,EAAC;kBAAiB;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eACzEtF,OAAA;oBAAMiF,SAAS,EAAC,4CAA4C;oBAAAC,QAAA,GAAC,GACxD,EAACmB,cAAc,CAACiB,WAAW,CAACW,gBAAgB,CAAC;kBAAA;oBAAA9C,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC5C,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CACR,eAEDtF,OAAA;kBAAKiF,SAAS,EAAC,+FAA+F;kBAAAC,QAAA,gBAC1GlF,OAAA;oBAAMiF,SAAS,EAAC,oCAAoC;oBAAAC,QAAA,EAAC;kBAAY;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eACxEtF,OAAA;oBAAMiF,SAAS,EAAC,oCAAoC;oBAAAC,QAAA,EAC/CmB,cAAc,CAACiB,WAAW,CAACjE,WAAW,IAAKiE,WAAW,CAAC1B,YAAY,GAAG0B,WAAW,CAACxB,gBAAgB,IAAIwB,WAAW,CAACS,YAAY,IAAI,CAAC,CAAC,IAAIT,WAAW,CAACW,gBAAgB,IAAI,CAAC,CAAE;kBAAC;oBAAA9C,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC3K,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC,EACJgC,WAAW,CAAC1B,YAAY,GAAG,CAAC,IAAI0B,WAAW,CAACxB,gBAAgB,GAAG,CAAC,iBAC9D9F,OAAA;kBAAKiF,SAAS,EAAC,sGAAsG;kBAAAC,QAAA,GAAC,QAC5G,EAAC,CAAEoC,WAAW,CAAC1B,YAAY,IAAI0B,WAAW,CAAC1B,YAAY,GAAG0B,WAAW,CAACxB,gBAAgB,CAAC,GAAI,GAAG,EAAEiB,OAAO,CAAC,CAAC,CAAC,EAAC,qBACvG,EAAC,CAAEO,WAAW,CAACxB,gBAAgB,IAAIwB,WAAW,CAAC1B,YAAY,GAAG0B,WAAW,CAACxB,gBAAgB,CAAC,GAAI,GAAG,EAAEiB,OAAO,CAAC,CAAC,CAAC,EAAC,GAC7H;gBAAA;kBAAA5B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CACR;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACA,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CACR,eAEDtF,OAAA;cAAKiF,SAAS,EAAC,iFAAiF;cAAAC,QAAA,gBAC5FlF,OAAA;gBAAMiF,SAAS,EAAC,0CAA0C;gBAAAC,QAAA,EAAC;cAAkB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eACpFtF,OAAA;gBAAMiF,SAAS,EAAC,qDAAqD;gBAAAC,QAAA,GAChE2B,YAAY,CAACS,WAAW,CAAClE,YAAY,CAAC,EACtCkE,WAAW,CAACmB,YAAY,GAAG,CAAC,iBACzBzI,OAAA;kBAAMiF,SAAS,EAAC,6CAA6C;kBAAAC,QAAA,GAAC,GACzD,EAAC2B,YAAY,CAACS,WAAW,CAACmB,YAAY,CAAC,EAAC,cAAY,EAAC,CAAEnB,WAAW,CAACmB,YAAY,GAAGnB,WAAW,CAAClE,YAAY,GAAI,GAAG,EAAE2D,OAAO,CAAC,CAAC,CAAC,EAAC,IACnI;gBAAA;kBAAA5B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CACT;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,EAGL,CAACgC,WAAW,CAACK,uBAAuB,GAAG,CAAC,IAAIL,WAAW,CAACO,2BAA2B,GAAG,CAAC,kBACpF7H,OAAA;cAAKiF,SAAS,EAAC,sGAAsG;cAAAC,QAAA,gBACjHlF,OAAA;gBAAKiF,SAAS,EAAC,+DAA+D;gBAAAC,QAAA,EAAC;cAA6B;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eAClHtF,OAAA;gBAAKiF,SAAS,EAAC,WAAW;gBAAAC,QAAA,gBACtBlF,OAAA;kBAAKiF,SAAS,EAAC,8BAA8B;kBAAAC,QAAA,gBACzClF,OAAA;oBAAMiF,SAAS,EAAC,sCAAsC;oBAAAC,QAAA,EAAC;kBAAY;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAC1EtF,OAAA;oBAAMiF,SAAS,EAAC,kDAAkD;oBAAAC,QAAA,GAC7D2B,YAAY,CAACS,WAAW,CAACoB,iBAAiB,IAAI,CAAC,CAAC,EAAC,SACtD;kBAAA;oBAAAvD,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC,EACL,CAACgC,WAAW,CAACsB,iBAAiB,IAAI,CAAC,IAAI,CAAC,iBACrC5I,OAAA;kBAAKiF,SAAS,EAAC,mCAAmC;kBAAAC,QAAA,gBAC9ClF,OAAA;oBAAMiF,SAAS,EAAC,gCAAgC;oBAAAC,QAAA,EAAC;kBAAa;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eACrEtF,OAAA;oBAAMiF,SAAS,EAAC,4CAA4C;oBAAAC,QAAA,GAAC,GACxD,EAAC2B,YAAY,CAACS,WAAW,CAACsB,iBAAiB,CAAC,EAAC,UAAQ,EAAC,CAAEtB,WAAW,CAACsB,iBAAiB,GAAGtB,WAAW,CAACoB,iBAAiB,GAAI,GAAG,EAAE3B,OAAO,CAAC,CAAC,CAAC,EAAC,IAC9I;kBAAA;oBAAA5B,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CACR,eACDtF,OAAA;kBAAKiF,SAAS,EAAC,8BAA8B;kBAAAC,QAAA,gBACzClF,OAAA;oBAAMiF,SAAS,EAAC,sCAAsC;oBAAAC,QAAA,EAAC;kBAAgB;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAC9EtF,OAAA;oBAAMiF,SAAS,EAAC,kDAAkD;oBAAAC,QAAA,GAC7D2B,YAAY,CAACS,WAAW,CAACqB,qBAAqB,IAAI,CAAC,CAAC,EAAC,SAC1D;kBAAA;oBAAAxD,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC,EACL,CAACgC,WAAW,CAACuB,qBAAqB,IAAI,CAAC,IAAI,CAAC,iBACzC7I,OAAA;kBAAKiF,SAAS,EAAC,mCAAmC;kBAAAC,QAAA,gBAC9ClF,OAAA;oBAAMiF,SAAS,EAAC,gCAAgC;oBAAAC,QAAA,EAAC;kBAAiB;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eACzEtF,OAAA;oBAAMiF,SAAS,EAAC,4CAA4C;oBAAAC,QAAA,GAAC,GACxD,EAAC2B,YAAY,CAACS,WAAW,CAACuB,qBAAqB,CAAC,EAAC,UAAQ,EAAC,CAAEvB,WAAW,CAACuB,qBAAqB,GAAGvB,WAAW,CAACqB,qBAAqB,GAAI,GAAG,EAAE5B,OAAO,CAAC,CAAC,CAAC,EAAC,IAC1J;kBAAA;oBAAA5B,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CACR,eACDtF,OAAA;kBAAKiF,SAAS,EAAC,iGAAiG;kBAAAC,QAAA,gBAC5GlF,OAAA;oBAAMiF,SAAS,EAAC,sCAAsC;oBAAAC,QAAA,EAAC;kBAAmB;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eACjFtF,OAAA;oBAAMiF,SAAS,EAAC,sCAAsC;oBAAAC,QAAA,EACjD2B,YAAY,CAAC,CAACS,WAAW,CAACK,uBAAuB,IAAI,CAAC,KAAKL,WAAW,CAACO,2BAA2B,IAAI,CAAC,CAAC;kBAAC;oBAAA1C,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACxG,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC,EACJ,CAACgC,WAAW,CAACoB,iBAAiB,IAAI,CAAC,IAAI,CAAC,IAAI,CAACpB,WAAW,CAACqB,qBAAqB,IAAI,CAAC,IAAI,CAAC,iBACtF3I,OAAA;kBAAKiF,SAAS,EAAC,0GAA0G;kBAAAC,QAAA,GAAC,QAChH,EAAC,CAAE,CAACoC,WAAW,CAACoB,iBAAiB,IAAI,CAAC,KAAK,CAACpB,WAAW,CAACoB,iBAAiB,IAAI,CAAC,KAAKpB,WAAW,CAACqB,qBAAqB,IAAI,CAAC,CAAC,CAAC,GAAI,GAAG,EAAE5B,OAAO,CAAC,CAAC,CAAC,EAAC,qBAC3I,EAAC,CAAE,CAACO,WAAW,CAACqB,qBAAqB,IAAI,CAAC,KAAK,CAACrB,WAAW,CAACoB,iBAAiB,IAAI,CAAC,KAAKpB,WAAW,CAACqB,qBAAqB,IAAI,CAAC,CAAC,CAAC,GAAI,GAAG,EAAE5B,OAAO,CAAC,CAAC,CAAC,EAAC,GACjK;gBAAA;kBAAA5B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CACR;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACA,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CACR;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CAAC;QAAA,GAhLDxB,SAAS;UAAAqB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAiLb,CACR;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC,EAGLjE,sBAAsB,iBACnBrB,OAAA;QAAKiF,SAAS,EAAC,4CAA4C;QAAAC,QAAA,gBACvDlF,OAAA;UAAIiF,SAAS,EAAC,0DAA0D;UAAAC,QAAA,EAAC;QAEzE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAGLtF,OAAA;UAAKiF,SAAS,EAAC,gGAAgG;UAAAC,QAAA,eAC3GlF,OAAA;YAAKiF,SAAS,EAAC,0CAA0C;YAAAC,QAAA,gBACrDlF,OAAA;cAAAkF,QAAA,EAAQ;YAAwB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,yBAAqB,eAAAtF,OAAA;cAAAkF,QAAA,EAAQ;YAAgC;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAC/GtF,OAAA;cAAKiF,SAAS,EAAC,+CAA+C;cAAAC,QAAA,GAAC,+EACU,eAAAlF,OAAA;gBAAAmF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,iGACW,eAAAtF,OAAA;gBAAAmF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,0EAE9F;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,eAENtF,OAAA;UAAKiF,SAAS,EAAC,iBAAiB;UAAAC,QAAA,eAC5BlF,OAAA;YAAOiF,SAAS,EAAC,oBAAoB;YAAAC,QAAA,gBACjClF,OAAA;cAAOiF,SAAS,EAAC,8BAA8B;cAAAC,QAAA,eAC3ClF,OAAA;gBAAAkF,QAAA,gBACIlF,OAAA;kBAAIiF,SAAS,EAAC,sDAAsD;kBAAAC,QAAA,EAAC;gBAAU;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACpFtF,OAAA;kBAAIiF,SAAS,EAAC,uDAAuD;kBAAAC,QAAA,EAAC;gBAAa;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACxFtF,OAAA;kBAAIiF,SAAS,EAAC,uDAAuD;kBAAAC,QAAA,EAAC;gBAAY;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACvFtF,OAAA;kBAAIiF,SAAS,EAAC,uDAAuD;kBAAAC,QAAA,EAAC;gBAAgB;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAC3FtF,OAAA;kBAAIiF,SAAS,EAAC,uDAAuD;kBAAAC,QAAA,EAAC;gBAAY;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACvFtF,OAAA;kBAAIiF,SAAS,EAAC,uDAAuD;kBAAAC,QAAA,EAAC;gBAAgB;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAC3FtF,OAAA;kBAAIiF,SAAS,EAAC,uDAAuD;kBAAAC,QAAA,EAAC;gBAAW;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACtFtF,OAAA;kBAAIiF,SAAS,EAAC,uDAAuD;kBAAAC,QAAA,EAAC;gBAAkB;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAC7FtF,OAAA;kBAAIiF,SAAS,EAAC,uDAAuD;kBAAAC,QAAA,EAAC;gBAAQ;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACnFtF,OAAA;kBAAIiF,SAAS,EAAC,uDAAuD;kBAAAC,QAAA,EAAC;gBAAkB;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAC7FtF,OAAA;kBAAIiF,SAAS,EAAC,uDAAuD;kBAAAC,QAAA,EAAC;gBAAS;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACpFtF,OAAA;kBAAIiF,SAAS,EAAC,uDAAuD;kBAAAC,QAAA,EAAC;gBAAa;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACxFtF,OAAA;kBAAIiF,SAAS,EAAC,uDAAuD;kBAAAC,QAAA,EAAC;gBAAa;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACxFtF,OAAA;kBAAIiF,SAAS,EAAC,uDAAuD;kBAAAC,QAAA,EAAC;gBAAgB;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC3F;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACF,CAAC,eACRtF,OAAA;cAAOiF,SAAS,EAAC,+CAA+C;cAAAC,QAAA,EAC3D8B,cAAc,CAACgC,GAAG,CAAC,CAAC,CAAClF,SAAS,EAAEwD,WAAW,CAAC,KAAK;gBAC9C,MAAM+B,UAAU,GAAG/B,WAAW,CAACjE,WAAW,IAAIiE,WAAW,CAACnE,aAAa;gBACvE,MAAMmG,gBAAgB,GAAG7D,UAAU,CAACpC,WAAW,IAAIoC,UAAU,CAACtC,aAAa;gBAC3E,MAAMoG,iBAAiB,GAAGD,gBAAgB,GAAG,CAAC,GACvCD,UAAU,GAAGC,gBAAgB,GAAI,GAAG,GACrC,CAAC;gBACP,MAAME,gBAAgB,GAAG,CAAClC,WAAW,CAACK,uBAAuB,IAAI,CAAC,KAAKL,WAAW,CAACO,2BAA2B,IAAI,CAAC,CAAC,IAAIP,WAAW,CAAClE,YAAY;gBAChJ,MAAMqG,gBAAgB,GAAGnC,WAAW,CAAClE,YAAY,GAAG,CAAC,GAAI,CAACkE,WAAW,CAACmB,YAAY,IAAI,CAAC,IAAInB,WAAW,CAAClE,YAAY,GAAI,GAAG,GAAG,CAAC;gBAC9H,MAAMgF,QAAQ,GAAGd,WAAW,CAACK,uBAAuB,GAAG,CAAC,GAAG,CAACL,WAAW,CAAC1B,YAAY,IAAI0B,WAAW,CAACS,YAAY,IAAI,CAAC,CAAC,IAAIT,WAAW,CAACK,uBAAuB,GAAG,CAAC;gBACjK,MAAMU,YAAY,GAAGf,WAAW,CAACO,2BAA2B,GAAG,CAAC,GAAG,CAACP,WAAW,CAACxB,gBAAgB,IAAIwB,WAAW,CAACW,gBAAgB,IAAI,CAAC,CAAC,IAAIX,WAAW,CAACO,2BAA2B,GAAG,CAAC;gBAErL,oBACI7H,OAAA;kBAAoBiF,SAAS,EAAC,yCAAyC;kBAAAC,QAAA,gBACnElF,OAAA;oBAAIiF,SAAS,EAAC,yCAAyC;oBAAAC,QAAA,eACnDlF,OAAA;sBAAKiF,SAAS,EAAC,mBAAmB;sBAACkE,KAAK,EAAErF,SAAU;sBAAAoB,QAAA,EAC/CpB;oBAAS;sBAAAqB,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACT;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACN,CAAC,eACLtF,OAAA;oBAAIiF,SAAS,EAAC,uDAAuD;oBAAAC,QAAA,EAChEmB,cAAc,CAACiB,WAAW,CAACnE,aAAa;kBAAC;oBAAAgC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC1C,CAAC,eACLtF,OAAA;oBAAIiF,SAAS,EAAC,uDAAuD;oBAAAC,QAAA,EAChEmB,cAAc,CAACiB,WAAW,CAAC1B,YAAY,IAAI,CAAC;kBAAC;oBAAAT,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC9C,CAAC,eACLtF,OAAA;oBAAIiF,SAAS,EAAC,uDAAuD;oBAAAC,QAAA,EAChEmB,cAAc,CAACiB,WAAW,CAACxB,gBAAgB,IAAI,CAAC;kBAAC;oBAAAX,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAClD,CAAC,eACLtF,OAAA;oBAAIiF,SAAS,EAAC,qDAAqD;oBAAAC,QAAA,EAC9DmB,cAAc,CAACiB,WAAW,CAACS,YAAY,IAAI,CAAC;kBAAC;oBAAA5C,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC9C,CAAC,eACLtF,OAAA;oBAAIiF,SAAS,EAAC,qDAAqD;oBAAAC,QAAA,EAC9DmB,cAAc,CAACiB,WAAW,CAACW,gBAAgB,IAAI,CAAC;kBAAC;oBAAA9C,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAClD,CAAC,eACLtF,OAAA;oBAAIiF,SAAS,EAAC,uDAAuD;oBAAAC,QAAA,EAChEmB,cAAc,CAACiB,WAAW,CAACjE,WAAW,IAAIiE,WAAW,CAACnE,aAAa;kBAAC;oBAAAgC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACrE,CAAC,eACLtF,OAAA;oBAAIiF,SAAS,EAAC,uDAAuD;oBAAAC,QAAA,EAChE2B,YAAY,CAACS,WAAW,CAAClE,YAAY;kBAAC;oBAAA+B,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACvC,CAAC,eACLtF,OAAA;oBAAIiF,SAAS,EAAC,qDAAqD;oBAAAC,QAAA,EAC9D4B,gBAAgB,CAAC2C,gBAAgB;kBAAC;oBAAAtE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACnC,CAAC,eACLtF,OAAA;oBAAIiF,SAAS,EAAC,uEAAuE;oBAAAC,QAAA,EAChF2B,YAAY,CAAC2C,gBAAgB;kBAAC;oBAAArE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC/B,CAAC,eACLtF,OAAA;oBAAIiF,SAAS,EAAC,2DAA2D;oBAAAC,QAAA,EACpEmB,cAAc,CAAC+B,QAAQ;kBAAC;oBAAAjD,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACzB,CAAC,eACLtF,OAAA;oBAAIiF,SAAS,EAAC,2DAA2D;oBAAAC,QAAA,EACpEmB,cAAc,CAACgC,YAAY;kBAAC;oBAAAlD,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC7B,CAAC,eACLtF,OAAA;oBAAIiF,SAAS,EAAC,uEAAuE;oBAAAC,QAAA,EAChFmB,cAAc,CAACiB,WAAW,CAACpE,IAAI;kBAAC;oBAAAiC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACjC,CAAC,eACLtF,OAAA;oBAAIiF,SAAS,EAAC,uDAAuD;oBAAAC,QAAA,EAChE4B,gBAAgB,CAACyC,iBAAiB;kBAAC;oBAAApE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACpC,CAAC;gBAAA,GA5CAxB,SAAS;kBAAAqB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OA6Cd,CAAC;cAEb,CAAC;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACP,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CACR;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CACR;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd,CAAC;AAACnF,EAAA,CAx1BIF,WAAW;AAAAyJ,EAAA,GAAXzJ,WAAW;AA01BjB,eAAeA,WAAW;AAAC,IAAAyJ,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}