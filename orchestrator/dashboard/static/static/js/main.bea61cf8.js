/*! For license information please see main.bea61cf8.js.LICENSE.txt */
(()=>{var e={14:e=>{e.exports=function(){return!1}},61:e=>{e.exports=function(e,t){return e<t}},143:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},149:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}},219:(e,t,r)=>{"use strict";var n=r(3763),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return n.isMemo(e)?s:o[e.$$typeof]||a}o[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[n.Memo]=s;var c=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,r,n){if("string"!==typeof r){if(m){var a=p(r);a&&a!==m&&e(t,a,n)}var s=d(r);u&&(s=s.concat(u(r)));for(var o=l(t),f=l(r),g=0;g<s.length;++g){var x=s[g];if(!i[x]&&(!n||!n[x])&&(!f||!f[x])&&(!o||!o[x])){var b=h(r,x);try{c(t,x,b)}catch(y){}}}}return t}},320:e=>{e.exports=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}},396:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},438:(e,t,r)=>{var n=r(2622);e.exports=function(e){return n(this,e).get(e)}},539:(e,t,r)=>{var n=r(9742),a=r(7498),i=r(3279);e.exports=function(e){return e&&e.length?n(e,i,a):void 0}},579:(e,t,r)=>{"use strict";e.exports=r(1153)},620:(e,t,r)=>{var n=r(6913),a=r(4052),i=r(2761);e.exports=function(e){return"string"==typeof e||!a(e)&&i(e)&&"[object String]"==n(e)}},643:(e,t,r)=>{var n=r(7676)("toUpperCase");e.exports=n},644:e=>{e.exports=function(e){return e!==e}},705:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},715:e=>{var t="\\ud800-\\udfff",r="["+t+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",i="[^"+t+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+n+"|"+a+")"+"?",c="[\\ufe0e\\ufe0f]?",d=c+l+("(?:\\u200d(?:"+[i,s,o].join("|")+")"+c+l+")*"),u="(?:"+[i+n+"?",n,s,o,r].join("|")+")",h=RegExp(a+"(?="+a+")|"+u+d,"g");e.exports=function(e){return e.match(h)||[]}},755:(e,t,r)=>{var n=r(8895),a=r(7116);e.exports=function e(t,r,i,s,o){var l=-1,c=t.length;for(i||(i=a),o||(o=[]);++l<c;){var d=t[l];r>0&&i(d)?r>1?e(d,r-1,i,s,o):n(o,d):s||(o[o.length]=d)}return o}},793:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},801:(e,t,r)=>{var n=r(1141),a=r(6686),i=r(9841),s=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=o.test(e);return r||l.test(e)?c(e.slice(2),r?2:8):s.test(e)?NaN:+e}},914:(e,t,r)=>{var n=r(9841);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},929:(e,t,r)=>{var n=r(3211),a=r(6571),i=r(9194),s=r(6686);e.exports=function(e,t,r){if(!s(r))return!1;var o=typeof t;return!!("number"==o?a(r)&&i(t,r.length):"string"==o&&t in r)&&n(r[t],e)}},977:(e,t,r)=>{var n=r(9096),a=r(4416);e.exports=function(e,t){return e&&e.length?a(e,n(t,2)):[]}},1069:(e,t,r)=>{var n=r(8541);e.exports=function(e){return null==e?"":n(e)}},1141:(e,t,r)=>{var n=r(143),a=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(a,""):e}},1143:(e,t,r)=>{var n=r(3028)(Object.keys,Object);e.exports=n},1153:(e,t,r)=>{"use strict";var n=r(5043),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,i={},c=null,d=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,n)&&!l.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:a,type:e,key:c,ref:d,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},1170:e=>{e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},1268:(e,t,r)=>{var n=r(5428),a=r(7574),i=r(6832),s=i&&i.isTypedArray,o=s?a(s):n;e.exports=o},1310:e=>{e.exports=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}},1340:(e,t,r)=>{var n=r(3211);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},1497:(e,t,r)=>{"use strict";var n=r(3218);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,i,s){if(s!==n){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return r.PropTypes=r,r}},1558:e=>{e.exports=function(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}},1629:(e,t,r)=>{var n=r(6913),a=r(6686);e.exports=function(e){if(!a(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1714:(e,t,r)=>{var n=r(1340);e.exports=function(e,t){var r=this.__data__,a=n(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}},1733:(e,t,r)=>{var n=r(1775),a=r(4664),i=r(9096);e.exports=function(e,t){var r={};return t=i(t,3),a(e,function(e,a,i){n(r,a,t(e,a,i))}),r}},1775:(e,t,r)=>{var n=r(5654);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},1946:(e,t,r)=>{var n=r(1340);e.exports=function(e){return n(this.__data__,e)>-1}},2070:(e,t,r)=>{var n=r(7937)(r(6552),"Set");e.exports=n},2074:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}},2154:(e,t,r)=>{var n=r(5575),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return a.call(t,e)?t[e]:void 0}},2165:(e,t,r)=>{var n=r(5652);e.exports=function(e,t){var r;return n(e,function(e,n,a){return!(r=t(e,n,a))}),!!r}},2322:(e,t,r)=>{var n=r(6913),a=r(5990),i=r(2761),s=Function.prototype,o=Object.prototype,l=s.toString,c=o.hasOwnProperty,d=l.call(Object);e.exports=function(e){if(!i(e)||"[object Object]"!=n(e))return!1;var t=a(e);if(null===t)return!0;var r=c.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==d}},2520:(e,t,r)=>{var n=r(5816),a=r(9096),i=r(9140),s=Math.max;e.exports=function(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var l=null==r?0:i(r);return l<0&&(l=s(o+l,0)),n(e,a(t,3),l)}},2536:(e,t,r)=>{var n=r(149),a=r(2969),i=r(9096),s=r(8883),o=r(320),l=r(7574),c=r(5893),d=r(3279),u=r(4052);e.exports=function(e,t,r){t=t.length?n(t,function(e){return u(e)?function(t){return a(t,1===e.length?e[0]:e)}:e}):[d];var h=-1;t=n(t,l(i));var p=s(e,function(e,r,a){return{criteria:n(t,function(t){return t(e)}),index:++h,value:e}});return o(p,function(e,t){return c(e,t,r)})}},2541:e=>{e.exports=function(e){return function(){return e}}},2587:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},2597:(e,t,r)=>{var n=r(4052),a=r(9841),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!a(e))||(s.test(e)||!i.test(e)||null!=t&&e in Object(t))}},2622:(e,t,r)=>{var n=r(705);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},2662:(e,t,r)=>{var n=r(5575);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},2730:(e,t,r)=>{"use strict";var n=r(5043),a=r(8853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function f(e,t,r,n,a,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,r,n){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,a,n)&&(r=null),n||null===a?function(e){return!!u.call(m,e)||!u.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=null===r?3!==a.type&&"":r:(t=a.attributeName,n=a.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(a=a.type)||4===a&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x,b);g[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x,b);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x,b);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),k=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),O=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var T=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var I,L=Object.assign;function F(e){if(void 0===I)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);I=t&&t[1]||""}return"\n"+I+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),i=n.stack.split("\n"),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(1!==s||1!==o)do{if(s--,0>--o||a[s]!==i[o]){var l="\n"+a[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case k:return"Portal";case N:return"Profiler";case w:return"StrictMode";case E:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case O:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return V(e(t))}catch(r){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=$(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var r=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function X(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=W(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Q(e,t){J(e,t);var r=W(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&K(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+W(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(i(92));if(te(r)){if(1<r.length)throw Error(i(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:W(r)}}function ie(e,t){var r=W(t.value),n=W(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function fe(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),a=fe(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}Object.keys(pe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var xe=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,je=null,we=null;function Ne(e){if(e=ya(e)){if("function"!==typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=_a(t),ke(e.stateNode,e.type,t))}}function Se(e){je?we?we.push(e):we=[e]:je=e}function Oe(){if(je){var e=je,t=we;if(we=je=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Ce(e,t){return e(t)}function Ee(){}var Pe=!1;function Ae(e,t,r){if(Pe)return e(t,r);Pe=!0;try{return Ce(e,t,r)}finally{Pe=!1,(null!==je||null!==we)&&(Ee(),Oe())}}function Me(e,t){var r=e.stateNode;if(null===r)return null;var n=_a(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(i(231,t,typeof r));return r}var Te=!1;if(d)try{var De={};Object.defineProperty(De,"passive",{get:function(){Te=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(de){Te=!1}function Re(e,t,r,n,a,i,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var Ie=!1,Le=null,Fe=!1,ze=null,Ue={onError:function(e){Ie=!0,Le=e}};function Be(e,t,r,n,a,i,s,o,l){Ie=!1,Le=null,Re.apply(Ue,arguments)}function Ve(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ve(e)!==e)throw Error(i(188))}function $e(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(i(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(n=a.return)){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return We(a),e;if(s===n)return We(a),t;s=s.sibling}throw Error(i(188))}if(r.return!==n.return)r=a,n=s;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o)throw Error(i(189))}}if(r.alternate!==n)throw Error(i(190))}if(3!==r.tag)throw Error(i(188));return r.stateNode.current===r?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ge=a.unstable_scheduleCallback,Ke=a.unstable_cancelCallback,Ye=a.unstable_shouldYield,Xe=a.unstable_requestPaint,Je=a.unstable_now,Qe=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,rt=a.unstable_LowPriority,nt=a.unstable_IdlePriority,at=null,it=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,s=268435455&r;if(0!==s){var o=s&~a;0!==o?n=ut(o):0!==(i&=s)&&(n=ut(i))}else 0!==(s=r&~a)?n=ut(s):0!==i&&(n=ut(i));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&a)&&((a=n&-n)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(r=31-st(t)),n|=e[r],t&=~a;return n}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function xt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=r}function bt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-st(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var yt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,kt,jt,wt,Nt,St=!1,Ot=[],Ct=null,Et=null,Pt=null,At=new Map,Mt=new Map,Tt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function It(e,t,r,n,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ya(t))&&kt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Lt(e){var t=ba(e.target);if(null!==t){var r=Ve(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=He(r)))return e.blockedOn=t,void Nt(e.priority,function(){jt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ya(r))&&kt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);ve=n,r.target.dispatchEvent(n),ve=null,t.shift()}return!0}function zt(e,t,r){Ft(e)&&r.delete(t)}function Ut(){St=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==Et&&Ft(Et)&&(Et=null),null!==Pt&&Ft(Pt)&&(Pt=null),At.forEach(zt),Mt.forEach(zt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ut)))}function Vt(e){function t(t){return Bt(t,e)}if(0<Ot.length){Bt(Ot[0],e);for(var r=1;r<Ot.length;r++){var n=Ot[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Et&&Bt(Et,e),null!==Pt&&Bt(Pt,e),At.forEach(t),Mt.forEach(t),r=0;r<Tt.length;r++)(n=Tt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Tt.length&&null===(r=Tt[0]).blockedOn;)Lt(r),null===r.blockedOn&&Tt.shift()}var Ht=v.ReactCurrentBatchConfig,Wt=!0;function $t(e,t,r,n){var a=yt,i=Ht.transition;Ht.transition=null;try{yt=1,Gt(e,t,r,n)}finally{yt=a,Ht.transition=i}}function qt(e,t,r,n){var a=yt,i=Ht.transition;Ht.transition=null;try{yt=4,Gt(e,t,r,n)}finally{yt=a,Ht.transition=i}}function Gt(e,t,r,n){if(Wt){var a=Yt(e,t,r,n);if(null===a)Wn(e,t,n,Kt,r),Rt(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return Ct=It(Ct,e,t,r,n,a),!0;case"dragenter":return Et=It(Et,e,t,r,n,a),!0;case"mouseover":return Pt=It(Pt,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return At.set(i,It(At.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Mt.set(i,It(Mt.get(i)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(Rt(e,n),4&t&&-1<Dt.indexOf(e)){for(;null!==a;){var i=ya(a);if(null!==i&&_t(i),null===(i=Yt(e,t,r,n))&&Wn(e,t,n,Kt,r),i===a)break;a=i}null!==a&&n.stopPropagation()}else Wn(e,t,n,null,r)}}var Kt=null;function Yt(e,t,r,n){if(Kt=null,null!==(e=ba(e=_e(n))))if(null===(t=Ve(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Ze:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Jt=null,Qt=null,Zt=null;function er(){if(Zt)return Zt;var e,t,r=Qt,n=r.length,a="value"in Jt?Jt.value:Jt.textContent,i=a.length;for(e=0;e<n&&r[e]===a[e];e++);var s=n-e;for(t=1;t<=s&&r[n-t]===a[i-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ar(e){function t(t,r,n,a,i){for(var s in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ir,sr,or,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ar(lr),dr=L({},lr,{view:0,detail:0}),ur=ar(dr),hr=L({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(ir=e.screenX-or.screenX,sr=e.screenY-or.screenY):sr=ir=0,or=e),ir)},movementY:function(e){return"movementY"in e?e.movementY:sr}}),pr=ar(hr),mr=ar(L({},hr,{dataTransfer:0})),fr=ar(L({},dr,{relatedTarget:0})),gr=ar(L({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),xr=L({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),br=ar(xr),yr=ar(L({},lr,{data:0})),vr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_r={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kr[e])&&!!t[e]}function wr(){return jr}var Nr=L({},dr,{key:function(e){if(e.key){var t=vr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_r[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sr=ar(Nr),Or=ar(L({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cr=ar(L({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wr})),Er=ar(L({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pr=L({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ar=ar(Pr),Mr=[9,13,27,32],Tr=d&&"CompositionEvent"in window,Dr=null;d&&"documentMode"in document&&(Dr=document.documentMode);var Rr=d&&"TextEvent"in window&&!Dr,Ir=d&&(!Tr||Dr&&8<Dr&&11>=Dr),Lr=String.fromCharCode(32),Fr=!1;function zr(e,t){switch(e){case"keyup":return-1!==Mr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Br=!1;var Vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vr[e.type]:"textarea"===t}function Wr(e,t,r,n){Se(n),0<(t=qn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var $r=null,qr=null;function Gr(e){Fn(e,0)}function Kr(e){if(G(va(e)))return e}function Yr(e,t){if("change"===e)return t}var Xr=!1;if(d){var Jr;if(d){var Qr="oninput"in document;if(!Qr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Qr="function"===typeof Zr.oninput}Jr=Qr}else Jr=!1;Xr=Jr&&(!document.documentMode||9<document.documentMode)}function en(){$r&&($r.detachEvent("onpropertychange",tn),qr=$r=null)}function tn(e){if("value"===e.propertyName&&Kr(qr)){var t=[];Wr(t,qr,e,_e(e)),Ae(Gr,t)}}function rn(e,t,r){"focusin"===e?(en(),qr=r,($r=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kr(qr)}function an(e,t){if("click"===e)return Kr(t)}function sn(e,t){if("input"===e||"change"===e)return Kr(t)}var on="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(on(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!u.call(t,a)||!on(e[a],t[a]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function un(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?un(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=K((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mn(e){var t=hn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&un(r.ownerDocument.documentElement,r)){if(null!==n&&pn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=void 0===n.end?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=dn(r,i);var s=dn(r,n);a&&s&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fn=d&&"documentMode"in document&&11>=document.documentMode,gn=null,xn=null,bn=null,yn=!1;function vn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;yn||null==gn||gn!==K(n)||("selectionStart"in(n=gn)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},bn&&ln(bn,n)||(bn=n,0<(n=qn(xn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gn)))}function _n(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var kn={animationend:_n("Animation","AnimationEnd"),animationiteration:_n("Animation","AnimationIteration"),animationstart:_n("Animation","AnimationStart"),transitionend:_n("Transition","TransitionEnd")},jn={},wn={};function Nn(e){if(jn[e])return jn[e];if(!kn[e])return e;var t,r=kn[e];for(t in r)if(r.hasOwnProperty(t)&&t in wn)return jn[e]=r[t];return e}d&&(wn=document.createElement("div").style,"AnimationEvent"in window||(delete kn.animationend.animation,delete kn.animationiteration.animation,delete kn.animationstart.animation),"TransitionEvent"in window||delete kn.transitionend.transition);var Sn=Nn("animationend"),On=Nn("animationiteration"),Cn=Nn("animationstart"),En=Nn("transitionend"),Pn=new Map,An="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mn(e,t){Pn.set(e,t),l(t,[e])}for(var Tn=0;Tn<An.length;Tn++){var Dn=An[Tn];Mn(Dn.toLowerCase(),"on"+(Dn[0].toUpperCase()+Dn.slice(1)))}Mn(Sn,"onAnimationEnd"),Mn(On,"onAnimationIteration"),Mn(Cn,"onAnimationStart"),Mn("dblclick","onDoubleClick"),Mn("focusin","onFocus"),Mn("focusout","onBlur"),Mn(En,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),In=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rn));function Ln(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,a,s,o,l,c){if(Be.apply(this,arguments),Ie){if(!Ie)throw Error(i(198));var d=Le;Ie=!1,Le=null,Fe||(Fe=!0,ze=d)}}(n,t,void 0,e),e.currentTarget=null}function Fn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&a.isPropagationStopped())break e;Ln(a,o,c),i=l}else for(s=0;s<n.length;s++){if(l=(o=n[s]).instance,c=o.currentTarget,o=o.listener,l!==i&&a.isPropagationStopped())break e;Ln(a,o,c),i=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zn(e,t){var r=t[fa];void 0===r&&(r=t[fa]=new Set);var n=e+"__bubble";r.has(n)||(Hn(t,e,2,!1),r.add(n))}function Un(e,t,r){var n=0;t&&(n|=4),Hn(r,e,n,t)}var Bn="_reactListening"+Math.random().toString(36).slice(2);function Vn(e){if(!e[Bn]){e[Bn]=!0,s.forEach(function(t){"selectionchange"!==t&&(In.has(t)||Un(t,!1,e),Un(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bn]||(t[Bn]=!0,Un("selectionchange",!1,t))}}function Hn(e,t,r,n){switch(Xt(t)){case 1:var a=$t;break;case 4:a=qt;break;default:a=Gt}r=a.bind(null,t,r,e),a=void 0,!Te||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Wn(e,t,r,n,a){var i=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var s=n.tag;if(3===s||4===s){var o=n.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===s)for(s=n.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;s=s.return}for(;null!==o;){if(null===(s=ba(o)))return;if(5===(l=s.tag)||6===l){n=i=s;continue e}o=o.parentNode}}n=n.return}Ae(function(){var n=i,a=_e(r),s=[];e:{var o=Pn.get(e);if(void 0!==o){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Sr;break;case"focusin":c="focus",l=fr;break;case"focusout":c="blur",l=fr;break;case"beforeblur":case"afterblur":l=fr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cr;break;case Sn:case On:case Cn:l=gr;break;case En:l=Er;break;case"scroll":l=ur;break;case"wheel":l=Ar;break;case"copy":case"cut":case"paste":l=br;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Or}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=n;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=Me(m,h))&&d.push($n(m,f,p)))),u)break;m=m.return}0<d.length&&(o=new l(o,c,null,r,a),s.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===ve||!(c=r.relatedTarget||r.fromElement)||!ba(c)&&!c[ma])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?ba(c):null)&&(c!==(u=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(d=pr,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=Or,f="onPointerLeave",h="onPointerEnter",m="pointer"),u=null==l?o:va(l),p=null==c?o:va(c),(o=new d(f,m+"leave",l,r,a)).target=u,o.relatedTarget=p,f=null,ba(a)===n&&((d=new d(h,m+"enter",c,r,a)).target=p,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,m=0,p=d=l;p;p=Gn(p))m++;for(p=0,f=h;f;f=Gn(f))p++;for(;0<m-p;)d=Gn(d),m--;for(;0<p-m;)h=Gn(h),p--;for(;m--;){if(d===h||null!==h&&d===h.alternate)break e;d=Gn(d),h=Gn(h)}d=null}else d=null;null!==l&&Kn(s,o,l,d,!1),null!==c&&null!==u&&Kn(s,u,c,d,!0)}if("select"===(l=(o=n?va(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Yr;else if(Hr(o))if(Xr)g=sn;else{g=nn;var x=rn}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=an);switch(g&&(g=g(e,n))?Wr(s,g,r,a):(x&&x(e,o,n),"focusout"===e&&(x=o._wrapperState)&&x.controlled&&"number"===o.type&&ee(o,"number",o.value)),x=n?va(n):window,e){case"focusin":(Hr(x)||"true"===x.contentEditable)&&(gn=x,xn=n,bn=null);break;case"focusout":bn=xn=gn=null;break;case"mousedown":yn=!0;break;case"contextmenu":case"mouseup":case"dragend":yn=!1,vn(s,r,a);break;case"selectionchange":if(fn)break;case"keydown":case"keyup":vn(s,r,a)}var b;if(Tr)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Br?zr(e,r)&&(y="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(y="onCompositionStart");y&&(Ir&&"ko"!==r.locale&&(Br||"onCompositionStart"!==y?"onCompositionEnd"===y&&Br&&(b=er()):(Qt="value"in(Jt=a)?Jt.value:Jt.textContent,Br=!0)),0<(x=qn(n,y)).length&&(y=new yr(y,e,null,r,a),s.push({event:y,listeners:x}),b?y.data=b:null!==(b=Ur(r))&&(y.data=b))),(b=Rr?function(e,t){switch(e){case"compositionend":return Ur(t);case"keypress":return 32!==t.which?null:(Fr=!0,Lr);case"textInput":return(e=t.data)===Lr&&Fr?null:e;default:return null}}(e,r):function(e,t){if(Br)return"compositionend"===e||!Tr&&zr(e,t)?(e=er(),Zt=Qt=Jt=null,Br=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ir&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=qn(n,"onBeforeInput")).length&&(a=new yr("onBeforeInput","beforeinput",null,r,a),s.push({event:a,listeners:n}),a.data=b))}Fn(s,t)})}function $n(e,t,r){return{instance:e,listener:t,currentTarget:r}}function qn(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Me(e,r))&&n.unshift($n(e,i,a)),null!=(i=Me(e,t))&&n.push($n(e,i,a))),e=e.return}return n}function Gn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kn(e,t,r,n,a){for(var i=t._reactName,s=[];null!==r&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Me(r,i))&&s.unshift($n(r,l,o)):a||null!=(l=Me(r,i))&&s.push($n(r,l,o))),r=r.return}0!==s.length&&e.push({event:t,listeners:s})}var Yn=/\r\n?/g,Xn=/\u0000|\uFFFD/g;function Jn(e){return("string"===typeof e?e:""+e).replace(Yn,"\n").replace(Xn,"")}function Qn(e,t,r){if(t=Jn(t),Jn(e)!==t&&r)throw Error(i(425))}function Zn(){}var ea=null,ta=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var na="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,sa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(oa)}:na;function oa(e){setTimeout(function(){throw e})}function la(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0===n)return e.removeChild(a),void Vt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=a}while(r);Vt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var ua=Math.random().toString(36).slice(2),ha="__reactFiber$"+ua,pa="__reactProps$"+ua,ma="__reactContainer$"+ua,fa="__reactEvents$"+ua,ga="__reactListeners$"+ua,xa="__reactHandles$"+ua;function ba(e){var t=e[ha];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ma]||r[ha]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=da(e);null!==e;){if(r=e[ha])return r;e=da(e)}return t}r=(e=r).parentNode}return null}function ya(e){return!(e=e[ha]||e[ma])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function va(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function _a(e){return e[pa]||null}var ka=[],ja=-1;function wa(e){return{current:e}}function Na(e){0>ja||(e.current=ka[ja],ka[ja]=null,ja--)}function Sa(e,t){ja++,ka[ja]=e.current,e.current=t}var Oa={},Ca=wa(Oa),Ea=wa(!1),Pa=Oa;function Aa(e,t){var r=e.type.contextTypes;if(!r)return Oa;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in r)i[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ma(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ta(){Na(Ea),Na(Ca)}function Da(e,t,r){if(Ca.current!==Oa)throw Error(i(168));Sa(Ca,t),Sa(Ea,r)}function Ra(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var a in n=n.getChildContext())if(!(a in t))throw Error(i(108,H(e)||"Unknown",a));return L({},r,n)}function Ia(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Oa,Pa=Ca.current,Sa(Ca,e),Sa(Ea,Ea.current),!0}function La(e,t,r){var n=e.stateNode;if(!n)throw Error(i(169));r?(e=Ra(e,t,Pa),n.__reactInternalMemoizedMergedChildContext=e,Na(Ea),Na(Ca),Sa(Ca,e)):Na(Ea),Sa(Ea,r)}var Fa=null,za=!1,Ua=!1;function Ba(e){null===Fa?Fa=[e]:Fa.push(e)}function Va(){if(!Ua&&null!==Fa){Ua=!0;var e=0,t=yt;try{var r=Fa;for(yt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Fa=null,za=!1}catch(a){throw null!==Fa&&(Fa=Fa.slice(e+1)),Ge(Ze,Va),a}finally{yt=t,Ua=!1}}return null}var Ha=[],Wa=0,$a=null,qa=0,Ga=[],Ka=0,Ya=null,Xa=1,Ja="";function Qa(e,t){Ha[Wa++]=qa,Ha[Wa++]=$a,$a=e,qa=t}function Za(e,t,r){Ga[Ka++]=Xa,Ga[Ka++]=Ja,Ga[Ka++]=Ya,Ya=e;var n=Xa;e=Ja;var a=32-st(n)-1;n&=~(1<<a),r+=1;var i=32-st(t)+a;if(30<i){var s=a-a%5;i=(n&(1<<s)-1).toString(32),n>>=s,a-=s,Xa=1<<32-st(t)+a|r<<a|n,Ja=i+e}else Xa=1<<i|r<<a|n,Ja=e}function ei(e){null!==e.return&&(Qa(e,1),Za(e,1,0))}function ti(e){for(;e===$a;)$a=Ha[--Wa],Ha[Wa]=null,qa=Ha[--Wa],Ha[Wa]=null;for(;e===Ya;)Ya=Ga[--Ka],Ga[Ka]=null,Ja=Ga[--Ka],Ga[Ka]=null,Xa=Ga[--Ka],Ga[Ka]=null}var ri=null,ni=null,ai=!1,ii=null;function si(e,t){var r=Ac(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function oi(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,ni=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,ni=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ya?{id:Xa,overflow:Ja}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Ac(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ri=e,ni=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(ai){var t=ni;if(t){var r=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=ca(r.nextSibling);var n=ri;t&&oi(e,t)?si(n,r):(e.flags=-4097&e.flags|2,ai=!1,ri=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ri=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function ui(e){if(e!==ri)return!1;if(!ai)return di(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=ni)){if(li(e))throw hi(),Error(i(418));for(;t;)si(e,t),t=ca(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ni=ca(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ni=null}}else ni=ri?ca(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ni;e;)e=ca(e.nextSibling)}function pi(){ni=ri=null,ai=!1}function mi(e){null===ii?ii=[e]:ii.push(e)}var fi=v.ReactCurrentBatchConfig;function gi(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(i(309));var n=r.stateNode}if(!n)throw Error(i(147,e));var a=n,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=a.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(i(284));if(!r._owner)throw Error(i(290,e))}return e}function xi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bi(e){return(0,e._init)(e._payload)}function yi(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Tc(e,t)).index=0,e.sibling=null,e}function s(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Lc(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var i=r.type;return i===j?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===M&&bi(i)===t.type)?((n=a(t,r.props)).ref=gi(e,t,r),n.return=e,n):((n=Dc(r.type,r.key,r.props,null,e.mode,n)).ref=gi(e,t,r),n.return=e,n)}function d(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Fc(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function u(e,t,r,n,i){return null===t||7!==t.tag?((t=Rc(r,e.mode,n,i)).return=e,t):((t=a(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(r=Dc(t.type,t.key,t.props,null,e.mode,r)).ref=gi(e,null,t),r.return=e,r;case k:return(t=Fc(t,e.mode,r)).return=e,t;case M:return h(e,(0,t._init)(t._payload),r)}if(te(t)||R(t))return(t=Rc(t,e.mode,r,null)).return=e,t;xi(e,t)}return null}function p(e,t,r,n){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==a?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return r.key===a?c(e,t,r,n):null;case k:return r.key===a?d(e,t,r,n):null;case M:return p(e,t,(a=r._init)(r._payload),n)}if(te(r)||R(r))return null!==a?null:u(e,t,r,n,null);xi(e,r)}return null}function m(e,t,r,n,a){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(r)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case k:return d(t,e=e.get(null===n.key?r:n.key)||null,n,a);case M:return m(e,t,r,(0,n._init)(n._payload),a)}if(te(n)||R(n))return u(t,e=e.get(r)||null,n,a,null);xi(t,n)}return null}function f(a,i,o,l){for(var c=null,d=null,u=i,f=i=0,g=null;null!==u&&f<o.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var x=p(a,u,o[f],l);if(null===x){null===u&&(u=g);break}e&&u&&null===x.alternate&&t(a,u),i=s(x,i,f),null===d?c=x:d.sibling=x,d=x,u=g}if(f===o.length)return r(a,u),ai&&Qa(a,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(a,o[f],l))&&(i=s(u,i,f),null===d?c=u:d.sibling=u,d=u);return ai&&Qa(a,f),c}for(u=n(a,u);f<o.length;f++)null!==(g=m(u,a,f,o[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),i=s(g,i,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(a,e)}),ai&&Qa(a,f),c}function g(a,o,l,c){var d=R(l);if("function"!==typeof d)throw Error(i(150));if(null==(l=d.call(l)))throw Error(i(151));for(var u=d=null,f=o,g=o=0,x=null,b=l.next();null!==f&&!b.done;g++,b=l.next()){f.index>g?(x=f,f=null):x=f.sibling;var y=p(a,f,b.value,c);if(null===y){null===f&&(f=x);break}e&&f&&null===y.alternate&&t(a,f),o=s(y,o,g),null===u?d=y:u.sibling=y,u=y,f=x}if(b.done)return r(a,f),ai&&Qa(a,g),d;if(null===f){for(;!b.done;g++,b=l.next())null!==(b=h(a,b.value,c))&&(o=s(b,o,g),null===u?d=b:u.sibling=b,u=b);return ai&&Qa(a,g),d}for(f=n(a,f);!b.done;g++,b=l.next())null!==(b=m(f,a,g,b.value,c))&&(e&&null!==b.alternate&&f.delete(null===b.key?g:b.key),o=s(b,o,g),null===u?d=b:u.sibling=b,u=b);return e&&f.forEach(function(e){return t(a,e)}),ai&&Qa(a,g),d}return function e(n,i,s,l){if("object"===typeof s&&null!==s&&s.type===j&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case _:e:{for(var c=s.key,d=i;null!==d;){if(d.key===c){if((c=s.type)===j){if(7===d.tag){r(n,d.sibling),(i=a(d,s.props.children)).return=n,n=i;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&bi(c)===d.type){r(n,d.sibling),(i=a(d,s.props)).ref=gi(n,d,s),i.return=n,n=i;break e}r(n,d);break}t(n,d),d=d.sibling}s.type===j?((i=Rc(s.props.children,n.mode,l,s.key)).return=n,n=i):((l=Dc(s.type,s.key,s.props,null,n.mode,l)).ref=gi(n,i,s),l.return=n,n=l)}return o(n);case k:e:{for(d=s.key;null!==i;){if(i.key===d){if(4===i.tag&&i.stateNode.containerInfo===s.containerInfo&&i.stateNode.implementation===s.implementation){r(n,i.sibling),(i=a(i,s.children||[])).return=n,n=i;break e}r(n,i);break}t(n,i),i=i.sibling}(i=Fc(s,n.mode,l)).return=n,n=i}return o(n);case M:return e(n,i,(d=s._init)(s._payload),l)}if(te(s))return f(n,i,s,l);if(R(s))return g(n,i,s,l);xi(n,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==i&&6===i.tag?(r(n,i.sibling),(i=a(i,s)).return=n,n=i):(r(n,i),(i=Lc(s,n.mode,l)).return=n,n=i),o(n)):r(n,i)}}var vi=yi(!0),_i=yi(!1),ki=wa(null),ji=null,wi=null,Ni=null;function Si(){Ni=wi=ji=null}function Oi(e){var t=ki.current;Na(ki),e._currentValue=t}function Ci(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ei(e,t){ji=e,Ni=wi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yo=!0),e.firstContext=null)}function Pi(e){var t=e._currentValue;if(Ni!==e)if(e={context:e,memoizedValue:t,next:null},null===wi){if(null===ji)throw Error(i(308));wi=e,ji.dependencies={lanes:0,firstContext:e}}else wi=wi.next=e;return t}var Ai=null;function Mi(e){null===Ai?Ai=[e]:Ai.push(e)}function Ti(e,t,r,n){var a=t.interleaved;return null===a?(r.next=r,Mi(t)):(r.next=a.next,a.next=r),t.interleaved=r,Di(e,n)}function Di(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Ri=!1;function Ii(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Li(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zi(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Cl)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Di(e,r)}return null===(a=n.interleaved)?(t.next=t,Mi(n)):(t.next=a.next,a.next=t),n.interleaved=t,Di(e,r)}function Ui(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,bt(e,r)}}function Bi(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,i=null;if(null!==(r=r.firstBaseUpdate)){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===i?a=i=s:i=i.next=s,r=r.next}while(null!==r);null===i?a=i=t:i=i.next=t}else a=i=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Vi(e,t,r,n){var a=e.updateQueue;Ri=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?i=c:s.next=c,s=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==s&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==i){var u=a.baseState;for(s=0,d=c=l=null,o=i;;){var h=o.lane,p=o.eventTime;if((n&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,f=o;switch(h=t,p=r,f.tag){case 1:if("function"===typeof(m=f.payload)){u=m.call(p,u,h);break e}u=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=f.payload)?m.call(p,u,h):m)||void 0===h)break e;u=L({},u,h);break e;case 2:Ri=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,s|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===d&&(l=u),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{s|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Il|=s,e.lanes=s,e.memoizedState=u}}function Hi(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(null!==a){if(n.callback=null,n=r,"function"!==typeof a)throw Error(i(191,a));a.call(n)}}}var Wi={},$i=wa(Wi),qi=wa(Wi),Gi=wa(Wi);function Ki(e){if(e===Wi)throw Error(i(174));return e}function Yi(e,t){switch(Sa(Gi,t),Sa(qi,e),Sa($i,Wi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Na($i),Sa($i,t)}function Xi(){Na($i),Na(qi),Na(Gi)}function Ji(e){Ki(Gi.current);var t=Ki($i.current),r=le(t,e.type);t!==r&&(Sa(qi,e),Sa($i,r))}function Qi(e){qi.current===e&&(Na($i),Na(qi))}var Zi=wa(0);function es(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ts=[];function rs(){for(var e=0;e<ts.length;e++)ts[e]._workInProgressVersionPrimary=null;ts.length=0}var ns=v.ReactCurrentDispatcher,as=v.ReactCurrentBatchConfig,is=0,ss=null,os=null,ls=null,cs=!1,ds=!1,us=0,hs=0;function ps(){throw Error(i(321))}function ms(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!on(e[r],t[r]))return!1;return!0}function fs(e,t,r,n,a,s){if(is=s,ss=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ns.current=null===e||null===e.memoizedState?Qs:Zs,e=r(n,a),ds){s=0;do{if(ds=!1,us=0,25<=s)throw Error(i(301));s+=1,ls=os=null,t.updateQueue=null,ns.current=eo,e=r(n,a)}while(ds)}if(ns.current=Js,t=null!==os&&null!==os.next,is=0,ls=os=ss=null,cs=!1,t)throw Error(i(300));return e}function gs(){var e=0!==us;return us=0,e}function xs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ls?ss.memoizedState=ls=e:ls=ls.next=e,ls}function bs(){if(null===os){var e=ss.alternate;e=null!==e?e.memoizedState:null}else e=os.next;var t=null===ls?ss.memoizedState:ls.next;if(null!==t)ls=t,os=e;else{if(null===e)throw Error(i(310));e={memoizedState:(os=e).memoizedState,baseState:os.baseState,baseQueue:os.baseQueue,queue:os.queue,next:null},null===ls?ss.memoizedState=ls=e:ls=ls.next=e}return ls}function ys(e,t){return"function"===typeof t?t(e):t}function vs(e){var t=bs(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=os,a=n.baseQueue,s=r.pending;if(null!==s){if(null!==a){var o=a.next;a.next=s.next,s.next=o}n.baseQueue=a=s,r.pending=null}if(null!==a){s=a.next,n=n.baseState;var l=o=null,c=null,d=s;do{var u=d.lane;if((is&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=n):c=c.next=h,ss.lanes|=u,Il|=u}d=d.next}while(null!==d&&d!==s);null===c?o=n:c.next=l,on(n,t.memoizedState)||(yo=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){a=e;do{s=a.lane,ss.lanes|=s,Il|=s,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function _s(e){var t=bs(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,s=t.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do{s=e(s,o.action),o=o.next}while(o!==a);on(s,t.memoizedState)||(yo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function ks(){}function js(e,t){var r=ss,n=bs(),a=t(),s=!on(n.memoizedState,a);if(s&&(n.memoizedState=a,yo=!0),n=n.queue,Rs(Ss.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||null!==ls&&1&ls.memoizedState.tag){if(r.flags|=2048,Ps(9,Ns.bind(null,r,n,a,t),void 0,null),null===El)throw Error(i(349));0!==(30&is)||ws(r,t,a)}return a}function ws(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ns(e,t,r,n){t.value=r,t.getSnapshot=n,Os(t)&&Cs(e)}function Ss(e,t,r){return r(function(){Os(t)&&Cs(e)})}function Os(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!on(e,r)}catch(n){return!0}}function Cs(e){var t=Di(e,1);null!==t&&rc(t,e,1,-1)}function Es(e){var t=xs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:e},t.queue=e,e=e.dispatch=Gs.bind(null,ss,e),[t.memoizedState,e]}function Ps(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function As(){return bs().memoizedState}function Ms(e,t,r,n){var a=xs();ss.flags|=e,a.memoizedState=Ps(1|t,r,void 0,void 0===n?null:n)}function Ts(e,t,r,n){var a=bs();n=void 0===n?null:n;var i=void 0;if(null!==os){var s=os.memoizedState;if(i=s.destroy,null!==n&&ms(n,s.deps))return void(a.memoizedState=Ps(t,r,i,n))}ss.flags|=e,a.memoizedState=Ps(1|t,r,i,n)}function Ds(e,t){return Ms(8390656,8,e,t)}function Rs(e,t){return Ts(2048,8,e,t)}function Is(e,t){return Ts(4,2,e,t)}function Ls(e,t){return Ts(4,4,e,t)}function Fs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zs(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ts(4,4,Fs.bind(null,t,e),r)}function Us(){}function Bs(e,t){var r=bs();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ms(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Vs(e,t){var r=bs();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ms(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Hs(e,t,r){return 0===(21&is)?(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=r):(on(r,t)||(r=ft(),ss.lanes|=r,Il|=r,e.baseState=!0),t)}function Ws(e,t){var r=yt;yt=0!==r&&4>r?r:4,e(!0);var n=as.transition;as.transition={};try{e(!1),t()}finally{yt=r,as.transition=n}}function $s(){return bs().memoizedState}function qs(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ks(e))Ys(t,r);else if(null!==(r=Ti(e,t,r,n))){rc(r,e,n,ec()),Xs(r,t,n)}}function Gs(e,t,r){var n=tc(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ks(e))Ys(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=i(s,r);if(a.hasEagerState=!0,a.eagerState=o,on(o,s)){var l=t.interleaved;return null===l?(a.next=a,Mi(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(r=Ti(e,t,a,n))&&(rc(r,e,n,a=ec()),Xs(r,t,n))}}function Ks(e){var t=e.alternate;return e===ss||null!==t&&t===ss}function Ys(e,t){ds=cs=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Xs(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,bt(e,r)}}var Js={readContext:Pi,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Qs={readContext:Pi,useCallback:function(e,t){return xs().memoizedState=[e,void 0===t?null:t],e},useContext:Pi,useEffect:Ds,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ms(4194308,4,Fs.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ms(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ms(4,2,e,t)},useMemo:function(e,t){var r=xs();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=xs();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=qs.bind(null,ss,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},xs().memoizedState=e},useState:Es,useDebugValue:Us,useDeferredValue:function(e){return xs().memoizedState=e},useTransition:function(){var e=Es(!1),t=e[0];return e=Ws.bind(null,e[1]),xs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ss,a=xs();if(ai){if(void 0===r)throw Error(i(407));r=r()}else{if(r=t(),null===El)throw Error(i(349));0!==(30&is)||ws(n,t,r)}a.memoizedState=r;var s={value:r,getSnapshot:t};return a.queue=s,Ds(Ss.bind(null,n,s,e),[e]),n.flags|=2048,Ps(9,Ns.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=xs(),t=El.identifierPrefix;if(ai){var r=Ja;t=":"+t+"R"+(r=(Xa&~(1<<32-st(Xa)-1)).toString(32)+r),0<(r=us++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=hs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zs={readContext:Pi,useCallback:Bs,useContext:Pi,useEffect:Rs,useImperativeHandle:zs,useInsertionEffect:Is,useLayoutEffect:Ls,useMemo:Vs,useReducer:vs,useRef:As,useState:function(){return vs(ys)},useDebugValue:Us,useDeferredValue:function(e){return Hs(bs(),os.memoizedState,e)},useTransition:function(){return[vs(ys)[0],bs().memoizedState]},useMutableSource:ks,useSyncExternalStore:js,useId:$s,unstable_isNewReconciler:!1},eo={readContext:Pi,useCallback:Bs,useContext:Pi,useEffect:Rs,useImperativeHandle:zs,useInsertionEffect:Is,useLayoutEffect:Ls,useMemo:Vs,useReducer:_s,useRef:As,useState:function(){return _s(ys)},useDebugValue:Us,useDeferredValue:function(e){var t=bs();return null===os?t.memoizedState=e:Hs(t,os.memoizedState,e)},useTransition:function(){return[_s(ys)[0],bs().memoizedState]},useMutableSource:ks,useSyncExternalStore:js,useId:$s,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var r in t=L({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ro(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:L({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var no={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),i=Fi(n,a);i.payload=t,void 0!==r&&null!==r&&(i.callback=r),null!==(t=zi(e,i,a))&&(rc(t,e,a,n),Ui(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),i=Fi(n,a);i.tag=1,i.payload=t,void 0!==r&&null!==r&&(i.callback=r),null!==(t=zi(e,i,a))&&(rc(t,e,a,n),Ui(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),a=Fi(r,n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=zi(e,a,n))&&(rc(t,e,n,r),Ui(t,e,n))}};function ao(e,t,r,n,a,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!ln(r,n)||!ln(a,i))}function io(e,t,r){var n=!1,a=Oa,i=t.contextType;return"object"===typeof i&&null!==i?i=Pi(i):(a=Ma(t)?Pa:Ca.current,i=(n=null!==(n=t.contextTypes)&&void 0!==n)?Aa(e,a):Oa),t=new t(r,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=no,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function so(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&no.enqueueReplaceState(t,t.state,null)}function oo(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Ii(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=Pi(i):(i=Ma(t)?Pa:Ca.current,a.context=Aa(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ro(e,t,i,r),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&no.enqueueReplaceState(a,a.state,null),Vi(e,r,a,n),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var r="",n=t;do{r+=B(n),n=n.return}while(n);var a=r}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,r){(r=Fi(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Wl||(Wl=!0,$l=n),uo(0,t)},r}function mo(e,t,r){(r=Fi(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){uo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(r.callback=function(){uo(0,t),"function"!==typeof n&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function fo(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new ho;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Nc.bind(null,e,t,r),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xo(e,t,r,n,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Fi(-1,1)).tag=2,zi(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bo=v.ReactCurrentOwner,yo=!1;function vo(e,t,r,n){t.child=null===e?_i(t,null,r,n):vi(t,e.child,r,n)}function _o(e,t,r,n,a){r=r.render;var i=t.ref;return Ei(t,a),n=fs(e,t,r,n,i,a),r=gs(),null===e||yo?(ai&&r&&ei(t),t.flags|=1,vo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wo(e,t,a))}function ko(e,t,r,n,a){if(null===e){var i=r.type;return"function"!==typeof i||Mc(i)||void 0!==i.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Dc(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,jo(e,t,i,n,a))}if(i=e.child,0===(e.lanes&a)){var s=i.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(s,n)&&e.ref===t.ref)return Wo(e,t,a)}return t.flags|=1,(e=Tc(i,n)).ref=t.ref,e.return=t,t.child=e}function jo(e,t,r,n,a){if(null!==e){var i=e.memoizedProps;if(ln(i,n)&&e.ref===t.ref){if(yo=!1,t.pendingProps=n=i,0===(e.lanes&a))return t.lanes=e.lanes,Wo(e,t,a);0!==(131072&e.flags)&&(yo=!0)}}return So(e,t,r,n,a)}function wo(e,t,r){var n=t.pendingProps,a=n.children,i=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sa(Tl,Ml),Ml|=r;else{if(0===(1073741824&r))return e=null!==i?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sa(Tl,Ml),Ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==i?i.baseLanes:r,Sa(Tl,Ml),Ml|=n}else null!==i?(n=i.baseLanes|r,t.memoizedState=null):n=r,Sa(Tl,Ml),Ml|=n;return vo(e,t,a,r),t.child}function No(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,r,n,a){var i=Ma(r)?Pa:Ca.current;return i=Aa(t,i),Ei(t,a),r=fs(e,t,r,n,i,a),n=gs(),null===e||yo?(ai&&n&&ei(t),t.flags|=1,vo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wo(e,t,a))}function Oo(e,t,r,n,a){if(Ma(r)){var i=!0;Ia(t)}else i=!1;if(Ei(t,a),null===t.stateNode)Ho(e,t),io(t,r,n),oo(t,r,n,a),n=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=r.contextType;"object"===typeof c&&null!==c?c=Pi(c):c=Aa(t,c=Ma(r)?Pa:Ca.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate;u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==n||l!==c)&&so(t,s,n,c),Ri=!1;var h=t.memoizedState;s.state=h,Vi(t,n,s,a),l=t.memoizedState,o!==n||h!==l||Ea.current||Ri?("function"===typeof d&&(ro(t,r,d,n),l=t.memoizedState),(o=Ri||ao(t,r,o,n,h,l,c))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),s.props=n,s.state=l,s.context=c,n=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,Li(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),s.props=c,u=t.pendingProps,h=s.context,"object"===typeof(l=r.contextType)&&null!==l?l=Pi(l):l=Aa(t,l=Ma(r)?Pa:Ca.current);var p=r.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==u||h!==l)&&so(t,s,n,l),Ri=!1,h=t.memoizedState,s.state=h,Vi(t,n,s,a);var m=t.memoizedState;o!==u||h!==m||Ea.current||Ri?("function"===typeof p&&(ro(t,r,p,n),m=t.memoizedState),(c=Ri||ao(t,r,c,n,h,m,l)||!1)?(d||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(n,m,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,m,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),s.props=n,s.state=m,s.context=l,n=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Co(e,t,r,n,i,a)}function Co(e,t,r,n,a,i){No(e,t);var s=0!==(128&t.flags);if(!n&&!s)return a&&La(t,r,!1),Wo(e,t,i);n=t.stateNode,bo.current=t;var o=s&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&s?(t.child=vi(t,e.child,null,i),t.child=vi(t,null,o,i)):vo(e,t,o,i),t.memoizedState=n.state,a&&La(t,r,!0),t.child}function Eo(e){var t=e.stateNode;t.pendingContext?Da(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Da(0,t.context,!1),Yi(e,t.containerInfo)}function Po(e,t,r,n,a){return pi(),mi(a),t.flags|=256,vo(e,t,r,n),t.child}var Ao,Mo,To,Do,Ro={dehydrated:null,treeContext:null,retryLane:0};function Io(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,r){var n,a=t.pendingProps,s=Zi.current,o=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&s)),n?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Sa(Zi,1&s),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Ic(l,a,0,null),e=Rc(e,a,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Io(r),t.memoizedState=Ro,e):Fo(t,l));if(null!==(s=e.memoizedState)&&null!==(n=s.dehydrated))return function(e,t,r,n,a,s,o){if(r)return 256&t.flags?(t.flags&=-257,zo(e,t,o,n=co(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=n.fallback,a=t.mode,n=Ic({mode:"visible",children:n.children},a,0,null),(s=Rc(s,a,o,null)).flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,0!==(1&t.mode)&&vi(t,e.child,null,o),t.child.memoizedState=Io(o),t.memoizedState=Ro,s);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===a.data){if(n=a.nextSibling&&a.nextSibling.dataset)var l=n.dgst;return n=l,zo(e,t,o,n=co(s=Error(i(419)),n,void 0))}if(l=0!==(o&e.childLanes),yo||l){if(null!==(n=El)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(n.suspendedLanes|o))?0:a)&&a!==s.retryLane&&(s.retryLane=a,Di(e,a),rc(n,e,a,-1))}return fc(),zo(e,t,o,n=co(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Oc.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,ni=ca(a.nextSibling),ri=t,ai=!0,ii=null,null!==e&&(Ga[Ka++]=Xa,Ga[Ka++]=Ja,Ga[Ka++]=Ya,Xa=e.id,Ja=e.overflow,Ya=t),t=Fo(t,n.children),t.flags|=4096,t)}(e,t,l,a,n,s,r);if(o){o=a.fallback,l=t.mode,n=(s=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==s?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Tc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==n?o=Tc(n,o):(o=Rc(o,l,r,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Io(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=Ro,a}return e=(o=e.child).sibling,a=Tc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Fo(e,t){return(t=Ic({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,r,n){return null!==n&&mi(n),vi(t,e.child,null,r),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ci(e.return,t,r)}function Bo(e,t,r,n,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function Vo(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(vo(e,t,n.children,r),0!==(2&(n=Zi.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,r,t);else if(19===e.tag)Uo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Sa(Zi,n),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===es(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Bo(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===es(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Bo(t,!0,r,null,i);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Il|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(r=Tc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Tc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function $o(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Go(e,t,r){var n=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:case 17:return Ma(t.type)&&Ta(),qo(t),null;case 3:return n=t.stateNode,Xi(),Na(Ea),Na(Ca),rs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ui(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(sc(ii),ii=null))),Mo(e,t),qo(t),null;case 5:Qi(t);var a=Ki(Gi.current);if(r=t.type,null!==e&&null!=t.stateNode)To(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(i(166));return qo(t),null}if(e=Ki($i.current),ui(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[ha]=t,n[pa]=s,e=0!==(1&t.mode),r){case"dialog":zn("cancel",n),zn("close",n);break;case"iframe":case"object":case"embed":zn("load",n);break;case"video":case"audio":for(a=0;a<Rn.length;a++)zn(Rn[a],n);break;case"source":zn("error",n);break;case"img":case"image":case"link":zn("error",n),zn("load",n);break;case"details":zn("toggle",n);break;case"input":X(n,s),zn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},zn("invalid",n);break;case"textarea":ae(n,s),zn("invalid",n)}for(var l in be(r,s),a=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==s.suppressHydrationWarning&&Qn(n.textContent,c,e),a=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Qn(n.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zn("scroll",n)}switch(r){case"input":q(n),Z(n,s,!0);break;case"textarea":q(n),se(n);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(n.onclick=Zn)}n=a,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[ha]=t,e[pa]=n,Ao(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(r,n),r){case"dialog":zn("cancel",e),zn("close",e),a=n;break;case"iframe":case"object":case"embed":zn("load",e),a=n;break;case"video":case"audio":for(a=0;a<Rn.length;a++)zn(Rn[a],e);a=n;break;case"source":zn("error",e),a=n;break;case"img":case"image":case"link":zn("error",e),zn("load",e),a=n;break;case"details":zn("toggle",e),a=n;break;case"input":X(e,n),a=Y(e,n),zn("invalid",e);break;case"option":default:a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=L({},n,{value:void 0}),zn("invalid",e);break;case"textarea":ae(e,n),a=ne(e,n),zn("invalid",e)}for(s in be(r,a),c=a)if(c.hasOwnProperty(s)){var d=c[s];"style"===s?ge(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===s?"string"===typeof d?("textarea"!==r||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=d&&"onScroll"===s&&zn("scroll",e):null!=d&&y(e,s,d,l))}switch(r){case"input":q(e),Z(e,n,!1);break;case"textarea":q(e),se(e);break;case"option":null!=n.value&&e.setAttribute("value",""+W(n.value));break;case"select":e.multiple=!!n.multiple,null!=(s=n.value)?re(e,!!n.multiple,s,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(i(166));if(r=Ki(Gi.current),Ki($i.current),ui(t)){if(n=t.stateNode,r=t.memoizedProps,n[ha]=t,(s=n.nodeValue!==r)&&null!==(e=ri))switch(e.tag){case 3:Qn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qn(n.nodeValue,r,0!==(1&e.mode))}s&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[ha]=t,t.stateNode=n}return qo(t),null;case 13:if(Na(Zi),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ni&&0!==(1&t.mode)&&0===(128&t.flags))hi(),pi(),t.flags|=98560,s=!1;else if(s=ui(t),null!==n&&null!==n.dehydrated){if(null===e){if(!s)throw Error(i(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(i(317));s[ha]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qo(t),s=!1}else null!==ii&&(sc(ii),ii=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Dl&&(Dl=3):fc())),null!==t.updateQueue&&(t.flags|=4),qo(t),null);case 4:return Xi(),Mo(e,t),null===e&&Vn(t.stateNode.containerInfo),qo(t),null;case 10:return Oi(t.type._context),qo(t),null;case 19:if(Na(Zi),null===(s=t.memoizedState))return qo(t),null;if(n=0!==(128&t.flags),null===(l=s.rendering))if(n)$o(s,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=es(e))){for(t.flags|=128,$o(s,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(s=r).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Sa(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==s.tail&&Je()>Vl&&(t.flags|=128,n=!0,$o(s,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=es(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),$o(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ai)return qo(t),null}else 2*Je()-s.renderingStartTime>Vl&&1073741824!==r&&(t.flags|=128,n=!0,$o(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=s.last)?r.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,r=Zi.current,Sa(Zi,n?1&r|2:1&r),t):(qo(t),null);case 22:case 23:return uc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Ml)&&(qo(t),6&t.subtreeFlags&&(t.flags|=8192)):qo(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ko(e,t){switch(ti(t),t.tag){case 1:return Ma(t.type)&&Ta(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xi(),Na(Ea),Na(Ca),rs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qi(t),null;case 13:if(Na(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Na(Zi),null;case 4:return Xi(),null;case 10:return Oi(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Ao=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Mo=function(){},To=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Ki($i.current);var i,s=null;switch(r){case"input":a=Y(e,a),n=Y(e,n),s=[];break;case"select":a=L({},a,{value:void 0}),n=L({},n,{value:void 0}),s=[];break;case"textarea":a=ne(e,a),n=ne(e,n),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(e.onclick=Zn)}for(d in be(r,n),r=null,a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var l=a[d];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in n){var c=n[d];if(l=null!=a?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(s||(s=[]),s.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&zn("scroll",e),s||l===c||(s=[])):(s=s||[]).push(d,c))}r&&(s=s||[]).push("style",r);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Do=function(e,t,r,n){r!==n&&(t.flags|=4)};var Yo=!1,Xo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Qo=null;function Zo(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){wc(e,t,n)}else r.current=null}function el(e,t,r){try{r()}catch(n){wc(e,t,n)}}var tl=!1;function rl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&el(t,r,i)}a=a.next}while(a!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function al(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[pa],delete t[fa],delete t[ga],delete t[xa])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Zn));else if(4!==n&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var dl=null,ul=!1;function hl(e,t,r){for(r=r.child;null!==r;)pl(e,t,r),r=r.sibling}function pl(e,t,r){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,r)}catch(o){}switch(r.tag){case 5:Xo||Zo(r,t);case 6:var n=dl,a=ul;dl=null,hl(e,t,r),ul=a,null!==(dl=n)&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dl.removeChild(r.stateNode));break;case 18:null!==dl&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?la(e.parentNode,r):1===e.nodeType&&la(e,r),Vt(e)):la(dl,r.stateNode));break;case 4:n=dl,a=ul,dl=r.stateNode.containerInfo,ul=!0,hl(e,t,r),dl=n,ul=a;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){a=n=n.next;do{var i=a,s=i.destroy;i=i.tag,void 0!==s&&(0!==(2&i)||0!==(4&i))&&el(r,t,s),a=a.next}while(a!==n)}hl(e,t,r);break;case 1:if(!Xo&&(Zo(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){wc(r,t,o)}hl(e,t,r);break;case 21:hl(e,t,r);break;case 22:1&r.mode?(Xo=(n=Xo)||null!==r.memoizedState,hl(e,t,r),Xo=n):hl(e,t,r);break;default:hl(e,t,r)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Jo),t.forEach(function(t){var n=Cc.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function fl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n];try{var s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(i(160));pl(s,o,a),dl=null,ul=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(d){wc(a,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),xl(e),4&n){try{rl(3,e,e.return),nl(3,e)}catch(g){wc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){wc(e,e.return,g)}}break;case 1:fl(t,e),xl(e),512&n&&null!==r&&Zo(r,r.return);break;case 5:if(fl(t,e),xl(e),512&n&&null!==r&&Zo(r,r.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(g){wc(e,e.return,g)}}if(4&n&&null!=(a=e.stateNode)){var s=e.memoizedProps,o=null!==r?r.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&J(a,s),ye(l,o);var d=ye(l,s);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(a,h):"dangerouslySetInnerHTML"===u?ue(a,h):"children"===u?he(a,h):y(a,u,h,d)}switch(l){case"input":Q(a,s);break;case"textarea":ie(a,s);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var m=s.value;null!=m?re(a,!!s.multiple,m,!1):p!==!!s.multiple&&(null!=s.defaultValue?re(a,!!s.multiple,s.defaultValue,!0):re(a,!!s.multiple,s.multiple?[]:"",!1))}a[pa]=s}catch(g){wc(e,e.return,g)}}break;case 6:if(fl(t,e),xl(e),4&n){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(g){wc(e,e.return,g)}}break;case 3:if(fl(t,e),xl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){wc(e,e.return,g)}break;case 4:default:fl(t,e),xl(e);break;case 13:fl(t,e),xl(e),8192&(a=e.child).flags&&(s=null!==a.memoizedState,a.stateNode.isHidden=s,!s||null!==a.alternate&&null!==a.alternate.memoizedState||(Bl=Je())),4&n&&ml(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Xo=(d=Xo)||u,fl(t,e),Xo=d):fl(t,e),xl(e),8192&n){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Qo=e,u=e.child;null!==u;){for(h=Qo=u;null!==Qo;){switch(m=(p=Qo).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:Zo(p,p.return);var f=p.stateNode;if("function"===typeof f.componentWillUnmount){n=p,r=p.return;try{t=n,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){wc(n,r,g)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){_l(h);continue}}null!==m?(m.return=p,Qo=m):_l(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{a=h.stateNode,d?"function"===typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){wc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){wc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),xl(e),4&n&&ml(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(sl(r)){var n=r;break e}r=r.return}throw Error(i(160))}switch(n.tag){case 5:var a=n.stateNode;32&n.flags&&(he(a,""),n.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var s=n.stateNode.containerInfo;ll(e,ol(e),s);break;default:throw Error(i(161))}}catch(o){wc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,r){Qo=e,yl(e,t,r)}function yl(e,t,r){for(var n=0!==(1&e.mode);null!==Qo;){var a=Qo,i=a.child;if(22===a.tag&&n){var s=null!==a.memoizedState||Yo;if(!s){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=Yo;var c=Xo;if(Yo=s,(Xo=l)&&!c)for(Qo=a;null!==Qo;)l=(s=Qo).child,22===s.tag&&null!==s.memoizedState?kl(a):null!==l?(l.return=s,Qo=l):kl(a);for(;null!==i;)Qo=i,yl(i,t,r),i=i.sibling;Qo=a,Yo=o,Xo=c}vl(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,Qo=i):vl(e)}}function vl(e){for(;null!==Qo;){var t=Qo;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Xo)if(null===r)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:to(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Hi(t,s,n);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Hi(t,o,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(i(163))}Xo||512&t.flags&&al(t)}catch(p){wc(t,t.return,p)}}if(t===e){Qo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Qo=r;break}Qo=t.return}}function _l(e){for(;null!==Qo;){var t=Qo;if(t===e){Qo=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Qo=r;break}Qo=t.return}}function kl(e){for(;null!==Qo;){var t=Qo;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nl(4,t)}catch(l){wc(t,r,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var a=t.return;try{n.componentDidMount()}catch(l){wc(t,a,l)}}var i=t.return;try{al(t)}catch(l){wc(t,i,l)}break;case 5:var s=t.return;try{al(t)}catch(l){wc(t,s,l)}}}catch(l){wc(t,t.return,l)}if(t===e){Qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qo=o;break}Qo=t.return}}var jl,wl=Math.ceil,Nl=v.ReactCurrentDispatcher,Sl=v.ReactCurrentOwner,Ol=v.ReactCurrentBatchConfig,Cl=0,El=null,Pl=null,Al=0,Ml=0,Tl=wa(0),Dl=0,Rl=null,Il=0,Ll=0,Fl=0,zl=null,Ul=null,Bl=0,Vl=1/0,Hl=null,Wl=!1,$l=null,ql=null,Gl=!1,Kl=null,Yl=0,Xl=0,Jl=null,Ql=-1,Zl=0;function ec(){return 0!==(6&Cl)?Je():-1!==Ql?Ql:Ql=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Al?Al&-Al:null!==fi.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,r,n){if(50<Xl)throw Xl=0,Jl=null,Error(i(185));xt(e,r,n),0!==(2&Cl)&&e===El||(e===El&&(0===(2&Cl)&&(Ll|=r),4===Dl&&oc(e,Al)),nc(e,n),1===r&&0===Cl&&0===(1&t.mode)&&(Vl=Je()+500,za&&Va()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-st(i),o=1<<s,l=a[s];-1===l?0!==(o&r)&&0===(o&n)||(a[s]=pt(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var n=ht(e,e===El?Al:0);if(0===n)null!==r&&Ke(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ke(r),1===t)0===e.tag?function(e){za=!0,Ba(e)}(lc.bind(null,e)):Ba(lc.bind(null,e)),sa(function(){0===(6&Cl)&&Va()}),r=null;else{switch(vt(n)){case 1:r=Ze;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Ec(r,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ac(e,t){if(Ql=-1,Zl=0,0!==(6&Cl))throw Error(i(327));var r=e.callbackNode;if(kc()&&e.callbackNode!==r)return null;var n=ht(e,e===El?Al:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=gc(e,n);else{t=n;var a=Cl;Cl|=2;var s=mc();for(El===e&&Al===t||(Hl=null,Vl=Je()+500,hc(e,t));;)try{bc();break}catch(l){pc(e,l)}Si(),Nl.current=s,Cl=a,null!==Pl?t=0:(El=null,Al=0,t=Dl)}if(0!==t){if(2===t&&(0!==(a=mt(e))&&(n=a,t=ic(e,a))),1===t)throw r=Rl,hc(e,0),oc(e,n),nc(e,Je()),r;if(6===t)oc(e,n);else{if(a=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!on(i(),a))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,n))&&(0!==(s=mt(e))&&(n=s,t=ic(e,s))),1===t))throw r=Rl,hc(e,0),oc(e,n),nc(e,Je()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(i(345));case 2:case 5:_c(e,Ul,Hl);break;case 3:if(oc(e,n),(130023424&n)===n&&10<(t=Bl+500-Je())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=na(_c.bind(null,e,Ul,Hl),t);break}_c(e,Ul,Hl);break;case 4:if(oc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-st(n);s=1<<o,(o=t[o])>a&&(a=o),n&=~s}if(n=a,10<(n=(120>(n=Je()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*wl(n/1960))-n)){e.timeoutHandle=na(_c.bind(null,e,Ul,Hl),n);break}_c(e,Ul,Hl);break;default:throw Error(i(329))}}}return nc(e,Je()),e.callbackNode===r?ac.bind(null,e):null}function ic(e,t){var r=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=r,null!==t&&sc(t)),e}function sc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~Fl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-st(t),n=1<<r;e[r]=-1,t&=~n}}function lc(e){if(0!==(6&Cl))throw Error(i(327));kc();var t=ht(e,0);if(0===(1&t))return nc(e,Je()),null;var r=gc(e,t);if(0!==e.tag&&2===r){var n=mt(e);0!==n&&(t=n,r=ic(e,n))}if(1===r)throw r=Rl,hc(e,0),oc(e,t),nc(e,Je()),r;if(6===r)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Ul,Hl),nc(e,Je()),null}function cc(e,t){var r=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=r)&&(Vl=Je()+500,za&&Va())}}function dc(e){null!==Kl&&0===Kl.tag&&0===(6&Cl)&&kc();var t=Cl;Cl|=1;var r=Ol.transition,n=yt;try{if(Ol.transition=null,yt=1,e)return e()}finally{yt=n,Ol.transition=r,0===(6&(Cl=t))&&Va()}}function uc(){Ml=Tl.current,Na(Tl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,aa(r)),null!==Pl)for(r=Pl.return;null!==r;){var n=r;switch(ti(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Ta();break;case 3:Xi(),Na(Ea),Na(Ca),rs();break;case 5:Qi(n);break;case 4:Xi();break;case 13:case 19:Na(Zi);break;case 10:Oi(n.type._context);break;case 22:case 23:uc()}r=r.return}if(El=e,Pl=e=Tc(e.current,null),Al=Ml=t,Dl=0,Rl=null,Fl=Ll=Il=0,Ul=zl=null,null!==Ai){for(t=0;t<Ai.length;t++)if(null!==(n=(r=Ai[t]).interleaved)){r.interleaved=null;var a=n.next,i=r.pending;if(null!==i){var s=i.next;i.next=a,n.next=s}r.pending=n}Ai=null}return e}function pc(e,t){for(;;){var r=Pl;try{if(Si(),ns.current=Js,cs){for(var n=ss.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}cs=!1}if(is=0,ls=os=ss=null,ds=!1,us=0,Sl.current=null,null===r||null===r.return){Dl=1,Rl=t,Pl=null;break}e:{var s=e,o=r.return,l=r,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=go(o);if(null!==m){m.flags&=-257,xo(m,o,l,0,t),1&m.mode&&fo(s,d,t),c=d;var f=(t=m).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(s,d,t),fc();break e}c=Error(i(426))}else if(ai&&1&l.mode){var x=go(o);if(null!==x){0===(65536&x.flags)&&(x.flags|=256),xo(x,o,l,0,t),mi(lo(c,l));break e}}s=c=lo(c,l),4!==Dl&&(Dl=2),null===zl?zl=[s]:zl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Bi(s,po(0,c,t));break e;case 1:l=c;var b=s.type,y=s.stateNode;if(0===(128&s.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===ql||!ql.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t,Bi(s,mo(s,l,t));break e}}s=s.return}while(null!==s)}vc(r)}catch(v){t=v,Pl===r&&null!==r&&(Pl=r=r.return);continue}break}}function mc(){var e=Nl.current;return Nl.current=Js,null===e?Js:e}function fc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===El||0===(268435455&Il)&&0===(268435455&Ll)||oc(El,Al)}function gc(e,t){var r=Cl;Cl|=2;var n=mc();for(El===e&&Al===t||(Hl=null,hc(e,t));;)try{xc();break}catch(a){pc(e,a)}if(Si(),Cl=r,Nl.current=n,null!==Pl)throw Error(i(261));return El=null,Al=0,Dl}function xc(){for(;null!==Pl;)yc(Pl)}function bc(){for(;null!==Pl&&!Ye();)yc(Pl)}function yc(e){var t=jl(e.alternate,e,Ml);e.memoizedProps=e.pendingProps,null===t?vc(e):Pl=t,Sl.current=null}function vc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Go(r,t,Ml)))return void(Pl=r)}else{if(null!==(r=Ko(r,t)))return r.flags&=32767,void(Pl=r);if(null===e)return Dl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Dl&&(Dl=5)}function _c(e,t,r){var n=yt,a=Ol.transition;try{Ol.transition=null,yt=1,function(e,t,r,n){do{kc()}while(null!==Kl);if(0!==(6&Cl))throw Error(i(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-st(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}(e,s),e===El&&(Pl=El=null,Al=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Gl||(Gl=!0,Ec(tt,function(){return kc(),null})),s=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||s){s=Ol.transition,Ol.transition=null;var o=yt;yt=1;var l=Cl;Cl|=4,Sl.current=null,function(e,t){if(ea=Wt,pn(e=hn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch(_){r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var m;h!==r||0!==a&&3!==h.nodeType||(l=o+a),h!==s||0!==n&&3!==h.nodeType||(c=o+n),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===r&&++d===a&&(l=o),p===s&&++u===n&&(c=o),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ta={focusedElem:e,selectionRange:r},Wt=!1,Qo=t;null!==Qo;)if(e=(t=Qo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qo=e;else for(;null!==Qo;){t=Qo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,x=f.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),x);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(i(163))}}catch(_){wc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Qo=e;break}Qo=t.return}f=tl,tl=!1}(e,r),gl(r,e),mn(ta),Wt=!!ea,ta=ea=null,e.current=r,bl(r,e,a),Xe(),Cl=l,yt=o,Ol.transition=s}else e.current=r;if(Gl&&(Gl=!1,Kl=e,Yl=a),s=e.pendingLanes,0===s&&(ql=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,Je()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Wl)throw Wl=!1,e=$l,$l=null,e;0!==(1&Yl)&&0!==e.tag&&kc(),s=e.pendingLanes,0!==(1&s)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Va()}(e,t,r,n)}finally{Ol.transition=a,yt=n}return null}function kc(){if(null!==Kl){var e=vt(Yl),t=Ol.transition,r=yt;try{if(Ol.transition=null,yt=16>e?16:e,null===Kl)var n=!1;else{if(e=Kl,Kl=null,Yl=0,0!==(6&Cl))throw Error(i(331));var a=Cl;for(Cl|=4,Qo=e.current;null!==Qo;){var s=Qo,o=s.child;if(0!==(16&Qo.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Qo=d;null!==Qo;){var u=Qo;switch(u.tag){case 0:case 11:case 15:rl(8,u,s)}var h=u.child;if(null!==h)h.return=u,Qo=h;else for(;null!==Qo;){var p=(u=Qo).sibling,m=u.return;if(il(u),u===d){Qo=null;break}if(null!==p){p.return=m,Qo=p;break}Qo=m}}}var f=s.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(null!==g)}}Qo=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,Qo=o;else e:for(;null!==Qo;){if(0!==(2048&(s=Qo).flags))switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var b=s.sibling;if(null!==b){b.return=s.return,Qo=b;break e}Qo=s.return}}var y=e.current;for(Qo=y;null!==Qo;){var v=(o=Qo).child;if(0!==(2064&o.subtreeFlags)&&null!==v)v.return=o,Qo=v;else e:for(o=y;null!==Qo;){if(0!==(2048&(l=Qo).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(k){wc(l,l.return,k)}if(l===o){Qo=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Qo=_;break e}Qo=l.return}}if(Cl=a,Va(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(k){}n=!0}return n}finally{yt=r,Ol.transition=t}}return!1}function jc(e,t,r){e=zi(e,t=po(0,t=lo(r,t),1),1),t=ec(),null!==e&&(xt(e,1,t),nc(e,t))}function wc(e,t,r){if(3===e.tag)jc(e,e,r);else for(;null!==t;){if(3===t.tag){jc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===ql||!ql.has(n))){t=zi(t,e=mo(t,e=lo(r,e),1),1),e=ec(),null!==t&&(xt(t,1,e),nc(t,e));break}}t=t.return}}function Nc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,El===e&&(Al&r)===r&&(4===Dl||3===Dl&&(130023424&Al)===Al&&500>Je()-Bl?hc(e,0):Fl|=r),nc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var r=ec();null!==(e=Di(e,t))&&(xt(e,t,r),nc(e,r))}function Oc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Sc(e,r)}function Cc(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(i(314))}null!==n&&n.delete(t),Sc(e,r)}function Ec(e,t){return Ge(e,t)}function Pc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,r,n){return new Pc(e,t,r,n)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Tc(e,t){var r=e.alternate;return null===r?((r=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Dc(e,t,r,n,a,s){var o=2;if(n=e,"function"===typeof e)Mc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case j:return Rc(r.children,a,s,t);case w:o=8,a|=8;break;case N:return(e=Ac(12,r,t,2|a)).elementType=N,e.lanes=s,e;case E:return(e=Ac(13,r,t,a)).elementType=E,e.lanes=s,e;case P:return(e=Ac(19,r,t,a)).elementType=P,e.lanes=s,e;case T:return Ic(r,a,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case O:o=9;break e;case C:o=11;break e;case A:o=14;break e;case M:o=16,n=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ac(o,r,t,a)).elementType=e,t.type=n,t.lanes=s,t}function Rc(e,t,r,n){return(e=Ac(7,e,n,t)).lanes=r,e}function Ic(e,t,r,n){return(e=Ac(22,e,n,t)).elementType=T,e.lanes=r,e.stateNode={isHidden:!1},e}function Lc(e,t,r){return(e=Ac(6,e,null,t)).lanes=r,e}function Fc(e,t,r){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Uc(e,t,r,n,a,i,s,o,l){return e=new zc(e,t,r,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Ac(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ii(i),e}function Bc(e){if(!e)return Oa;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ma(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var r=e.type;if(Ma(r))return Ra(e,r,t)}return t}function Vc(e,t,r,n,a,i,s,o,l){return(e=Uc(r,n,!0,e,0,i,0,o,l)).context=Bc(null),r=e.current,(i=Fi(n=ec(),a=tc(r))).callback=void 0!==t&&null!==t?t:null,zi(r,i,a),e.current.lanes=a,xt(e,a,n),nc(e,n),e}function Hc(e,t,r,n){var a=t.current,i=ec(),s=tc(a);return r=Bc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Fi(i,s)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=zi(a,t,s))&&(rc(e,a,s,i),Ui(e,a,s)),s}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $c(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function qc(e,t){$c(e,t),(e=e.alternate)&&$c(e,t)}jl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ea.current)yo=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return yo=!1,function(e,t,r){switch(t.tag){case 3:Eo(t),pi();break;case 5:Ji(t);break;case 1:Ma(t.type)&&Ia(t);break;case 4:Yi(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Sa(ki,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Sa(Zi,1&Zi.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Lo(e,t,r):(Sa(Zi,1&Zi.current),null!==(e=Wo(e,t,r))?e.sibling:null);Sa(Zi,1&Zi.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return Vo(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Sa(Zi,Zi.current),n)break;return null;case 22:case 23:return t.lanes=0,wo(e,t,r)}return Wo(e,t,r)}(e,t,r);yo=0!==(131072&e.flags)}else yo=!1,ai&&0!==(1048576&t.flags)&&Za(t,qa,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ho(e,t),e=t.pendingProps;var a=Aa(t,Ca.current);Ei(t,r),a=fs(null,t,n,e,a,r);var s=gs();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ma(n)?(s=!0,Ia(t)):s=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ii(t),a.updater=no,t.stateNode=a,a._reactInternals=t,oo(t,n,e,r),t=Co(null,t,n,!0,s,r)):(t.tag=0,ai&&s&&ei(t),vo(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(n),e=to(n,e),a){case 0:t=So(null,t,n,e,r);break e;case 1:t=Oo(null,t,n,e,r);break e;case 11:t=_o(null,t,n,e,r);break e;case 14:t=ko(null,t,n,to(n.type,e),r);break e}throw Error(i(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,So(e,t,n,a=t.elementType===n?a:to(n,a),r);case 1:return n=t.type,a=t.pendingProps,Oo(e,t,n,a=t.elementType===n?a:to(n,a),r);case 3:e:{if(Eo(t),null===e)throw Error(i(387));n=t.pendingProps,a=(s=t.memoizedState).element,Li(e,t),Vi(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated){if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Po(e,t,n,r,a=lo(Error(i(423)),t));break e}if(n!==a){t=Po(e,t,n,r,a=lo(Error(i(424)),t));break e}for(ni=ca(t.stateNode.containerInfo.firstChild),ri=t,ai=!0,ii=null,r=_i(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(pi(),n===a){t=Wo(e,t,r);break e}vo(e,t,n,r)}t=t.child}return t;case 5:return Ji(t),null===e&&ci(t),n=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,o=a.children,ra(n,a)?o=null:null!==s&&ra(n,s)&&(t.flags|=32),No(e,t),vo(e,t,o,r),t.child;case 6:return null===e&&ci(t),null;case 13:return Lo(e,t,r);case 4:return Yi(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=vi(t,null,n,r):vo(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,_o(e,t,n,a=t.elementType===n?a:to(n,a),r);case 7:return vo(e,t,t.pendingProps,r),t.child;case 8:case 12:return vo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value,Sa(ki,n._currentValue),n._currentValue=o,null!==s)if(on(s.value,o)){if(s.children===a.children&&!Ea.current){t=Wo(e,t,r);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===s.tag){(c=Fi(-1,r&-r)).tag=2;var d=s.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}s.lanes|=r,null!==(c=s.alternate)&&(c.lanes|=r),Ci(s.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(i(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),Ci(o,r,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}vo(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ei(t,r),n=n(a=Pi(a)),t.flags|=1,vo(e,t,n,r),t.child;case 14:return a=to(n=t.type,t.pendingProps),ko(e,t,n,a=to(n.type,a),r);case 15:return jo(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:to(n,a),Ho(e,t),t.tag=1,Ma(n)?(e=!0,Ia(t)):e=!1,Ei(t,r),io(t,n,a),oo(t,n,a,r),Co(null,t,n,!0,e,r);case 19:return Vo(e,t,r);case 22:return wo(e,t,r)}throw Error(i(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Zc(e,t,r,n,a){var i=r._reactRootContainer;if(i){var s=i;if("function"===typeof a){var o=a;a=function(){var e=Wc(s);o.call(e)}}Hc(t,s,e,a)}else s=function(e,t,r,n,a){if(a){if("function"===typeof n){var i=n;n=function(){var e=Wc(s);i.call(e)}}var s=Vc(t,n,e,0,null,!1,0,"",Qc);return e._reactRootContainer=s,e[ma]=s.current,Vn(8===e.nodeType?e.parentNode:e),dc(),s}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof n){var o=n;n=function(){var e=Wc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[ma]=l.current,Vn(8===e.nodeType?e.parentNode:e),dc(function(){Hc(t,l,r,n)}),l}(r,t,e,a,n);return Wc(s)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Hc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Hc(null,e,null,null)}),t[ma]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=wt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Tt.length&&0!==t&&t<Tt[r].priority;r++);Tt.splice(r,0,e),0===r&&Lt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(bt(t,1|r),nc(t,Je()),0===(6&Cl)&&(Vl=Je()+500,Va()))}break;case 13:dc(function(){var t=Di(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),qc(e,1)}},kt=function(e){if(13===e.tag){var t=Di(e,134217728);if(null!==t)rc(t,e,134217728,ec());qc(e,134217728)}},jt=function(e){if(13===e.tag){var t=tc(e),r=Di(e,t);if(null!==r)rc(r,e,t,ec());qc(e,t)}},wt=function(){return yt},Nt=function(e,t){var r=yt;try{return yt=e,t()}finally{yt=r}},ke=function(e,t,r){switch(t){case"input":if(Q(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=_a(n);if(!a)throw Error(i(90));G(n),Q(n,a)}}}break;case"textarea":ie(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ce=cc,Ee=dc;var ed={usingClientEntryPoint:!1,Events:[ya,va,_a,Se,Oe,cc]},td={findFiberByHostInstance:ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{at=nd.inject(rd),it=nd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(i(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Xc(e))throw Error(i(299));var r=!1,n="",a=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Uc(e,1,!1,null,0,r,0,n,a),e[ma]=t.current,Vn(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!Jc(t))throw Error(i(200));return Zc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Xc(e))throw Error(i(405));var n=null!=r&&r.hydratedSources||null,a=!1,s="",o=Gc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(s=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=Vc(t,null,e,1,null!=r?r:null,a,0,s,o),e[ma]=t.current,Vn(e),n)for(e=0;e<n.length;e++)a=(a=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Yc(t)},t.render=function(e,t,r){if(!Jc(t))throw Error(i(200));return Zc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(i(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[ma]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Jc(r))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zc(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},2761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},2777:(e,t,r)=>{var n=r(5193),a=r(2761),i=Object.prototype,s=i.hasOwnProperty,o=i.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return a(e)&&s.call(e,"callee")&&!o.call(e,"callee")};e.exports=l},2866:(e,t,r)=>{var n=r(2969);e.exports=function(e){return function(t){return n(t,e)}}},2929:(e,t,r)=>{var n=r(6552).Uint8Array;e.exports=n},2969:(e,t,r)=>{var n=r(5324),a=r(914);e.exports=function(e,t){for(var r=0,i=(t=n(t,e)).length;null!=e&&r<i;)e=e[a(t[r++])];return r&&r==i?e:void 0}},3028:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},3097:(e,t,r)=>{var n=r(2969);e.exports=function(e,t,r){var a=null==e?void 0:n(e,t);return void 0===a?r:a}},3204:(e,t,r)=>{var n=r(3343),a=r(2777),i=r(4052),s=r(4543),o=r(9194),l=r(1268),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=i(e),d=!r&&a(e),u=!r&&!d&&s(e),h=!r&&!d&&!u&&l(e),p=r||d||u||h,m=p?n(e.length,String):[],f=m.length;for(var g in e)!t&&!c.call(e,g)||p&&("length"==g||u&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||o(g,f))||m.push(g);return m}},3211:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3279:e=>{e.exports=function(e){return e}},3331:(e,t,r)=>{var n=r(9676),a=r(929),i=r(7303);e.exports=function(e){return function(t,r,s){return s&&"number"!=typeof s&&a(t,r,s)&&(r=s=void 0),t=i(t),void 0===r?(r=t,t=0):r=i(r),s=void 0===s?t<r?1:-1:i(s),n(t,r,s,e)}}},3343:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},3366:(e,t,r)=>{var n=r(7894),a=r(9057);e.exports=function(e,t){return null!=e&&a(e,t,n)}},3411:(e,t,r)=>{var n=r(149),a=r(9096),i=r(8883),s=r(4052);e.exports=function(e,t){return(s(e)?n:i)(e,a(t,3))}},3440:(e,t,r)=>{var n=r(6552)["__core-js_shared__"];e.exports=n},3538:(e,t,r)=>{var n=r(755),a=r(3411);e.exports=function(e,t){return n(a(e,t),1)}},3668:(e,t,r)=>{var n=r(8902),a=r(2587),i=r(8114);e.exports=function(e,t,r,s,o,l){var c=1&r,d=e.length,u=t.length;if(d!=u&&!(c&&u>d))return!1;var h=l.get(e),p=l.get(t);if(h&&p)return h==t&&p==e;var m=-1,f=!0,g=2&r?new n:void 0;for(l.set(e,t),l.set(t,e);++m<d;){var x=e[m],b=t[m];if(s)var y=c?s(b,x,m,t,e,l):s(x,b,m,e,t,l);if(void 0!==y){if(y)continue;f=!1;break}if(g){if(!a(t,function(e,t){if(!i(g,t)&&(x===e||o(x,e,r,s,l)))return g.push(t)})){f=!1;break}}else if(x!==b&&!o(x,b,r,s,l)){f=!1;break}}return l.delete(e),l.delete(t),f}},3713:(e,t,r)=>{var n=r(6140),a=r(1143),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return a(e);var t=[];for(var r in Object(e))i.call(e,r)&&"constructor"!=r&&t.push(r);return t}},3763:(e,t,r)=>{"use strict";e.exports=r(4983)},3781:(e,t,r)=>{var n=r(9417),a=r(8673);e.exports=function(e){for(var t=a(e),r=t.length;r--;){var i=t[r],s=e[i];t[r]=[i,s,n(s)]}return t}},3871:e=>{e.exports=function(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}},3892:e=>{e.exports=function(e){return this.__data__.has(e)}},3932:(e,t,r)=>{var n=r(396),a=r(2866),i=r(2597),s=r(914);e.exports=function(e){return i(e)?n(s(e)):a(e)}},3950:(e,t,r)=>{var n=r(6686),a=r(4757),i=r(801),s=Math.max,o=Math.min;e.exports=function(e,t,r){var l,c,d,u,h,p,m=0,f=!1,g=!1,x=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var r=l,n=c;return l=c=void 0,m=t,u=e.apply(n,r)}function y(e){var r=e-p;return void 0===p||r>=t||r<0||g&&e-m>=d}function v(){var e=a();if(y(e))return _(e);h=setTimeout(v,function(e){var r=t-(e-p);return g?o(r,d-(e-m)):r}(e))}function _(e){return h=void 0,x&&l?b(e):(l=c=void 0,u)}function k(){var e=a(),r=y(e);if(l=arguments,c=this,p=e,r){if(void 0===h)return function(e){return m=e,h=setTimeout(v,t),f?b(e):u}(p);if(g)return clearTimeout(h),h=setTimeout(v,t),b(p)}return void 0===h&&(h=setTimeout(v,t)),u}return t=i(t)||0,n(r)&&(f=!!r.leading,d=(g="maxWait"in r)?s(i(r.maxWait)||0,t):d,x="trailing"in r?!!r.trailing:x),k.cancel=function(){void 0!==h&&clearTimeout(h),m=0,l=p=c=h=void 0},k.flush=function(){return void 0===h?u:_(a())},k}},4020:e=>{e.exports=function(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}},4052:e=>{var t=Array.isArray;e.exports=t},4065:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},4079:(e,t,r)=>{var n=r(8259),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,s=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,function(e,r,n,a){t.push(n?a.replace(i,"$1"):r||e)}),t});e.exports=s},4160:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}},4190:(e,t,r)=>{var n=r(1340);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},4202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function x(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||m}function b(){}function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||m}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=x.prototype;var v=y.prototype=new b;v.constructor=y,f(v,x.prototype),v.isPureReactComponent=!0;var _=Array.isArray,k=Object.prototype.hasOwnProperty,j={current:null},w={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,n){var a,i={},s=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)k.call(t,a)&&!w.hasOwnProperty(a)&&(i[a]=t[a]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===i[a]&&(i[a]=l[a]);return{$$typeof:r,type:e,key:s,ref:o,props:i,_owner:j.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var O=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(e,t,a,i,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return s=s(l=e),e=""===i?"."+C(l,0):i,_(s)?(a="",null!=e&&(a=e.replace(O,"$&/")+"/"),E(s,t,a,"",function(e){return e})):null!=s&&(S(s)&&(s=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,a+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(O,"$&/")+"/")+e)),t.push(s)),1;if(l=0,i=""===i?".":i+":",_(e))for(var c=0;c<e.length;c++){var d=i+C(o=e[c],c);l+=E(o,t,a,d,s)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=E(o=o.value,t,a,d=i+C(o,c++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,r){if(null==e)return e;var n=[],a=0;return E(e,n,"","",function(e){return t.call(r,e,a++)}),n}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},T={transition:null},D={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:T,ReactCurrentOwner:j};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,r){P(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=a,t.Profiler=s,t.PureComponent=y,t.StrictMode=i,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=R,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=f({},e.props),i=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=j.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!w.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:r,type:e.type,key:i,ref:s,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=T.transition;T.transition={};try{e()}finally{T.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,r){return M.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,r){return M.current.useReducer(e,t,r)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return M.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return M.current.useTransition()},t.version="18.3.1"},4258:(e,t,r)=>{var n=r(5906)();e.exports=n},4262:(e,t,r)=>{var n=r(8895),a=r(4052);e.exports=function(e,t,r){var i=t(e);return a(e)?i:n(i,r(e))}},4391:(e,t,r)=>{"use strict";var n=r(7950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},4416:(e,t,r)=>{var n=r(8902),a=r(5866),i=r(1558),s=r(8114),o=r(8182),l=r(2074);e.exports=function(e,t,r){var c=-1,d=a,u=e.length,h=!0,p=[],m=p;if(r)h=!1,d=i;else if(u>=200){var f=t?null:o(e);if(f)return l(f);h=!1,d=s,m=new n}else m=t?[]:p;e:for(;++c<u;){var g=e[c],x=t?t(g):g;if(g=r||0!==g?g:0,h&&x===x){for(var b=m.length;b--;)if(m[b]===x)continue e;t&&m.push(x),p.push(g)}else d(m,x,r)||(m!==p&&m.push(x),p.push(g))}return p}},4543:(e,t,r)=>{e=r.nmd(e);var n=r(6552),a=r(14),i=t&&!t.nodeType&&t,s=i&&e&&!e.nodeType&&e,o=s&&s.exports===i?n.Buffer:void 0,l=(o?o.isBuffer:void 0)||a;e.exports=l},4545:(e,t,r)=>{var n=r(7160);e.exports=function(){this.__data__=new n,this.size=0}},4552:(e,t,r)=>{var n=r(9812),a=Object.prototype,i=a.hasOwnProperty,s=a.toString,o=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,o),r=e[o];try{e[o]=void 0;var n=!0}catch(l){}var a=s.call(e);return n&&(t?e[o]=r:delete e[o]),a}},4597:(e,t,r)=>{var n=r(2587),a=r(9096),i=r(2165),s=r(4052),o=r(929);e.exports=function(e,t,r){var l=s(e)?n:i;return r&&o(e,t,r)&&(t=void 0),l(e,a(t,3))}},4657:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},4664:(e,t,r)=>{var n=r(4258),a=r(8673);e.exports=function(e,t){return e&&n(e,t,a)}},4746:(e,t,r)=>{var n=r(5652);e.exports=function(e,t){var r=!0;return n(e,function(e,n,a){return r=!!t(e,n,a)}),r}},4757:(e,t,r)=>{var n=r(6552);e.exports=function(){return n.Date.now()}},4816:(e,t,r)=>{var n=r(7251),a=r(7159),i=r(438),s=r(9394),o=r(6874);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=a,l.prototype.get=i,l.prototype.has=s,l.prototype.set=o,e.exports=l},4983:(e,t)=>{"use strict";var r="function"===typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,o=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,u=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,f=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,x=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,y=r?Symbol.for("react.responder"):60118,v=r?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case d:case u:case i:case o:case s:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case f:case l:return e;default:return t}}case a:return t}}}function k(e){return _(e)===u}t.AsyncMode=d,t.ConcurrentMode=u,t.ContextConsumer=c,t.ContextProvider=l,t.Element=n,t.ForwardRef=h,t.Fragment=i,t.Lazy=g,t.Memo=f,t.Portal=a,t.Profiler=o,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return k(e)||_(e)===d},t.isConcurrentMode=k,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return _(e)===h},t.isFragment=function(e){return _(e)===i},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===f},t.isPortal=function(e){return _(e)===a},t.isProfiler=function(e){return _(e)===o},t.isStrictMode=function(e){return _(e)===s},t.isSuspense=function(e){return _(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===u||e===o||e===s||e===p||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===f||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===b||e.$$typeof===y||e.$$typeof===v||e.$$typeof===x)},t.typeOf=_},5029:(e,t,r)=>{var n=r(6989),a=r(3097),i=r(3366),s=r(2597),o=r(9417),l=r(1310),c=r(914);e.exports=function(e,t){return s(e)&&o(t)?l(c(e),t):function(r){var s=a(r,e);return void 0===s&&s===t?i(r,e):n(t,s,3)}}},5043:(e,t,r)=>{"use strict";e.exports=r(4202)},5051:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},5173:(e,t,r)=>{e.exports=r(1497)()},5193:(e,t,r)=>{var n=r(6913),a=r(2761);e.exports=function(e){return a(e)&&"[object Arguments]"==n(e)}},5204:(e,t,r)=>{var n=r(7937)(r(6552),"Map");e.exports=n},5268:(e,t,r)=>{var n=r(9160);e.exports=function(e){return n(e)&&e!=+e}},5295:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}},5324:(e,t,r)=>{var n=r(4052),a=r(2597),i=r(4079),s=r(1069);e.exports=function(e,t){return n(e)?e:a(e,t)?[e]:i(s(e))}},5387:(e,t,r)=>{var n=r(7937)(r(6552),"Promise");e.exports=n},5428:(e,t,r)=>{var n=r(6913),a=r(6173),i=r(2761),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&a(e.length)&&!!s[n(e)]}},5538:(e,t,r)=>{var n=r(7160),a=r(4545),i=r(793),s=r(7760),o=r(3892),l=r(6788);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=a,c.prototype.delete=i,c.prototype.get=s,c.prototype.has=o,c.prototype.set=l,e.exports=c},5575:(e,t,r)=>{var n=r(7937)(Object,"create");e.exports=n},5636:(e,t,r)=>{var n=r(1170),a=Math.max;e.exports=function(e,t,r){return t=a(void 0===t?e.length-1:t,0),function(){for(var i=arguments,s=-1,o=a(i.length-t,0),l=Array(o);++s<o;)l[s]=i[t+s];s=-1;for(var c=Array(t+1);++s<t;)c[s]=i[s];return c[t]=r(l),n(e,this,c)}}},5647:(e,t,r)=>{var n=r(3279),a=r(5636),i=r(6350);e.exports=function(e,t){return i(a(e,t,n),e+"")}},5652:(e,t,r)=>{var n=r(4664),a=r(6516)(n);e.exports=a},5654:(e,t,r)=>{var n=r(7937),a=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=a},5713:e=>{e.exports=function(){}},5752:(e,t,r)=>{var n=r(9395),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,i,s,o){var l=1&r,c=n(e),d=c.length;if(d!=n(t).length&&!l)return!1;for(var u=d;u--;){var h=c[u];if(!(l?h in t:a.call(t,h)))return!1}var p=o.get(e),m=o.get(t);if(p&&m)return p==t&&m==e;var f=!0;o.set(e,t),o.set(t,e);for(var g=l;++u<d;){var x=e[h=c[u]],b=t[h];if(i)var y=l?i(b,x,h,t,e,o):i(x,b,h,e,t,o);if(!(void 0===y?x===b||s(x,b,r,i,o):y)){f=!1;break}g||(g="constructor"==h)}if(f&&!g){var v=e.constructor,_=t.constructor;v==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _||(f=!1)}return o.delete(e),o.delete(t),f}},5797:(e,t,r)=>{var n=r(4816);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var s=e.apply(this,n);return r.cache=i.set(a,s)||i,s};return r.cache=new(a.Cache||n),r}a.Cache=n,e.exports=a},5816:e=>{e.exports=function(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}},5866:(e,t,r)=>{var n=r(8468);e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},5893:(e,t,r)=>{var n=r(6599);e.exports=function(e,t,r){for(var a=-1,i=e.criteria,s=t.criteria,o=i.length,l=r.length;++a<o;){var c=n(i[a],s[a]);if(c)return a>=l?c:c*("desc"==r[a]?-1:1)}return e.index-t.index}},5906:e=>{e.exports=function(e){return function(t,r,n){for(var a=-1,i=Object(t),s=n(t),o=s.length;o--;){var l=s[e?o:++a];if(!1===r(i[l],l,i))break}return t}}},5967:e=>{e.exports=function(e){return e.split("")}},5990:(e,t,r)=>{var n=r(3028)(Object.getPrototypeOf,Object);e.exports=n},6095:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},6140:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},6173:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},6179:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},6311:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},6350:(e,t,r)=>{var n=r(8325),a=r(6578)(n);e.exports=a},6361:(e,t,r)=>{var n=r(6913),a=r(2761);e.exports=function(e){return!0===e||!1===e||a(e)&&"[object Boolean]"==n(e)}},6378:(e,t)=>{"use strict";var r,n=Symbol.for("react.element"),a=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case s:case h:case p:return e;default:switch(e=e&&e.$$typeof){case d:case c:case u:case f:case m:case l:return e;default:return t}}case a:return t}}}r=Symbol.for("react.module.reference"),t.isFragment=function(e){return x(e)===i}},6399:(e,t,r)=>{var n=r(5538),a=r(3668),i=r(9987),s=r(5752),o=r(6924),l=r(4052),c=r(4543),d=r(1268),u="[object Arguments]",h="[object Array]",p="[object Object]",m=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,f,g,x){var b=l(e),y=l(t),v=b?h:o(e),_=y?h:o(t),k=(v=v==u?p:v)==p,j=(_=_==u?p:_)==p,w=v==_;if(w&&c(e)){if(!c(t))return!1;b=!0,k=!1}if(w&&!k)return x||(x=new n),b||d(e)?a(e,t,r,f,g,x):i(e,t,v,r,f,g,x);if(!(1&r)){var N=k&&m.call(e,"__wrapped__"),S=j&&m.call(t,"__wrapped__");if(N||S){var O=N?e.value():e,C=S?t.value():t;return x||(x=new n),g(O,C,r,f,x)}}return!!w&&(x||(x=new n),s(e,t,r,f,g,x))}},6516:(e,t,r)=>{var n=r(6571);e.exports=function(e,t){return function(r,a){if(null==r)return r;if(!n(r))return e(r,a);for(var i=r.length,s=t?i:-1,o=Object(r);(t?s--:++s<i)&&!1!==a(o[s],s,o););return r}}},6532:(e,t,r)=>{var n=r(5538),a=r(6989);e.exports=function(e,t,r,i){var s=r.length,o=s,l=!i;if(null==e)return!o;for(e=Object(e);s--;){var c=r[s];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<o;){var d=(c=r[s])[0],u=e[d],h=c[1];if(l&&c[2]){if(void 0===u&&!(d in e))return!1}else{var p=new n;if(i)var m=i(u,h,d,e,t,p);if(!(void 0===m?a(h,u,3,i,p):m))return!1}}return!0}},6552:(e,t,r)=>{var n=r(7105),a="object"==typeof self&&self&&self.Object===Object&&self,i=n||a||Function("return this")();e.exports=i},6571:(e,t,r)=>{var n=r(1629),a=r(6173);e.exports=function(e){return null!=e&&a(e.length)&&!n(e)}},6578:e=>{var t=Date.now;e.exports=function(e){var r=0,n=0;return function(){var a=t(),i=16-(a-n);if(n=a,i>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}},6599:(e,t,r)=>{var n=r(9841);e.exports=function(e,t){if(e!==t){var r=void 0!==e,a=null===e,i=e===e,s=n(e),o=void 0!==t,l=null===t,c=t===t,d=n(t);if(!l&&!d&&!s&&e>t||s&&o&&c&&!l&&!d||a&&o&&c||!r&&c||!i)return 1;if(!a&&!s&&!d&&e<t||d&&r&&i&&!a&&!s||l&&r&&i||!o&&i||!c)return-1}return 0}},6600:(e,t,r)=>{var n=r(7937)(r(6552),"WeakMap");e.exports=n},6604:(e,t,r)=>{var n=r(3331)();e.exports=n},6686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},6704:e=>{e.exports=function(e){return this.__data__.has(e)}},6745:(e,t,r)=>{var n=r(9742),a=r(61),i=r(3279);e.exports=function(e){return e&&e.length?n(e,i,a):void 0}},6788:(e,t,r)=>{var n=r(7160),a=r(5204),i=r(4816);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var s=r.__data__;if(!a||s.length<199)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new i(s)}return r.set(e,t),this.size=r.size,this}},6832:(e,t,r)=>{e=r.nmd(e);var n=r(7105),a=t&&!t.nodeType&&t,i=a&&e&&!e.nodeType&&e,s=i&&i.exports===a&&n.process,o=function(){try{var e=i&&i.require&&i.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(t){}}();e.exports=o},6874:(e,t,r)=>{var n=r(2622);e.exports=function(e,t){var r=n(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}},6913:(e,t,r)=>{var n=r(9812),a=r(4552),i=r(6095),s=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?a(e):i(e)}},6924:(e,t,r)=>{var n=r(7685),a=r(5204),i=r(5387),s=r(2070),o=r(6600),l=r(6913),c=r(6996),d="[object Map]",u="[object Promise]",h="[object Set]",p="[object WeakMap]",m="[object DataView]",f=c(n),g=c(a),x=c(i),b=c(s),y=c(o),v=l;(n&&v(new n(new ArrayBuffer(1)))!=m||a&&v(new a)!=d||i&&v(i.resolve())!=u||s&&v(new s)!=h||o&&v(new o)!=p)&&(v=function(e){var t=l(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case f:return m;case g:return d;case x:return u;case b:return h;case y:return p}return t}),e.exports=v},6954:(e,t,r)=>{var n=r(1629),a=r(7857),i=r(6686),s=r(6996),o=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,u=c.hasOwnProperty,h=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||a(e))&&(n(e)?h:o).test(s(e))}},6989:(e,t,r)=>{var n=r(6399),a=r(2761);e.exports=function e(t,r,i,s,o){return t===r||(null==t||null==r||!a(t)&&!a(r)?t!==t&&r!==r:n(t,r,i,s,e,o))}},6996:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(r){}try{return e+""}catch(r){}}return""}},7002:(e,t,r)=>{var n=r(5295),a=r(4746),i=r(9096),s=r(4052),o=r(929);e.exports=function(e,t,r){var l=s(e)?n:a;return r&&o(e,t,r)&&(t=void 0),l(e,i(t,3))}},7105:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},7116:(e,t,r)=>{var n=r(9812),a=r(2777),i=r(4052),s=n?n.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||a(e)||!!(s&&e&&e[s])}},7159:(e,t,r)=>{var n=r(2622);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},7160:(e,t,r)=>{var n=r(7563),a=r(9935),i=r(4190),s=r(1946),o=r(1714);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=a,l.prototype.get=i,l.prototype.has=s,l.prototype.set=o,e.exports=l},7234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<i(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,s=a>>>1;n<s;){var o=2*(n+1)-1,l=e[o],c=o+1,d=e[c];if(0>i(l,r))c<a&&0>i(d,l)?(e[n]=d,e[c]=r,n=c):(e[n]=l,e[o]=r,n=o);else{if(!(c<a&&0>i(d,r)))break e;e[n]=d,e[c]=r,n=c}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,m=!1,f=!1,g=!1,x="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=n(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,r(c,t)}t=n(d)}}function _(e){if(g=!1,v(e),!f)if(null!==n(c))f=!0,T(k);else{var t=n(d);null!==t&&D(_,t.startTime-e)}}function k(e,r){f=!1,g&&(g=!1,b(S),S=-1),m=!0;var i=p;try{for(v(r),h=n(c);null!==h&&(!(h.expirationTime>r)||e&&!E());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var o=s(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof o?h.callback=o:h===n(c)&&a(c),v(r)}else a(c);h=n(c)}if(null!==h)var l=!0;else{var u=n(d);null!==u&&D(_,u.startTime-r),l=!1}return l}finally{h=null,p=i,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,w=!1,N=null,S=-1,O=5,C=-1;function E(){return!(t.unstable_now()-C<O)}function P(){if(null!==N){var e=t.unstable_now();C=e;var r=!0;try{r=N(!0,e)}finally{r?j():(w=!1,N=null)}}else w=!1}if("function"===typeof y)j=function(){y(P)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,M=A.port2;A.port1.onmessage=P,j=function(){M.postMessage(null)}}else j=function(){x(P,0)};function T(e){N=e,w||(w=!0,j())}function D(e,r){S=x(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,T(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,a,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>s?(e.sortIndex=i,r(d,e),null===n(c)&&e===n(d)&&(g?(b(S),S=-1):g=!0,D(_,i-s))):(e.sortIndex=o,r(c,e),f||m||(f=!0,T(k))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},7251:(e,t,r)=>{var n=r(8724),a=r(7160),i=r(5204);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||a),string:new n}}},7283:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,s){if("function"!==typeof n)throw new TypeError("The listener must be a function");var o=new a(n,i||e,s),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,a=[];if(0===this._eventsCount)return a;for(n in e=this._events)t.call(e,n)&&a.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,i=n.length,s=new Array(i);a<i;a++)s[a]=n[a].fn;return s},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,a,i,s){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,a),!0;case 5:return d.fn.call(d.context,t,n,a,i),!0;case 6:return d.fn.call(d.context,t,n,a,i,s),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var h,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,n);break;case 4:d[c].fn.call(d[c].context,t,n,a);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,a){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||a&&!o.once||n&&o.context!==n||s(this,i);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||a&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[i]=1===c.length?c[0]:c:s(this,i)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},7303:(e,t,r)=>{var n=r(801),a=1/0;e.exports=function(e){return e?(e=n(e))===a||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},7424:(e,t,r)=>{var n=r(755),a=r(2536),i=r(5647),s=r(929),o=i(function(e,t){if(null==e)return[];var r=t.length;return r>1&&s(e,t[0],t[1])?t=[]:r>2&&s(t[0],t[1],t[2])&&(t=[t[0]]),a(e,n(t,1),[])});e.exports=o},7498:e=>{e.exports=function(e,t){return e>t}},7529:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,a=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[a++]=s)}return i}},7563:e=>{e.exports=function(){this.__data__=[],this.size=0}},7574:e=>{e.exports=function(e){return function(t){return e(t)}}},7615:(e,t,r)=>{var n=r(5575);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},7676:(e,t,r)=>{var n=r(8189),a=r(6311),i=r(9115),s=r(1069);e.exports=function(e){return function(t){t=s(t);var r=a(t)?i(t):void 0,o=r?r[0]:t.charAt(0),l=r?n(r,1).join(""):t.slice(1);return o[e]()+l}}},7685:(e,t,r)=>{var n=r(7937)(r(6552),"DataView");e.exports=n},7760:e=>{e.exports=function(e){return this.__data__.get(e)}},7828:e=>{e.exports=function(){return[]}},7857:(e,t,r)=>{var n=r(3440),a=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!a&&a in e}},7894:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},7937:(e,t,r)=>{var n=r(6954),a=r(4657);e.exports=function(e,t){var r=a(e,t);return n(r)?r:void 0}},7950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(2730)},8114:e=>{e.exports=function(e,t){return e.has(t)}},8182:(e,t,r)=>{var n=r(2070),a=r(5713),i=r(2074),s=n&&1/i(new n([,-0]))[1]==1/0?function(e){return new n(e)}:a;e.exports=s},8189:(e,t,r)=>{var n=r(3871);e.exports=function(e,t,r){var a=e.length;return r=void 0===r?a:r,!t&&r>=a?e:n(e,t,r)}},8210:function(e,t,r){var n;!function(){"use strict";var a,i=1e9,s={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o=!0,l="[DecimalError] ",c=l+"Invalid argument: ",d=l+"Exponent out of range: ",u=Math.floor,h=Math.pow,p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,m=1e7,f=9007199254740991,g=u(1286742750677284.5),x={};function b(e,t){var r,n,a,i,s,l,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),o?C(t,h):t;if(c=e.d,d=t.d,s=e.e,a=t.e,c=c.slice(),i=s-a){for(i<0?(n=c,i=-i,l=d.length):(n=d,a=s,l=c.length),i>(l=(s=Math.ceil(h/7))>l?s+1:l+1)&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((l=c.length)-(i=d.length)<0&&(i=l,n=d,d=c,c=n),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/m|0,c[i]%=m;for(r&&(c.unshift(r),++a),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=a,o?C(t,h):t}function y(e,t,r){if(e!==~~e||e<t||e>r)throw Error(c+e)}function v(e){var t,r,n,a=e.length-1,i="",s=e[0];if(a>0){for(i+=s,t=1;t<a;t++)(r=7-(n=e[t]+"").length)&&(i+=N(r)),i+=n;(r=7-(n=(s=e[t])+"").length)&&(i+=N(r))}else if(0===s)return"0";for(;s%10===0;)s/=10;return i+s}x.absoluteValue=x.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},x.comparedTo=x.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(t=0,r=(n=i.d.length)<(a=e.d.length)?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1},x.decimalPlaces=x.dp=function(){var e=this,t=e.d.length-1,r=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},x.dividedBy=x.div=function(e){return _(this,new this.constructor(e))},x.dividedToIntegerBy=x.idiv=function(e){var t=this.constructor;return C(_(this,new t(e),0,1),t.precision)},x.equals=x.eq=function(e){return!this.cmp(e)},x.exponent=function(){return j(this)},x.greaterThan=x.gt=function(e){return this.cmp(e)>0},x.greaterThanOrEqualTo=x.gte=function(e){return this.cmp(e)>=0},x.isInteger=x.isint=function(){return this.e>this.d.length-2},x.isNegative=x.isneg=function(){return this.s<0},x.isPositive=x.ispos=function(){return this.s>0},x.isZero=function(){return 0===this.s},x.lessThan=x.lt=function(e){return this.cmp(e)<0},x.lessThanOrEqualTo=x.lte=function(e){return this.cmp(e)<1},x.logarithm=x.log=function(e){var t,r=this,n=r.constructor,i=n.precision,s=i+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(a))throw Error(l+"NaN");if(r.s<1)throw Error(l+(r.s?"NaN":"-Infinity"));return r.eq(a)?new n(0):(o=!1,t=_(S(r,s),S(e,s),s),o=!0,C(t,i))},x.minus=x.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?E(t,e):b(t,(e.s=-e.s,e))},x.modulo=x.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(!(e=new n(e)).s)throw Error(l+"NaN");return r.s?(o=!1,t=_(r,e,0,1).times(e),o=!0,r.minus(t)):C(new n(r),a)},x.naturalExponential=x.exp=function(){return k(this)},x.naturalLogarithm=x.ln=function(){return S(this)},x.negated=x.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},x.plus=x.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?b(t,e):E(t,(e.s=-e.s,e))},x.precision=x.sd=function(e){var t,r,n,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=j(a)+1,r=7*(n=a.d.length-1)+1,n=a.d[n]){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},x.squareRoot=x.sqrt=function(){var e,t,r,n,a,i,s,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(l+"NaN")}for(e=j(c),o=!1,0==(a=Math.sqrt(+c))||a==1/0?(((t=v(c.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=u((e+1)/2)-(e<0||e%2),n=new d(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new d(a.toString()),a=s=(r=d.precision)+3;;)if(n=(i=n).plus(_(c,i,s+2)).times(.5),v(i.d).slice(0,s)===(t=v(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),a==s&&"4999"==t){if(C(i,r+1,0),i.times(i).eq(c)){n=i;break}}else if("9999"!=t)break;s+=4}return o=!0,C(n,r)},x.times=x.mul=function(e){var t,r,n,a,i,s,l,c,d,u=this,h=u.constructor,p=u.d,f=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,r=u.e+e.e,(c=p.length)<(d=f.length)&&(i=p,p=f,f=i,s=c,c=d,d=s),i=[],n=s=c+d;n--;)i.push(0);for(n=d;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+f[n]*p[a-n-1]+t,i[a--]=l%m|0,t=l/m|0;i[a]=(i[a]+t)%m|0}for(;!i[--s];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,o?C(e,h.precision):e},x.toDecimalPlaces=x.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(y(e,0,i),void 0===t?t=n.rounding:y(t,0,8),C(r,e+j(r)+1,t))},x.toExponential=function(e,t){var r,n=this,a=n.constructor;return void 0===e?r=P(n,!0):(y(e,0,i),void 0===t?t=a.rounding:y(t,0,8),r=P(n=C(new a(n),e+1,t),!0,e+1)),r},x.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return void 0===e?P(a):(y(e,0,i),void 0===t?t=s.rounding:y(t,0,8),r=P((n=C(new s(a),e+j(a)+1,t)).abs(),!1,e+j(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)},x.toInteger=x.toint=function(){var e=this,t=e.constructor;return C(new t(e),j(e)+1,t.rounding)},x.toNumber=function(){return+this},x.toPower=x.pow=function(e){var t,r,n,i,s,c,d=this,h=d.constructor,p=+(e=new h(e));if(!e.s)return new h(a);if(!(d=new h(d)).s){if(e.s<1)throw Error(l+"Infinity");return d}if(d.eq(a))return d;if(n=h.precision,e.eq(a))return C(d,n);if(c=(t=e.e)>=(r=e.d.length-1),s=d.s,c){if((r=p<0?-p:p)<=f){for(i=new h(a),t=Math.ceil(n/7+4),o=!1;r%2&&A((i=i.times(d)).d,t),0!==(r=u(r/2));)A((d=d.times(d)).d,t);return o=!0,e.s<0?new h(a).div(i):C(i,n)}}else if(s<0)throw Error(l+"NaN");return s=s<0&&1&e.d[Math.max(t,r)]?-1:1,d.s=1,o=!1,i=e.times(S(d,n+12)),o=!0,(i=k(i)).s=s,i},x.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return void 0===e?n=P(a,(r=j(a))<=s.toExpNeg||r>=s.toExpPos):(y(e,1,i),void 0===t?t=s.rounding:y(t,0,8),n=P(a=C(new s(a),e,t),e<=(r=j(a))||r<=s.toExpNeg,e)),n},x.toSignificantDigits=x.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(y(e,1,i),void 0===t?t=r.rounding:y(t,0,8)),C(new r(this),e,t)},x.toString=x.valueOf=x.val=x.toJSON=function(){var e=this,t=j(e),r=e.constructor;return P(e,t<=r.toExpNeg||t>=r.toExpPos)};var _=function(){function e(e,t){var r,n=0,a=e.length;for(e=e.slice();a--;)r=e[a]*t+n,e[a]=r%m|0,n=r/m|0;return n&&e.unshift(n),e}function t(e,t,r,n){var a,i;if(r!=n)i=r>n?1:-1;else for(a=i=0;a<r;a++)if(e[a]!=t[a]){i=e[a]>t[a]?1:-1;break}return i}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*m+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,a,i,s){var o,c,d,u,h,p,f,g,x,b,y,v,_,k,w,N,S,O,E=n.constructor,P=n.s==a.s?1:-1,A=n.d,M=a.d;if(!n.s)return new E(n);if(!a.s)throw Error(l+"Division by zero");for(c=n.e-a.e,S=M.length,w=A.length,g=(f=new E(P)).d=[],d=0;M[d]==(A[d]||0);)++d;if(M[d]>(A[d]||0)&&--c,(v=null==i?i=E.precision:s?i+(j(n)-j(a))+1:i)<0)return new E(0);if(v=v/7+2|0,d=0,1==S)for(u=0,M=M[0],v++;(d<w||u)&&v--;d++)_=u*m+(A[d]||0),g[d]=_/M|0,u=_%M|0;else{for((u=m/(M[0]+1)|0)>1&&(M=e(M,u),A=e(A,u),S=M.length,w=A.length),k=S,b=(x=A.slice(0,S)).length;b<S;)x[b++]=0;(O=M.slice()).unshift(0),N=M[0],M[1]>=m/2&&++N;do{u=0,(o=t(M,x,S,b))<0?(y=x[0],S!=b&&(y=y*m+(x[1]||0)),(u=y/N|0)>1?(u>=m&&(u=m-1),1==(o=t(h=e(M,u),x,p=h.length,b=x.length))&&(u--,r(h,S<p?O:M,p))):(0==u&&(o=u=1),h=M.slice()),(p=h.length)<b&&h.unshift(0),r(x,h,b),-1==o&&(o=t(M,x,S,b=x.length))<1&&(u++,r(x,S<b?O:M,b)),b=x.length):0===o&&(u++,x=[0]),g[d++]=u,o&&x[0]?x[b++]=A[k]||0:(x=[A[k]],b=1)}while((k++<w||void 0!==x[0])&&v--)}return g[0]||g.shift(),f.e=c,C(f,s?i+j(f)+1:i)}}();function k(e,t){var r,n,i,s,l,c=0,u=0,p=e.constructor,m=p.precision;if(j(e)>16)throw Error(d+j(e));if(!e.s)return new p(a);for(null==t?(o=!1,l=m):l=t,s=new p(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(l+=Math.log(h(2,u))/Math.LN10*2+5|0,r=n=i=new p(a),p.precision=l;;){if(n=C(n.times(e),l),r=r.times(++c),v((s=i.plus(_(n,r,l))).d).slice(0,l)===v(i.d).slice(0,l)){for(;u--;)i=C(i.times(i),l);return p.precision=m,null==t?(o=!0,C(i,m)):i}i=s}}function j(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function w(e,t,r){if(t>e.LN10.sd())throw o=!0,r&&(e.precision=r),Error(l+"LN10 precision limit exceeded");return C(new e(e.LN10),t)}function N(e){for(var t="";e--;)t+="0";return t}function S(e,t){var r,n,i,s,c,d,u,h,p,m=1,f=e,g=f.d,x=f.constructor,b=x.precision;if(f.s<1)throw Error(l+(f.s?"NaN":"-Infinity"));if(f.eq(a))return new x(0);if(null==t?(o=!1,h=b):h=t,f.eq(10))return null==t&&(o=!0),w(x,h);if(h+=10,x.precision=h,n=(r=v(g)).charAt(0),s=j(f),!(Math.abs(s)<15e14))return u=w(x,h+2,b).times(s+""),f=S(new x(n+"."+r.slice(1)),h-10).plus(u),x.precision=b,null==t?(o=!0,C(f,b)):f;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=v((f=f.times(e)).d)).charAt(0),m++;for(s=j(f),n>1?(f=new x("0."+r),s++):f=new x(n+"."+r.slice(1)),d=c=f=_(f.minus(a),f.plus(a),h),p=C(f.times(f),h),i=3;;){if(c=C(c.times(p),h),v((u=d.plus(_(c,new x(i),h))).d).slice(0,h)===v(d.d).slice(0,h))return d=d.times(2),0!==s&&(d=d.plus(w(x,h+2,b).times(s+""))),d=_(d,new x(m),h),x.precision=b,null==t?(o=!0,C(d,b)):d;d=u,i+=2}}function O(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(n,a)){if(a-=n,r=r-n-1,e.e=u(r/7),e.d=[],n=(r+1)%7,r<0&&(n+=7),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=7;n<a;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),o&&(e.e>g||e.e<-g))throw Error(d+r)}else e.s=0,e.e=0,e.d=[0];return e}function C(e,t,r){var n,a,i,s,l,c,p,f,x=e.d;for(s=1,i=x[0];i>=10;i/=10)s++;if((n=t-s)<0)n+=7,a=t,p=x[f=0];else{if((f=Math.ceil((n+1)/7))>=(i=x.length))return e;for(p=i=x[f],s=1;i>=10;i/=10)s++;a=(n%=7)-7+s}if(void 0!==r&&(l=p/(i=h(10,s-a-1))%10|0,c=t<0||void 0!==x[f+1]||p%i,c=r<4?(l||c)&&(0==r||r==(e.s<0?3:2)):l>5||5==l&&(4==r||c||6==r&&(n>0?a>0?p/h(10,s-a):0:x[f-1])%10&1||r==(e.s<0?8:7))),t<1||!x[0])return c?(i=j(e),x.length=1,t=t-i-1,x[0]=h(10,(7-t%7)%7),e.e=u(-t/7)||0):(x.length=1,x[0]=e.e=e.s=0),e;if(0==n?(x.length=f,i=1,f--):(x.length=f+1,i=h(10,7-n),x[f]=a>0?(p/h(10,s-a)%h(10,a)|0)*i:0),c)for(;;){if(0==f){(x[0]+=i)==m&&(x[0]=1,++e.e);break}if(x[f]+=i,x[f]!=m)break;x[f--]=0,i=1}for(n=x.length;0===x[--n];)x.pop();if(o&&(e.e>g||e.e<-g))throw Error(d+j(e));return e}function E(e,t){var r,n,a,i,s,l,c,d,u,h,p=e.constructor,f=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),o?C(t,f):t;if(c=e.d,h=t.d,n=t.e,d=e.e,c=c.slice(),s=d-n){for((u=s<0)?(r=c,s=-s,l=h.length):(r=h,n=d,l=c.length),s>(a=Math.max(Math.ceil(f/7),l)+2)&&(s=a,r.length=1),r.reverse(),a=s;a--;)r.push(0);r.reverse()}else{for((u=(a=c.length)<(l=h.length))&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){u=c[a]<h[a];break}s=0}for(u&&(r=c,c=h,h=r,t.s=-t.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>s;){if(c[--a]<h[a]){for(i=a;i&&0===c[--i];)c[i]=m-1;--c[i],c[a]+=m}c[a]-=h[a]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(t.d=c,t.e=n,o?C(t,f):t):new p(0)}function P(e,t,r){var n,a=j(e),i=v(e.d),s=i.length;return t?(r&&(n=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+N(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+N(-a-1)+i,r&&(n=r-s)>0&&(i+=N(n))):a>=s?(i+=N(a+1-s),r&&(n=r-a-1)>0&&(i=i+"."+N(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-s)>0&&(a+1===s&&(i+="."),i+=N(n))),e.s<0?"-"+i:i}function A(e,t){if(e.length>t)return e.length=t,!0}function M(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,r,n,a=["precision",1,i,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(n=e[r=a[t]])){if(!(u(n)===n&&n>=a[t+1]&&n<=a[t+2]))throw Error(c+r+": "+n);this[r]=n}if(void 0!==(n=e[r="LN10"])){if(n!=Math.LN10)throw Error(c+r+": "+n);this[r]=new this(n)}return this}s=function e(t){var r,n,a;function i(e){var t=this;if(!(t instanceof i))return new i(e);if(t.constructor=i,e instanceof i)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):O(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!p.test(e))throw Error(c+e);O(t,e)}if(i.prototype=x,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=e,i.config=i.set=M,void 0===t&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<a.length;)t.hasOwnProperty(n=a[r++])||(t[n]=this[n]);return i.config(t),i}(s),s.default=s.Decimal=s,a=new s(1),void 0===(n=function(){return s}.call(t,r,t,e))||(e.exports=n)}()},8259:(e,t,r)=>{var n=r(5797);e.exports=function(e){var t=n(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}},8325:(e,t,r)=>{var n=r(2541),a=r(5654),i=r(3279),s=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:i;e.exports=s},8468:(e,t,r)=>{var n=r(5816),a=r(644),i=r(4020);e.exports=function(e,t,r){return t===t?i(e,t,r):n(e,a,r)}},8541:(e,t,r)=>{var n=r(9812),a=r(149),i=r(4052),s=r(9841),o=n?n.prototype:void 0,l=o?o.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return a(t,e)+"";if(s(t))return l?l.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},8673:(e,t,r)=>{var n=r(3204),a=r(3713),i=r(6571);e.exports=function(e){return i(e)?n(e):a(e)}},8724:(e,t,r)=>{var n=r(7615),a=r(5051),i=r(2154),s=r(8734),o=r(2662);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=a,l.prototype.get=i,l.prototype.has=s,l.prototype.set=o,e.exports=l},8734:(e,t,r)=>{var n=r(5575),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:a.call(t,e)}},8853:(e,t,r)=>{"use strict";e.exports=r(7234)},8883:(e,t,r)=>{var n=r(5652),a=r(6571);e.exports=function(e,t){var r=-1,i=a(e)?Array(e.length):[];return n(e,function(e,n,a){i[++r]=t(e,n,a)}),i}},8895:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}},8902:(e,t,r)=>{var n=r(4816),a=r(6179),i=r(6704);function s(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}s.prototype.add=s.prototype.push=a,s.prototype.has=i,e.exports=s},8990:(e,t,r)=>{var n=r(9995)(r(2520));e.exports=n},9057:(e,t,r)=>{var n=r(5324),a=r(2777),i=r(4052),s=r(9194),o=r(6173),l=r(914);e.exports=function(e,t,r){for(var c=-1,d=(t=n(t,e)).length,u=!1;++c<d;){var h=l(t[c]);if(!(u=null!=e&&r(e,h)))break;e=e[h]}return u||++c!=d?u:!!(d=null==e?0:e.length)&&o(d)&&s(h,d)&&(i(e)||a(e))}},9062:(e,t,r)=>{"use strict";e.exports=r(6378)},9096:(e,t,r)=>{var n=r(9256),a=r(5029),i=r(3279),s=r(4052),o=r(3932);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?s(e)?a(e[0],e[1]):n(e):o(e)}},9115:(e,t,r)=>{var n=r(5967),a=r(6311),i=r(715);e.exports=function(e){return a(e)?i(e):n(e)}},9140:(e,t,r)=>{var n=r(7303);e.exports=function(e){var t=n(e),r=t%1;return t===t?r?t-r:t:0}},9160:(e,t,r)=>{var n=r(6913),a=r(2761);e.exports=function(e){return"number"==typeof e||a(e)&&"[object Number]"==n(e)}},9194:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},9256:(e,t,r)=>{var n=r(6532),a=r(3781),i=r(1310);e.exports=function(e){var t=a(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},9394:(e,t,r)=>{var n=r(2622);e.exports=function(e){return n(this,e).has(e)}},9395:(e,t,r)=>{var n=r(4262),a=r(9621),i=r(8673);e.exports=function(e){return n(e,i,a)}},9417:(e,t,r)=>{var n=r(6686);e.exports=function(e){return e===e&&!n(e)}},9621:(e,t,r)=>{var n=r(7529),a=r(7828),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,o=s?function(e){return null==e?[]:(e=Object(e),n(s(e),function(t){return i.call(e,t)}))}:a;e.exports=o},9676:e=>{var t=Math.ceil,r=Math.max;e.exports=function(e,n,a,i){for(var s=-1,o=r(t((n-e)/(a||1)),0),l=Array(o);o--;)l[i?o:++s]=e,e+=a;return l}},9686:e=>{e.exports=function(e){return null==e}},9742:(e,t,r)=>{var n=r(9841);e.exports=function(e,t,r){for(var a=-1,i=e.length;++a<i;){var s=e[a],o=t(s);if(null!=o&&(void 0===l?o===o&&!n(o):r(o,l)))var l=o,c=s}return c}},9812:(e,t,r)=>{var n=r(6552).Symbol;e.exports=n},9841:(e,t,r)=>{var n=r(6913),a=r(2761);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==n(e)}},9853:(e,t,r)=>{var n=r(6989);e.exports=function(e,t){return n(e,t)}},9889:(e,t,r)=>{var n=r(3950),a=r(6686);e.exports=function(e,t,r){var i=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return a(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),n(e,t,{leading:i,maxWait:t,trailing:s})}},9935:(e,t,r)=>{var n=r(1340),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():a.call(t,r,1),--this.size,!0)}},9987:(e,t,r)=>{var n=r(9812),a=r(2929),i=r(3211),s=r(3668),o=r(4160),l=r(2074),c=n?n.prototype:void 0,d=c?c.valueOf:void 0;e.exports=function(e,t,r,n,c,u,h){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=o;case"[object Set]":var m=1&n;if(p||(p=l),e.size!=t.size&&!m)return!1;var f=h.get(e);if(f)return f==t;n|=2,h.set(e,t);var g=s(p(e),p(t),n,c,u,h);return h.delete(e),g;case"[object Symbol]":if(d)return d.call(e)==d.call(t)}return!1}},9995:(e,t,r)=>{var n=r(9096),a=r(6571),i=r(8673);e.exports=function(e){return function(t,r,s){var o=Object(t);if(!a(t)){var l=n(r,3);t=i(t),r=function(e){return l(o[e],e,o)}}var c=e(t,r,s);return c>-1?o[l?t[c]:c]:void 0}}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"===typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"===typeof n.then)return n}var i=Object.create(null);r.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>s[e]=()=>n[e]);return s.default=()=>n,r.d(i,s),i}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((t,n)=>(r.f[n](e,t),t),[])),r.u=e=>"static/js/"+e+".d2a7903d.chunk.js",r.miniCssF=e=>{},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="ads-dashboard-client:";r.l=(n,a,i,s)=>{if(e[n])e[n].push(a);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+i){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",t+i),o.src=n),e[n]=[a];var h=(t,r)=>{o.onerror=o.onload=null,clearTimeout(p);var a=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach(e=>e(r)),t)return t(r)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.p="/",(()=>{var e={792:0};r.f.j=(t,n)=>{var a=r.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var i=new Promise((r,n)=>a=e[t]=[r,n]);n.push(a[2]=i);var s=r.p+r.u(t),o=new Error;r.l(s,n=>{if(r.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",o.name="ChunkLoadError",o.type=i,o.request=s,a[1](o)}},"chunk-"+t,t)}};var t=(t,n)=>{var a,i,s=n[0],o=n[1],l=n[2],c=0;if(s.some(t=>0!==e[t])){for(a in o)r.o(o,a)&&(r.m[a]=o[a]);if(l)l(r)}for(t&&t(n);c<s.length;c++)i=s[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkads_dashboard_client=self.webpackChunkads_dashboard_client||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e={};r.r(e),r.d(e,{hasBrowserEnv:()=>Ir,hasStandardBrowserEnv:()=>Fr,hasStandardBrowserWebWorkerEnv:()=>zr,navigator:()=>Lr,origin:()=>Ur});var t={};r.r(t),r.d(t,{scaleBand:()=>uu,scaleDiverging:()=>Hg,scaleDivergingLog:()=>Wg,scaleDivergingPow:()=>qg,scaleDivergingSqrt:()=>Gg,scaleDivergingSymlog:()=>$g,scaleIdentity:()=>Ip,scaleImplicit:()=>cu,scaleLinear:()=>Rp,scaleLog:()=>$p,scaleOrdinal:()=>du,scalePoint:()=>pu,scalePow:()=>em,scaleQuantile:()=>hm,scaleQuantize:()=>pm,scaleRadial:()=>nm,scaleSequential:()=>Ig,scaleSequentialLog:()=>Lg,scaleSequentialPow:()=>zg,scaleSequentialQuantile:()=>Bg,scaleSequentialSqrt:()=>Ug,scaleSequentialSymlog:()=>Fg,scaleSqrt:()=>tm,scaleSymlog:()=>Yp,scaleThreshold:()=>mm,scaleTime:()=>Mg,scaleUtc:()=>Tg,tickFormat:()=>Tp});var n,a=r(5043),i=r.t(a,2),s=r(4391),o=r(7950),l=r.t(o,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));const d="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,r,n){return void 0===r&&(r=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function g(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function x(e,t,r,a){void 0===a&&(a={});let{window:i=document.defaultView,v5Compat:s=!1}=a,o=i.history,l=n.Pop,h=null,g=x();function x(){return(o.state||{idx:null}).idx}function b(){l=n.Pop;let e=x(),t=null==e?null:e-g;g=e,h&&h({action:l,location:v.location,delta:t})}function y(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,r="string"===typeof e?e:f(e);return r=r.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==g&&(g=0,o.replaceState(c({},o.state,{idx:g}),""));let v={get action(){return l},get location(){return e(i,o)},listen(e){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(d,b),h=e,()=>{i.removeEventListener(d,b),h=null}},createHref:e=>t(i,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=n.Push;let a=m(v.location,e,t);r&&r(a,e),g=x()+1;let c=p(a,g),d=v.createHref(a);try{o.pushState(c,"",d)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;i.location.assign(d)}s&&h&&h({action:l,location:v.location,delta:1})},replace:function(e,t){l=n.Replace;let a=m(v.location,e,t);r&&r(a,e),g=x();let i=p(a,g),c=v.createHref(a);o.replaceState(i,"",c),s&&h&&h({action:l,location:v.location,delta:0})},go:e=>o.go(e)};return v}var b;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(b||(b={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,r){return void 0===r&&(r="/"),v(e,t,r,!1)}function v(e,t,r,n){let a=D(("string"===typeof t?g(t):t).pathname||"/",r);if(null==a)return null;let i=_(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o){let e=T(a);s=A(i[o],e,n)}return s}function _(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let a=(e,a,i)=>{let s={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};s.relativePath.startsWith("/")&&(u(s.relativePath.startsWith(n),'Absolute route path "'+s.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(n.length));let o=z([n,s.relativePath]),l=r.concat(s);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),_(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:P(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of k(e.path))a(e,t,n);else a(e,t)}),t}function k(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(0===n.length)return a?[i,""]:[i];let s=k(n.join("/")),o=[];return o.push(...s.map(e=>""===e?i:[i,e].join("/"))),a&&o.push(...s),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const j=/^:[\w-]+$/,w=3,N=2,S=1,O=10,C=-2,E=e=>"*"===e;function P(e,t){let r=e.split("/"),n=r.length;return r.some(E)&&(n+=C),t&&(n+=N),r.filter(e=>!E(e)).reduce((e,t)=>e+(j.test(t)?w:""===t?S:O),n)}function A(e,t,r){void 0===r&&(r=!1);let{routesMeta:n}=e,a={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",d=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&r&&!n[n.length-1].route.index&&(d=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),s.push({params:a,pathname:z([i,d.pathname]),pathnameBase:U(z([i,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(i=z([i,d.pathnameBase]))}return s}function M(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let i=new RegExp(a,t?void 0:"i");return[i,n]}(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),o=a.slice(1),l=n.reduce((e,t,r)=>{let{paramName:n,isOptional:a}=t;if("*"===n){let e=o[r]||"";s=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[r];return e[n]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:i,pathnameBase:s,pattern:e}}function T(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function R(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function I(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function L(e,t){let r=I(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function F(e,t,r,n){let a;void 0===n&&(n=!1),"string"===typeof e?a=g(e):(a=c({},e),u(!a.pathname||!a.pathname.includes("?"),R("?","pathname","search",a)),u(!a.pathname||!a.pathname.includes("#"),R("#","pathname","hash",a)),u(!a.search||!a.search.includes("#"),R("#","search","hash",a)));let i,s=""===e||""===a.pathname,o=s?"/":a.pathname;if(null==o)i=r;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:a=""}="string"===typeof e?g(e):e,i=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:i,search:B(n),hash:V(a)}}(a,i),d=o&&"/"!==o&&o.endsWith("/"),h=(s||"."===o)&&r.endsWith("/");return l.pathname.endsWith("/")||!d&&!h||(l.pathname+="/"),l}const z=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function H(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],$=(new Set(W),["get",...W]);new Set($),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q.apply(this,arguments)}const G=a.createContext(null);const K=a.createContext(null);const Y=a.createContext(null);const X=a.createContext(null);const J=a.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=a.createContext(null);function Z(){return null!=a.useContext(X)}function ee(){return Z()||u(!1),a.useContext(X).location}function te(e){a.useContext(Y).static||a.useLayoutEffect(e)}function re(){let{isDataRoute:e}=a.useContext(J);return e?function(){let{router:e}=he(de.UseNavigateStable),t=me(ue.UseNavigateStable),r=a.useRef(!1);te(()=>{r.current=!0});let n=a.useCallback(function(n,a){void 0===a&&(a={}),r.current&&("number"===typeof n?e.navigate(n):e.navigate(n,q({fromRouteId:t},a)))},[e,t]);return n}():function(){Z()||u(!1);let e=a.useContext(G),{basename:t,future:r,navigator:n}=a.useContext(Y),{matches:i}=a.useContext(J),{pathname:s}=ee(),o=JSON.stringify(L(i,r.v7_relativeSplatPath)),l=a.useRef(!1);te(()=>{l.current=!0});let c=a.useCallback(function(r,a){if(void 0===a&&(a={}),!l.current)return;if("number"===typeof r)return void n.go(r);let i=F(r,JSON.parse(o),s,"path"===a.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:z([t,i.pathname])),(a.replace?n.replace:n.push)(i,a.state,a)},[t,n,o,s,e]);return c}()}function ne(e,t){let{relative:r}=void 0===t?{}:t,{future:n}=a.useContext(Y),{matches:i}=a.useContext(J),{pathname:s}=ee(),o=JSON.stringify(L(i,n.v7_relativeSplatPath));return a.useMemo(()=>F(e,JSON.parse(o),s,"path"===r),[e,o,s,r])}function ae(e,t,r,i){Z()||u(!1);let{navigator:s}=a.useContext(Y),{matches:o}=a.useContext(J),l=o[o.length-1],c=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,p=ee();if(t){var m;let e="string"===typeof t?g(t):t;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||u(!1),h=e}else h=p;let f=h.pathname||"/",x=f;if("/"!==d){let e=d.replace(/^\//,"").split("/");x="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=y(e,{pathname:x});let v=ce(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:z([d,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:z([d,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,r,i);return t&&v?a.createElement(X.Provider,{value:{location:q({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:n.Pop}},v):v}function ie(){let e=function(){var e;let t=a.useContext(Q),r=pe(ue.UseRouteError),n=me(ue.UseRouteError);if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[n]}(),t=H(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n};return a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),r?a.createElement("pre",{style:i},r):null,null)}const se=a.createElement(ie,null);class oe extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?a.createElement(J.Provider,{value:this.props.routeContext},a.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:r,children:n}=e,i=a.useContext(G);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),a.createElement(J.Provider,{value:t},n)}function ce(e,t,r,n){var i;if(void 0===t&&(t=[]),void 0===r&&(r=null),void 0===n&&(n=null),null==e){var s;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(s=n)&&s.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let o=e,l=null==(i=r)?void 0:i.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||u(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let a=0;a<o.length;a++){let e=o[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=a),e.route.id){let{loaderData:t,errors:n}=r,a=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||a){c=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,n,i)=>{let s,u=!1,h=null,p=null;var m;r&&(s=l&&n.route.id?l[n.route.id]:void 0,h=n.route.errorElement||se,c&&(d<0&&0===i?(m="route-fallback",!1||fe[m]||(fe[m]=!0),u=!0,p=null):d===i&&(u=!0,p=n.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,i+1)),g=()=>{let t;return t=s?h:u?p:n.route.Component?a.createElement(n.route.Component,null):n.route.element?n.route.element:e,a.createElement(le,{match:n,routeContext:{outlet:e,matches:f,isDataRoute:null!=r},children:t})};return r&&(n.route.ErrorBoundary||n.route.errorElement||0===i)?a.createElement(oe,{location:r.location,revalidation:r.revalidation,component:h,error:s,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function he(e){let t=a.useContext(G);return t||u(!1),t}function pe(e){let t=a.useContext(K);return t||u(!1),t}function me(e){let t=function(){let e=a.useContext(J);return e||u(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||u(!1),r.route.id}const fe={};function ge(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function xe(e){u(!1)}function be(e){let{basename:t="/",children:r=null,location:i,navigationType:s=n.Pop,navigator:o,static:l=!1,future:c}=e;Z()&&u(!1);let d=t.replace(/^\/*/,"/"),h=a.useMemo(()=>({basename:d,navigator:o,static:l,future:q({v7_relativeSplatPath:!1},c)}),[d,c,o,l]);"string"===typeof i&&(i=g(i));let{pathname:p="/",search:m="",hash:f="",state:x=null,key:b="default"}=i,y=a.useMemo(()=>{let e=D(p,d);return null==e?null:{location:{pathname:e,search:m,hash:f,state:x,key:b},navigationType:s}},[d,p,m,f,x,b,s]);return null==y?null:a.createElement(Y.Provider,{value:h},a.createElement(X.Provider,{children:r,value:y}))}function ye(e){let{children:t,location:r}=e;return ae(ve(t),r)}new Promise(()=>{});a.Component;function ve(e,t){void 0===t&&(t=[]);let r=[];return a.Children.forEach(e,(e,n)=>{if(!a.isValidElement(e))return;let i=[...t,n];if(e.type===a.Fragment)return void r.push.apply(r,ve(e.props.children,i));e.type!==xe&&u(!1),e.props.index&&e.props.children&&u(!1);let s={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=ve(e.props.children,i)),r.push(s)}),r}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_e.apply(this,arguments)}function ke(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const je=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(CF){}new Map;const we=i.startTransition;l.flushSync,i.useId;function Ne(e){let{basename:t,children:r,future:n,window:i}=e,s=a.useRef();null==s.current&&(s.current=function(e){return void 0===e&&(e={}),x(function(e,t){let{pathname:r,search:n,hash:a}=e.location;return m("",{pathname:r,search:n,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:f(t)},null,e)}({window:i,v5Compat:!0}));let o=s.current,[l,c]=a.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=a.useCallback(e=>{d&&we?we(()=>c(e)):c(e)},[c,d]);return a.useLayoutEffect(()=>o.listen(u),[o,u]),a.useEffect(()=>ge(n),[n]),a.createElement(be,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const Se="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Oe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ce=a.forwardRef(function(e,t){let r,{onClick:n,relative:i,reloadDocument:s,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:p}=e,m=ke(e,je),{basename:g}=a.useContext(Y),x=!1;if("string"===typeof d&&Oe.test(d)&&(r=d,Se))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),r=D(t.pathname,g);t.origin===e.origin&&null!=r?d=r+t.search+t.hash:x=!0}catch(CF){}let b=function(e,t){let{relative:r}=void 0===t?{}:t;Z()||u(!1);let{basename:n,navigator:i}=a.useContext(Y),{hash:s,pathname:o,search:l}=ne(e,{relative:r}),c=o;return"/"!==n&&(c="/"===o?n:z([n,o])),i.createHref({pathname:c,search:l,hash:s})}(d,{relative:i}),y=function(e,t){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:l}=void 0===t?{}:t,c=re(),d=ee(),u=ne(e,{relative:o});return a.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let r=void 0!==n?n:f(d)===f(u);c(e,{replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[d,c,u,n,i,r,e,s,o,l])}(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:i,viewTransition:p});return a.createElement("a",_e({},m,{href:r||b,onClick:x||s?n:function(e){n&&n(e),e.defaultPrevented||y(e)},ref:t,target:c}))});var Ee,Pe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ee||(Ee={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Pe||(Pe={}));function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Me(e){var t=function(e,t){if("object"!=Ae(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ae(t)?t:t+""}function Te(e,t,r){return(t=Me(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?De(Object(r),!0).forEach(function(t){Te(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ie(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Le={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Fe=["color","size","strokeWidth","absoluteStrokeWidth","children"],ze=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ue=(e,t)=>{const r=(0,a.forwardRef)((r,n)=>{let{color:i="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:c}=r,d=Ie(r,Fe);return(0,a.createElement)("svg",Re(Re({ref:n},Le),{},{width:s,height:s,stroke:i,strokeWidth:l?24*Number(o)/Number(s):o,className:"lucide lucide-".concat(ze(e))},d),[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...(Array.isArray(c)?c:[c])||[]])});return r.displayName="".concat(e),r},Be=Ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ve=Ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),He=Ue("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),We=Ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),$e=Ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),qe=Ue("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ge=Ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Ke=Ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Ye=Ue("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Xe=Ue("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Je=Ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Qe=Ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Ze=Ue("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),et=Ue("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),tt=Ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),rt=Ue("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),nt=Ue("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]),at=Ue("AlignJustify",[["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["line",{x1:"3",x2:"21",y1:"18",y2:"18",key:"kwyyxn"}]]),it=[{key:"name",label:"Name",defaultVisible:!0,alwaysVisible:!0},{key:"campaign_name",label:"Campaign",defaultVisible:!0},{key:"adset_name",label:"Ad Set",defaultVisible:!0},{key:"impressions",label:"Impressions",defaultVisible:!0},{key:"clicks",label:"Clicks",defaultVisible:!0},{key:"spend",label:"Spend",defaultVisible:!0},{key:"meta_trials_started",label:"Trials (Meta)",defaultVisible:!0},{key:"mixpanel_trials_started",label:"Trials (Mixpanel)",defaultVisible:!0},{key:"meta_purchases",label:"Purchases (Meta)",defaultVisible:!0},{key:"mixpanel_purchases",label:"Purchases (Mixpanel)",defaultVisible:!0},{key:"trial_accuracy_ratio",label:"Trial Accuracy Ratio",defaultVisible:!0},{key:"mixpanel_trials_ended",label:"Trials Ended (Mixpanel)",defaultVisible:!1},{key:"mixpanel_trials_in_progress",label:"Trials In Progress (Mixpanel)",defaultVisible:!1},{key:"mixpanel_refunds_usd",label:"Actual Refunds (Events)",defaultVisible:!0},{key:"mixpanel_revenue_usd",label:"Actual Revenue (Events)",defaultVisible:!0},{key:"mixpanel_conversions_net_refunds",label:"Net Conversions (Mixpanel)",defaultVisible:!1},{key:"mixpanel_cost_per_trial",label:"Cost per Trial (Mixpanel)",defaultVisible:!0},{key:"mixpanel_cost_per_purchase",label:"Cost per Purchase (Mixpanel)",defaultVisible:!0},{key:"meta_cost_per_trial",label:"Cost per Trial (Meta)",defaultVisible:!1},{key:"meta_cost_per_purchase",label:"Cost per Purchase (Meta)",defaultVisible:!1},{key:"click_to_trial_rate",label:"Click to Trial Rate",defaultVisible:!0},{key:"trial_conversion_rate",label:"Trial Conversion Rate",defaultVisible:!0},{key:"avg_trial_refund_rate",label:"Trial Refund Rate",defaultVisible:!0},{key:"purchase_accuracy_ratio",label:"Purchase Accuracy Ratio",defaultVisible:!1},{key:"purchase_refund_rate",label:"Purchase Refund Rate",defaultVisible:!0},{key:"estimated_revenue_usd",label:"Estimated Revenue (Base)",defaultVisible:!1},{key:"estimated_revenue_adjusted",label:"Estimated Revenue (Adjusted)",defaultVisible:!0},{key:"mixpanel_revenue_net",label:"Net Actual Revenue",defaultVisible:!0},{key:"profit",label:"Profit",defaultVisible:!0},{key:"estimated_roas",label:"ROAS",defaultVisible:!0},{key:"performance_impact_score",label:"Performance Impact Score",defaultVisible:!0},{key:"segment_accuracy_average",label:"Avg. Accuracy",defaultVisible:!0}],st=()=>it.map(e=>e.key),ot=e=>{const t=st(),r=t.filter(t=>!e.includes(t)),n=e.filter(e=>!t.includes(e));return{isValid:0===r.length&&0===n.length,missing:r,extra:n,expected:t.length,actual:e.length}},lt="http://localhost:5001";const ct=new class{constructor(){this.baseUrl="".concat(lt,"/api/dashboard")}async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="".concat(this.baseUrl).concat(e);console.log("\ud83d\udd25\ud83d\udd25\ud83d\udd25 DASHBOARD API - makeRequest called:",r,t);const n=Re({headers:Re({"Content-Type":"application/json"},t.headers)},t);try{console.log("\ud83d\udd25\ud83d\udd25\ud83d\udd25 DASHBOARD API - Fetching:",r,n);const e=await fetch(r,n),t=await e.json();if(console.log("\ud83d\udd25\ud83d\udd25\ud83d\udd25 DASHBOARD API - Response:",t),!e.ok)throw new Error(t.error||"HTTP error! status: ".concat(e.status));return t}catch(a){throw console.error("API request failed for ".concat(e,":"),a),a}}async getConfigurations(){return this.makeRequest("/configurations")}async getDashboardData(e){return this.makeRequest("/data",{method:"POST",body:JSON.stringify(e)})}async triggerCollection(e){try{const t=await fetch("".concat(lt,"/api/dashboard/collection/trigger"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(!t.ok)throw new Error(r.error||"Failed to trigger collection");return r}catch(t){throw console.error("Error triggering collection:",t),t}}async getCollectionStatus(e){try{const t=await fetch("".concat(lt,"/api/dashboard/collection/status/").concat(e)),r=await t.json();if(!t.ok)throw new Error(r.error||"Failed to fetch collection status");return r}catch(t){throw console.error("Error fetching collection status:",t),t}}async getCoverageSummary(e){try{const t=await fetch("".concat(lt,"/api/dashboard/coverage/").concat(e)),r=await t.json();if(!t.ok)throw new Error(r.error||"Failed to fetch coverage summary");return r}catch(t){throw console.error("Error fetching coverage summary:",t),t}}async healthCheck(){return this.makeRequest("/health")}async getChartData(e){return this.makeRequest("/chart-data",{method:"POST",body:JSON.stringify(e)})}async getAnalyticsData(e){console.log("\ud83d\udd0d ANALYTICS API - getAnalyticsData called with params:",e);const t=await this.makeRequest("/analytics/data",{method:"POST",body:JSON.stringify(e)});if(t&&t.data&&t.data.length>0){const e=t.data[0];console.log("\ud83d\udd0d ANALYTICS API - CRITICAL FIELD CHECK:",{total_records:t.data.length,first_record_keys:Object.keys(e),has_estimated_revenue_adjusted:"estimated_revenue_adjusted"in e,estimated_revenue_adjusted_value:e.estimated_revenue_adjusted,estimated_revenue_usd_value:e.estimated_revenue_usd,spend_value:e.spend,campaign_name:e.campaign_name})}else console.log("\ud83d\udd0d ANALYTICS API - No data returned or empty result:",t);return t}async getAnalyticsChartData(e){console.log("\ud83d\udd25\ud83d\udd25\ud83d\udd25 DASHBOARD API - getAnalyticsChartData called with:",e);const t=new URLSearchParams(e).toString();return console.log("\ud83d\udd25\ud83d\udd25\ud83d\udd25 DASHBOARD API - Query params:",t),console.log("\ud83d\udd25\ud83d\udd25\ud83d\udd25 DASHBOARD API - Full URL:","/analytics/chart-data?".concat(t)),this.makeRequest("/analytics/chart-data?".concat(t))}async runPipeline(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{let r,n;t&&t.start_date&&t.end_date?(r=t.start_date,n=t.end_date):t&&t.date_from&&t.date_to?(r=t.date_from,n=t.date_to):(r=new Date(Date.now()-2592e6).toISOString().split("T")[0],n=(new Date).toISOString().split("T")[0]);const a={date_from:r,date_to:n,timeline_end_date:new Date(Date.now()+15552e6).toISOString().split("T")[0],pipeline_version:"3.0.0_refactored",use_conversion_probabilities:!0,optional_filters:[],secondary_filters:[],config:{product_filter:{include_patterns:[".*"],exclude_patterns:[],specific_product_ids:[]},lifecycle:{trial_window_days:7,cancellation_window_days:30,smoothing_enabled:!0},timeline:{include_estimates:!0,include_confidence_intervals:!1}}};e.ad_id?a.primary_user_filter={property_name:"abi_ad_id",property_values:[e.ad_id],property_source:"user"}:e.adset_id?a.primary_user_filter={property_name:"abi_ad_set_id",property_values:[e.adset_id],property_source:"user"}:e.campaign_id?a.primary_user_filter={property_name:"abi_campaign_id",property_values:[e.campaign_id],property_source:"user"}:a.primary_user_filter={property_name:"",property_values:[],property_source:"user"},console.log("\ud83d\udd0d Pipeline Debug: Sending V3 refactored parameters:",a);const i=await fetch("".concat(lt,"/api/v3/cohort/analyze-refactored"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),s=await i.json();if(!i.ok)throw new Error(s.error||"Failed to run pipeline");return s}catch(r){throw console.error("Error running pipeline:",r),r}}};var dt=r(579);const ut=e=>{let{entityType:t,entityId:r,currentROAS:n,conversionCount:i=0,breakdown:s="all",startDate:o,endDate:l,isBreakdownEntity:c=!1}=e;const[d,u]=(0,a.useState)([]),[h,p]=(0,a.useState)(!1),[m,f]=(0,a.useState)(null),[g,x]=(0,a.useState)(null),[b,y]=(0,a.useState)({x:0,y:0}),v=(0,a.useRef)(null),_=function(e){const t=parseFloat(e)||0;return t<.5?"text-red-400":t>=.5&&t<.75?"text-orange-400":t>=.75&&t<1?"text-yellow-400":t>=1&&t<1.25?"text-green-400":t>=1.25&&t<1.5?"text-blue-400":"text-purple-400"};(0,a.useEffect)(()=>{(async()=>{if(r&&o&&l){p(!0),f(null);try{const e={entity_type:t,entity_id:r,breakdown:s,start_date:o,end_date:l},n=await ct.getAnalyticsChartData(e);n&&n.success&&n.chart_data?u(n.chart_data):f("Invalid API response")}catch(m){f(m.message)}finally{p(!1)}}})()},[t,r,s,o,l]);const k=e=>{if(!v.current||d.length<2)return;const t=v.current.getBoundingClientRect(),r=e.clientX-t.left,n=Math.max(0,Math.min(56,r-2)),a=Math.round(n/56*(d.length-1));a>=0&&a<d.length&&(x(a),y({x:e.clientX-180,y:e.clientY-160}))},j=()=>{x(null)},w=e=>(parseFloat(e)||0).toFixed(2),N=_(n,i),S=d.length>=2&&d.some(e=>parseFloat(e.rolling_7d_roas)>0||parseFloat(e.daily_spend)>0||parseFloat(e.daily_estimated_revenue)>0);return(0,dt.jsxs)("div",{className:"flex items-center space-x-3 min-w-[120px] relative",children:[(0,dt.jsx)("span",{className:"font-medium text-sm ".concat(N),children:w(n)}),(0,dt.jsx)("div",{className:"min-w-[60px] relative",children:h?(0,dt.jsx)("div",{className:"w-[60px] h-[20px] bg-blue-200 animate-pulse rounded flex items-center justify-center text-xs",children:"\u23f3"}):m?(0,dt.jsx)("div",{className:"w-[60px] h-[20px] flex items-center justify-center text-red-400 text-xs border border-red-300",children:"\u274c"}):S?(()=>{const e=d.map(e=>parseFloat(e.rolling_7d_roas)||0),t=Math.min(...e),r=Math.max(...e)-t||.1,n=e.map((n,a)=>{const i=2+a/(e.length-1)*56,s=18-(n-t)/r*16;return"".concat(i,",").concat(s)}),a=[];for(let i=0;i<n.length-1;i++){const[t,r]=n[i].split(",").map(Number),[s,o]=n[i+1].split(",").map(Number),l=(r+o)/2,c="".concat((t+s)/2,",").concat(l),u=e[i],h=e[i+1],p=parseInt(d[i].daily_mixpanel_purchases)||0,m=parseInt(d[i+1].daily_mixpanel_purchases)||0,f=d[i].is_inactive||!1,g=d[i+1].is_inactive||!1,x=f?"text-gray-300 dark:text-gray-600":_(u,p),b=g?"text-gray-300 dark:text-gray-600":_(h,m);a.push({path:"M ".concat(n[i]," L ").concat(c),color:x,isInactive:f}),a.push({path:"M ".concat(c," L ").concat(n[i+1]),color:b,isInactive:g})}return(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsxs)("svg",{ref:v,width:"60",height:"20",className:"overflow-visible cursor-crosshair",onMouseMove:k,onMouseLeave:j,children:[(0,dt.jsx)("line",{x1:30,y1:2,x2:30,y2:18,stroke:"#FFFFFF",strokeWidth:"1",strokeDasharray:"2,2",style:{opacity:.5}}),a.map((e,t)=>(0,dt.jsx)("path",{d:e.path,fill:"none",stroke:"currentColor",strokeWidth:e.isInactive?"1":"1.5",strokeDasharray:e.isInactive?"2,2":"none",className:e.color,style:{opacity:e.isInactive?.3:1}},t)),e.map((n,a)=>{const i=2+a/(e.length-1)*56,s=18-(n-t)/r*16,o=g===a,l=parseInt(d[a].daily_mixpanel_purchases)||0,c=d[a].is_inactive||!1,u=c?"text-gray-300 dark:text-gray-600":_(n,l);return(0,dt.jsx)("circle",{cx:i,cy:s,r:o?"2.5":c?"0.5":"1",fill:"currentColor",className:u,style:{filter:o?"drop-shadow(0 0 3px rgba(0,0,0,0.3))":"none",opacity:c?.3:1}},a)})]}),null!==g&&(0,dt.jsxs)("div",{className:"fixed z-50 bg-gray-900 text-white text-xs rounded px-2 py-1 pointer-events-none shadow-lg border border-gray-700",style:{left:b.x,top:b.y-10,transform:"none",maxWidth:"200px"},children:[(()=>{const e=d[g],t=(parseFloat(e.daily_spend),parseFloat(e.daily_estimated_revenue),parseFloat(e.rolling_7d_roas)||0);return(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)("div",{className:"font-medium text-white",children:(r=e.date,new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric"}))}),(0,dt.jsxs)("div",{className:_(t,e.rolling_7d_conversions||0).replace("text-","text-").replace("600","400"),children:["Rolling ROAS: ",w(t)]}),(0,dt.jsxs)("div",{className:"text-gray-400 text-xs",children:["7-day window (",e.rolling_window_days," days)"]})]});var r})(),(0,dt.jsxs)("div",{className:"text-gray-300 text-xs",children:["Rolling Spend: $",(parseFloat(d[g].rolling_7d_spend)||0).toFixed(2)]}),(0,dt.jsxs)("div",{className:"text-gray-300 text-xs",children:["Rolling Revenue: $",(parseFloat(d[g].rolling_7d_revenue)||0).toFixed(2)]}),d[g].period_accuracy_ratio&&1!==d[g].period_accuracy_ratio&&(0,dt.jsx)("div",{className:"text-gray-400 text-xs",children:(()=>{const e="purchases"===(d[g].event_priority||"trials")?"Purchase Accuracy":"Trial Accuracy",t=(100*parseFloat(d[g].period_accuracy_ratio)).toFixed(1);return"".concat(e,": ").concat(t,"% (MP/Meta)")})()}),(0,dt.jsxs)("div",{className:"text-green-300 text-xs",children:["Rolling Conversions: ",d[g].rolling_7d_conversions||0]}),(0,dt.jsxs)("div",{className:"text-blue-300 text-xs",children:["Rolling Trials: ",d[g].rolling_7d_trials||0]}),d[g].rolling_7d_meta_trials&&(0,dt.jsxs)("div",{className:"text-gray-400 text-xs",children:["Rolling Meta Trials: ",d[g].rolling_7d_meta_trials]})]})]})})():(0,dt.jsx)("div",{className:"w-[60px] h-[20px] flex items-center justify-center",children:(0,dt.jsx)("svg",{width:"60",height:"20",className:"overflow-visible",children:(0,dt.jsx)("line",{x1:"2",y1:"10",x2:"58",y2:"10",stroke:"currentColor",strokeWidth:"1",strokeDasharray:"2,2",className:"text-gray-300 dark:text-gray-600"})})})})]})},ht=e=>{let{average:t,breakdown:r,colorClass:n,pipelineUpdatedClass:i}=e;const[s,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)({x:0,y:0}),d=(0,a.useRef)(null),u=e=>{switch(e.toLowerCase()){case"very_high":return"text-green-700";case"high":return"text-green-600";case"medium":return"text-yellow-600";case"low":return"text-orange-600";case"very_low":return"text-red-600";default:return"text-gray-600"}},h=e=>e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");return(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsx)("span",{ref:d,className:"".concat(n," ").concat(i," cursor-pointer hover:underline"),onMouseEnter:e=>{o(!0);const t=e.currentTarget.getBoundingClientRect();c({x:t.left+t.width/2,y:t.top-10})},onMouseLeave:()=>{o(!1)},children:t}),s&&(0,dt.jsxs)("div",{className:"fixed z-50 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg p-3 min-w-48",style:{left:l.x-96,top:l.y-10,transform:"translateY(-100%)"},children:[(0,dt.jsx)("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Accuracy Breakdown"}),(0,dt.jsx)("div",{className:"space-y-1",children:Object.entries(r).sort((e,t)=>{let[,r]=e,[,n]=t;return n.percentage-r.percentage}).map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,dt.jsxs)("span",{className:"".concat(u(t)," font-medium"),children:[h(t),":"]}),(0,dt.jsxs)("span",{className:"text-gray-700 dark:text-gray-300",children:[r.count," (",r.percentage,"%)"]})]},t)})}),(0,dt.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-600 mt-2 pt-2 text-xs text-gray-600 dark:text-gray-400",children:["Total Users: ",Object.values(r).reduce((e,t)=>e+t.count,0)]})]})]})},pt=e=>{let{value:t,type:r,colorClass:n,pipelineUpdatedClass:i}=e;const[s,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)({x:0,y:0}),d="trial"===r?"5%":"15%";if(!("trial"===r?Math.abs(t-5)<.01:Math.abs(t-15)<.01))return null;return(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)("span",{className:"".concat(n," ").concat(i," cursor-help"),onMouseEnter:e=>{const t=e.currentTarget.getBoundingClientRect();c({x:t.left+t.width/2,y:t.top-10}),o(!0)},onMouseLeave:()=>{o(!1)},children:"*"}),s&&(0,dt.jsx)("div",{className:"fixed z-50 bg-gray-900 text-white text-xs rounded px-2 py-1 max-w-xs",style:{left:l.x,top:l.y,transform:"translateX(-50%) translateY(-100%)"},children:(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"font-medium",children:"Default Minimum Applied"}),(0,dt.jsxs)("div",{className:"mt-1",children:["This rate defaulted to ",d," because either there weren't enough users or the calculated rate was lower. We use this minimum to ensure reliable estimates."]})]})})]})},mt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return void 0===e||null===e?"N/A":e.toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:t})},ft=e=>void 0===e||null===e?"N/A":e.toLocaleString(void 0,{style:"currency",currency:"USD"}),gt=["mixpanel_trials_started","meta_trials_started","mixpanel_trials_ended","mixpanel_trials_in_progress","click_to_trial_rate","mixpanel_cost_per_trial","meta_cost_per_trial","trial_conversion_rate","avg_trial_refund_rate","trial_accuracy_ratio"],xt=["mixpanel_purchases","meta_purchases","mixpanel_cost_per_purchase","meta_cost_per_purchase","purchase_refund_rate","purchase_accuracy_ratio","mixpanel_conversions_net_refunds","mixpanel_revenue_usd","mixpanel_refunds_usd"],bt=e=>{const t=e.mixpanel_trials_started||0,r=e.mixpanel_purchases||0;return 0===t&&0===r||t>r?"trials":r>t?"purchases":"equal"},yt=(e,t)=>"equal"!==t&&(!("trials"!==t||!xt.includes(e))||!("purchases"!==t||!gt.includes(e))),vt=e=>gt.includes(e)?"trial":xt.includes(e)?"purchase":"neutral",_t=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=vt(e);if(t)switch(r){case"trial":return"bg-blue-50 dark:bg-blue-900/20";case"purchase":return"bg-green-50 dark:bg-green-900/20";default:return""}else switch(r){case"trial":return"bg-blue-25 dark:bg-blue-900/10";case"purchase":return"bg-green-25 dark:bg-green-900/10";default:return""}},kt=e=>Re({},e),jt=(e,t)=>{if("average_accuracy"===e&&t)switch(t.toLowerCase()){case"very high":return"text-green-700 dark:text-green-400";case"high":return"text-green-600 dark:text-green-400";case"medium":return"text-yellow-600 dark:text-yellow-400";case"low":return"text-orange-600 dark:text-orange-400";case"very low":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}return"text-gray-900 dark:text-gray-100"},wt=e=>e>=3?"text-green-600 dark:text-green-400":e>=2?"text-yellow-600 dark:text-yellow-400":e>=1?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400",Nt=e=>{let{column:t,sortConfig:r}=e;return r.column!==t?(0,dt.jsx)(et,{size:12,className:"ml-1 text-gray-400 dark:text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity"}):"asc"===r.direction?(0,dt.jsx)(Ge,{size:12,className:"ml-1 text-gray-600 dark:text-gray-300"}):(0,dt.jsx)(Ve,{size:12,className:"ml-1 text-gray-600 dark:text-gray-300"})},St=e=>{let{data:t=[],rowOrder:r=[],onRowOrderChange:n=null,columnVisibility:i={},columnOrder:s=[],onColumnOrderChange:o=null,dashboardParams:l=null,sortConfig:c={column:null,direction:"asc"},onSort:d=()=>{}}=e;const[u,h]=(0,a.useState)({}),[p,m]=(0,a.useState)({}),[f,g]=(0,a.useState)(null),[x,b]=(0,a.useState)(null),[y,v]=(0,a.useState)(null),[_,k]=(0,a.useState)(!1),j=e=>{!_&&d&&d(e)},[w,N]=(0,a.useState)(null),[S,O]=(0,a.useState)(null),C=(()=>{const e=(s.length>0?s:it.map(e=>e.key)).map(e=>it.find(t=>t.key===e)).filter(e=>e);return 0===Object.keys(i).length?e.filter(e=>e.defaultVisible):e.filter(e=>!0===i[e.key])})();console.log("Column Visibility Status:",{visible_columns:C.length,estimated_revenue_adjusted_visible:C.some(e=>"estimated_revenue_adjusted"===e.key),mixpanel_revenue_net_visible:C.some(e=>"mixpanel_revenue_net"===e.key)});const E=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const a=kt(e),i=t.key||t;let s=a[i],o="N/A";switch(i){case"spend":case"mixpanel_revenue_usd":case"estimated_revenue_usd":case"estimated_revenue_adjusted":case"mixpanel_revenue_net":case"mixpanel_refunds_usd":case"profit":case"mixpanel_cost_per_trial":case"mixpanel_cost_per_purchase":case"meta_cost_per_trial":case"meta_cost_per_purchase":o=ft(s);break;case"impressions":case"clicks":case"mixpanel_trials_started":case"meta_trials_started":case"mixpanel_trials_ended":case"mixpanel_trials_in_progress":case"mixpanel_purchases":case"meta_purchases":case"mixpanel_converted_amount":case"mixpanel_conversions_net_refunds":case"total_attributed_users":o=mt(s);break;case"click_to_trial_rate":case"trial_conversion_rate":case"trial_accuracy_ratio":case"purchase_accuracy_ratio":o=void 0!==s&&null!==s?"".concat(mt(100*s,2),"%"):"N/A";break;case"avg_trial_refund_rate":if(void 0!==s&&null!==s){const e=mt(s,2),t=Math.abs(s-5)<.01;o=(0,dt.jsxs)("span",{children:[e,"%",t&&(0,dt.jsx)(pt,{value:s,type:"trial",colorClass:"text-blue-500",pipelineUpdatedClass:""})]})}else o="N/A";break;case"purchase_refund_rate":if(void 0!==s&&null!==s){const e=mt(s,2),t=Math.abs(s-15)<.01;o=(0,dt.jsxs)("span",{children:[e,"%",t&&(0,dt.jsx)(pt,{value:s,type:"purchase",colorClass:"text-orange-500",pipelineUpdatedClass:""})]})}else o="N/A";break;case"estimated_roas":o=mt(s,2);break;case"performance_impact_score":o=void 0!==s&&null!==s&&s>0?mt(s,0):"0";break;default:o=s||"N/A"}let c=jt(i,s);if("estimated_roas"===i?c=wt(s):"performance_impact_score"===i&&(c=s>=7500?"text-purple-600 dark:text-purple-400 font-bold":s>=2500?"text-blue-600 dark:text-blue-400 font-semibold":s>=1e3?"text-green-600 dark:text-green-400 font-semibold":s>=500?"text-yellow-600 dark:text-yellow-400":s>=200?"text-orange-600 dark:text-orange-400":s>=50?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"),("trial_accuracy_ratio"===i||"purchase_accuracy_ratio"===i)&&void 0!==s&&null!==s){if(!(n&&yt(i,n))){"trial_accuracy_ratio"===i?a.meta_trials_started:a.meta_purchases;const e=100*s;e<10?c="text-red-600 dark:text-red-400 font-semibold":e<20?c="text-orange-600 dark:text-orange-400 font-semibold":e<=30&&(c="text-yellow-600 dark:text-yellow-400 font-semibold")}}if(n&&yt(i,n)&&(c="text-gray-500 dark:text-gray-500"),"segment_accuracy_average"===i&&e.accuracy_breakdown)return(0,dt.jsx)(ht,{average:o,breakdown:e.accuracy_breakdown,colorClass:c,pipelineUpdatedClass:""});if("estimated_roas"===i){if(r)return(0,dt.jsxs)("span",{className:c,children:[o,"x"]});const t=e.id?e.id.split("_")[1]:null;return(0,dt.jsx)(ut,{entityType:e.type,entityId:t,currentROAS:s,conversionCount:a.mixpanel_purchases||0,breakdown:(null===l||void 0===l?void 0:l.breakdown)||"all",startDate:(null===l||void 0===l?void 0:l.start_date)||"2025-04-01",endDate:(null===l||void 0===l?void 0:l.end_date)||"2025-04-10"})}return(0,dt.jsxs)("span",{className:c,children:[o,!1]})},P=e=>{e.preventDefault()},A=e=>{e.currentTarget.contains(e.relatedTarget)||b(null)},M=e=>{g(null),b(null),setTimeout(()=>k(!1),100)},T=D;function D(){N(null),O(null)}const R=(e,t)=>{const a=!!u[e.id],i=!!p[e.id],s=[],o=kt(e),l=bt(e);return s.push((0,dt.jsxs)("tr",{draggable:0===t,onDragStart:t=>((e,t)=>{N(t),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(new Image,0,0)})(t,e.id),onDragEnter:t=>((e,t)=>{e.preventDefault(),t!==S&&O(t)})(t,e.id),onDragOver:e=>e.preventDefault(),onDrop:t=>((e,t)=>{if(e.preventDefault(),!w||w===t)return;const a=[...r],i=a.indexOf(w),s=a.indexOf(t);a.splice(s,0,a.splice(i,1)[0]),null===n||void 0===n||n(a),D()})(t,e.id),onDragEnd:T,className:"border-b border-gray-200 dark:border-gray-700 ".concat(0===t?"bg-gray-50 dark:bg-gray-800 font-semibold":1===t?"bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200":"bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200"," ").concat(w===e.id?"opacity-50":""," ").concat(S===e.id&&w!==e.id?"ring-2 ring-blue-400":""),children:[(0,dt.jsx)("td",{className:"sticky left-0 px-3 py-2 whitespace-nowrap z-10 ".concat(0===t?"bg-gray-50 dark:bg-gray-800":1===t?"bg-white dark:bg-gray-700":"bg-gray-100 dark:bg-gray-600"),children:(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("span",{style:{paddingLeft:"".concat(20*t,"px")},children:e.children&&e.children.length>0?(0,dt.jsx)("button",{onClick:()=>{return t=e.id,void h(e=>Re(Re({},e),{},{[t]:!e[t]}));var t},className:"mr-1 p-1",children:a?(0,dt.jsx)(Ve,{size:16}):(0,dt.jsx)(tt,{size:16})}):(0,dt.jsx)("span",{className:"inline-block w-8"})}),e.breakdowns&&e.breakdowns.length>0&&(0,dt.jsx)("button",{onClick:()=>{return t=e.id,void m(e=>Re(Re({},e),{},{[t]:!e[t]}));var t},className:"mr-2 p-1 rounded ".concat(i?"text-blue-500 bg-blue-100 dark:bg-blue-900/30":"text-gray-400 hover:text-blue-400"),title:"Toggle breakdowns",children:(0,dt.jsx)(Ke,{size:14})}),(0,dt.jsx)("span",{className:"".concat(0===t?"text-gray-900 dark:text-gray-100":1===t?"text-gray-800 dark:text-gray-200":"text-gray-700 dark:text-gray-100"),children:0===t?e.name||e.campaign_name:1===t?e.name||e.adset_name:e.name||e.ad_name})]})}),C.slice(1).map(r=>{if("campaign_name"===r.key)return t>0?(0,dt.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:e.campaign_name},r.key):(0,dt.jsx)("td",{className:"px-3 py-2"},r.key);if("adset_name"===r.key)return t>1?(0,dt.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:e.adset_name},r.key):(0,dt.jsx)("td",{className:"px-3 py-2"},r.key);const n=jt(r.key,o[r.key]),a="roas"===r.key||"estimated_roas"===r.key,i=a?wt(o[r.key]):"",s=a?i:n,c=yt(r.key,l)?"text-gray-500 dark:text-gray-500":s,d=_t(r.key);return(0,dt.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-right ".concat(c," ").concat(a?"font-medium":""," ").concat(d),children:E(o,r,!1,l)},r.key)})]},e.id)),i&&e.breakdowns&&s.push(...((e,t)=>{const r=[];return e.breakdowns?(e.breakdowns.forEach(n=>{n.values.forEach((a,i)=>{const s=kt(a),o=a.meta_value&&a.mixpanel_value&&a.meta_value!==a.mixpanel_value,l=o?"".concat(a.meta_value," \u2192 ").concat(a.mixpanel_value):a.name,c="country"===n.type?{US:"\ud83c\uddfa\ud83c\uddf8",GB:"\ud83c\uddec\ud83c\udde7",CA:"\ud83c\udde8\ud83c\udde6",AU:"\ud83c\udde6\ud83c\uddfa",DE:"\ud83c\udde9\ud83c\uddea",FR:"\ud83c\uddeb\ud83c\uddf7",IT:"\ud83c\uddee\ud83c\uddf9",ES:"\ud83c\uddea\ud83c\uddf8",NL:"\ud83c\uddf3\ud83c\uddf1",SE:"\ud83c\uddf8\ud83c\uddea",NO:"\ud83c\uddf3\ud83c\uddf4",DK:"\ud83c\udde9\ud83c\uddf0",FI:"\ud83c\uddeb\ud83c\uddee",CH:"\ud83c\udde8\ud83c\udded",AT:"\ud83c\udde6\ud83c\uddf9",BE:"\ud83c\udde7\ud83c\uddea",IE:"\ud83c\uddee\ud83c\uddea",PT:"\ud83c\uddf5\ud83c\uddf9",PL:"\ud83c\uddf5\ud83c\uddf1",CZ:"\ud83c\udde8\ud83c\uddff",HU:"\ud83c\udded\ud83c\uddfa",GR:"\ud83c\uddec\ud83c\uddf7",RO:"\ud83c\uddf7\ud83c\uddf4",BG:"\ud83c\udde7\ud83c\uddec",HR:"\ud83c\udded\ud83c\uddf7",SI:"\ud83c\uddf8\ud83c\uddee",SK:"\ud83c\uddf8\ud83c\uddf0",EE:"\ud83c\uddea\ud83c\uddea",LV:"\ud83c\uddf1\ud83c\uddfb",LT:"\ud83c\uddf1\ud83c\uddf9",LU:"\ud83c\uddf1\ud83c\uddfa",MT:"\ud83c\uddf2\ud83c\uddf9",CY:"\ud83c\udde8\ud83c\uddfe",IS:"\ud83c\uddee\ud83c\uddf8",LI:"\ud83c\uddf1\ud83c\uddee",MC:"\ud83c\uddf2\ud83c\udde8",AD:"\ud83c\udde6\ud83c\udde9",SM:"\ud83c\uddf8\ud83c\uddf2",VA:"\ud83c\uddfb\ud83c\udde6",JP:"\ud83c\uddef\ud83c\uddf5",KR:"\ud83c\uddf0\ud83c\uddf7",CN:"\ud83c\udde8\ud83c\uddf3",IN:"\ud83c\uddee\ud83c\uddf3",SG:"\ud83c\uddf8\ud83c\uddec",HK:"\ud83c\udded\ud83c\uddf0",TW:"\ud83c\uddf9\ud83c\uddfc",TH:"\ud83c\uddf9\ud83c\udded",MY:"\ud83c\uddf2\ud83c\uddfe",ID:"\ud83c\uddee\ud83c\udde9",PH:"\ud83c\uddf5\ud83c\udded",VN:"\ud83c\uddfb\ud83c\uddf3",BR:"\ud83c\udde7\ud83c\uddf7",MX:"\ud83c\uddf2\ud83c\uddfd",AR:"\ud83c\udde6\ud83c\uddf7",CL:"\ud83c\udde8\ud83c\uddf1",CO:"\ud83c\udde8\ud83c\uddf4",PE:"\ud83c\uddf5\ud83c\uddea",UY:"\ud83c\uddfa\ud83c\uddfe",PY:"\ud83c\uddf5\ud83c\uddfe",BO:"\ud83c\udde7\ud83c\uddf4",EC:"\ud83c\uddea\ud83c\udde8",VE:"\ud83c\uddfb\ud83c\uddea",GY:"\ud83c\uddec\ud83c\uddfe",SR:"\ud83c\uddf8\ud83c\uddf7",GF:"\ud83c\uddec\ud83c\uddeb",ZA:"\ud83c\uddff\ud83c\udde6",EG:"\ud83c\uddea\ud83c\uddec",MA:"\ud83c\uddf2\ud83c\udde6",TN:"\ud83c\uddf9\ud83c\uddf3",DZ:"\ud83c\udde9\ud83c\uddff",LY:"\ud83c\uddf1\ud83c\uddfe",SD:"\ud83c\uddf8\ud83c\udde9",AE:"\ud83c\udde6\ud83c\uddea",SA:"\ud83c\uddf8\ud83c\udde6",QA:"\ud83c\uddf6\ud83c\udde6",KW:"\ud83c\uddf0\ud83c\uddfc",BH:"\ud83c\udde7\ud83c\udded",OM:"\ud83c\uddf4\ud83c\uddf2",JO:"\ud83c\uddef\ud83c\uddf4",LB:"\ud83c\uddf1\ud83c\udde7",SY:"\ud83c\uddf8\ud83c\uddfe",IQ:"\ud83c\uddee\ud83c\uddf6",IR:"\ud83c\uddee\ud83c\uddf7",AF:"\ud83c\udde6\ud83c\uddeb",PK:"\ud83c\uddf5\ud83c\uddf0",BD:"\ud83c\udde7\ud83c\udde9",LK:"\ud83c\uddf1\ud83c\uddf0",MV:"\ud83c\uddf2\ud83c\uddfb",NP:"\ud83c\uddf3\ud83c\uddf5",BT:"\ud83c\udde7\ud83c\uddf9",RU:"\ud83c\uddf7\ud83c\uddfa",UA:"\ud83c\uddfa\ud83c\udde6",BY:"\ud83c\udde7\ud83c\uddfe",MD:"\ud83c\uddf2\ud83c\udde9",GE:"\ud83c\uddec\ud83c\uddea",AM:"\ud83c\udde6\ud83c\uddf2",AZ:"\ud83c\udde6\ud83c\uddff",KZ:"\ud83c\uddf0\ud83c\uddff",UZ:"\ud83c\uddfa\ud83c\uddff",TM:"\ud83c\uddf9\ud83c\uddf2",KG:"\ud83c\uddf0\ud83c\uddec",TJ:"\ud83c\uddf9\ud83c\uddef",MN:"\ud83c\uddf2\ud83c\uddf3",TR:"\ud83c\uddf9\ud83c\uddf7",IL:"\ud83c\uddee\ud83c\uddf1",PS:"\ud83c\uddf5\ud83c\uddf8",CY:"\ud83c\udde8\ud83c\uddfe",NZ:"\ud83c\uddf3\ud83c\uddff"}[a.name]||"\ud83c\udff3\ufe0f":"";r.push((0,dt.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50/30 dark:bg-gray-900/30 text-xs hover:bg-blue-50/20 dark:hover:bg-blue-900/20",children:[(0,dt.jsx)("td",{className:"sticky left-0 px-3 py-1 whitespace-nowrap bg-gray-50/30 dark:bg-gray-900/30 z-10",children:(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("span",{className:"opacity-0 w-8"})," ",(0,dt.jsxs)("div",{style:{paddingLeft:"".concat(20*(t+1)+12,"px")},className:"flex items-center space-x-2",children:[c&&(0,dt.jsx)("span",{className:"text-sm",children:c}),!c&&(0,dt.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:l}),o&&(0,dt.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200",title:"Meta-Mixpanel Mapping Applied",children:"\ud83d\udd17"}),a.total_users&&(0,dt.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",a.total_users.toLocaleString()," users)"]})]})]})}),C.slice(1).map(e=>"campaign_name"===e.key||"adset_name"===e.key?(0,dt.jsx)("td",{className:"px-3 py-1"},e.key):(0,dt.jsx)("td",{className:"px-3 py-1 whitespace-nowrap text-right",children:(0,dt.jsx)("span",{className:"".concat(jt(e.key,s[e.key])),children:E(s,e,!0,bt(s))})},e.key))]},"".concat(e.id,"-").concat(n.type,"-").concat(i)))})}),r):r})(e,t)),a&&e.children&&e.children.forEach(e=>{s.push(...R(e,t+1))}),s};if(!t||0===t.length)return(0,dt.jsx)("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"No data available."});const I=c.column&&null!==c.column?t:r.length?r.map(e=>t.find(t=>t.id===e)).filter(Boolean):t,L=I.reduce((e,t)=>e.concat(R(t,0)),[]);return(0,dt.jsxs)("div",{className:"shadow-soft rounded-2xl",children:[(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 px-4 py-2 flex space-x-4 border-b border-gray-200 dark:border-gray-700",children:[(0,dt.jsxs)("div",{className:"inline-flex rounded-md shadow-sm",children:[(0,dt.jsxs)("button",{onClick:()=>{const e={},r=t=>{t.forEach(t=>{e[t.id]=!0,t.children&&r(t.children)})};r(t),h(e)},className:"px-3 py-1.5 text-xs font-medium bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-l-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 flex items-center",children:[(0,dt.jsx)(rt,{size:14,className:"mr-1"})," Expand All"]}),(0,dt.jsxs)("button",{onClick:()=>{h({})},className:"px-3 py-1.5 text-xs font-medium bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-r-lg border border-l-0 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 flex items-center",children:[(0,dt.jsx)(nt,{size:14,className:"mr-1"})," Collapse All"]})]}),(0,dt.jsxs)("div",{className:"inline-flex rounded-md shadow-sm",children:[(0,dt.jsxs)("button",{onClick:()=>{const e={},r=t=>{t.forEach(t=>{t.breakdowns&&t.breakdowns.length>0&&(e[t.id]=!0),t.children&&r(t.children)})};r(t),m(e)},className:"px-3 py-1.5 text-xs font-medium bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-l-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 flex items-center",children:[(0,dt.jsx)(Ke,{size:14,className:"mr-1"})," Show Breakdowns"]}),(0,dt.jsxs)("button",{onClick:()=>{m({})},className:"px-3 py-1.5 text-xs font-medium bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-r-lg border border-l-0 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 flex items-center",children:[(0,dt.jsx)(at,{size:14,className:"mr-1"})," Hide Breakdowns"]})]})]}),(0,dt.jsx)("div",{className:"overflow-x-auto",children:(0,dt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 text-sm",children:[(0,dt.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-800",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{scope:"col",className:"sticky left-0 px-3 py-3 text-left text-xs font-medium uppercase tracking-wider bg-gray-100 dark:bg-gray-800 z-20 cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors group\n                  ".concat("name"===c.column?"border-b-2 border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-900/20":""),onClick:()=>j("name"),children:(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("span",{children:"Name"}),(0,dt.jsx)(Nt,{column:"name",sortConfig:c})]})}),C.slice(1).map(e=>{const t=vt(e.key),r=_t(e.key,x===e.key);return(0,dt.jsx)("th",{scope:"col",draggable:!e.alwaysVisible,onDragStart:t=>((e,t)=>{g(t),k(!0),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t)})(t,e.key),onDragOver:P,onDragEnter:t=>{return r=e.key,void(f&&f!==r&&b(r));var r},onDragLeave:A,onDrop:t=>((e,t)=>{if(e.preventDefault(),f&&f!==t&&o){const e=[...s],r=e.indexOf(f),n=e.indexOf(t);if(-1!==r&&-1!==n){const[t]=e.splice(r,1),a=r<n?n:n+1;e.splice(a,0,t),console.log("\ud83d\udd04 Column reordered: '".concat(f,"' moved from position ").concat(r," to ").concat(a)),o(e)}}g(null),b(null),setTimeout(()=>k(!1),100)})(t,e.key),onDragEnd:M,onClick:()=>j(e.key),className:"px-3 py-3 text-".concat("campaign_name"===e.key||"adset_name"===e.key?"left":"right"," text-xs font-medium uppercase tracking-wider ").concat((e.key,"text-gray-700 dark:text-gray-300")," ").concat(r,"\n                      cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-150 group\n                      ").concat(c.column===e.key?"bg-blue-50 dark:bg-blue-900/20 border-b-2 border-blue-500 dark:border-blue-400":"","\n                      ").concat(x===e.key&&f!==e.key?"bg-blue-100 dark:bg-blue-900 border-2 border-blue-300 dark:border-blue-600":"","\n                      ").concat("trial"===t?"border-l-2 border-blue-200 dark:border-blue-800":"","\n                      ").concat("purchase"===t?"border-l-2 border-green-200 dark:border-green-800":""),title:'Click to sort by "'.concat(e.label,'"').concat(e.alwaysVisible?"":". Drag to reorder column."),children:(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("span",{children:e.label}),(0,dt.jsx)(Nt,{column:e.key,sortConfig:c})]}),!e.alwaysVisible&&(0,dt.jsx)("span",{className:"ml-1 text-gray-400 dark:text-gray-500 text-lg leading-none hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-150",style:{transform:"rotate(90deg)"},children:"\u22ee\u22ee"})]})},e.key)})]})}),(0,dt.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:L.map(e=>(0,dt.jsx)(a.Fragment,{children:e},e.key))})]})})]})},Ot=Ue("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Ct=e=>{let{dateRange:t,breakdown:r,hierarchy:n,breakdownFilters:i,onDateRangeChange:s,onBreakdownChange:o,onHierarchyChange:l,onBreakdownFiltersChange:c,onRefresh:d,loading:u,backgroundLoading:h}=e;const[p,m]=(0,a.useState)("7days"),f=(()=>{const e=new Date;e.setDate(e.getDate()-1);const t=e=>e.toISOString().split("T")[0];return[{id:"yesterday",label:"Yesterday",start_date:t(e),end_date:t(e)},{id:"7days",label:"7 Days",start_date:t(new Date(e.getTime()-5184e5)),end_date:t(e)},{id:"14days",label:"14 Days",start_date:t(new Date(e.getTime()-11232e5)),end_date:t(e)},{id:"30days",label:"30 Days",start_date:t(new Date(e.getTime()-25056e5)),end_date:t(e)}]})(),g=new Date;g.setDate(g.getDate()-1);const x=g.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});(0,a.useEffect)(()=>{const e=f.find(e=>"7days"===e.id);!e||null!==t&&void 0!==t&&t.start_date&&null!==t&&void 0!==t&&t.end_date||s(e)},[]),(0,a.useEffect)(()=>{if(null!==t&&void 0!==t&&t.start_date&&null!==t&&void 0!==t&&t.end_date){const e=f.find(e=>e.start_date===t.start_date&&e.end_date===t.end_date);m(e?e.id:"custom")}},[t]);const b=e=>{if(m(e),"custom"!==e){const t=f.find(t=>t.id===e);t&&s({start_date:t.start_date,end_date:t.end_date})}},y=(e,r)=>{m("custom"),s(Re(Re({},t),{},{[e]:r}))};return(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:(0,dt.jsxs)("div",{className:"p-6",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dt.jsx)(Ot,{className:"h-5 w-5 text-blue-600"}),(0,dt.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Analytics Controls"})]}),(0,dt.jsxs)("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-700 px-3 py-1.5 rounded-full",children:[(0,dt.jsx)(Qe,{className:"mr-1.5 h-3 w-3"}),"Data through ",x]})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 items-end",children:[(0,dt.jsxs)("div",{className:"lg:col-span-5",children:[(0,dt.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Date Range"}),(0,dt.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[f.map(e=>(0,dt.jsx)("button",{onClick:()=>b(e.id),className:"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 ".concat(p===e.id?"bg-blue-600 text-white shadow-md transform scale-[1.02]":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"),children:e.label},e.id)),(0,dt.jsx)("button",{onClick:()=>b("custom"),className:"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 ".concat("custom"===p?"bg-blue-600 text-white shadow-md transform scale-[1.02]":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"),children:"Custom"})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"From"}),(0,dt.jsx)("input",{type:"date",value:(null===t||void 0===t?void 0:t.start_date)||"",onChange:e=>y("start_date",e.target.value),className:"block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm py-2.5"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"To"}),(0,dt.jsx)("input",{type:"date",value:(null===t||void 0===t?void 0:t.end_date)||"",onChange:e=>y("end_date",e.target.value),className:"block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm py-2.5"})]})]})]}),(0,dt.jsxs)("div",{className:"lg:col-span-2",children:[(0,dt.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Breakdown"}),(0,dt.jsxs)("select",{value:r||"all",onChange:e=>o(e.target.value),className:"block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500 py-2.5",children:[(0,dt.jsx)("option",{value:"all",children:"All"}),(0,dt.jsx)("option",{value:"country",children:"Country"}),(0,dt.jsx)("option",{value:"region",children:"Region"}),(0,dt.jsx)("option",{value:"device",children:"Device"})]})]}),(0,dt.jsxs)("div",{className:"lg:col-span-3",children:[(0,dt.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Hierarchy"}),(0,dt.jsxs)("select",{value:n||"campaign",onChange:e=>l(e.target.value),className:"block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500 py-2.5",children:[(0,dt.jsx)("option",{value:"campaign",children:"Campaign \u2192 Ad Set \u2192 Ad"}),(0,dt.jsx)("option",{value:"adset",children:"Ad Set \u2192 Ad"}),(0,dt.jsx)("option",{value:"ad",children:"Ad Only"})]})]}),(0,dt.jsx)("div",{className:"lg:col-span-2",children:(0,dt.jsx)("button",{onClick:d,disabled:u||h,className:"w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-sm font-semibold rounded-lg text-white bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all duration-200 transform hover:scale-[1.02] disabled:transform-none",children:u||h?(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Refreshing..."]}):(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)(We,{className:"mr-2 h-4 w-4"}),"Refresh Data"]})})})]}),"all"!==r&&(0,dt.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:(0,dt.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,dt.jsx)("h3",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:"Breakdown Filtering"})]}),(0,dt.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,dt.jsx)("input",{type:"checkbox",checked:(null===i||void 0===i?void 0:i.enabled)||!1,onChange:e=>c(Re(Re({},i),{},{enabled:e.target.checked})),className:"sr-only"}),(0,dt.jsx)("div",{className:"relative inline-flex h-5 w-9 items-center rounded-full transition-colors ".concat(null!==i&&void 0!==i&&i.enabled?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"),children:(0,dt.jsx)("span",{className:"inline-block h-3 w-3 transform rounded-full bg-white transition-transform ".concat(null!==i&&void 0!==i&&i.enabled?"translate-x-5":"translate-x-1")})}),(0,dt.jsx)("span",{className:"ml-2 text-xs text-gray-600 dark:text-gray-400",children:null!==i&&void 0!==i&&i.enabled?"Enabled":"Disabled"})]})]}),(null===i||void 0===i?void 0:i.enabled)&&(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,dt.jsx)("div",{className:"space-y-2",children:(0,dt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,dt.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,dt.jsx)("input",{type:"radio",name:"breakdown-filter-type",value:"limit",checked:"limit"===(null===i||void 0===i?void 0:i.type),onChange:e=>c(Re(Re({},i),{},{type:e.target.value})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),(0,dt.jsx)("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"\ud83d\udcca Limit to top results"})]}),(0,dt.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,dt.jsx)("input",{type:"radio",name:"breakdown-filter-type",value:"spend",checked:"spend"===(null===i||void 0===i?void 0:i.type),onChange:e=>c(Re(Re({},i),{},{type:e.target.value})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),(0,dt.jsx)("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"\ud83d\udcb0 Minimum spend filter"})]})]})}),(0,dt.jsx)("div",{children:"limit"===(null===i||void 0===i?void 0:i.type)?(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 whitespace-nowrap",children:"Show top:"}),(0,dt.jsx)("input",{type:"number",min:"1",max:"50",value:(null===i||void 0===i?void 0:i.limitCount)||10,onChange:e=>c(Re(Re({},i),{},{limitCount:parseInt(e.target.value)||10})),className:"w-20 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm py-1"}),(0,dt.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"results"})]}):(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 whitespace-nowrap",children:"Min spend:"}),(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"$"}),(0,dt.jsx)("input",{type:"number",min:"0",step:"10",value:(null===i||void 0===i?void 0:i.minSpend)||100,onChange:e=>c(Re(Re({},i),{},{minSpend:parseFloat(e.target.value)||100})),className:"w-24 ml-1 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm py-1"})]})]})})]})]})})]})})},Et=()=>{const[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)(!1),[i,s]=(0,a.useState)(null),[o,l]=(0,a.useState)(()=>{const e=localStorage.getItem("dashboard_data");if(e)try{return JSON.parse(e)}catch(CF){console.warn("Failed to parse saved dashboard data:",CF)}return[]}),[c,d]=(0,a.useState)(()=>localStorage.getItem("dashboard_last_updated")||null),[u,h]=(0,a.useState)(()=>{const e=localStorage.getItem("dashboard_date_range");if(e)try{return JSON.parse(e)}catch(CF){console.warn("Failed to parse saved date range:",CF)}return{start_date:"2024-01-01",end_date:(new Date).toISOString().split("T")[0]}}),[p,m]=(0,a.useState)(()=>localStorage.getItem("dashboard_breakdown")||"all"),[f,g]=(0,a.useState)(()=>localStorage.getItem("dashboard_hierarchy")||"campaign"),[x,b]=(0,a.useState)(()=>localStorage.getItem("dashboard_text_filter")||""),[y,v]=(0,a.useState)(()=>{const e=localStorage.getItem("dashboard_breakdown_filters");if(e)try{return JSON.parse(e)}catch(CF){console.warn("Failed to parse saved breakdown filters:",CF)}return{enabled:!1,type:"limit",limitCount:10,minSpend:100}}),[_,k]=(0,a.useState)(()=>{const e=localStorage.getItem("dashboard_column_visibility");let t={};if(e)try{t=JSON.parse(e)}catch(CF){console.warn("Failed to parse saved column visibility:",CF),t={}}return(e=>{const t={};return it.forEach(r=>{e&&e.hasOwnProperty(r.key)?t[r.key]=e[r.key]:t[r.key]=r.defaultVisible||!1}),t})(t)}),[j,w]=(0,a.useState)(()=>{const e=localStorage.getItem("dashboard_column_order");let t=[];if(e)try{t=JSON.parse(e)}catch(CF){console.warn("Failed to parse saved column order:",CF),t=[]}return(e=>{const t=st(),r=[...e||[]];return t.forEach(e=>{r.includes(e)||r.push(e)}),r.filter(e=>t.includes(e))})(t)}),[N,S]=(0,a.useState)(()=>{const e=localStorage.getItem("dashboard_row_order");if(e)try{return JSON.parse(e)}catch(CF){console.warn("Failed to parse saved row order:",CF)}return[]}),[O,C]=(0,a.useState)(()=>{const e=localStorage.getItem("dashboard_sort_config");if(e)try{return JSON.parse(e)}catch(CF){console.warn("Failed to parse saved sort config:",CF)}return{column:"spend",direction:"desc"}}),[E,P]=(0,a.useState)(!1),A=((e,t)=>{(0,a.useEffect)(()=>{const r=ot(e);r.isValid||console.warn("\ud83d\udea8 Column Order Validation Failed:",{validation:r,missing_columns:r.missing,extra_columns:r.extra});const n=it.map(e=>e.key),a=Object.keys(t),i=n.filter(e=>!a.includes(e)),s=a.filter(e=>!n.includes(e));(i.length>0||s.length>0)&&console.warn("\ud83d\udea8 Column Visibility Validation Failed:",{missing_in_visibility:i,extra_in_visibility:s,expected_count:n.length,actual_count:a.length})},[e,t]);const r=ot(e),n=it.map(e=>e.key),i=Object.keys(t),s=n.every(e=>i.includes(e));return{isValid:r.isValid&&s,orderValidation:r,visibilityValid:s}})(j,_);(0,a.useEffect)(()=>{console.log("Column Status:",{estimated_revenue_adjusted:_.estimated_revenue_adjusted,visible_columns_count:Object.keys(_).filter(e=>_[e]).length,validation_passed:A.isValid})},[_,A]);const M=(0,a.useRef)(!1);(0,a.useEffect)(()=>{const e=e=>{E&&!e.target.closest(".column-selector-container")&&P(!1)};if(E)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[E]),(0,a.useEffect)(()=>{localStorage.setItem("dashboard_date_range",JSON.stringify(u))},[u]),(0,a.useEffect)(()=>{localStorage.setItem("dashboard_breakdown",p)},[p]),(0,a.useEffect)(()=>{localStorage.setItem("dashboard_hierarchy",f)},[f]),(0,a.useEffect)(()=>{localStorage.setItem("dashboard_column_visibility",JSON.stringify(_)),console.log("\ud83d\udcbe Column visibility saved to localStorage:",Object.keys(_).filter(e=>_[e]).length,"visible columns")},[_]),(0,a.useEffect)(()=>{localStorage.setItem("dashboard_text_filter",x)},[x]),(0,a.useEffect)(()=>{localStorage.setItem("dashboard_breakdown_filters",JSON.stringify(y))},[y]),(0,a.useEffect)(()=>{localStorage.setItem("dashboard_column_order",JSON.stringify(j)),console.log("\ud83d\udcbe Column order saved to localStorage:",j.length,"columns in order")},[j]),(0,a.useEffect)(()=>{localStorage.setItem("dashboard_row_order",JSON.stringify(N))},[N]),(0,a.useEffect)(()=>{localStorage.setItem("dashboard_sort_config",JSON.stringify(O))},[O]),(0,a.useEffect)(()=>{localStorage.setItem("dashboard_data",JSON.stringify(o))},[o]),(0,a.useEffect)(()=>{c&&localStorage.setItem("dashboard_last_updated",c)},[c]);const T=(0,a.useCallback)(e=>{if(!x.trim())return e;const t=x.toLowerCase();return e.reduce((e,r)=>{const n=r.name&&r.name.toLowerCase().includes(t)||r.campaign_name&&r.campaign_name.toLowerCase().includes(t)||r.adset_name&&r.adset_name.toLowerCase().includes(t)||r.ad_name&&r.ad_name.toLowerCase().includes(t),a=r.children?T(r.children):[];return(n||a.length>0)&&e.push(Re(Re({},r),{},{children:a})),e},[])},[x]),D=(0,a.useCallback)(e=>y.enabled&&"all"!==p?e.map(e=>{if(!e.breakdowns||0===e.breakdowns.length)return e;const t=e.breakdowns.map(e=>{let t=e.values;if("spend"===y.type)t=t.filter(e=>(e.spend||0)>=y.minSpend);else if("limit"===y.type){const e=O.column||"spend",r=O.direction||"desc";t=[...t].sort((t,n)=>{const a=t[e]||0,i=n[e]||0;return"desc"===r?i-a:a-i}).slice(0,y.limitCount)}return Re(Re({},e),{},{values:t})});return Re(Re({},e),{},{breakdowns:t})}):e,[y,p,O]),R=(0,a.useMemo)(()=>{if(!o||0===o.length)return[];const e=x?o.filter(e=>T([e]).length>0):o,t=((e,t)=>{if(!t.column)return e;const r=e=>{const n=[...e].sort((e,r)=>{let n=e[t.column],a=r[t.column];if(null==n&&null==a)return 0;if(null==n)return"asc"===t.direction?-1:1;if(null==a)return"asc"===t.direction?1:-1;if("number"===typeof n&&"number"===typeof a)return"asc"===t.direction?n-a:a-n;const i=String(n).toLowerCase(),s=String(a).toLowerCase();return"asc"===t.direction?i.localeCompare(s):s.localeCompare(i)});return n.map(e=>{const n=Re({},e);return e.children&&e.children.length>0&&(n.children=r(e.children)),e.breakdowns&&e.breakdowns.length>0&&(n.breakdowns=e.breakdowns.map(e=>Re(Re({},e),{},{values:[...e.values].sort((e,r)=>{let n=e[t.column],a=r[t.column];if(null==n&&null==a)return 0;if(null==n)return"asc"===t.direction?-1:1;if(null==a)return"asc"===t.direction?1:-1;if("number"===typeof n&&"number"===typeof a)return"asc"===t.direction?n-a:a-n;const i=String(n).toLowerCase(),s=String(a).toLowerCase();return"asc"===t.direction?i.localeCompare(s):s.localeCompare(i)})}))),n})};return r(e)})(D(e),O);return t},[o,x,O,T,D]),I=(0,a.useCallback)(async()=>{n(!0),s(null);try{console.log("\ud83d\udd04 Background refresh - fetching fresh data:",{dateRange:u,breakdown:p,hierarchy:f});const e=await ct.getAnalyticsData({start_date:u.start_date,end_date:u.end_date,breakdown:p,group_by:f,enable_breakdown_mapping:!0});e.success?(l(e.data||[]),d((new Date).toISOString()),e.data&&e.data.length>0&&0===N.length&&!O.column&&S(e.data.map(e=>e.id)),console.log("\u2705 Background refresh completed successfully")):s(e.error||"Failed to fetch analytics data")}catch(i){console.error("Background refresh error:",i),s(i.message||"Failed to refresh dashboard data")}finally{n(!1)}},[u,p,f,N.length]),L=(0,a.useCallback)(async()=>{t(!0),s(null);try{console.log("\ud83d\udd04 Fetching pre-computed analytics data:",{dateRange:u,breakdown:p,hierarchy:f});const t=await ct.getAnalyticsData({start_date:u.start_date,end_date:u.end_date,breakdown:p,group_by:f,enable_breakdown_mapping:!0});var e;if(t.success)l(t.data||[]),d((new Date).toISOString()),t.data&&t.data.length>0&&!O.column&&S(t.data.map(e=>e.id)),console.log("\u2705 Dashboard data loaded successfully"),console.log("\ud83d\udcca Data summary:",{totalRows:(null===(e=t.data)||void 0===e?void 0:e.length)||0,breakdown:p,hierarchy:f});else s(t.error||"Failed to fetch analytics data")}catch(i){console.error("Dashboard refresh error:",i),s(i.message||"Failed to refresh dashboard data")}finally{t(!1)}},[u,p,f]);(0,a.useEffect)(()=>{if(M.current)return;o&&o.length>0?(console.log("\ud83d\udd04 Loading cached data and refreshing in background"),I()):(console.log("\ud83d\udd04 No cached data, performing initial load"),L()),M.current=!0},[I,L]),(0,a.useEffect)(()=>{M.current&&(console.log("\ud83d\udd04 Dashboard parameters changed, refreshing data:",{dateRange:u,breakdown:p,hierarchy:f}),o&&o.length>0?I():L())},[u,p,f,I,L]);return i?(0,dt.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,dt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)(He,{className:"mx-auto h-12 w-12 text-red-500"}),(0,dt.jsx)("h1",{className:"mt-4 text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Dashboard Error"}),(0,dt.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:i}),(0,dt.jsxs)("button",{onClick:()=>{s(null),L()},className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[(0,dt.jsx)(We,{className:"mr-2 h-4 w-4"}),"Retry"]})]})})}):(0,dt.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,dt.jsxs)("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:[(0,dt.jsx)("div",{className:"mb-8",children:(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Campaign Dashboard"}),(0,dt.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Advanced analytics for Meta advertising performance"})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-600 dark:text-gray-400",children:[(0,dt.jsx)($e,{size:14}),(0,dt.jsx)("span",{children:"Sorted by:"}),(0,dt.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:(()=>{if(!O.column)return"None";const e=it.find(e=>e.key===O.column);return e?e.label:O.column})()}),(0,dt.jsxs)("span",{className:"text-gray-500",children:["(","asc"===O.direction?"Low to High":"High to Low",")"]})]}),(0,dt.jsxs)("div",{className:"relative column-selector-container",children:[(0,dt.jsxs)("button",{onClick:()=>P(!E),className:"flex items-center space-x-2 px-3 py-2 text-gray-600 dark:text-gray-300 hover:text-blue-500 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,dt.jsx)(qe,{className:"h-4 w-4"}),(0,dt.jsx)("span",{className:"text-sm",children:"Columns"}),E?(0,dt.jsx)(Ge,{className:"h-3 w-3"}):(0,dt.jsx)(Ve,{className:"h-3 w-3"})]}),E&&(0,dt.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50 max-h-80 overflow-y-auto",children:[(0,dt.jsx)("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700",children:(0,dt.jsxs)("div",{className:"flex space-x-2 mb-2",children:[(0,dt.jsx)("button",{onClick:()=>{const e={};it.forEach(t=>{e[t.key]=!0}),k(e)},className:"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800",children:"Show All"}),(0,dt.jsx)("button",{onClick:()=>{const e=Re({},_);it.forEach(t=>{t.alwaysVisible||(e[t.key]=!1)}),k(e)},className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-500",children:"Hide All"})]})}),(0,dt.jsx)("div",{className:"p-3 space-y-2",children:it.map(e=>(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("input",{type:"checkbox",checked:_[e.key]||!1,onChange:()=>{return t=e.key,void k(e=>{const r=Re(Re({},e),{},{[t]:!e[t]});return console.log("\ud83d\udd04 Column '".concat(t,"' toggled to:"),r[t]),r});var t},disabled:e.alwaysVisible,className:"mr-3 h-4 w-4 text-blue-600 rounded border-gray-300 dark:border-gray-500 focus:ring-blue-500"}),(0,dt.jsxs)("span",{className:"text-sm ".concat(e.alwaysVisible?"text-gray-500 dark:text-gray-400":"text-gray-700 dark:text-gray-300"),children:[e.label,e.alwaysVisible&&(0,dt.jsx)("span",{className:"ml-1 text-xs",children:"(always visible)"})]})]},e.key))})]})]})]})]})}),(0,dt.jsx)("div",{className:"mb-6",children:(0,dt.jsx)(Ct,{dateRange:u,breakdown:p,hierarchy:f,breakdownFilters:y,onDateRangeChange:h,onBreakdownChange:m,onHierarchyChange:g,onBreakdownFiltersChange:v,onRefresh:()=>{o&&o.length>0?I():L()},loading:e,backgroundLoading:r})}),(0,dt.jsx)("div",{className:"mb-6",children:(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsx)(Ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,dt.jsx)("input",{type:"text",placeholder:"Search campaigns, ad sets, or ads...",value:x,onChange:e=>b(e.target.value),className:"pl-10 pr-4 py-3 w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(()=>{const e=o&&0!==o.length?R.reduce((e,t)=>(e.totalSpend+=t.spend||0,e.totalImpressions+=t.impressions||0,e.totalClicks+=t.clicks||0,e.totalRevenue+=t.estimated_revenue_adjusted||t.estimated_revenue_usd||0,e.totalProfit+=t.profit||0,e),{totalSpend:0,totalImpressions:0,totalClicks:0,totalRevenue:0,totalProfit:0}):{};if(!e||0===Object.keys(e).length)return null;const t=e.totalSpend>0?e.totalRevenue/e.totalSpend:0;return(0,dt.jsxs)("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)(Ye,{className:"h-8 w-8 text-blue-500"}),(0,dt.jsxs)("div",{className:"ml-4",children:[(0,dt.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Spend"}),(0,dt.jsxs)("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["$",e.totalSpend.toLocaleString()]})]})]})}),(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)($e,{className:"h-8 w-8 text-green-500"}),(0,dt.jsxs)("div",{className:"ml-4",children:[(0,dt.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Estimated Revenue"}),(0,dt.jsxs)("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["$",e.totalRevenue.toLocaleString()]})]})]})}),(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)(Xe,{className:"h-8 w-8 ".concat(e.totalProfit>=0?"text-green-500":"text-red-500")}),(0,dt.jsxs)("div",{className:"ml-4",children:[(0,dt.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Profit"}),(0,dt.jsxs)("p",{className:"text-2xl font-bold ".concat(e.totalProfit>=0?"text-green-600":"text-red-600"),children:["$",e.totalProfit.toLocaleString()]})]})]})}),(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)(Je,{className:"h-8 w-8 text-purple-500"}),(0,dt.jsxs)("div",{className:"ml-4",children:[(0,dt.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"ROAS"}),(0,dt.jsxs)("p",{className:"text-2xl font-bold ".concat(t>=2?"text-green-600":t>=1?"text-yellow-600":"text-red-600"),children:[t.toFixed(2),"x"]})]})]})})]})})(),(c||r)&&(0,dt.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,dt.jsxs)("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[(0,dt.jsx)(Qe,{className:"mr-2 h-4 w-4"}),"Last updated: ",c?new Date(c).toLocaleString():"Loading..."]}),r&&(0,dt.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-full text-xs border border-blue-200 dark:border-blue-800",children:[(0,dt.jsx)(We,{className:"h-3 w-3 animate-spin"}),(0,dt.jsx)("span",{children:"Refreshing data..."})]})]}),e?(0,dt.jsx)("div",{className:"flex items-center justify-center h-64 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)(We,{className:"mx-auto h-8 w-8 text-blue-500 animate-spin"}),(0,dt.jsx)("p",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-gray-100",children:"Loading dashboard data..."}),(0,dt.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Fetching pre-computed analytics data"})]})}):R.length>0?(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:(0,dt.jsx)(St,{data:R,rowOrder:N,onRowOrderChange:S,columnVisibility:_,columnOrder:j,onColumnOrderChange:w,dashboardParams:{start_date:u.start_date,end_date:u.end_date,breakdown:p,hierarchy:f},sortConfig:O,onSort:e=>{C(t=>{if(t.column===e)return Re(Re({},t),{},{direction:"asc"===t.direction?"desc":"asc"});return{column:e,direction:["impressions","clicks","spend","meta_trials_started","mixpanel_trials_started","meta_purchases","mixpanel_purchases","trial_accuracy_ratio","mixpanel_trials_ended","mixpanel_trials_in_progress","mixpanel_refunds_usd","mixpanel_revenue_usd","mixpanel_revenue_net","mixpanel_conversions_net_refunds","mixpanel_cost_per_trial","mixpanel_cost_per_purchase","meta_cost_per_trial","meta_cost_per_purchase","click_to_trial_rate","trial_conversion_rate","avg_trial_refund_rate","purchase_accuracy_ratio","purchase_refund_rate","estimated_revenue_usd","estimated_revenue_adjusted","profit","estimated_roas","performance_impact_score"].includes(e)?"desc":"asc"}}),S([])}})}):(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8 text-center",children:[(0,dt.jsx)(Ze,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,dt.jsx)("h3",{className:"mt-4 text-lg font-semibold text-gray-900 dark:text-gray-100",children:"No Data Available"}),(0,dt.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400 max-w-md mx-auto",children:x?'No results found for "'.concat(x,'". Try adjusting your search terms.'):'Click "Refresh Data" to load campaign information for the selected date range and settings.'}),!x&&(0,dt.jsx)("button",{onClick:L,disabled:e||r,className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e||r?(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Refreshing..."]}):(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)(We,{className:"mr-2 h-4 w-4"}),"Refresh Data"]})})]})]})})};function Pt(e,t){return function(){return e.apply(t,arguments)}}const{toString:At}=Object.prototype,{getPrototypeOf:Mt}=Object,{iterator:Tt,toStringTag:Dt}=Symbol,Rt=(It=Object.create(null),e=>{const t=At.call(e);return It[t]||(It[t]=t.slice(8,-1).toLowerCase())});var It;const Lt=e=>(e=e.toLowerCase(),t=>Rt(t)===e),Ft=e=>t=>typeof t===e,{isArray:zt}=Array,Ut=Ft("undefined");const Bt=Lt("ArrayBuffer");const Vt=Ft("string"),Ht=Ft("function"),Wt=Ft("number"),$t=e=>null!==e&&"object"===typeof e,qt=e=>{if("object"!==Rt(e))return!1;const t=Mt(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Dt in e)&&!(Tt in e)},Gt=Lt("Date"),Kt=Lt("File"),Yt=Lt("Blob"),Xt=Lt("FileList"),Jt=Lt("URLSearchParams"),[Qt,Zt,er,tr]=["ReadableStream","Request","Response","Headers"].map(Lt);function rr(e,t){let r,n,{allOwnKeys:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),zt(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{const n=a?Object.getOwnPropertyNames(e):Object.keys(e),i=n.length;let s;for(r=0;r<i;r++)s=n[r],t.call(null,e[s],s,e)}}function nr(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,a=r.length;for(;a-- >0;)if(n=r[a],t===n.toLowerCase())return n;return null}const ar="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,ir=e=>!Ut(e)&&e!==ar;const sr=(or="undefined"!==typeof Uint8Array&&Mt(Uint8Array),e=>or&&e instanceof or);var or;const lr=Lt("HTMLFormElement"),cr=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),dr=Lt("RegExp"),ur=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};rr(r,(r,a)=>{let i;!1!==(i=t(r,a,e))&&(n[a]=i||r)}),Object.defineProperties(e,n)};const hr=Lt("AsyncFunction"),pr=(mr="function"===typeof setImmediate,fr=Ht(ar.postMessage),mr?setImmediate:fr?((e,t)=>(ar.addEventListener("message",r=>{let{source:n,data:a}=r;n===ar&&a===e&&t.length&&t.shift()()},!1),r=>{t.push(r),ar.postMessage(e,"*")}))("axios@".concat(Math.random()),[]):e=>setTimeout(e));var mr,fr;const gr="undefined"!==typeof queueMicrotask?queueMicrotask.bind(ar):"undefined"!==typeof process&&process.nextTick||pr,xr={isArray:zt,isArrayBuffer:Bt,isBuffer:function(e){return null!==e&&!Ut(e)&&null!==e.constructor&&!Ut(e.constructor)&&Ht(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Ht(e.append)&&("formdata"===(t=Rt(e))||"object"===t&&Ht(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Bt(e.buffer),t},isString:Vt,isNumber:Wt,isBoolean:e=>!0===e||!1===e,isObject:$t,isPlainObject:qt,isReadableStream:Qt,isRequest:Zt,isResponse:er,isHeaders:tr,isUndefined:Ut,isDate:Gt,isFile:Kt,isBlob:Yt,isRegExp:dr,isFunction:Ht,isStream:e=>$t(e)&&Ht(e.pipe),isURLSearchParams:Jt,isTypedArray:sr,isFileList:Xt,forEach:rr,merge:function e(){const{caseless:t}=ir(this)&&this||{},r={},n=(n,a)=>{const i=t&&nr(r,a)||a;qt(r[i])&&qt(n)?r[i]=e(r[i],n):qt(n)?r[i]=e({},n):zt(n)?r[i]=n.slice():r[i]=n};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&rr(arguments[a],n);return r},extend:function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return rr(t,(t,n)=>{r&&Ht(t)?e[n]=Pt(t,r):e[n]=t},{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let a,i,s;const o={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)s=a[i],n&&!n(s,e,t)||o[s]||(t[s]=e[s],o[s]=!0);e=!1!==r&&Mt(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:Rt,kindOfTest:Lt,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(zt(e))return e;let t=e.length;if(!Wt(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Tt]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:lr,hasOwnProperty:cr,hasOwnProp:cr,reduceDescriptors:ur,freezeMethods:e=>{ur(e,(t,r)=>{if(Ht(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];Ht(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return zt(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:nr,global:ar,isContextDefined:ir,isSpecCompliantForm:function(e){return!!(e&&Ht(e.append)&&"FormData"===e[Dt]&&e[Tt])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if($t(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const a=zt(e)?[]:{};return rr(e,(e,t)=>{const i=r(e,n+1);!Ut(i)&&(a[t]=i)}),t[n]=void 0,a}}return e};return r(e,0)},isAsyncFn:hr,isThenable:e=>e&&($t(e)||Ht(e))&&Ht(e.then)&&Ht(e.catch),setImmediate:pr,asap:gr,isIterable:e=>null!=e&&Ht(e[Tt])};function br(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}xr.inherits(br,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xr.toJSONObject(this.config),code:this.code,status:this.status}}});const yr=br.prototype,vr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{vr[e]={value:e}}),Object.defineProperties(br,vr),Object.defineProperty(yr,"isAxiosError",{value:!0}),br.from=(e,t,r,n,a,i)=>{const s=Object.create(yr);return xr.toFlatObject(e,s,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),br.call(s,e.message,t,r,n,a),s.cause=e,s.name=e.name,i&&Object.assign(s,i),s};const _r=br;function kr(e){return xr.isPlainObject(e)||xr.isArray(e)}function jr(e){return xr.endsWith(e,"[]")?e.slice(0,-2):e}function wr(e,t,r){return e?e.concat(t).map(function(e,t){return e=jr(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const Nr=xr.toFlatObject(xr,{},null,function(e){return/^is[A-Z]/.test(e)});const Sr=function(e,t,r){if(!xr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=xr.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!xr.isUndefined(t[e])})).metaTokens,a=r.visitor||c,i=r.dots,s=r.indexes,o=(r.Blob||"undefined"!==typeof Blob&&Blob)&&xr.isSpecCompliantForm(t);if(!xr.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(xr.isDate(e))return e.toISOString();if(xr.isBoolean(e))return e.toString();if(!o&&xr.isBlob(e))throw new _r("Blob is not supported. Use a Buffer instead.");return xr.isArrayBuffer(e)||xr.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,a){let o=e;if(e&&!a&&"object"===typeof e)if(xr.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(xr.isArray(e)&&function(e){return xr.isArray(e)&&!e.some(kr)}(e)||(xr.isFileList(e)||xr.endsWith(r,"[]"))&&(o=xr.toArray(e)))return r=jr(r),o.forEach(function(e,n){!xr.isUndefined(e)&&null!==e&&t.append(!0===s?wr([r],n,i):null===s?r:r+"[]",l(e))}),!1;return!!kr(e)||(t.append(wr(a,r,i),l(e)),!1)}const d=[],u=Object.assign(Nr,{defaultVisitor:c,convertValue:l,isVisitable:kr});if(!xr.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!xr.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+n.join("."));d.push(r),xr.forEach(r,function(r,i){!0===(!(xr.isUndefined(r)||null===r)&&a.call(t,r,xr.isString(i)?i.trim():i,n,u))&&e(r,n?n.concat(i):[i])}),d.pop()}}(e),t};function Or(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Cr(e,t){this._pairs=[],e&&Sr(e,this,t)}const Er=Cr.prototype;Er.append=function(e,t){this._pairs.push([e,t])},Er.toString=function(e){const t=e?function(t){return e.call(this,t,Or)}:Or;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Pr=Cr;function Ar(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Mr(e,t,r){if(!t)return e;const n=r&&r.encode||Ar;xr.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(i=a?a(t,r):xr.isURLSearchParams(t)?t.toString():new Pr(t,r).toString(n),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const Tr=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){xr.forEach(this.handlers,function(t){null!==t&&e(t)})}},Dr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Rr={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Pr,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Ir="undefined"!==typeof window&&"undefined"!==typeof document,Lr="object"===typeof navigator&&navigator||void 0,Fr=Ir&&(!Lr||["ReactNative","NativeScript","NS"].indexOf(Lr.product)<0),zr="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Ur=Ir&&window.location.href||"http://localhost",Br=Re(Re({},e),Rr);const Vr=function(e){function t(e,r,n,a){let i=e[a++];if("__proto__"===i)return!0;const s=Number.isFinite(+i),o=a>=e.length;if(i=!i&&xr.isArray(n)?n.length:i,o)return xr.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!s;n[i]&&xr.isObject(n[i])||(n[i]=[]);return t(e,r,n[i],a)&&xr.isArray(n[i])&&(n[i]=function(e){const t={},r=Object.keys(e);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],t[i]=e[i];return t}(n[i])),!s}if(xr.isFormData(e)&&xr.isFunction(e.entries)){const r={};return xr.forEachEntry(e,(e,n)=>{t(function(e){return xr.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,r,0)}),r}return null};const Hr={transitional:Dr,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,a=xr.isObject(e);a&&xr.isHTMLForm(e)&&(e=new FormData(e));if(xr.isFormData(e))return n?JSON.stringify(Vr(e)):e;if(xr.isArrayBuffer(e)||xr.isBuffer(e)||xr.isStream(e)||xr.isFile(e)||xr.isBlob(e)||xr.isReadableStream(e))return e;if(xr.isArrayBufferView(e))return e.buffer;if(xr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Sr(e,new Br.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return Br.isNode&&xr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=xr.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Sr(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||n?(t.setContentType("application/json",!1),function(e,t,r){if(xr.isString(e))try{return(t||JSON.parse)(e),xr.trim(e)}catch(CF){if("SyntaxError"!==CF.name)throw CF}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Hr.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(xr.isResponse(e)||xr.isReadableStream(e))return e;if(e&&xr.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(CF){if(r){if("SyntaxError"===CF.name)throw _r.from(CF,_r.ERR_BAD_RESPONSE,this,null,this.response);throw CF}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Br.classes.FormData,Blob:Br.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xr.forEach(["delete","get","head","post","put","patch"],e=>{Hr.headers[e]={}});const Wr=Hr,$r=xr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),qr=Symbol("internals");function Gr(e){return e&&String(e).trim().toLowerCase()}function Kr(e){return!1===e||null==e?e:xr.isArray(e)?e.map(Kr):String(e)}function Yr(e,t,r,n,a){return xr.isFunction(n)?n.call(this,t,r):(a&&(t=r),xr.isString(t)?xr.isString(n)?-1!==t.indexOf(n):xr.isRegExp(n)?n.test(t):void 0:void 0)}class Xr{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function a(e,t,r){const a=Gr(t);if(!a)throw new Error("header name must be a non-empty string");const i=xr.findKey(n,a);(!i||void 0===n[i]||!0===r||void 0===r&&!1!==n[i])&&(n[i||t]=Kr(e))}const i=(e,t)=>xr.forEach(e,(e,r)=>a(e,r,t));if(xr.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(xr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let r,n,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),r=e.substring(0,a).trim().toLowerCase(),n=e.substring(a+1).trim(),!r||t[r]&&$r[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t})(e),t);else if(xr.isObject(e)&&xr.isIterable(e)){let r,n,a={};for(const t of e){if(!xr.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[n=t[0]]=(r=a[n])?xr.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}i(a,t)}else null!=e&&a(t,e,r);return this}get(e,t){if(e=Gr(e)){const r=xr.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(xr.isFunction(t))return t.call(this,e,r);if(xr.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Gr(e)){const r=xr.findKey(this,e);return!(!r||void 0===this[r]||t&&!Yr(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function a(e){if(e=Gr(e)){const a=xr.findKey(r,e);!a||t&&!Yr(0,r[a],a,t)||(delete r[a],n=!0)}}return xr.isArray(e)?e.forEach(a):a(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const a=t[r];e&&!Yr(0,this[a],a,e,!0)||(delete this[a],n=!0)}return n}normalize(e){const t=this,r={};return xr.forEach(this,(n,a)=>{const i=xr.findKey(r,a);if(i)return t[i]=Kr(n),void delete t[a];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(a):String(a).trim();s!==a&&delete t[a],t[s]=Kr(n),r[s]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return xr.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&xr.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,r]=e;return t+": "+r}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[qr]=this[qr]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=Gr(e);t[n]||(!function(e,t){const r=xr.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,a){return this[n].call(this,t,e,r,a)},configurable:!0})})}(r,e),t[n]=!0)}return xr.isArray(e)?e.forEach(n):n(e),this}}Xr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),xr.reduceDescriptors(Xr.prototype,(e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[n]=e}}}),xr.freezeMethods(Xr);const Jr=Xr;function Qr(e,t){const r=this||Wr,n=t||r,a=Jr.from(n.headers);let i=n.data;return xr.forEach(e,function(e){i=e.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function Zr(e){return!(!e||!e.__CANCEL__)}function en(e,t,r){_r.call(this,null==e?"canceled":e,_r.ERR_CANCELED,t,r),this.name="CanceledError"}xr.inherits(en,_r,{__CANCEL__:!0});const tn=en;function rn(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new _r("Request failed with status code "+r.status,[_r.ERR_BAD_REQUEST,_r.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const nn=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a,i=0,s=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=n[s];a||(a=l),r[i]=o,n[i]=l;let d=s,u=0;for(;d!==i;)u+=r[d++],d%=e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),l-a<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}};const an=function(e,t){let r,n,a=0,i=1e3/t;const s=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();a=i,r=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-a;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=i?s(l,e):(r=l,n||(n=setTimeout(()=>{n=null,s(r)},i-t)))},()=>r&&s(r)]},sn=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const a=nn(50,250);return an(r=>{const i=r.loaded,s=r.lengthComputable?r.total:void 0,o=i-n,l=a(o);n=i;e({loaded:i,total:s,progress:s?i/s:void 0,bytes:o,rate:l||void 0,estimated:l&&s&&i<=s?(s-i)/l:void 0,event:r,lengthComputable:null!=s,[t?"download":"upload"]:!0})},r)},on=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},ln=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return xr.asap(()=>e(...r))},cn=Br.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Br.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Br.origin),Br.navigator&&/(msie|trident)/i.test(Br.navigator.userAgent)):()=>!0,dn=Br.hasStandardBrowserEnv?{write(e,t,r,n,a,i){const s=[e+"="+encodeURIComponent(t)];xr.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),xr.isString(n)&&s.push("path="+n),xr.isString(a)&&s.push("domain="+a),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function un(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const hn=e=>e instanceof Jr?Re({},e):e;function pn(e,t){t=t||{};const r={};function n(e,t,r,n){return xr.isPlainObject(e)&&xr.isPlainObject(t)?xr.merge.call({caseless:n},e,t):xr.isPlainObject(t)?xr.merge({},t):xr.isArray(t)?t.slice():t}function a(e,t,r,a){return xr.isUndefined(t)?xr.isUndefined(e)?void 0:n(void 0,e,0,a):n(e,t,0,a)}function i(e,t){if(!xr.isUndefined(t))return n(void 0,t)}function s(e,t){return xr.isUndefined(t)?xr.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function o(r,a,i){return i in t?n(r,a):i in e?n(void 0,r):void 0}const l={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(e,t,r)=>a(hn(e),hn(t),0,!0)};return xr.forEach(Object.keys(Object.assign({},e,t)),function(n){const i=l[n]||a,s=i(e[n],t[n],n);xr.isUndefined(s)&&i!==o||(r[n]=s)}),r}const mn=e=>{const t=pn({},e);let r,{data:n,withXSRFToken:a,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:l}=t;if(t.headers=o=Jr.from(o),t.url=Mr(un(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),xr.isFormData(n))if(Br.hasStandardBrowserEnv||Br.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(r=o.getContentType())){const[e,...t]=r?r.split(";").map(e=>e.trim()).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(Br.hasStandardBrowserEnv&&(a&&xr.isFunction(a)&&(a=a(t)),a||!1!==a&&cn(t.url))){const e=i&&s&&dn.read(s);e&&o.set(i,e)}return t},fn="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const n=mn(e);let a=n.data;const i=Jr.from(n.headers).normalize();let s,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:p}=n;function m(){c&&c(),d&&d(),n.cancelToken&&n.cancelToken.unsubscribe(s),n.signal&&n.signal.removeEventListener("abort",s)}let f=new XMLHttpRequest;function g(){if(!f)return;const n=Jr.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());rn(function(e){t(e),m()},function(e){r(e),m()},{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f}),f=null}f.open(n.method.toUpperCase(),n.url,!0),f.timeout=n.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(r(new _r("Request aborted",_r.ECONNABORTED,e,f)),f=null)},f.onerror=function(){r(new _r("Network Error",_r.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const a=n.transitional||Dr;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new _r(t,a.clarifyTimeoutError?_r.ETIMEDOUT:_r.ECONNABORTED,e,f)),f=null},void 0===a&&i.setContentType(null),"setRequestHeader"in f&&xr.forEach(i.toJSON(),function(e,t){f.setRequestHeader(t,e)}),xr.isUndefined(n.withCredentials)||(f.withCredentials=!!n.withCredentials),u&&"json"!==u&&(f.responseType=n.responseType),p&&([l,d]=sn(p,!0),f.addEventListener("progress",l)),h&&f.upload&&([o,c]=sn(h),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(s=t=>{f&&(r(!t||t.type?new tn(null,e,f):t),f.abort(),f=null)},n.cancelToken&&n.cancelToken.subscribe(s),n.signal&&(n.signal.aborted?s():n.signal.addEventListener("abort",s)));const x=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);x&&-1===Br.protocols.indexOf(x)?r(new _r("Unsupported protocol "+x+":",_r.ERR_BAD_REQUEST,e)):f.send(a||null)})},gn=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const a=function(e){if(!r){r=!0,s();const t=e instanceof Error?e:this.reason;n.abort(t instanceof _r?t:new tn(t instanceof Error?t.message:t))}};let i=t&&setTimeout(()=>{i=null,a(new _r("timeout ".concat(t," of ms exceeded"),_r.ETIMEDOUT))},t);const s=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:o}=n;return o.unsubscribe=()=>xr.asap(s),o}};function xn(e,t){this.v=e,this.k=t}function bn(e){return function(){return new yn(e.apply(this,arguments))}}function yn(e){var t,r;function n(t,r){try{var i=e[t](r),s=i.value,o=s instanceof xn;Promise.resolve(o?s.v:s).then(function(r){if(o){var l="return"===t?"return":"next";if(!s.k||r.done)return n(l,r);r=e[l](r).value}a(i.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,a){return new Promise(function(i,s){var o={key:e,arg:a,resolve:i,reject:s,next:null};r?r=r.next=o:(t=r=o,n(e,a))})},"function"!=typeof e.return&&(this.return=void 0)}function vn(e){return new xn(e,0)}function _n(e){var t={},r=!1;function n(t,n){return r=!0,n=new Promise(function(r){r(e[t](n))}),{done:!1,value:new xn(n,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):n("return",e)}),t}function kn(e){var t,r,n,a=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new jn(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function jn(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return jn=function(e){this.s=e,this.n=e.next},jn.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new jn(e)}yn.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},yn.prototype.next=function(e){return this._invoke("next",e)},yn.prototype.throw=function(e){return this._invoke("throw",e)},yn.prototype.return=function(e){return this._invoke("return",e)};const wn=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,a=0;for(;a<r;)n=a+t,yield e.slice(a,n),a=n},Nn=function(){var e=bn(function*(e,t){var r,n=!1,a=!1;try{for(var i,s=kn(Sn(e));n=!(i=yield vn(s.next())).done;n=!1){const e=i.value;yield*_n(kn(wn(e,t)))}}catch(o){a=!0,r=o}finally{try{n&&null!=s.return&&(yield vn(s.return()))}finally{if(a)throw r}}});return function(t,r){return e.apply(this,arguments)}}(),Sn=function(){var e=bn(function*(e){if(e[Symbol.asyncIterator])return void(yield*_n(kn(e)));const t=e.getReader();try{for(;;){const{done:e,value:r}=yield vn(t.read());if(e)break;yield r}}finally{yield vn(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),On=(e,t,r,n)=>{const a=Nn(e,t);let i,s=0,o=e=>{i||(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await a.next();if(t)return o(),void e.close();let i=n.byteLength;if(r){let e=s+=i;r(e)}e.enqueue(new Uint8Array(n))}catch(t){throw o(t),t}},cancel:e=>(o(e),a.return())},{highWaterMark:2})},Cn="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,En=Cn&&"function"===typeof ReadableStream,Pn=Cn&&("function"===typeof TextEncoder?(An=new TextEncoder,e=>An.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var An;const Mn=function(e){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return!!e(...r)}catch(CF){return!1}},Tn=En&&Mn(()=>{let e=!1;const t=new Request(Br.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Dn=En&&Mn(()=>xr.isReadableStream(new Response("").body)),Rn={stream:Dn&&(e=>e.body)};var In;Cn&&(In=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Rn[e]&&(Rn[e]=xr.isFunction(In[e])?t=>t[e]():(t,r)=>{throw new _r("Response type '".concat(e,"' is not supported"),_r.ERR_NOT_SUPPORT,r)})}));const Ln=async(e,t)=>{const r=xr.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(xr.isBlob(e))return e.size;if(xr.isSpecCompliantForm(e)){const t=new Request(Br.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return xr.isArrayBufferView(e)||xr.isArrayBuffer(e)?e.byteLength:(xr.isURLSearchParams(e)&&(e+=""),xr.isString(e)?(await Pn(e)).byteLength:void 0)})(t):r},Fn=Cn&&(async e=>{let{url:t,method:r,data:n,signal:a,cancelToken:i,timeout:s,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:h}=mn(e);c=c?(c+"").toLowerCase():"text";let p,m=gn([a,i&&i.toAbortSignal()],s);const f=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let g;try{if(l&&Tn&&"get"!==r&&"head"!==r&&0!==(g=await Ln(d,n))){let e,r=new Request(t,{method:"POST",body:n,duplex:"half"});if(xr.isFormData(n)&&(e=r.headers.get("content-type"))&&d.setContentType(e),r.body){const[e,t]=on(g,sn(ln(l)));n=On(r.body,65536,e,t)}}xr.isString(u)||(u=u?"include":"omit");const a="credentials"in Request.prototype;p=new Request(t,Re(Re({},h),{},{signal:m,method:r.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:a?u:void 0}));let i=await fetch(p,h);const s=Dn&&("stream"===c||"response"===c);if(Dn&&(o||s&&f)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=i[t]});const t=xr.toFiniteNumber(i.headers.get("content-length")),[r,n]=o&&on(t,sn(ln(o),!0))||[];i=new Response(On(i.body,65536,r,()=>{n&&n(),f&&f()}),e)}c=c||"text";let x=await Rn[xr.findKey(Rn,c)||"text"](i,e);return!s&&f&&f(),await new Promise((t,r)=>{rn(t,r,{data:x,headers:Jr.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:p})})}catch(x){if(f&&f(),x&&"TypeError"===x.name&&/Load failed|fetch/i.test(x.message))throw Object.assign(new _r("Network Error",_r.ERR_NETWORK,e,p),{cause:x.cause||x});throw _r.from(x,x&&x.code,e,p)}}),zn={http:null,xhr:fn,fetch:Fn};xr.forEach(zn,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(CF){}Object.defineProperty(e,"adapterName",{value:t})}});const Un=e=>"- ".concat(e),Bn=e=>xr.isFunction(e)||null===e||!1===e,Vn=e=>{e=xr.isArray(e)?e:[e];const{length:t}=e;let r,n;const a={};for(let i=0;i<t;i++){let t;if(r=e[i],n=r,!Bn(r)&&(n=zn[(t=String(r)).toLowerCase()],void 0===n))throw new _r("Unknown adapter '".concat(t,"'"));if(n)break;a[t||"#"+i]=n}if(!n){const e=Object.entries(a).map(e=>{let[t,r]=e;return"adapter ".concat(t," ")+(!1===r?"is not supported by the environment":"is not available in the build")});let r=t?e.length>1?"since :\n"+e.map(Un).join("\n"):" "+Un(e[0]):"as no adapter specified";throw new _r("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return n};function Hn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new tn(null,e)}function Wn(e){Hn(e),e.headers=Jr.from(e.headers),e.data=Qr.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Vn(e.adapter||Wr.adapter)(e).then(function(t){return Hn(e),t.data=Qr.call(e,e.transformResponse,t),t.headers=Jr.from(t.headers),t},function(t){return Zr(t)||(Hn(e),t&&t.response&&(t.response.data=Qr.call(e,e.transformResponse,t.response),t.response.headers=Jr.from(t.response.headers))),Promise.reject(t)})}const $n="1.10.0",qn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{qn[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Gn={};qn.transitional=function(e,t,r){function n(e,t){return"[Axios v"+$n+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,a,i)=>{if(!1===e)throw new _r(n(a," has been removed"+(t?" in "+t:"")),_r.ERR_DEPRECATED);return t&&!Gn[a]&&(Gn[a]=!0,console.warn(n(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,a,i)}},qn.spelling=function(e){return(t,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(e)),!0)};const Kn={assertOptions:function(e,t,r){if("object"!==typeof e)throw new _r("options must be an object",_r.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],s=t[i];if(s){const t=e[i],r=void 0===t||s(t,i,e);if(!0!==r)throw new _r("option "+i+" must be "+r,_r.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new _r("Unknown option "+i,_r.ERR_BAD_OPTION)}},validators:qn},Yn=Kn.validators;class Xn{constructor(e){this.defaults=e||{},this.interceptors={request:new Tr,response:new Tr}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(CF){}}throw r}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=pn(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:a}=t;void 0!==r&&Kn.assertOptions(r,{silentJSONParsing:Yn.transitional(Yn.boolean),forcedJSONParsing:Yn.transitional(Yn.boolean),clarifyTimeoutError:Yn.transitional(Yn.boolean)},!1),null!=n&&(xr.isFunction(n)?t.paramsSerializer={serialize:n}:Kn.assertOptions(n,{encode:Yn.function,serialize:Yn.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Kn.assertOptions(t,{baseUrl:Yn.spelling("baseURL"),withXsrfToken:Yn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=a&&xr.merge(a.common,a[t.method]);a&&xr.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=Jr.concat(i,a);const s=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,s.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!o){const e=[Wn.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=s.length;let h=t;for(u=0;u<d;){const e=s[u++],t=s[u++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=Wn.call(this,h)}catch(p){return Promise.reject(p)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return Mr(un((e=pn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}xr.forEach(["delete","get","head","options"],function(e){Xn.prototype[e]=function(t,r){return this.request(pn(r||{},{method:e,url:t,data:(r||{}).data}))}}),xr.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,a){return this.request(pn(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}Xn.prototype[e]=t(),Xn.prototype[e+"Form"]=t(!0)});const Jn=Xn;class Qn{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,a){r.reason||(r.reason=new tn(e,n,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Qn(function(t){e=t});return{token:t,cancel:e}}}const Zn=Qn;const ea={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ea).forEach(e=>{let[t,r]=e;ea[r]=t});const ta=ea;const ra=function e(t){const r=new Jn(t),n=Pt(Jn.prototype.request,r);return xr.extend(n,Jn.prototype,r,{allOwnKeys:!0}),xr.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(pn(t,r))},n}(Wr);ra.Axios=Jn,ra.CanceledError=tn,ra.CancelToken=Zn,ra.isCancel=Zr,ra.VERSION=$n,ra.toFormData=Sr,ra.AxiosError=_r,ra.Cancel=ra.CanceledError,ra.all=function(e){return Promise.all(e)},ra.spread=function(e){return function(t){return e.apply(null,t)}},ra.isAxiosError=function(e){return xr.isObject(e)&&!0===e.isAxiosError},ra.mergeConfig=pn,ra.AxiosHeaders=Jr,ra.formToJSON=e=>Vr(xr.isHTMLForm(e)?new FormData(e):e),ra.getAdapter=Vn,ra.HttpStatusCode=ta,ra.default=ra;const na=ra.create({baseURL:"http://localhost:5001",headers:{"Content-Type":"application/json"},timeout:6e5,maxContentLength:524288e3,maxBodyLength:524288e3});na.interceptors.response.use(e=>{if(e.data){const t=JSON.stringify(e.data).length;t>10485760&&console.warn("Large API response: ".concat((t/1048576).toFixed(2)," MB"))}return e},e=>{var t,r;return("ERR_INSUFFICIENT_RESOURCES"===e.code||null!==(t=e.message)&&void 0!==t&&t.includes("out of memory")||null!==(r=e.message)&&void 0!==r&&r.includes("Maximum call stack"))&&(console.error("Response too large for browser to handle:",e),e.message="Response is too large for your browser to handle. Please use debug mode or reduce the date range."),Promise.reject(e)});const aa=async()=>{try{return(await na.get("/api/mixpanel/debug/sync-ts")).data}catch(e){throw console.error("Error fetching Mixpanel sync timestamp:",e),e}},ia=async()=>{try{return(await na.post("/api/mixpanel/debug/sync-ts/reset")).data}catch(e){throw console.error("Error resetting Mixpanel sync timestamp:",e),e}},sa=async()=>{try{return(await na.get("/api/mixpanel/debug/latest-processed-date")).data}catch(e){throw console.error("Error fetching latest processed date:",e),e}},oa=async()=>{try{return(await na.post("/api/mixpanel/debug/database/reset")).data}catch(e){throw console.error("Error resetting Mixpanel database:",e),e}},la=async()=>{try{return(await na.post("/api/mixpanel/debug/data/refresh")).data}catch(e){throw console.error("Error refreshing Mixpanel data:",e),e}},ca=async e=>{try{return(await na.post("/api/mixpanel/process/start",e)).data}catch(t){throw console.error("Error starting Mixpanel processing:",t),t}},da=async()=>{try{return(await na.get("/api/mixpanel/process/status")).data}catch(e){throw console.error("Error fetching process status:",e),e}},ua=async()=>{try{return(await na.post("/api/mixpanel/process/cancel")).data}catch(e){throw console.error("Error canceling processing:",e),e}},ha=async e=>{try{return(await na.get("/api/mixpanel/debug/test-db-events",{params:e?{distinct_id:e}:{}})).data}catch(t){throw console.error("Error fetching test DB events:",t),t}},pa=async e=>{try{return(await na.post("/api/meta/fetch",e)).data}catch(t){throw console.error("Error fetching Meta API data:",t),t}},ma=async e=>{try{return(await na.get("/api/meta/job/".concat(e,"/status"))).data}catch(t){throw console.error("Error checking Meta job status:",t),t}},fa=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{return(await na.get("/api/meta/job/".concat(e,"/results"),{params:{use_file_url:t}})).data}catch(r){throw console.error("Error getting Meta job results:",r),r}},ga=async e=>{try{return(await na.post("/api/cohort-analysis",e)).data}catch(n){var t,r;throw console.error("Error analyzing cohort data:",(null===(t=n.response)||void 0===t?void 0:t.data)||n.message),(null===(r=n.response)||void 0===r?void 0:r.data)||n}},xa=async e=>{try{console.log("[V3-Refactored] Sending cohort analysis request to V3 Refactored API:",e);const t=await na.post("/api/v3/cohort/analyze-refactored",e);return console.log("[V3-Refactored] Received response from V3 Refactored API:",t.data),t.data}catch(n){var t,r;throw console.error("Error analyzing cohort data with V3 Refactored API:",(null===(t=n.response)||void 0===t?void 0:t.data)||n.message),(null===(r=n.response)||void 0===r?void 0:r.data)||n}},ba=async(e,t)=>{try{console.log("\ud83d\ude80\ud83d\ude80\ud83d\ude80 [V3-REFACTORED API] CALLING runV3RefactoredStageAnalysis for stage: ".concat(t)),console.log("\ud83d\ude80\ud83d\ude80\ud83d\ude80 [V3-REFACTORED API] Will POST to: /api/v3/cohort/analyze-refactored"),console.log("\ud83d\ude80\ud83d\ude80\ud83d\ude80 [V3-REFACTORED API] Filters:",e);const r=Re(Re({},e),{},{debug_mode:!0,debug_stage:t,pipeline_version:"3.0.0_refactored"});console.log("\ud83d\ude80\ud83d\ude80\ud83d\ude80 [V3-REFACTORED API] Final payload:",r);const n=await na.post("/api/v3/cohort/analyze-refactored",r);return console.log("\ud83d\ude80\ud83d\ude80\ud83d\ude80 [V3-REFACTORED API] SUCCESS! Received response:",n.data),n.data}catch(a){var r,n;throw console.error("\ud83d\udea8\ud83d\udea8\ud83d\udea8 [V3-REFACTORED API] ERROR in stage ".concat(t," analysis:"),(null===(r=a.response)||void 0===r?void 0:r.data)||a.message),(null===(n=a.response)||void 0===n?void 0:n.data)||a}},ya=async e=>{try{console.log("[DEBUG] getCohortUserTimeline called with filters:",e);const t=e.optional_filters||[];let r={},n=[];if(t.length>0){const e=t.filter(e=>"user"===e.property_source),a=t.filter(e=>"event"===e.property_source);r=e.length>0?e[0]:{},n=a}else r=e.primary_user_filter||{},n=e.secondary_filters||[];const a={date_from:e.date_from_str,date_to:e.date_to_str,primary_user_filter:r,secondary_filters:n,config:{}};console.log("[DEBUG] getCohortUserTimeline sending payload:",a);const i=await na.post("/api/cohort-pipeline/timeline",a);return console.log("[DEBUG] getCohortUserTimeline received response:",i.data),i.data}catch(n){var t,r;throw console.error("Error fetching cohort user timeline:",(null===(t=n.response)||void 0===t?void 0:t.data)||n.message),console.error("[DEBUG] getCohortUserTimeline full error:",n),(null===(r=n.response)||void 0===r?void 0:r.data)||n}},va=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{var n;console.log("[DEBUG] getUserEventRevenueTimeline called with filters:",e,"distinctId:",t,"productId:",r);const a={date_from_str:e.date_from_str,date_to_str:e.date_to_str,user_filters:[]};e.optional_filters&&e.optional_filters.length>0?a.user_filters=e.optional_filters.filter(e=>"user"===e.property_source):e.primary_user_filter&&e.primary_user_filter.property_name&&(a.user_filters=[{property_name:e.primary_user_filter.property_name,property_values:e.primary_user_filter.property_values,property_source:"user"}]),t&&(a.distinct_id=t),r&&(a.product_id=r),console.log("[DEBUG] getUserEventRevenueTimeline sending V3 payload:",a);const i=await na.post("/api/v3/cohort/analyze-refactored",a);console.log("[DEBUG] getUserEventRevenueTimeline received V3 response:",i.data);const s=i.data,o=null===s||void 0===s||null===(n=s.stage_results)||void 0===n?void 0:n.stage3;if(!o||!o.timeline_results)throw new Error("Invalid V3 response format");const l=o.timeline_results,c={dates:l.dates||[],event_rows:{},estimate_rows:{},arpc_per_product:l.arpc_per_product||{},available_users:Object.keys(l.user_daily_metrics||{}),available_products:l.available_products||[]};l.timeline_data&&c.dates.forEach(e=>{const t=l.timeline_data[e]||{};c.event_rows.trial_started||(c.event_rows.trial_started={}),c.event_rows.trial_pending||(c.event_rows.trial_pending={}),c.event_rows.trial_ended||(c.event_rows.trial_ended={}),c.event_rows.trial_converted||(c.event_rows.trial_converted={}),c.event_rows.trial_canceled||(c.event_rows.trial_canceled={}),c.event_rows.initial_purchase||(c.event_rows.initial_purchase={}),c.event_rows.subscription_active||(c.event_rows.subscription_active={}),c.event_rows.subscription_cancelled||(c.event_rows.subscription_cancelled={}),c.event_rows.refund||(c.event_rows.refund={}),c.event_rows.trial_started[e]=t.trial_started||0,c.event_rows.trial_pending[e]=t.trial_pending||0,c.event_rows.trial_ended[e]=t.trial_ended||0,c.event_rows.trial_converted[e]=t.trial_converted||0,c.event_rows.trial_canceled[e]=t.trial_cancelled||0,c.event_rows.initial_purchase[e]=t.initial_purchase||0,c.event_rows.subscription_active[e]=t.subscription_active||0,c.event_rows.subscription_cancelled[e]=t.subscription_cancelled||0,c.event_rows.refund[e]=t.refund_count||0,c.estimate_rows.current_revenue||(c.estimate_rows.current_revenue={}),c.estimate_rows.estimated_revenue||(c.estimate_rows.estimated_revenue={}),c.estimate_rows.estimated_net_revenue||(c.estimate_rows.estimated_net_revenue={}),c.estimate_rows.current_revenue[e]=t.revenue||0,c.estimate_rows.estimated_revenue[e]=t.estimated_revenue||0,c.estimate_rows.estimated_net_revenue[e]=t.estimated_revenue||0}),c.event_rows.cumulative_initial_purchase={};let d=0;return c.dates.forEach(e=>{d+=c.event_rows.initial_purchase[e]||0,c.event_rows.cumulative_initial_purchase[e]=d}),console.log("[DEBUG] getUserEventRevenueTimeline converted to legacy format:",c),c}catch(a){throw console.error("getUserEventRevenueTimeline error:",a),a}},_a=async()=>{try{return(await na.get("/api/cohort_analyzer/discoverable_properties")).data}catch(r){var e,t;throw console.error("Error fetching discoverable cohort properties:",(null===(e=r.response)||void 0===e?void 0:e.data)||r.message),(null===(t=r.response)||void 0===t?void 0:t.data)||r}},ka=async(e,t)=>{try{return(await na.get("/api/cohort_analyzer/property_values",{params:{property_key:e,property_source:t}})).data}catch(a){var r,n;throw console.error("Error fetching values for ".concat(e," (").concat(t,"):"),(null===(r=a.response)||void 0===r?void 0:r.data)||a.message),(null===(n=a.response)||void 0===n?void 0:n.data)||a}},ja=async()=>{try{return(await na.post("/api/cohort_analyzer/trigger_discovery")).data}catch(r){var e,t;throw console.error("Error triggering cohort property discovery:",(null===(e=r.response)||void 0===e?void 0:e.data)||r.message),(null===(t=r.response)||void 0===t?void 0:t.data)||r}},wa=async()=>{try{return(await na.post("/api/cohort_analyzer/enable_properties")).data}catch(r){var e,t;throw console.error("Error enabling cohort properties:",(null===(e=r.response)||void 0===e?void 0:e.data)||r.message),(null===(t=r.response)||void 0===t?void 0:t.data)||r}},Na=async()=>{try{return(await na.get("/api/cohort_analyzer/discovery_status")).data}catch(r){var e,t;throw console.error("Error checking property discovery status:",(null===(e=r.response)||void 0===e?void 0:e.data)||r.message),(null===(t=r.response)||void 0===t?void 0:t.data)||r}},Sa=async()=>{try{return(await na.get("/api/mixpanel/debug/database-stats")).data}catch(e){throw console.error("Error fetching Mixpanel database statistics:",e),e}},Oa=async e=>{try{return(await na.get("/api/mixpanel/debug/user-events",{params:{user_id:e}})).data}catch(t){throw console.error("Error fetching user events:",t),t}},Ca=async e=>{try{return(await na.post("/api/meta/historical/start",e)).data}catch(t){throw console.error("Error starting historical collection:",t),t}},Ea=async e=>{try{return(await na.get("/api/meta/historical/jobs/".concat(e,"/status"))).data}catch(t){throw console.error("Error getting job status:",t),t}},Pa=async e=>{try{return(await na.post("/api/meta/historical/jobs/".concat(e,"/cancel"))).data}catch(t){throw console.error("Error cancelling job:",t),t}},Aa=async e=>{try{return(await na.get("/api/meta/historical/coverage",{params:e})).data}catch(t){throw console.error("Error getting data coverage:",t),t}},Ma=async e=>{try{return(await na.get("/api/meta/historical/missing-dates",{params:e})).data}catch(t){throw console.error("Error getting missing dates:",t),t}},Ta=async e=>{try{return(await na.delete("/api/meta/historical/configurations/".concat(e))).data}catch(t){throw console.error("Error deleting historical configuration:",t),t}},Da=async()=>{try{return(await na.get("/api/meta/historical/configurations")).data}catch(e){throw console.error("Error getting configurations:",e),e}},Ra=async e=>{try{return(await na.get("/api/meta/historical/export",{params:e})).data}catch(t){throw console.error("Error exporting data:",t),t}},Ia=async()=>{try{return(await na.get("/api/meta/action-mappings")).data}catch(e){throw console.error("Error getting action mappings:",e),e}},La=async e=>{try{return(await na.post("/api/meta/action-mappings",{mappings:e})).data}catch(t){throw console.error("Error saving action mappings:",t),t}},Fa=async()=>{try{return(await na.get("/api/meta/historical/tables/overview")).data}catch(e){throw console.error("Error getting tables overview:",e),e}},za=async e=>{try{return(await na.get("/api/meta/historical/tables/".concat(e,"/aggregated"))).data}catch(t){throw console.error("Error getting aggregated data for ".concat(e,":"),t),t}},Ua=async e=>{try{return(await na.post("/api/meta/update-table",e)).data}catch(t){throw console.error("Error updating Meta table:",t),t}},Ba=async(e,t)=>{try{return(await na.delete("/api/meta/historical/tables/".concat(e,"/date/").concat(t))).data}catch(r){throw console.error("Error deleting date ".concat(t," from table ").concat(e,":"),r),r}},Va=e=>{try{return"undefined"!==typeof window&&window.localStorage?localStorage.getItem(e):null}catch(t){return console.error("Error accessing localStorage:",t),null}},Ha=()=>{const[e,t]=(0,a.useState)(""),[r,n]=(0,a.useState)(null),[i,s]=(0,a.useState)(!1),[o,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[u,h]=(0,a.useState)({stage:null,percent:0,currentDate:null}),[p,m]=(0,a.useState)(!1),[f,g]=(0,a.useState)(null),[x,b]=(0,a.useState)(null),[y,v]=(0,a.useState)([]),[_,k]=(0,a.useState)({totalEvents:0,totalUsers:0,eventBreakdown:[],monthlyBreakdown:[],dailyBreakdown:[],dateRange:{earliest:null,latest:null}}),[j,w]=(0,a.useState)(!1),[N,S]=(0,a.useState)(""),[O,C]=(0,a.useState)([]),[E,P]=(0,a.useState)(!1),[A,M]=(0,a.useState)(null),[T,D]=(0,a.useState)(!1),[R,I]=(0,a.useState)(null),[L,F]=(0,a.useState)(null),[z,U]=(0,a.useState)(!1),[B,V]=(0,a.useState)(null),[H,W]=(0,a.useState)(null),[$,q]=(0,a.useState)(null),[G,K]=(0,a.useState)(!1),[Y,X]=(0,a.useState)(null),J=(0,a.useCallback)(async()=>{try{const e=await aa();n(e.last_load_timestamp)}catch(e){console.error("Error fetching last load timestamp:",e)}},[]),Q=(0,a.useCallback)(async()=>{try{const e=await da();h({stage:e.current_stage,percent:e.percent_complete,currentDate:e.current_date}),e.is_complete?(s(!1),l("Processing complete!"),J()):e.error&&(s(!1),d(e.error))}catch(e){console.error("Error checking process status:",e)}},[J]);(0,a.useEffect)(()=>{const e=Va("mixpanelRequestHistory");if(e)try{v(JSON.parse(e))}catch(CF){console.error("Error parsing request history:",CF),v([])}J();const t=setInterval(()=>{i&&Q()},3e3);return()=>clearInterval(t)},[i,Q,J]);const Z=e=>"number"===typeof e||e?new Date(e).toLocaleString():"Never";(0,a.useEffect)(()=>{ee()},[]);const ee=async()=>{w(!0);try{const e=await Sa();k(e)}catch(e){console.error("Error fetching database stats:",e)}finally{w(!1)}};return(0,dt.jsxs)("div",{className:"flex",children:[(0,dt.jsxs)("div",{className:"w-64 bg-gray-50 dark:bg-gray-800 p-4 border-r min-h-[calc(100vh-10rem)] overflow-y-auto",children:[(0,dt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Processing History"}),0===y.length?(0,dt.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No processing history"}):(0,dt.jsx)("ul",{className:"space-y-2",children:y.map(e=>(0,dt.jsxs)("li",{className:"p-2 border rounded hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,dt.jsxs)("div",{className:"text-sm font-medium",children:[e.startDate," to ",e.endDate]}),(0,dt.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:Z(e.timestamp)})]},e.id))})]}),(0,dt.jsxs)("div",{className:"flex-1 p-6 max-w-5xl",children:[(0,dt.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Mixpanel Data Processor"}),(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-6",children:[(0,dt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Process Mixpanel Data"}),(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:["Last full load: ",r?Z(r):"Never"]}),(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsxs)("label",{className:"block text-sm font-medium mb-1",htmlFor:"start_date_input",children:["Start Date (YYYY-MM-DD)",(0,dt.jsx)("span",{className:"text-red-500",children:" *"})]}),(0,dt.jsx)("input",{type:"text",id:"start_date_input",value:e,onChange:e=>t(e.target.value),className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600",placeholder:"e.g., 2023-05-01",required:!0,disabled:i}),(0,dt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Data will be processed from this date until today"})]}),(0,dt.jsxs)("div",{className:"flex space-x-4",children:[(0,dt.jsx)("button",{type:"button",onClick:async()=>{if(e){s(!0),l(null),d(null),h({stage:"initializing",percent:0,currentDate:null});try{const t=await ca({start_date:e,wipe_folder:!0});if(!t.success)throw new Error(t.error||"Failed to start processing");l("Processing started successfully")}catch(t){d(t.message||"An unknown error occurred"),s(!1)}}else d("Start date is required")},disabled:i||!e,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400",children:i?"Processing...":"Start Processing"}),(0,dt.jsxs)("div",{className:"relative group",children:[(0,dt.jsx)("button",{type:"button",onClick:async()=>{K(!0),X(null),d(null),l(null);try{const e=await sa();if(!e.has_processed_dates)return X('No processed dates found. Please use the regular "Start Processing" with a start date.'),void K(!1);if(!e.next_date_to_process)return X("Unable to determine next date to process."),void K(!1);q(e.latest_processed_date),s(!0),l(null),d(null),X(null),h({stage:"initializing",percent:0,currentDate:null});const t=await ca({start_date:e.next_date_to_process,wipe_folder:!0});if(!t.success)throw new Error(t.error||"Failed to start processing");l("Processing started from ".concat(e.next_date_to_process," (continuing after ").concat(e.latest_processed_date,")"))}catch(e){X(e.message||"An unknown error occurred"),s(!1)}finally{K(!1)}},disabled:i||G,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:bg-gray-400",children:G?"Loading...":"Continue from Last Date"}),(0,dt.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:"Automatically continues processing from the day after the last successfully processed date"})]}),i&&(0,dt.jsx)("button",{type:"button",onClick:async()=>{try{await ua(),s(!1),l("Processing canceled")}catch(e){d(e.message||"Failed to cancel processing")}},className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Cancel Processing"}),(0,dt.jsxs)("div",{className:"relative group",children:[(0,dt.jsx)("button",{type:"button",onClick:async()=>{l(null),d(null);try{const e=await ia();l(e.message),n(null)}catch(e){d(e.message||"An unknown error occurred")}},disabled:i||!r,className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 disabled:bg-gray-400",children:"Reset Last Sync Counter"}),(0,dt.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:"Resets the timestamp tracking when data was last processed, allowing re-processing of all dates"})]}),(0,dt.jsxs)("div",{className:"relative group",children:[(0,dt.jsx)("button",{type:"button",onClick:async()=>{if(window.confirm("Are you sure you want to refresh all data? This will delete all downloaded files in the data/events and data/users directories. You will need to re-download data after this action.")){U(!0),V(null),W(null),l(null),d(null);try{const e=await la();V(e.message)}catch(e){W(e.message||"An unknown error occurred")}finally{U(!1)}}},disabled:i||z,className:"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:bg-gray-400",children:z?"Refreshing...":"Refresh Data"}),(0,dt.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:"Deletes all downloaded files in data/events and data/users directories"})]}),(0,dt.jsxs)("div",{className:"relative group",children:[(0,dt.jsx)("button",{type:"button",onClick:async()=>{if(window.confirm("Are you sure you want to reset ALL Mixpanel data in the database? This action cannot be undone and will delete all events, users, and processing history.")){D(!0),I(null),F(null),l(null),d(null);try{const e=await oa();I(e.message),n(null),ee()}catch(e){F(e.message||"An unknown error occurred")}finally{D(!1)}}},disabled:i||T,className:"px-4 py-2 bg-red-800 text-white rounded hover:bg-red-900 disabled:bg-gray-400",children:T?"Resetting...":"Reset All Data"}),(0,dt.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:"Completely wipes all data from the database including events, users, and processing history"})]})]})]}),i&&(0,dt.jsxs)("div",{className:"mt-6",children:[(0,dt.jsx)("h3",{className:"text-md font-medium mb-2",children:(()=>{switch(u.stage){case"download":return"Downloading data";case"extract":return"Extracting data";case"filter":return"Filtering data";case"ingest":return"Ingesting data";case"initializing":return"Initializing";default:return"Processing"}})()}),(0,dt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4 mb-2",children:(0,dt.jsx)("div",{className:"bg-blue-600 h-4 rounded-full transition-all duration-300",style:{width:"".concat(u.percent,"%")}})}),(0,dt.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,dt.jsxs)("span",{children:[u.percent,"% complete"]}),u.currentDate&&(0,dt.jsxs)("span",{children:["Current date: ",u.currentDate]})]})]}),o&&!c&&!i&&(0,dt.jsx)("div",{className:"mt-4 p-3 bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-100 rounded",children:o}),c&&(0,dt.jsxs)("div",{className:"mt-4 p-3 bg-red-100 dark:bg-red-800 text-red-800 dark:text-red-100 rounded",children:["Error: ",c]}),R&&(0,dt.jsx)("div",{className:"mt-4 p-3 bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-100 rounded",children:R}),L&&(0,dt.jsxs)("div",{className:"mt-4 p-3 bg-red-100 dark:bg-red-800 text-red-800 dark:text-red-100 rounded",children:["Error: ",L]}),B&&(0,dt.jsx)("div",{className:"mt-4 p-3 bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-100 rounded",children:B}),H&&(0,dt.jsxs)("div",{className:"mt-4 p-3 bg-red-100 dark:bg-red-800 text-red-800 dark:text-red-100 rounded",children:["Error: ",H]}),Y&&(0,dt.jsxs)("div",{className:"mt-4 p-3 bg-red-100 dark:bg-red-800 text-red-800 dark:text-red-100 rounded",children:["Error: ",Y]})]}),(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-6",children:[(0,dt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Test Database"}),(0,dt.jsx)("p",{className:"mb-4 text-sm text-gray-600 dark:text-gray-300",children:'This will find 3 random users who did the "RC Trial started" event and have their abi_ad_id set.'}),(0,dt.jsx)("button",{type:"button",onClick:async()=>{m(!0),g(null),b(null);try{const e=await ha();g(e)}catch(e){b(e.message||"An unknown error occurred")}finally{m(!1)}},disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400",children:p?"Testing...":"Test DB"}),x&&(0,dt.jsxs)("div",{className:"mt-4 p-3 bg-red-100 dark:bg-red-800 text-red-800 dark:text-red-100 rounded",children:["Error: ",x]}),f&&(0,dt.jsxs)("div",{className:"mt-4",children:[(0,dt.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Test Results"}),f.map((e,t)=>(0,dt.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-900 p-4 rounded mb-4",children:[(0,dt.jsxs)("h4",{className:"font-bold text-lg mb-2",children:["User ",t+1]}),(0,dt.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[(0,dt.jsx)("div",{className:"font-semibold",children:"Name:"}),(0,dt.jsx)("div",{children:e.name}),(0,dt.jsx)("div",{className:"font-semibold",children:"Distinct ID:"}),(0,dt.jsx)("div",{children:e.distinct_id}),(0,dt.jsx)("div",{className:"font-semibold",children:"Ad ID:"}),(0,dt.jsx)("div",{children:e.abi_ad_id}),(0,dt.jsx)("div",{className:"font-semibold",children:"Event:"}),(0,dt.jsx)("div",{children:e.event_name})]}),(0,dt.jsxs)("div",{className:"mt-2",children:[(0,dt.jsx)("div",{className:"font-semibold mb-1",children:"Event Properties:"}),(0,dt.jsx)("pre",{className:"bg-gray-200 dark:bg-gray-800 p-2 rounded text-xs overflow-auto max-h-60",children:JSON.stringify(e.event_properties,null,2)})]})]},t))]})]}),(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-6",children:[(0,dt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"User Event History"}),(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsxs)("label",{className:"block text-sm font-medium mb-1",htmlFor:"user_id_input",children:["User ID",(0,dt.jsx)("span",{className:"text-red-500",children:" *"})]}),(0,dt.jsxs)("div",{className:"flex",children:[(0,dt.jsx)("input",{type:"text",id:"user_id_input",value:N,onChange:e=>S(e.target.value),className:"flex-1 p-2 border rounded dark:bg-gray-700 dark:border-gray-600",placeholder:"Enter user ID or distinct ID",required:!0}),(0,dt.jsx)("button",{type:"button",onClick:async()=>{if(N.trim()){P(!0),C([]),M(null);try{const e=(await Oa(N.trim())).sort((e,t)=>e.time-t.time);C(e)}catch(e){M(e.message||"Failed to fetch user events")}finally{P(!1)}}else M("User ID is required")},disabled:E||!N.trim(),className:"ml-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400",children:E?"Loading...":"Search"})]})]}),A&&(0,dt.jsxs)("div",{className:"mt-4 p-3 bg-red-100 dark:bg-red-800 text-red-800 dark:text-red-100 rounded",children:["Error: ",A]}),E&&(0,dt.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,dt.jsx)("p",{className:"text-gray-500",children:"Loading user events..."})}),!E&&O.length>0&&(0,dt.jsxs)("div",{className:"mt-4",children:[(0,dt.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Event Timeline for User"}),(0,dt.jsx)("div",{className:"overflow-x-auto",children:(0,dt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,dt.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Time"}),(0,dt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Event Name"}),(0,dt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Details"})]})}),(0,dt.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:O.map((e,t)=>(0,dt.jsxs)("tr",{className:t%2===0?"bg-white dark:bg-gray-700":"bg-gray-50 dark:bg-gray-800",children:[(0,dt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:new Date(e.time).toLocaleString()}),(0,dt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:e.name}),(0,dt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:(0,dt.jsx)("button",{className:"text-blue-500 hover:text-blue-700",onClick:()=>{alert(JSON.stringify(e.properties,null,2))},children:"View Properties"})})]},t))})]})})]}),!E&&0===O.length&&N&&!A&&(0,dt.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,dt.jsx)("p",{className:"text-gray-500",children:"No events found for this user"})})]}),(0,dt.jsxs)("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,dt.jsx)("h2",{className:"text-xl font-semibold",children:"Database Statistics"}),(0,dt.jsx)("button",{onClick:ee,className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm",disabled:j,children:j?"Loading...":"Refresh"})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,dt.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded border border-gray-200 dark:border-gray-600",children:[(0,dt.jsx)("h3",{className:"text-md font-medium mb-2",children:"Total Events"}),(0,dt.jsx)("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:_.totalEvents.toLocaleString()})]}),(0,dt.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded border border-gray-200 dark:border-gray-600",children:[(0,dt.jsx)("h3",{className:"text-md font-medium mb-2",children:"Total Users"}),(0,dt.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:_.totalUsers.toLocaleString()})]})]}),_.dateRange&&(_.dateRange.earliest||_.dateRange.latest)&&(0,dt.jsxs)("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900 rounded border border-blue-200 dark:border-blue-700",children:[(0,dt.jsx)("h3",{className:"text-md font-medium mb-2 text-blue-800 dark:text-blue-200",children:"Data Range"}),(0,dt.jsxs)("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[(0,dt.jsxs)("p",{children:["Earliest Event: ",_.dateRange.earliest?new Date(_.dateRange.earliest).toLocaleString():"N/A"]}),(0,dt.jsxs)("p",{children:["Latest Event: ",_.dateRange.latest?new Date(_.dateRange.latest).toLocaleString():"N/A"]})]})]}),_.monthlyBreakdown&&_.monthlyBreakdown.length>0&&(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsx)("h3",{className:"text-md font-medium mb-2",children:"Monthly Breakdown"}),(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded overflow-hidden",children:(0,dt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,dt.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Month"}),(0,dt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Events"}),(0,dt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Users"}),(0,dt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Event Types"})]})}),(0,dt.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:_.monthlyBreakdown.map((e,t)=>(0,dt.jsxs)("tr",{className:t%2===0?"bg-white dark:bg-gray-700":"bg-gray-50 dark:bg-gray-800",children:[(0,dt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200 font-medium",children:e.month}),(0,dt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:e.events.toLocaleString()}),(0,dt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:e.users.toLocaleString()}),(0,dt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:e.uniqueEvents})]},t))})]})})]}),_.dailyBreakdown&&_.dailyBreakdown.length>0&&(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsx)("h3",{className:"text-md font-medium mb-2",children:"Daily Breakdown (Last 30 Days)"}),(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded overflow-hidden max-h-96 overflow-y-auto",children:(0,dt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,dt.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800 sticky top-0",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),(0,dt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Events"}),(0,dt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Users"}),(0,dt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Event Types"})]})}),(0,dt.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:_.dailyBreakdown.map((e,t)=>(0,dt.jsxs)("tr",{className:t%2===0?"bg-white dark:bg-gray-700":"bg-gray-50 dark:bg-gray-800",children:[(0,dt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200 font-medium",children:e.date}),(0,dt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:e.events.toLocaleString()}),(0,dt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:e.users.toLocaleString()}),(0,dt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:e.uniqueEvents})]},t))})]})})]}),_.eventBreakdown&&_.eventBreakdown.length>0&&(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h3",{className:"text-md font-medium mb-2",children:"Event Breakdown"}),(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded overflow-hidden",children:(0,dt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,dt.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Event Name"}),(0,dt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Count"}),(0,dt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Percentage"})]})}),(0,dt.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:_.eventBreakdown.map((e,t)=>(0,dt.jsxs)("tr",{className:t%2===0?"bg-white dark:bg-gray-700":"bg-gray-50 dark:bg-gray-800",children:[(0,dt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:e.name}),(0,dt.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:e.count.toLocaleString()}),(0,dt.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:[(e.count/_.totalEvents*100).toFixed(2),"%"]})]},t))})]})})]})]})]})]})},Wa={os_ios:{label:"iOS",filterValues:["iphone","ipad"]},os_and:{label:"Android",filterValues:["android_smartphone","android_tablet"]}},$a=[{name:"Basic Ad Data",fields:[{id:"ad_id",label:"Ad ID"},{id:"ad_name",label:"Ad Name"},{id:"adset_id",label:"Adset ID"},{id:"adset_name",label:"Adset Name"},{id:"campaign_id",label:"Campaign ID"},{id:"campaign_name",label:"Campaign Name"},{id:"impressions",label:"Impressions"},{id:"clicks",label:"Clicks"},{id:"spend",label:"Spend"}]},{name:"Reach & Frequency",fields:[{id:"reach",label:"Reach"},{id:"frequency",label:"Frequency"},{id:"unique_clicks",label:"Unique Clicks"},{id:"unique_ctr",label:"Unique CTR"}]},{name:"Cost Efficiency",fields:[{id:"cpc",label:"CPC"},{id:"cpm",label:"CPM"},{id:"cpp",label:"Cost per 1 000 People Reached"},{id:"cost_per_conversion",label:"Cost Per Conversion",isActionMetric:!0},{id:"purchase_roas",label:"Purchase ROAS",isActionMetric:!0},{id:"mobile_app_purchase_roas",label:"Mobile App Purchase ROAS",isActionMetric:!0}]},{name:"Conversion Detail",fields:[{id:"actions",label:"Actions",isActionMetric:!0},{id:"action_values",label:"Action Values",isActionMetric:!0},{id:"conversions",label:"Conversions",isActionMetric:!0},{id:"conversion_values",label:"Conversion Values",isActionMetric:!0}]},{name:"Video Engagement",fields:[{id:"video_30_sec_watched_actions",label:"Video 30s Watched"},{id:"video_avg_percent_watched_actions",label:"Video Avg % Watched"},{id:"video_thruplay_watched_actions",label:"Video Thruplay Watched"}]},{name:"Click Nuance",fields:[{id:"inline_link_clicks",label:"Inline Link Clicks"},{id:"outbound_clicks",label:"Outbound Clicks"},{id:"website_ctr",label:"Website CTR"}]},{name:"Ad Recall & Quality",fields:[{id:"estimated_ad_recallers",label:"Est. Ad Recallers"},{id:"estimated_ad_recall_rate",label:"Est. Ad Recall Rate"},{id:"quality_ranking",label:"Quality Ranking"},{id:"engagement_rate_ranking",label:"Engagement Rate Ranking"},{id:"conversion_rate_ranking",label:"Conversion Rate Ranking"}]},{name:"Context & Meta",fields:[{id:"account_currency",label:"Account Currency"},{id:"buying_type",label:"Buying Type"},{id:"objective",label:"Objective"},{id:"labels",label:"Labels"}]}],qa=["country","region","dma"],Ga=["device_platform","impression_device","os_ios","os_and"],Ka=["publisher_platform","platform_position","placement"],Ya=["hourly_stats_aggregated_by_advertiser_time_zone","hourly_stats_aggregated_by_audience_time_zone"],Xa=["image_asset","video_asset","title_asset","body_asset","call_to_action_asset","link_url_asset"],Ja=$a.flatMap(e=>e.fields).filter(e=>e.isActionMetric).map(e=>e.id),Qa=["impressions","clicks","spend","reach"],Za=["conversion_destination","country","region"],ei=[["age","gender"],["country","publisher_platform"],["device_platform","publisher_platform"],["publisher_platform","platform_position"],["impression_device","country"]],ti=[{name:"Geography",group:qa,breakdowns:[{id:"country",label:"Country"},{id:"region",label:"Region"},{id:"dma",label:"DMA"}]},{name:"Demographics",breakdowns:[{id:"age",label:"Age"},{id:"gender",label:"Gender"}]},{name:"Time-of-day",group:Ya,breakdowns:[{id:"hourly_stats_aggregated_by_advertiser_time_zone",label:"Advertiser Timezone"},{id:"hourly_stats_aggregated_by_audience_time_zone",label:"Audience Timezone"}]},{name:"Device / OS",group:Ga,breakdowns:[{id:"impression_device",label:"Impression Device"},{id:"device_platform",label:"Device Platform"},{id:"os_ios",label:"iOS"},{id:"os_and",label:"Android"}]},{name:"Placement",group:Ka,breakdowns:[{id:"publisher_platform",label:"Publisher Platform"},{id:"platform_position",label:"Platform Position"},{id:"placement",label:"Placement"}]},{name:"Creative Assets",group:Xa,breakdowns:[{id:"image_asset",label:"Image Asset"},{id:"video_asset",label:"Video Asset"},{id:"title_asset",label:"Title Asset"},{id:"body_asset",label:"Body Asset"},{id:"call_to_action_asset",label:"CTA Asset"},{id:"link_url_asset",label:"Link URL Asset"}]},{name:"Commerce / SKAd",breakdowns:[{id:"product_id",label:"Product ID"},{id:"skan_conversion_id",label:"SKAN Conversion ID"}]},{name:"Others",breakdowns:[{id:"landing_destination",label:"Landing Destination"},{id:"conversion_destination",label:"Conversion Destination",isActionBreakdown:!0}]}],ri=e=>"os_ios"===e||"os_and"===e,ni=e=>Object.fromEntries(Object.entries(e).filter(e=>{let[t,r]=e;return r})),ai=(e,t)=>{const r=Object.entries(e).filter(e=>{let[t,r]=e;return r}).map(e=>{let[t,r]=e;return t}),n=Object.entries(t).filter(e=>{let[t,r]=e;return r}).map(e=>{let[t,r]=e;return t}).sort(),a=r.some(e=>Ja.includes(e)),i=[];let s=!0;if(n.length>2&&(i.push("Maximum of 2 breakdowns allowed"),s=!1),a&&(n.length>1&&(i.push("When using action metrics, you can select at most 1 breakdown because Meta adds 'action_type' as an implicit breakdown"),s=!1),1!==n.length||Za.includes(n[0])||(i.push("'".concat(n[0],"' is no longer valid. Use one of: ")+Za.join(", ")),s=!1)),2===n.length){const[e,t]=n,a=r.length>0&&r.every(e=>Qa.includes(e)),o=ei.some(r=>r[0]===e&&r[1]===t||r[1]===e&&r[0]===t);let l=!1;(Ya.includes(e)||Ya.includes(t))&&(i.push("Hourly breakdowns must stand alone"),s=!1,l=!0),l||o||((qa.includes(e)&&qa.includes(t)||Ga.includes(e)&&Ga.includes(t)||Ka.includes(e)&&Ka.includes(t)||!a&&Xa.includes(e)&&Xa.includes(t))&&(i.push("Cannot select multiple breakdowns from the same group (".concat(e,", ").concat(t,") unless explicitly allowed in VALID_PAIRS.")),s=!1,l=!0),l||(i.push("The combination of '".concat(e,"' and '").concat(t,"' is not supported by Meta.")),s=!1))}return{valid:s,errors:i}},ii=(e,t,r)=>{if(r[e])return!1;const n=Object.entries(t).some(e=>{let[t,r]=e;return r&&Ja.includes(t)});if(n){if(!Za.includes(e))return!0;if(Object.values(r).filter(Boolean).length>=1)return!0}const a=Object.entries(r).filter(e=>{let[t,r]=e;return r}).map(e=>{let[t,r]=e;return t}).sort();if(a.some(ri)&&ri(e)&&!a.includes(e))return!0;if(a.length>=2)return!0;if(Object.entries(t).some(e=>{let[t,r]=e;return r&&Ja.includes(t)})){if(!Za.includes(e))return!0;if(a.length>=1)return!0}if(0===a.length)return!1;const i=a[0];if(qa.includes(i)&&qa.includes(e)||Ga.includes(i)&&Ga.includes(e)||Ka.includes(i)&&Ka.includes(e)||Ya.includes(i)&&Ya.includes(e)||Xa.includes(i)&&Xa.includes(e))return!0;if(Ya.includes(i)&&!Ya.includes(e)||Ya.includes(e)&&!Ya.includes(i))return!0;return!ei.some(t=>t[0]===i&&t[1]===e||t[1]===i&&t[0]===e)},si=(e,t,r)=>{const n=Re({},r);n[e]=!0;const a=ai(t,n);return a.valid?"":a.errors[0]},oi=e=>Object.entries(e).filter(e=>{let[t,r]=e;return r}).map(e=>{let[t,r]=e;return t}).join(","),li=e=>Object.entries(e).filter(e=>{let[t,r]=e;return r}).map(e=>{let[t,r]=e;return t}).join(","),ci=e=>{if(!/^\d{4}-\d{2}-\d{2}$/.test(e))return!1;const[t,r,n]=e.split("-").map(Number),a=new Date(t,r-1,n);return a.getFullYear()===t&&a.getMonth()===r-1&&a.getDate()===n},di=()=>{try{const e=localStorage.getItem("meta_action_mappings");return e?JSON.parse(e):{}}catch(e){return console.error("Error loading action mappings:",e),{}}},ui=(e,t)=>Array.isArray(e)&&Array.isArray(t)?e.filter(e=>t.includes(e.action_type)).map(e=>parseFloat(e.value)||0):[],hi=(e,t)=>{if(!Array.isArray(e)||0===e.length)return 0;switch(t){case"sum":default:return e.reduce((e,t)=>e+t,0);case"count":return e.length;case"average":return e.reduce((e,t)=>e+t,0)/e.length}},pi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Array.isArray(e)?(t||(t=di()),e.map(e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=di());const r=Re({},e);return Object.entries(t).forEach(t=>{let[n,a]=t;const{actionTypes:i,aggregationType:s}=a,o=ui(e.actions,i);r["".concat(n,"_count")]=hi(o,s);const l=ui(e.action_values,i);r["".concat(n,"_value")]=hi(l,s);const c=ui(e.conversions,i);r["".concat(n,"_conversions")]=hi(c,s);const d=ui(e.conversion_values,i);r["".concat(n,"_conversion_value")]=hi(d,s),r["".concat(n,"_breakdown")]={count:o,value:l,conversions:c,conversion_value:d}}),r}(e,t))):e},mi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Array.isArray(e)||0===e.length)return{};t||(t=di());const r={};return Object.keys(t).forEach(t=>{const n=e.map(e=>e["".concat(t,"_count")]||0),a=e.map(e=>e["".concat(t,"_value")]||0),i=e.map(e=>e["".concat(t,"_conversions")]||0),s=e.map(e=>e["".concat(t,"_conversion_value")]||0);r[t]={total_count:n.reduce((e,t)=>e+t,0),total_value:a.reduce((e,t)=>e+t,0),total_conversions:i.reduce((e,t)=>e+t,0),total_conversion_value:s.reduce((e,t)=>e+t,0),avg_count:n.reduce((e,t)=>e+t,0)/n.length,avg_value:a.reduce((e,t)=>e+t,0)/a.length,records_with_data:e.filter(e=>(e["".concat(t,"_count")]||0)>0).length}}),r},fi=e=>{var t,r,n,i,s,o,l,c;let{startDateInput:d,setStartDateInput:u,endDateInput:h,setEndDateInput:p,incrementInput:m,setIncrementInput:f,selectedFields:g,setSelectedFields:x,selectedBreakdowns:b,setSelectedBreakdowns:y,error:v,setError:_}=e;const[k,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)({stage:"",pagesLoaded:0,percentage:0}),[S,O]=(0,a.useState)(null),[C,E]=(0,a.useState)(null),[P,A]=(0,a.useState)(null),[M,T]=(0,a.useState)(!1),[D,R]=(0,a.useState)(!1),[I,L]=(0,a.useState)(!0),[F,z]=(0,a.useState)({});(0,a.useEffect)(()=>{const e=di();z(e)},[]);const U=e=>Array.isArray(e)?e.map(e=>{const t=Re({},e);return["actions","action_values","conversions","conversion_values"].forEach(e=>{t[e]&&Array.isArray(t[e])&&(t[e+"_formatted"]=t[e].reduce((e,t)=>(e[t.action_type]=t.value,e),{}))}),t}):e;(0,a.useEffect)(()=>{const e=Object.entries(g).some(e=>{let[t,r]=e;return r&&Ja.includes(t)});if(e){const e=Object.entries(b).filter(e=>{let[t,r]=e;return r}).map(e=>{let[t,r]=e;return t}).sort();if(e.length>1){const t=Re({},b);let r=!1;e.forEach(e=>{Za.includes(e)&&!r?r=!0:t[e]=!1}),y(t),_("Some breakdowns were deselected because with action metrics, at most one breakdown is allowed"),setTimeout(()=>_(null),5e3)}else if(1===e.length&&!Za.includes(e[0])){const t=Re({},b);t[e[0]]=!1,y(t),_("Selected breakdown '".concat(e[0],"' was deselected because it's incompatible with action metrics")),setTimeout(()=>_(null),5e3)}}},[g,b,y,_]);(0,a.useEffect)(()=>()=>{P&&clearInterval(P)},[P]);const B=async e=>{try{const t=await ma(e);if(N(e=>Re(Re({},e),{},{stage:"Processing in Meta servers... (".concat(t.async_status,")"),percentage:t.async_percent_completion||0})),"Job Completed"===t.async_status){N(e=>Re(Re({},e),{},{stage:"Fetching results...",percentage:100}));const t=await fa(e);if(t.data&&t.data.data){const e=pi(t.data.data,F),r=mi(e,F);O(Re(Re({},t),{},{data:Re(Re({},t.data),{},{data:e,business_summary:r})}))}else O(t);P&&(clearInterval(P),A(null)),j(!1),E(null)}else"Job Failed"===t.async_status&&(_("Meta API job failed. Please try again."),P&&(clearInterval(P),A(null)),j(!1),E(null))}catch(t){if(console.error("Error polling job status:",t),S&&S.data)return console.log("Job status check failed but we already have results - stopping polling"),P&&(clearInterval(P),A(null)),j(!1),void E(null);_("Error checking job status: "+(t.message||"Unknown error")),P&&(clearInterval(P),A(null)),j(!1),E(null)}},V=async e=>{if(d&&h)if(ci(d)&&ci(h)){j(!0),_(null),O(null),E(null),N({stage:"Initializing predefined request...",pagesLoaded:0,percentage:0});try{let r;"country"===e?r={start_date:d,end_date:h,time_increment:parseInt(m,10)||1,fields:"ad_id,ad_name,adset_id,adset_name,campaign_id,campaign_name,impressions,clicks,spend,actions",breakdowns:"country"}:"device"===e?r={start_date:d,end_date:h,time_increment:parseInt(m,10)||1,fields:"ad_id,ad_name,adset_id,adset_name,campaign_id,campaign_name,impressions,clicks,spend,actions",breakdowns:"impression_device,placement"}:"region"===e?r={start_date:d,end_date:h,time_increment:parseInt(m,10)||1,fields:"ad_id,ad_name,adset_id,adset_name,campaign_id,campaign_name,impressions,clicks,spend,actions",breakdowns:"region"}:"country_device"===e&&(r={start_date:d,end_date:h,time_increment:parseInt(m,10)||1,fields:"ad_id,ad_name,adset_id,adset_name,campaign_id,campaign_name,impressions,clicks,spend,actions",breakdowns:"country",action_breakdowns:"action_device",limit:500}),N(e=>Re(Re({},e),{},{stage:"Sending request to Meta API..."}));const n=await pa(r);if(n.async_job&&n.report_run_id){E({reportRunId:n.report_run_id,status:n.async_status}),N(e=>Re(Re({},e),{},{stage:"Started async job (".concat(n.async_status,")..."),percentage:0}));const e=setInterval(()=>{B(n.report_run_id)},3e3);A(e),B(n.report_run_id)}else{var t;if(n.data&&n.data.data){const e=pi(n.data.data,F),t=mi(e,F);O(Re(Re({},n),{},{data:Re(Re({},n.data),{},{data:e,business_summary:t})}))}else O(n);(null===(t=n.meta)||void 0===t?void 0:t.pages_fetched)>0&&N({stage:"Processing results...",pagesLoaded:n.meta.pages_fetched,percentage:100}),setTimeout(()=>{j(!1)},500)}}catch(a){var r,n;_((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.error)||a.message||"An unknown error occurred"),j(!1),E(null)}}else _("Start or end date is invalid. Use YYYY-MM-DD format.");else _("Start date and end date are required")};return(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900 rounded-lg shadow p-4 mb-6",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>{T(!M)},children:[(0,dt.jsx)("h2",{className:"text-lg font-semibold text-blue-800 dark:text-blue-200",children:"How to use this tool"}),(0,dt.jsxs)("button",{className:"text-blue-500",children:[M?"Hide":"Show"," instructions"]})]}),M&&(0,dt.jsxs)("div",{className:"mt-4 text-sm text-blue-800 dark:text-blue-200",children:[(0,dt.jsx)("p",{className:"mb-2",children:"This tool allows you to fetch data from the Meta Ads API for a specified date range."}),(0,dt.jsx)("h3",{className:"font-semibold mt-3 mb-1",children:"Parameters:"}),(0,dt.jsxs)("ul",{className:"list-disc pl-5 space-y-1",children:[(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Start Date and End Date:"})," Define the time period for data retrieval (YYYY-MM-DD format)"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Time Increment:"})," Controls how data is grouped:",(0,dt.jsxs)("ul",{className:"list-disc pl-5 mt-1",children:[(0,dt.jsxs)("li",{children:["Set to ",(0,dt.jsx)("strong",{children:"0"})," to get aggregated data for the entire date range"]}),(0,dt.jsxs)("li",{children:["Set to ",(0,dt.jsx)("strong",{children:"1"})," for daily breakdowns"]}),(0,dt.jsxs)("li",{children:["Set to ",(0,dt.jsx)("strong",{children:"7"})," for weekly breakdowns"]}),(0,dt.jsxs)("li",{children:["Set to ",(0,dt.jsx)("strong",{children:"30"})," for monthly breakdowns (approximate)"]})]})]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Fields:"})," Click on the pills to select which data fields to retrieve"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Breakdowns:"})," Select dimension breakdowns to segment your data (optional)"]})]}),(0,dt.jsx)("p",{className:"mt-3",children:(0,dt.jsx)("strong",{children:"Breakdown Rules:"})}),(0,dt.jsxs)("ul",{className:"list-disc pl-5 space-y-1",children:[(0,dt.jsx)("li",{children:"Maximum of 2 breakdown dimensions allowed at once"}),(0,dt.jsx)("li",{children:"Certain breakdowns cannot be used together (disabled options will appear grayed out)"}),(0,dt.jsx)("li",{children:"Breakdowns in the same category (e.g., multiple geography options) cannot be combined"}),(0,dt.jsx)("li",{children:"Hourly stats breakdowns must be used alone"}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Action/Conversion Metrics Limitations:"}),(0,dt.jsxs)("ul",{className:"list-disc pl-5 mt-1 text-red-800 dark:text-red-300",children:[(0,dt.jsxs)("li",{children:["When selecting ",(0,dt.jsx)("strong",{children:"\u26a1 action metrics"})," Meta always adds an internal ",(0,dt.jsx)("code",{children:"action_type"})," breakdown"]}),(0,dt.jsxs)("li",{children:["With ",(0,dt.jsx)("strong",{children:"\u26a1 action metrics"})," you may add ",(0,dt.jsx)("strong",{children:"only one"})," other breakdown, and it must be ",(0,dt.jsx)("code",{children:"conversion_destination"})]}),(0,dt.jsxs)("li",{children:["Common breakdowns like country, age, gender, device_platform ",(0,dt.jsx)("strong",{children:"cannot"})," be used with action metrics"]}),(0,dt.jsx)("li",{children:"To get both action data and country/device breakdowns, you need to run separate reports and join them offline"})]})]}),(0,dt.jsx)("li",{children:"Your selected fields and parameters are saved automatically for future sessions"})]})]})]}),(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-6",children:[(0,dt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Fetch Meta API Data"}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("label",{className:"block text-sm font-medium mb-1",htmlFor:"start_date_input",children:["Start Date (YYYY-MM-DD)",(0,dt.jsx)("span",{className:"text-red-500",children:" *"})]}),(0,dt.jsx)("input",{type:"text",id:"start_date_input",value:d,onChange:e=>u(e.target.value),className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600",placeholder:"e.g., 2023-05-01",required:!0,disabled:k})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("label",{className:"block text-sm font-medium mb-1",htmlFor:"end_date_input",children:["End Date (YYYY-MM-DD)",(0,dt.jsx)("span",{className:"text-red-500",children:" *"})]}),(0,dt.jsx)("input",{type:"text",id:"end_date_input",value:h,onChange:e=>p(e.target.value),className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600",placeholder:"e.g., 2023-05-31",required:!0,disabled:k})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium mb-1",htmlFor:"increment_input",children:"Time Increment (days)"}),(0,dt.jsx)("input",{type:"number",id:"increment_input",value:m,onChange:e=>f(e.target.value),className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600",placeholder:"1",min:"0",disabled:k}),(0,dt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"0 = entire range, 1 = daily, 7 = weekly, 30 = monthly"})]})]}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,dt.jsxs)("label",{className:"block text-sm font-medium",children:["Select Fields",(0,dt.jsx)("span",{className:"text-red-500",children:" *"})]}),(0,dt.jsx)("div",{className:"text-sm",children:(0,dt.jsxs)("span",{className:"text-gray-500",children:[Object.values(g).filter(Boolean).length," fields selected"]})})]}),$a.map((e,t)=>(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,dt.jsx)("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:e.name}),(0,dt.jsxs)("div",{className:"space-x-2",children:[(0,dt.jsx)("button",{type:"button",onClick:()=>(e=>{const t=Re({},g);e.forEach(e=>{t[e.id]=!0}),x(t)})(e.fields),className:"text-xs text-blue-600 hover:text-blue-800",disabled:k,children:"Select All"}),(0,dt.jsx)("button",{type:"button",onClick:()=>(e=>{const t=Re({},g);e.forEach(e=>{t[e.id]=!1}),x(t)})(e.fields),className:"text-xs text-red-600 hover:text-red-800",disabled:k,children:"Clear"})]})]}),(0,dt.jsx)("div",{className:"flex flex-wrap gap-2",children:e.fields.map(e=>{const t=e.isActionMetric;return(0,dt.jsxs)("button",{type:"button",onClick:()=>{return t=e.id,void x(e=>Re(Re({},e),{},{[t]:!e[t]}));var t},className:"px-3 py-1 rounded-full text-sm ".concat(g[e.id]?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),disabled:k,children:[e.label,(0,dt.jsx)("span",{className:"ml-1 text-xs",children:t&&"\u26a1"})]},e.id)})})]},t))]}),(0,dt.jsx)("div",{className:"mb-4",children:(0,dt.jsx)("button",{type:"button",onClick:()=>R(!D),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:(0,dt.jsxs)("span",{children:[D?"- Hide":"+ Show"," Breakdowns (Advanced)"]})})}),D&&(0,dt.jsxs)("div",{className:"mb-6 pl-4 border-l-2 border-blue-200",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,dt.jsx)("label",{className:"block text-sm font-medium",children:"Select Breakdowns (Optional)"}),(0,dt.jsx)("div",{className:"text-sm",children:(0,dt.jsxs)("span",{className:"text-gray-500",children:[Object.values(b).filter(Boolean).length," breakdowns selected"]})})]}),(0,dt.jsxs)("div",{className:"text-xs bg-gray-100 dark:bg-gray-700 p-2 rounded mb-3 text-gray-800 dark:text-gray-300",children:[(0,dt.jsx)("strong",{children:"Note:"})," The Meta API has strict rules about which breakdowns can be used together.",(0,dt.jsxs)("ul",{className:"mt-1 ml-2 list-disc pl-4",children:[(0,dt.jsx)("li",{children:"Maximum 2 breakdowns allowed"}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Important:"})," When using ",(0,dt.jsx)("strong",{children:"\u26a1 action metrics"})," Meta always adds an internal ",(0,dt.jsx)("code",{children:"action_type"})," breakdown"]}),(0,dt.jsxs)("li",{children:["With ",(0,dt.jsx)("strong",{children:"\u26a1 action metrics"})," you may add ",(0,dt.jsx)("strong",{children:"only one"})," other breakdown, and it must be ",(0,dt.jsx)("code",{children:"conversion_destination"})]}),(0,dt.jsx)("li",{children:"Disabled options are incompatible with your current selection"})]})]}),ti.map((e,t)=>(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,dt.jsx)("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:e.name}),(0,dt.jsxs)("div",{className:"space-x-2",children:[(0,dt.jsx)("button",{type:"button",onClick:()=>(e=>{if(!e.every(e=>!ii(e.id,g,b)))return;const t=Re({},b);e.forEach(e=>{t[e.id]=!0}),y(t)})(e.breakdowns),className:"text-xs text-blue-600 hover:text-blue-800",disabled:k||e.breakdowns.some(e=>ii(e.id,g,b)),children:"Select All"}),(0,dt.jsx)("button",{type:"button",onClick:()=>(e=>{const t=Re({},b);e.forEach(e=>{t[e.id]=!1}),y(t)})(e.breakdowns),className:"text-xs text-red-600 hover:text-red-800",disabled:k,children:"Clear"})]})]}),(0,dt.jsx)("div",{className:"flex flex-wrap gap-2",children:e.breakdowns.map(e=>{const t=ii(e.id,g,b),r=t?si(e.id,g,b):"",n=Za.includes(e.id);return(0,dt.jsxs)("button",{type:"button",onClick:()=>{return t=e.id,void(ii(t,g,b)||y(e=>Re(Re({},e),{},{[t]:!e[t]})));var t},className:"px-3 py-1 rounded-full text-sm ".concat(b[e.id]?"bg-green-500 text-white":t?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300"),disabled:k||t,title:r,children:[e.label,n&&(0,dt.jsx)("span",{className:"ml-1 text-xs",title:"Compatible with action metrics",children:"\u2605"})]},e.id)})}),"Others"===e.name&&(0,dt.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"\u2605 Breakdowns marked with a star are compatible with action metrics (actions, conversions, ROAS)"})]},t))]}),(0,dt.jsx)("div",{className:"flex space-x-4",children:(0,dt.jsx)("button",{type:"button",onClick:async()=>{if(!d||!h)return void _("Start date and end date are required");if(!ci(d)||!ci(h))return void _("Start or end date is invalid. Use YYYY-MM-DD format.");if(!oi(g))return void _("At least one field must be selected");const e=ai(g,b);if(e.valid){j(!0),_(null),O(null),E(null),N({stage:"Initializing request...",pagesLoaded:0,percentage:0});try{const e=function(e,t,r,n,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const s=Object.entries(n).filter(e=>{let[,t]=e;return t}).map(e=>{let[t]=e;return t}).join(","),o=Object.entries(a).filter(e=>{let[,t]=e;return t}).map(e=>{let[t]=e;return t}),l=o.includes("os_ios"),c=o.includes("os_and"),d=o.filter(e=>!ri(e));!l&&!c||d.includes("impression_device")||d.push("impression_device");const u={start_date:e,end_date:t,time_increment:parseInt(r,10)||1,fields:s};if(d.length&&(u.breakdowns=d.join(",")),i&&(u.action_breakdowns=i),l||c){const e=l?"os_ios":"os_and";u.filtering=JSON.stringify([{field:"impression_device",operator:"IN",value:Wa[e].filterValues}])}return u}(d,h,m,g,b);N(e=>Re(Re({},e),{},{stage:"Sending request to Meta API..."}));const r=await pa(e);if(r.async_job&&r.report_run_id){E({reportRunId:r.report_run_id,status:r.async_status}),N(e=>Re(Re({},e),{},{stage:"Started async job (".concat(r.async_status,")..."),percentage:0}));const e=setInterval(()=>{B(r.report_run_id)},3e3);A(e),B(r.report_run_id)}else{var t;if(r.data&&r.data.data){const e=pi(r.data.data,F),t=mi(e,F);O(Re(Re({},r),{},{data:Re(Re({},r.data),{},{data:e,business_summary:t})}))}else O(r);(null===(t=r.meta)||void 0===t?void 0:t.pages_fetched)>0&&N({stage:"Processing results...",pagesLoaded:r.meta.pages_fetched,percentage:100}),setTimeout(()=>{j(!1)},500)}}catch(a){var r,n;_((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.error)||a.message||"An unknown error occurred"),j(!1),E(null)}}else _(e.errors[0])},disabled:k,className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:k?"Loading...":"Fetch Data"})})]}),k&&(0,dt.jsxs)("div",{className:"mt-4 p-4 bg-slate-50 dark:bg-slate-800 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,dt.jsxs)("div",{className:"flex items-center mb-3",children:[(0,dt.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500 mr-3"}),(0,dt.jsx)("span",{className:"font-medium",children:w.stage}),C&&(0,dt.jsxs)("span",{className:"ml-2 px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded-full",children:["Job ID: ",C.reportRunId.substring(0,8),"..."]})]}),(0,dt.jsx)("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-3 w-full mb-2",children:(0,dt.jsx)("div",{className:"h-3 rounded-full transition-all duration-300 ".concat(C?"bg-gradient-to-r from-blue-500 to-purple-500":"bg-blue-600 animate-pulse"),style:{width:C?"".concat(w.percentage,"%"):"100%"}})}),(0,dt.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-600 dark:text-gray-400",children:[(0,dt.jsx)("span",{children:C?"".concat(w.percentage,"% complete"):w.pagesLoaded>0?"".concat(w.pagesLoaded," pages loaded"):"Processing..."}),C&&(0,dt.jsx)("span",{className:"text-xs font-mono bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:"Async Mode"})]}),C&&(0,dt.jsx)("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:(0,dt.jsxs)("div",{className:"flex justify-between items-start",children:[(0,dt.jsxs)("div",{className:"text-sm flex-1",children:[(0,dt.jsx)("div",{className:"font-medium text-blue-800 dark:text-blue-200 mb-1",children:"\ud83d\udcca Meta is processing your request on their servers"}),(0,dt.jsx)("div",{className:"text-blue-600 dark:text-blue-300 text-xs",children:"Large requests are processed asynchronously for better performance. You'll see progress updates every few seconds."})]}),(0,dt.jsx)("button",{onClick:()=>{P&&(clearInterval(P),A(null)),j(!1),E(null),N({stage:"",pagesLoaded:0,percentage:0})},className:"ml-3 px-3 py-1 bg-red-100 hover:bg-red-200 dark:bg-red-900 dark:hover:bg-red-800  text-red-800 dark:text-red-200 text-xs rounded border border-red-300 dark:border-red-700  transition-colors duration-200",children:"Cancel"})]})})]})]}),(0,dt.jsxs)("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 rounded-3xl shadow-2xl border border-purple-500/20 mb-6",children:[(0,dt.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,dt.jsx)("div",{className:"absolute top-0 left-1/4 w-2 h-2 bg-cyan-400 rounded-full animate-pulse opacity-60"}),(0,dt.jsx)("div",{className:"absolute top-1/3 right-1/4 w-1 h-1 bg-purple-400 rounded-full animate-ping opacity-40"}),(0,dt.jsx)("div",{className:"absolute bottom-1/4 left-1/3 w-1.5 h-1.5 bg-emerald-400 rounded-full animate-pulse opacity-50"}),(0,dt.jsx)("div",{className:"absolute top-1/2 right-1/3 w-1 h-1 bg-pink-400 rounded-full animate-ping opacity-30"})]}),(0,dt.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-cyan-500/5 to-transparent animate-pulse"}),(0,dt.jsxs)("div",{className:"relative p-8",children:[(0,dt.jsxs)("div",{className:"text-center mb-8",children:[(0,dt.jsxs)("div",{className:"inline-flex items-center space-x-3 mb-4",children:[(0,dt.jsx)("div",{className:"w-3 h-3 bg-gradient-to-r from-cyan-400 to-blue-500 rounded-full animate-pulse"}),(0,dt.jsx)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-300 via-purple-300 to-pink-300 bg-clip-text text-transparent tracking-wide",children:"QUANTUM API COMMAND CENTER"}),(0,dt.jsx)("div",{className:"w-3 h-3 bg-gradient-to-r from-pink-400 to-purple-500 rounded-full animate-pulse"})]}),(0,dt.jsxs)("div",{className:"flex justify-center items-center space-x-2 mb-2",children:[(0,dt.jsx)("div",{className:"h-px bg-gradient-to-r from-transparent via-cyan-400 to-transparent w-20"}),(0,dt.jsx)("span",{className:"text-cyan-300 text-sm font-mono tracking-wider",children:"NEURAL INTERFACE v2100.1"}),(0,dt.jsx)("div",{className:"h-px bg-gradient-to-r from-transparent via-cyan-400 to-transparent w-20"})]}),(0,dt.jsx)("p",{className:"text-slate-300 text-sm max-w-2xl mx-auto leading-relaxed",children:"Advanced Meta API templates with quantum-enhanced data processing and holographic visualization"})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-4",children:[(0,dt.jsxs)("div",{className:"group relative",children:[(0,dt.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-r from-emerald-500 to-cyan-500 rounded-2xl blur opacity-20 group-hover:opacity-40 transition duration-300"}),(0,dt.jsxs)("div",{className:"relative bg-gradient-to-br from-slate-800/80 to-slate-900/80 backdrop-blur-xl border border-emerald-500/30 rounded-2xl p-6 hover:border-emerald-400/60 transition-all duration-300",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,dt.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-400 to-cyan-500 rounded-xl flex items-center justify-center shadow-lg shadow-emerald-500/20",children:(0,dt.jsx)("span",{className:"text-white font-bold text-lg",children:"\ud83c\udf0d"})}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h3",{className:"text-xl font-bold text-emerald-300 tracking-wide",children:"GEO-MATRIX SCAN"}),(0,dt.jsx)("div",{className:"text-xs text-emerald-400/70 font-mono",children:"MODULE_001 \u2022 COUNTRY_ANALYTICS"})]})]}),(0,dt.jsx)("p",{className:"text-slate-300 text-sm mb-4 leading-relaxed",children:"Quantum-enhanced geographical performance analysis. Maps ad efficiency across global territories with neural pattern recognition."}),(0,dt.jsxs)("div",{className:"bg-slate-900/60 rounded-xl p-4 mb-6 border border-emerald-500/20",children:[(0,dt.jsx)("div",{className:"text-xs text-emerald-400 font-mono mb-2",children:"NEURAL PARAMETERS:"}),(0,dt.jsxs)("div",{className:"text-xs text-slate-300 font-mono space-y-1",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-cyan-400",children:"fields:"}),(0,dt.jsx)("span",{className:"text-yellow-300",children:"ad_id, ad_name, campaign_*, impressions, clicks, spend, actions"})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-cyan-400",children:"breakdowns:"}),(0,dt.jsx)("span",{className:"text-emerald-300",children:"country"})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-cyan-400",children:"output:"}),(0,dt.jsx)("span",{className:"text-pink-300",children:"ad-country matrix pairs"})]})]})]}),(0,dt.jsxs)("button",{type:"button",onClick:()=>V("country"),disabled:k||!d||!h,className:"w-full h-14 bg-gradient-to-r from-emerald-500 to-cyan-500 text-white font-bold rounded-xl  hover:from-emerald-400 hover:to-cyan-400 disabled:from-gray-600 disabled:to-gray-700  transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]  shadow-lg shadow-emerald-500/25 hover:shadow-emerald-500/40  disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden group/btn",children:[(0,dt.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -skew-x-12 -translate-x-full group-hover/btn:translate-x-full transition-transform duration-700"}),(0,dt.jsx)("span",{className:"relative flex items-center justify-center space-x-2",children:(0,dt.jsx)("span",{children:k?"\u26a1 PROCESSING...":"\ud83d\ude80 EXECUTE GEO-SCAN"})})]})]})]}),(0,dt.jsxs)("div",{className:"group relative",children:[(0,dt.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl blur opacity-20 group-hover:opacity-40 transition duration-300"}),(0,dt.jsxs)("div",{className:"relative bg-gradient-to-br from-slate-800/80 to-slate-900/80 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-6 hover:border-purple-400/60 transition-all duration-300",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,dt.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-400 to-pink-500 rounded-xl flex items-center justify-center shadow-lg shadow-purple-500/20",children:(0,dt.jsx)("span",{className:"text-white font-bold text-lg",children:"\ud83d\udcf1"})}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h3",{className:"text-xl font-bold text-purple-300 tracking-wide",children:"DEVICE-NEXUS PROBE"}),(0,dt.jsx)("div",{className:"text-xs text-purple-400/70 font-mono",children:"MODULE_002 \u2022 DEVICE_ANALYTICS"})]})]}),(0,dt.jsx)("p",{className:"text-slate-300 text-sm mb-4 leading-relaxed",children:"Multi-dimensional device ecosystem analysis. Identifies user behavior patterns across all connected platforms with AI precision."}),(0,dt.jsxs)("div",{className:"bg-slate-900/60 rounded-xl p-4 mb-6 border border-purple-500/20",children:[(0,dt.jsx)("div",{className:"text-xs text-purple-400 font-mono mb-2",children:"NEURAL PARAMETERS:"}),(0,dt.jsxs)("div",{className:"text-xs text-slate-300 font-mono space-y-1",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-cyan-400",children:"fields:"}),(0,dt.jsx)("span",{className:"text-yellow-300",children:"ad_id, ad_name, campaign_*, impressions, clicks, spend, actions"})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-cyan-400",children:"breakdowns:"}),(0,dt.jsx)("span",{className:"text-purple-300",children:"impression_device"})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-cyan-400",children:"actions:"}),(0,dt.jsx)("span",{className:"text-pink-300",children:"action_device [optional_split]"})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-cyan-400",children:"output:"}),(0,dt.jsx)("span",{className:"text-pink-300",children:"ad-device matrix pairs"})]})]})]}),(0,dt.jsxs)("button",{type:"button",onClick:()=>V("device"),disabled:k||!d||!h,className:"w-full h-14 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold rounded-xl  hover:from-purple-400 hover:to-pink-400 disabled:from-gray-600 disabled:to-gray-700  transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]  shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40  disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden group/btn",children:[(0,dt.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -skew-x-12 -translate-x-full group-hover/btn:translate-x-full transition-transform duration-700"}),(0,dt.jsx)("span",{className:"relative flex items-center justify-center space-x-2",children:(0,dt.jsx)("span",{children:k?"\u26a1 PROCESSING...":"\ud83d\udd2c EXECUTE DEVICE-SCAN"})})]})]})]}),(0,dt.jsxs)("div",{className:"group relative",children:[(0,dt.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl blur opacity-20 group-hover:opacity-40 transition duration-300"}),(0,dt.jsxs)("div",{className:"relative bg-gradient-to-br from-slate-800/80 to-slate-900/80 backdrop-blur-xl border border-orange-500/30 rounded-2xl p-6 hover:border-orange-400/60 transition-all duration-300",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,dt.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-400 to-red-500 rounded-xl flex items-center justify-center shadow-lg shadow-orange-500/20",children:(0,dt.jsx)("span",{className:"text-white font-bold text-lg",children:"\ud83d\uddfa\ufe0f"})}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h3",{className:"text-xl font-bold text-orange-300 tracking-wide",children:"REGIONAL-ZONE MAPPER"}),(0,dt.jsx)("div",{className:"text-xs text-orange-400/70 font-mono",children:"MODULE_003 \u2022 REGION_ANALYTICS"})]})]}),(0,dt.jsx)("p",{className:"text-slate-300 text-sm mb-4 leading-relaxed",children:"Continental-scale performance intelligence. Aggregates advertising metrics across major world regions with territorial AI clustering."}),(0,dt.jsxs)("div",{className:"bg-slate-900/60 rounded-xl p-4 mb-6 border border-orange-500/20",children:[(0,dt.jsx)("div",{className:"text-xs text-orange-400 font-mono mb-2",children:"NEURAL PARAMETERS:"}),(0,dt.jsxs)("div",{className:"text-xs text-slate-300 font-mono space-y-1",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-cyan-400",children:"fields:"}),(0,dt.jsx)("span",{className:"text-yellow-300",children:"ad_id, ad_name, campaign_*, impressions, clicks, spend, actions"})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-cyan-400",children:"breakdowns:"}),(0,dt.jsx)("span",{className:"text-orange-300",children:"region"})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-cyan-400",children:"output:"}),(0,dt.jsx)("span",{className:"text-pink-300",children:"ad-region matrix pairs"})]})]})]}),(0,dt.jsxs)("button",{type:"button",onClick:()=>V("region"),disabled:k||!d||!h,className:"w-full h-14 bg-gradient-to-r from-orange-500 to-red-500 text-white font-bold rounded-xl  hover:from-orange-400 hover:to-red-400 disabled:from-gray-600 disabled:to-gray-700  transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]  shadow-lg shadow-orange-500/25 hover:shadow-orange-500/40  disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden group/btn",children:[(0,dt.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -skew-x-12 -translate-x-full group-hover/btn:translate-x-full transition-transform duration-700"}),(0,dt.jsx)("span",{className:"relative flex items-center justify-center space-x-2",children:(0,dt.jsx)("span",{children:k?"\u26a1 PROCESSING...":"\ud83c\udf10 EXECUTE REGION-SCAN"})})]})]})]}),(0,dt.jsxs)("div",{className:"group relative",children:[(0,dt.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-r from-yellow-500 to-amber-500 rounded-2xl blur opacity-20 group-hover:opacity-40 transition duration-300"}),(0,dt.jsxs)("div",{className:"relative bg-gradient-to-br from-slate-800/80 to-slate-900/80 backdrop-blur-xl border border-yellow-500/30 rounded-2xl p-6 hover:border-yellow-400/60 transition-all duration-300",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,dt.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-400 to-amber-500 rounded-xl flex items-center justify-center shadow-lg shadow-yellow-500/20",children:(0,dt.jsx)("span",{className:"text-white font-bold text-lg",children:"\ud83c\udf0d\ud83d\udcf1"})}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h3",{className:"text-lg font-bold text-yellow-300 tracking-wide",children:"HYBRID GEO-DEVICE"}),(0,dt.jsx)("div",{className:"text-xs text-yellow-400/70 font-mono",children:"MODULE_004 \u2022 CROSS_DIMENSIONAL"})]})]}),(0,dt.jsx)("p",{className:"text-slate-300 text-xs mb-3 leading-relaxed",children:"TESTED RECIPE: Attempts to get country rows with device-attributed actions. Meta API has confirmed this combination is not supported."}),(0,dt.jsxs)("div",{className:"bg-slate-900/60 rounded-xl p-3 mb-4 border border-red-500/20",children:[(0,dt.jsx)("div",{className:"text-xs text-red-400 font-mono mb-2",children:"FAILED PARAMS:"}),(0,dt.jsxs)("div",{className:"text-xs text-slate-300 font-mono space-y-1",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-cyan-400",children:"fields:"}),(0,dt.jsx)("span",{className:"text-yellow-300",children:"campaign_*, impressions, actions"})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-cyan-400",children:"breakdowns:"}),(0,dt.jsx)("span",{className:"text-yellow-300",children:"country"})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-cyan-400",children:"action_breakdowns:"}),(0,dt.jsx)("span",{className:"text-pink-300",children:"action_device"})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-red-400",children:"error:"}),(0,dt.jsx)("span",{className:"text-red-300",children:"Invalid combination"})]})]})]}),(0,dt.jsx)("div",{className:"bg-red-900/40 border border-red-500/30 rounded-lg p-2 mb-4",children:(0,dt.jsxs)("div",{className:"text-xs text-red-200",children:["\u274c ",(0,dt.jsx)("strong",{children:"Meta API Error:"}),' "Current combination of data breakdown columns (action_device, country) is invalid"']})}),(0,dt.jsxs)("button",{type:"button",onClick:()=>V("country_device"),disabled:k||!d||!h,className:"w-full h-12 bg-gradient-to-r from-red-500 to-red-600 text-white font-bold rounded-xl  hover:from-red-400 hover:to-red-500 disabled:from-gray-600 disabled:to-gray-700  transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]  shadow-lg shadow-red-500/25 hover:shadow-red-500/40  disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden group/btn text-sm",children:[(0,dt.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -skew-x-12 -translate-x-full group-hover/btn:translate-x-full transition-transform duration-700"}),(0,dt.jsx)("span",{className:"relative flex items-center justify-center space-x-2",children:(0,dt.jsx)("span",{children:k?"\u26a1 FAILING...":"\u274c DEMO ERROR"})})]})]})]})]}),d&&h?(0,dt.jsx)("div",{className:"mt-8 text-center",children:(0,dt.jsxs)("div",{className:"inline-flex items-center space-x-2 text-cyan-300 text-sm",children:[(0,dt.jsx)("div",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),(0,dt.jsx)("span",{className:"font-mono",children:"QUANTUM TEMPLATES \u2022 READY FOR EXECUTION"}),(0,dt.jsx)("div",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"})]})}):(0,dt.jsxs)("div",{className:"mt-8 relative",children:[(0,dt.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl blur opacity-20"}),(0,dt.jsx)("div",{className:"relative bg-slate-900/80 backdrop-blur-xl border border-orange-500/40 rounded-2xl p-4",children:(0,dt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dt.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-400 to-red-500 rounded-lg flex items-center justify-center",children:(0,dt.jsx)("span",{className:"text-white font-bold",children:"\u26a0\ufe0f"})}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-orange-300 font-bold",children:"TEMPORAL PARAMETERS REQUIRED"}),(0,dt.jsx)("div",{className:"text-orange-200 text-sm",children:"Initialize start and end dates in the chronometer above to activate quantum templates"})]})]})})]}),(0,dt.jsxs)("div",{className:"mt-8 bg-slate-900/60 backdrop-blur-xl border border-blue-500/20 rounded-2xl p-6",children:[(0,dt.jsxs)("h3",{className:"text-lg font-bold text-blue-300 mb-4 flex items-center",children:[(0,dt.jsx)("span",{className:"mr-2",children:"\ud83e\udde0"}),"DIMENSIONAL ANALYSIS LIMITATIONS"]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm text-slate-300",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"font-semibold text-cyan-300 mb-2",children:"\u2705 Single Dimension (Supported)"}),(0,dt.jsxs)("ul",{className:"space-y-1 text-xs",children:[(0,dt.jsxs)("li",{children:["\u2022 ",(0,dt.jsx)("span",{className:"text-emerald-300",children:"Country only"})," - Shows performance by country"]}),(0,dt.jsxs)("li",{children:["\u2022 ",(0,dt.jsx)("span",{className:"text-purple-300",children:"Device only"})," - Shows performance by device + placement"]}),(0,dt.jsxs)("li",{children:["\u2022 ",(0,dt.jsx)("span",{className:"text-orange-300",children:"Region only"})," - Shows performance by region/state"]})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"font-semibold text-red-300 mb-2",children:"\u274c Hybrid Experiment Failed"}),(0,dt.jsxs)("div",{className:"text-xs",children:[(0,dt.jsxs)("p",{className:"mb-2",children:["The ",(0,dt.jsx)("span",{className:"text-red-300",children:"HYBRID GEO-DEVICE"})," tested Meta's ",(0,dt.jsx)("code",{children:"action_breakdowns"}),":"]}),(0,dt.jsxs)("ul",{className:"space-y-1",children:[(0,dt.jsxs)("li",{children:["\u2022 ",(0,dt.jsx)("span",{className:"text-cyan-300",children:"Goal:"})," Country rows + device action splits"]}),(0,dt.jsxs)("li",{children:["\u2022 ",(0,dt.jsx)("span",{className:"text-red-300",children:"Error:"}),' "Invalid combination of data breakdown columns"']}),(0,dt.jsxs)("li",{children:["\u2022 ",(0,dt.jsx)("span",{className:"text-red-300",children:"Result:"})," Meta API rejects this combination"]})]})]})]})]}),(0,dt.jsxs)("div",{className:"mt-6 p-4 bg-red-900/30 border border-red-500/30 rounded-lg",children:[(0,dt.jsx)("h4",{className:"font-semibold text-red-300 mb-2",children:"\u26a0\ufe0f Attribution Problem"}),(0,dt.jsx)("p",{className:"text-xs text-red-200 leading-relaxed",children:'Separate API calls cannot be combined for full attribution. Example: You cannot determine "iOS users in USA vs Android users in USA" by making separate country and device calls, because there\'s no way to cross-reference the user data between calls.'})]}),(0,dt.jsxs)("div",{className:"mt-4 p-4 bg-blue-900/30 border border-blue-500/30 rounded-lg",children:[(0,dt.jsx)("h4",{className:"font-semibold text-blue-300 mb-2",children:"\ud83d\udca1 Confirmed Solution"}),(0,dt.jsxs)("p",{className:"text-xs text-blue-200 leading-relaxed",children:["The ",(0,dt.jsx)("span",{className:"text-red-300",children:"HYBRID GEO-DEVICE"})," test confirms Meta API doesn't support cross-dimensional attribution. For geo-device insights, you must make separate API calls (country-only and device-only) and analyze the data independently. Full cross-attribution is not possible."]})]})]})]})]}),S&&(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,dt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Results"}),(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,dt.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 p-3 rounded",children:[(0,dt.jsx)("span",{className:"font-medium",children:"Total Records:"})," ",(null===(t=S.meta)||void 0===t?void 0:t.total_records)||0]}),(0,dt.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 p-3 rounded",children:[(0,dt.jsx)("span",{className:"font-medium",children:"Pages Fetched:"})," ",(null===(r=S.meta)||void 0===r?void 0:r.pages_fetched)||0]}),(0,dt.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 p-3 rounded",children:[(0,dt.jsx)("span",{className:"font-medium",children:"Date Range:"})," ",null===(n=S.meta)||void 0===n?void 0:n.start_date," to ",null===(i=S.meta)||void 0===i?void 0:i.end_date]}),(0,dt.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 p-3 rounded",children:[(0,dt.jsx)("span",{className:"font-medium",children:"Time Increment:"})," ",(null===(s=S.meta)||void 0===s?void 0:s.time_increment)||1," day(s)"]})]}),(0,dt.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 p-3 rounded mb-4",children:[(0,dt.jsx)("span",{className:"font-medium",children:"Fields:"})," ",null===(o=S.meta)||void 0===o?void 0:o.fields]}),(null===(l=S.meta)||void 0===l?void 0:l.breakdowns)&&(0,dt.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 p-3 rounded mb-4",children:[(0,dt.jsx)("span",{className:"font-medium",children:"Breakdowns:"})," ",null===(c=S.meta)||void 0===c?void 0:c.breakdowns]})]}),S.data&&S.data.data&&S.data.data.length>0?(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,dt.jsxs)("h3",{className:"text-lg font-medium",children:["Data Sample (",S.data.data.length," records)"]}),(0,dt.jsx)("div",{className:"flex items-center space-x-4",children:(0,dt.jsxs)("label",{className:"flex items-center",children:[(0,dt.jsx)("input",{type:"checkbox",checked:I,onChange:e=>L(e.target.checked),className:"mr-2"}),"Show Business Concepts"]})})]}),I&&Object.keys(F).length>0&&S.data.business_summary&&(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h4",{className:"text-md font-medium mb-3",children:"Business Concepts Summary"}),(0,dt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:Object.entries(S.data.business_summary).map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900 p-4 rounded-lg",children:[(0,dt.jsx)("h5",{className:"font-medium text-blue-800 dark:text-blue-200 capitalize",children:t}),(0,dt.jsxs)("div",{className:"text-sm text-blue-600 dark:text-blue-300 mt-2 space-y-1",children:[(0,dt.jsxs)("div",{children:["Count: ",r.total_count.toFixed(0)]}),(0,dt.jsxs)("div",{children:["Value: $",r.total_value.toFixed(2)]}),(0,dt.jsxs)("div",{children:["Conversions: ",r.total_conversions.toFixed(0)]}),(0,dt.jsxs)("div",{children:["Conv. Value: $",r.total_conversion_value.toFixed(2)]}),(0,dt.jsxs)("div",{className:"text-xs",children:["Records: ",r.records_with_data,"/",S.data.data.length]})]})]},t)})}),0===Object.keys(F).length&&(0,dt.jsx)("div",{className:"text-sm text-gray-500 italic",children:"No action mappings configured. Go to the Action Mapping tab to set up business concepts."})]}),(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,dt.jsx)("h4",{className:"text-md font-medium",children:"Raw JSON Data"}),(0,dt.jsxs)("button",{onClick:e=>{const t=JSON.stringify(U(S.data.data),null,2);navigator.clipboard.writeText(t).then(()=>{const t=e.target,r=t.textContent;t.textContent="\u2705 Copied!",t.classList.add("bg-green-500","text-white"),setTimeout(()=>{t.textContent=r,t.classList.remove("bg-green-500","text-white")},2e3)}).catch(e=>{console.error("Failed to copy:",e),alert("Failed to copy to clipboard")})},className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded  transition-colors duration-200 flex items-center space-x-1",children:[(0,dt.jsx)("span",{children:"\ud83d\udccb"}),(0,dt.jsx)("span",{children:"Copy All JSON"})]})]}),(0,dt.jsx)("div",{className:"bg-gray-100 dark:bg-gray-900 p-4 rounded overflow-auto max-h-96",children:(0,dt.jsx)("pre",{className:"text-xs",children:JSON.stringify(U(S.data.data),null,2)})})]})]}):(0,dt.jsx)("p",{className:"text-gray-500",children:"No data returned from API"})]})]})},gi=e=>{let{dataCoverage:t,missingDates:r,configurations:n}=e;return t?(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,dt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Data Coverage Summary"}),(0,dt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,dt.jsxs)("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold",children:t.total_days}),(0,dt.jsx)("div",{className:"text-sm text-gray-600",children:"Days Stored"})]}),(0,dt.jsxs)("div",{className:"bg-green-100 dark:bg-green-900 p-3 rounded",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold",children:t.total_records}),(0,dt.jsx)("div",{className:"text-sm text-gray-600",children:"Total Records"})]}),(0,dt.jsxs)("div",{className:"bg-orange-100 dark:bg-orange-900 p-3 rounded",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold",children:r.length}),(0,dt.jsx)("div",{className:"text-sm text-gray-600",children:"Missing Days"})]}),(0,dt.jsxs)("div",{className:"bg-purple-100 dark:bg-purple-900 p-3 rounded",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold",children:n.length}),(0,dt.jsx)("div",{className:"text-sm text-gray-600",children:"Configurations"})]})]}),t.earliest_date&&(0,dt.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:["Date Range: ",t.earliest_date," to ",t.latest_date]})]}):null},xi=e=>{let{activeJobs:t,cancelJob:r}=e;if(0===t.length)return null;const n=e=>{switch(e){case"running":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"completed_with_errors":return"bg-yellow-100 text-yellow-800";case"completed_unknown":return"bg-purple-100 text-purple-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},a=e=>{switch(e){case"completed_unknown":return"Status Unknown";case"completed_with_errors":return"Completed (with errors)";default:return e}};return(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,dt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Collection Jobs"}),(0,dt.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,dt.jsxs)("div",{className:"border rounded p-3",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"font-medium",children:[e.start_date," to ",e.end_date]}),(0,dt.jsxs)("div",{className:"text-sm text-gray-600",children:["Fields: ",e.fields,e.breakdowns&&" | Breakdowns: ".concat(e.breakdowns)]})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(n(e.status)),children:a(e.status)}),"running"===e.status&&(0,dt.jsx)("button",{onClick:()=>r(e.job_id),className:"text-red-600 hover:text-red-800 text-xs",children:"Cancel"})]})]}),"running"===e.status&&(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,dt.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(e.progress_percentage,"%")}})}),(0,dt.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:[e.current_date&&"Processing: ".concat(e.current_date)," (".concat(Math.round(e.progress_percentage),"%)")]})]}),"completed_unknown"===e.status&&e.message&&(0,dt.jsxs)("div",{className:"mt-2 text-xs text-purple-600 bg-purple-50 p-2 rounded",children:[(0,dt.jsx)("strong",{children:"Note:"})," ",e.message]}),e.errors&&e.errors.length>0&&(0,dt.jsxs)("div",{className:"mt-2 text-xs text-red-600",children:[e.errors.length," error(s) occurred"]})]},e.job_id))})]})},bi=()=>{const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)({}),[i,s]=(0,a.useState)(!0),[o,l]=(0,a.useState)(new Set),[c,d]=(0,a.useState)(null);(0,a.useEffect)(()=>{u()},[]);const u=async()=>{s(!0);try{const e=await Da(),r=Array.isArray(e)?e:e.data||[];t(r);const a=r.map(async e=>{if(e.day_count>0)try{const t=await Ra({start_date:e.earliest_date,end_date:e.latest_date,fields:e.fields,breakdowns:e.breakdowns});return{configHash:e.config_hash,data:t}}catch(t){return console.error("Error loading data for config ".concat(e.config_hash,":"),t),{configHash:e.config_hash,data:null}}return{configHash:e.config_hash,data:null}}),i=await Promise.all(a),s={};i.forEach(e=>{let{configHash:t,data:r}=e;s[t]=r}),n(s)}catch(e){console.error("Error loading configurations:",e)}finally{s(!1)}},h=(e,t,r)=>{if(!e)return{};if(!Array.isArray(e))return console.warn("processMetricsForDate: records is not an array:",typeof e,e),{};if(0===e.length)return{};const n={};return t.forEach(t=>{if(m(t)){const r=e.reduce((e,r)=>e+(parseFloat(r[t])||0),0);n[t]=r}else if(f(t)){const r=new Set;e.forEach(e=>{e[t]&&r.add(e[t])}),n[t]=r.size}else n[t]=e.length>0?"Data":"No Data"}),r&&(n._breakdownData=p(e,t)),n},p=(e,t)=>{const r={};return Array.isArray(e)?(e.forEach(e=>{const n=Object.keys(e).filter(e=>!t.includes(e)&&!["date_start","date_stop"].includes(e)).map(t=>"".concat(t,":").concat(e[t])).join(" | ");r[n]||(r[n]={}),t.forEach(t=>{if(m(t)){const a=parseFloat(e[t])||0;r[n][t]=(r[n][t]||0)+a}})}),r):(console.warn("processBreakdownData: records is not an array:",typeof e,e),r)},m=e=>["impressions","clicks","spend","reach","frequency","cpc","cpm","cpp","unique_clicks","unique_ctr","inline_link_clicks","outbound_clicks","estimated_ad_recallers","estimated_ad_recall_rate"].includes(e)||e.includes("action")||e.includes("conversion"),f=e=>["ad_name","campaign_name","adset_name","ad_id","campaign_id","adset_id"].includes(e),g=(e,t)=>"number"===typeof t?"spend"===e||e.includes("cost")?"$".concat(t.toFixed(2)):e.includes("rate")||e.includes("ctr")?"".concat((100*t).toFixed(2),"%"):Number.isInteger(t)?t.toLocaleString():t.toFixed(2):"number"===typeof t&&f(e)?"".concat(t," ").concat(e.includes("campaign")?"campaigns":e.includes("ad")?"ads":"items"):t,x=(e,t)=>{if(!t)return(0,dt.jsx)("div",{className:"text-gray-500 text-center py-4",children:"No data available for this configuration"});const{dates:r,dateData:n,fields:a,hasBreakdowns:i,businessMetrics:s}=t,o=e.config_hash;return(0,dt.jsxs)("div",{className:"space-y-6",children:[s&&Object.keys(s).length>0&&(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"text-md font-medium mb-3 text-blue-800",children:"\ud83d\udcb0 Business Metrics Summary"}),(0,dt.jsx)("div",{className:"overflow-x-auto",children:(0,dt.jsxs)("table",{className:"min-w-full border border-gray-200 bg-blue-50",children:[(0,dt.jsx)("thead",{className:"bg-blue-100",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-blue-800 border-r",children:"Business Concept"}),r.map(e=>(0,dt.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-blue-800 border-r",children:e},"".concat(o,"-bm-header-").concat(e)))]})}),(0,dt.jsx)("tbody",{className:"bg-white",children:(()=>{const e=r.find(e=>s[e]&&Object.keys(s[e]).length>0);if(!e)return null;return Object.keys(s[e]).map((e,t)=>(0,dt.jsxs)("tr",{className:t%2===0?"bg-blue-25":"bg-white",children:[(0,dt.jsx)("td",{className:"px-4 py-2 text-sm font-medium text-blue-900 border-r capitalize",children:"trial_started"===e?"Trial Started":"initial_purchase"===e?"Initial Purchase":e.replace(/_/g," ")}),r.map(t=>{var r;return(0,dt.jsx)("td",{className:"px-3 py-2 text-sm text-blue-800 text-center border-r font-medium",children:s[t]&&void 0!==(null===(r=s[t][e])||void 0===r?void 0:r.count)?s[t][e].count:"-"},"".concat(o,"-bm-").concat(e,"-").concat(t))})]},"".concat(o,"-bm-").concat(e)))})()})]})})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"text-md font-medium mb-3 text-gray-800",children:"\ud83d\udcca Raw Data Metrics"}),(0,dt.jsx)("div",{className:"overflow-x-auto",children:(0,dt.jsxs)("table",{className:"min-w-full border border-gray-200",children:[(0,dt.jsx)("thead",{className:"bg-gray-50",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-r",children:"Metric"}),r.map(e=>(0,dt.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-r",children:e},"".concat(o,"-rm-header-").concat(e)))]})}),(0,dt.jsx)("tbody",{className:"bg-white",children:a.map((e,t)=>(0,dt.jsxs)("tr",{className:t%2===0?"bg-gray-50":"bg-white",children:[(0,dt.jsx)("td",{className:"px-4 py-2 text-sm font-medium text-gray-900 border-r",children:e}),r.map(t=>(0,dt.jsx)("td",{className:"px-3 py-2 text-sm text-gray-700 text-center border-r",children:n[t]&&void 0!==n[t][e]?g(e,n[t][e]):"-"},"".concat(o,"-rm-").concat(e,"-").concat(t)))]},"".concat(o,"-rm-").concat(e)))})]})})]}),i&&Object.keys(n).some(e=>n[e]._breakdownData)&&(0,dt.jsxs)("div",{className:"mt-6",children:[(0,dt.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-3",children:"Breakdown Data"}),r.map(e=>{const t=n[e]._breakdownData;return t&&0!==Object.keys(t).length?(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsx)("h6",{className:"text-xs font-medium text-gray-600 mb-2",children:e}),(0,dt.jsx)("div",{className:"overflow-x-auto",children:(0,dt.jsxs)("table",{className:"min-w-full border border-gray-200 text-xs",children:[(0,dt.jsx)("thead",{className:"bg-gray-100",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"px-2 py-1 text-left text-gray-700 border-r",children:"Breakdown"}),a.filter(m).map(t=>(0,dt.jsx)("th",{className:"px-2 py-1 text-center text-gray-700 border-r",children:t},"".concat(o,"-bd-").concat(e,"-header-").concat(t)))]})}),(0,dt.jsx)("tbody",{children:Object.entries(t).map(t=>{let[r,n]=t;return(0,dt.jsxs)("tr",{className:"bg-white",children:[(0,dt.jsx)("td",{className:"px-2 py-1 text-gray-900 border-r",children:r}),a.filter(m).map(t=>(0,dt.jsx)("td",{className:"px-2 py-1 text-center text-gray-700 border-r",children:g(t,n[t]||0)},"".concat(o,"-bd-").concat(e,"-").concat(r,"-").concat(t)))]},"".concat(o,"-bd-").concat(e,"-").concat(r))})})]})})]},"".concat(o,"-bd-").concat(e)):null})]})]})};return i?(0,dt.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,dt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mr-3"}),(0,dt.jsx)("span",{children:"Loading historical data..."})]}):0===e.length?(0,dt.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,dt.jsx)("p",{children:"No historical data configurations found."}),(0,dt.jsx)("p",{className:"text-sm mt-2",children:"Start a historical collection job to see data here."})]}):(0,dt.jsxs)("div",{className:"space-y-4",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,dt.jsx)("h3",{className:"text-lg font-medium",children:"Historical Data Overview"}),(0,dt.jsx)("button",{onClick:u,className:"text-sm text-blue-600 hover:text-blue-800",children:"Refresh Data"})]}),e.map(e=>{const t=o.has(e.config_hash),n=r[e.config_hash],a=n?(e=>{if(!e||!e.data||0===e.data.length)return null;const t=e.config.fields.split(",").map(e=>e.trim()),r=e.config.breakdowns&&e.config.breakdowns.trim(),n=e.data.map(e=>e.date).sort(),a={},i={};return e.data.forEach(e=>{const n=e.date;e.business_metrics&&(i[n]=e.business_metrics);let s=[];e.data&&(e.data.data&&Array.isArray(e.data.data.data)?s=e.data.data.data:Array.isArray(e.data.data)?s=e.data.data:Array.isArray(e.data)?s=e.data:(console.warn("Unexpected data structure for date:",n,e.data),s=[])),a[n]=h(s,t,r)}),{dates:n,dateData:a,fields:t,hasBreakdowns:r,config:e.config,businessMetrics:i}})(n):null;return(0,dt.jsxs)("div",{className:"border border-gray-200 rounded-lg",children:[(0,dt.jsx)("div",{className:"p-4 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>(e=>{const t=new Set(o);t.has(e)?t.delete(e):t.add(e),l(t)})(e.config_hash),children:(0,dt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"font-medium text-gray-900",children:["Fields: ",e.fields]}),e.breakdowns&&(0,dt.jsxs)("div",{className:"text-sm text-gray-600",children:["Breakdowns: ",e.breakdowns]}),(0,dt.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:[e.day_count," days \u2022 ",e.earliest_date," to ",e.latest_date]})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(window.confirm("Are you sure you want to delete this entire dataset? This action cannot be undone.")){d(e);try{await Ta(e),await u()}catch(t){console.error("Error deleting configuration:",t),alert("Failed to delete configuration. Please try again.")}finally{d(null)}}})(e.config_hash)},disabled:c===e.config_hash,className:"px-2 py-1 text-xs bg-red-500 text-white rounded hover:bg-red-600 disabled:bg-gray-400",title:"Delete this entire dataset",children:c===e.config_hash?"Deleting...":"Delete"}),(0,dt.jsx)("div",{className:"text-gray-400",children:t?"\u2212":"+"})]})]})}),t&&(0,dt.jsx)("div",{className:"p-4 border-t",children:x(e,a)})]},e.config_hash)})]})},yi=e=>{let{startDateInput:t,setStartDateInput:r,endDateInput:n,setEndDateInput:i,selectedFields:s,setSelectedFields:o,selectedBreakdowns:l,setSelectedBreakdowns:c,error:d,setError:u}=e;const[h,p]=(0,a.useState)([]),[m,f]=(0,a.useState)([]),[g,x]=(0,a.useState)(null),[b,y]=(0,a.useState)([]),[v,_]=(0,a.useState)(!1),[k,j]=(0,a.useState)(null),[w,N]=(0,a.useState)(null),[S,O]=(0,a.useState)(!0),[C,E]=(0,a.useState)(!1),P=(0,a.useRef)(null);(0,a.useEffect)(()=>(h.some(e=>"running"===e.status||"starting"===e.status)?P.current=setInterval(()=>{T()},2e3):P.current&&clearInterval(P.current),()=>{P.current&&clearInterval(P.current)}),[h]),(0,a.useEffect)(()=>{A(),M()},[s,l]),(0,a.useEffect)(()=>{p([]);const e=setInterval(()=>{p(e=>e.filter(e=>{if("running"===e.status||"starting"===e.status)return!0;if(e.end_time){const t=new Date(e.end_time);return new Date-t<3e5}return!0}))},6e4);return()=>clearInterval(e)},[]);const A=async()=>{try{const e=await Da();f(e)}catch(d){console.error("Error loading configurations:",d)}},M=async()=>{const e=oi(s),r=li(l);if(e)try{const a=await Aa({fields:e,breakdowns:r,start_date:t||void 0,end_date:n||void 0});if(x(a),t&&n){const a=await Ma({start_date:t,end_date:n,fields:e,breakdowns:r});y(a.missing_dates||[])}}catch(d){console.error("Error updating data coverage:",d)}},T=async()=>{const e=h.filter(e=>"running"===e.status||"starting"===e.status);if(0===e.length)return;const t=await Promise.all(e.map(async e=>{try{const t=await Ea(e.job_id);return Re(Re({},e),t)}catch(d){var t;return console.error("Error polling job ".concat(e.job_id,":"),d),404===(null===(t=d.response)||void 0===t?void 0:t.status)?(console.log("Job ".concat(e.job_id," not found in active tracking, checking if data was collected...")),M(),Re(Re({},e),{},{status:"completed_unknown",message:"Job completed but status unavailable. Check data coverage for results."})):e}}));p(r=>[...r.filter(t=>!e.find(e=>e.job_id===t.job_id)),...t]),t.some(e=>"completed"===e.status||"completed_with_errors"===e.status||"completed_unknown"===e.status)&&M()};return(0,dt.jsxs)("div",{className:"space-y-6",children:[(0,dt.jsx)(bi,{}),(0,dt.jsx)(gi,{dataCoverage:g,missingDates:b,configurations:m}),(0,dt.jsx)(xi,{activeJobs:h,cancelJob:async e=>{try{await Pa(e),p(t=>t.map(t=>t.job_id===e?Re(Re({},t),{},{status:"cancelled"}):t))}catch(d){console.error("Error cancelling job:",d)}}}),(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,dt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Configure Historical Collection"}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Date Range"}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Start Date (YYYY-MM-DD)",(0,dt.jsx)("span",{className:"text-red-500",children:" *"})]}),(0,dt.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600",placeholder:"e.g., 2023-05-01"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["End Date (YYYY-MM-DD)",(0,dt.jsx)("span",{className:"text-red-500",children:" *"})]}),(0,dt.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600",placeholder:"e.g., 2023-05-31"})]})]})]}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,dt.jsxs)("h3",{className:"text-lg font-medium",children:["Select Fields for Collection",(0,dt.jsx)("span",{className:"text-red-500",children:" *"})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,dt.jsxs)("span",{className:"text-sm text-gray-500",children:[Object.values(s).filter(Boolean).length," fields selected"]}),(0,dt.jsxs)("button",{type:"button",onClick:()=>O(!S),className:"text-blue-600 hover:text-blue-800 text-sm",children:[S?"Hide":"Show"," Fields"]})]})]}),S&&(0,dt.jsx)("div",{className:"border rounded p-4 bg-gray-50 dark:bg-gray-700",children:$a.map((e,t)=>(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,dt.jsx)("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:e.name}),(0,dt.jsxs)("div",{className:"space-x-2",children:[(0,dt.jsx)("button",{type:"button",onClick:()=>(e=>{const t=Re({},s);e.forEach(e=>{t[e.id]=!0}),o(t)})(e.fields),className:"text-xs text-blue-600 hover:text-blue-800",children:"Select All"}),(0,dt.jsx)("button",{type:"button",onClick:()=>(e=>{const t=Re({},s);e.forEach(e=>{t[e.id]=!1}),o(t)})(e.fields),className:"text-xs text-red-600 hover:text-red-800",children:"Clear"})]})]}),(0,dt.jsx)("div",{className:"flex flex-wrap gap-2",children:e.fields.map(e=>{const t=e.isActionMetric;return(0,dt.jsxs)("button",{type:"button",onClick:()=>{return t=e.id,void o(e=>Re(Re({},e),{},{[t]:!e[t]}));var t},className:"px-3 py-1 rounded-full text-sm ".concat(s[e.id]?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300"),children:[e.label,(0,dt.jsx)("span",{className:"ml-1 text-xs",children:t&&"\u26a1"})]},e.id)})})]},t))})]}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,dt.jsx)("h3",{className:"text-lg font-medium",children:"Select Breakdowns (Optional)"}),(0,dt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,dt.jsxs)("span",{className:"text-sm text-gray-500",children:[Object.values(l).filter(Boolean).length," breakdowns selected"]}),(0,dt.jsxs)("button",{type:"button",onClick:()=>E(!C),className:"text-blue-600 hover:text-blue-800 text-sm",children:[C?"Hide":"Show"," Breakdowns"]})]})]}),C&&(0,dt.jsxs)("div",{className:"border rounded p-4 bg-gray-50 dark:bg-gray-700",children:[(0,dt.jsxs)("div",{className:"text-xs bg-yellow-100 dark:bg-yellow-900 p-2 rounded mb-3 text-yellow-800 dark:text-yellow-300",children:[(0,dt.jsx)("strong",{children:"Historical Collection Rules:"}),(0,dt.jsxs)("ul",{className:"mt-1 ml-2 list-disc pl-4",children:[(0,dt.jsx)("li",{children:"Maximum 2 breakdowns allowed"}),(0,dt.jsxs)("li",{children:["With ",(0,dt.jsx)("strong",{children:"\u26a1 action metrics"}),", only ",(0,dt.jsx)("code",{children:"conversion_destination"})," breakdown is allowed"]}),(0,dt.jsx)("li",{children:"Historical jobs will collect data for ALL days in the date range with the selected configuration"})]})]}),ti.map((e,t)=>(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,dt.jsx)("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:e.name}),(0,dt.jsxs)("div",{className:"space-x-2",children:[(0,dt.jsx)("button",{type:"button",onClick:()=>(e=>{if(!e.every(e=>!ii(e.id,s,l)))return;const t=Re({},l);e.forEach(e=>{t[e.id]=!0}),c(t)})(e.breakdowns),className:"text-xs text-blue-600 hover:text-blue-800",disabled:e.breakdowns.some(e=>ii(e.id,s,l)),children:"Select All"}),(0,dt.jsx)("button",{type:"button",onClick:()=>(e=>{const t=Re({},l);e.forEach(e=>{t[e.id]=!1}),c(t)})(e.breakdowns),className:"text-xs text-red-600 hover:text-red-800",children:"Clear"})]})]}),(0,dt.jsx)("div",{className:"flex flex-wrap gap-2",children:e.breakdowns.map(e=>{const t=ii(e.id,s,l),r=t?si(e.id,s,l):"",n=Za.includes(e.id);return(0,dt.jsxs)("button",{type:"button",onClick:()=>{return t=e.id,void(ii(t,s,l)||c(e=>Re(Re({},e),{},{[t]:!e[t]})));var t},className:"px-3 py-1 rounded-full text-sm ".concat(l[e.id]?"bg-green-500 text-white":t?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300"),disabled:t,title:r,children:[e.label,n&&(0,dt.jsx)("span",{className:"ml-1 text-xs",title:"Compatible with action metrics",children:"\u2605"})]},e.id)})})]},t))]})]}),t&&n&&Object.values(s).some(Boolean)&&(0,dt.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:[(0,dt.jsx)("h4",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Collection Summary"}),(0,dt.jsxs)("div",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Date Range:"})," ",t," to ",n]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Fields:"})," ",oi(s)]}),li(l)&&(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Breakdowns:"})," ",li(l)]}),b.length>0&&(0,dt.jsxs)("div",{className:"text-orange-700 dark:text-orange-300",children:[(0,dt.jsxs)("strong",{children:[b.length," days"]})," need to be collected",b.length<=5&&" (".concat(b.join(", "),")")]})]})]}),(0,dt.jsx)("button",{onClick:async()=>{if(!t||!n)return void u("Start date and end date are required for historical collection");const e=oi(s);if(!e)return void u("At least one field must be selected");const r=ai(s,l);if(r.valid)try{const r={start_date:t,end_date:n,fields:e,breakdowns:li(l)||void 0},a={job_id:(await Ca(r)).job_id,status:"running",start_date:t,end_date:n,fields:e,breakdowns:li(l)||"",progress_percentage:0};p(e=>[...e,a]),u(null),M()}catch(d){var a,i;u((null===(a=d.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.error)||d.message||"Failed to start historical collection")}else u(r.errors[0])},disabled:!t||!n||!Object.values(s).some(Boolean),className:"px-6 py-3 bg-green-600 text-white rounded hover:bg-green-700 disabled:bg-gray-400",children:"Start Historical Collection Job"})]}),w&&(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,dt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Exported Data"}),(0,dt.jsx)("div",{className:"bg-gray-100 dark:bg-gray-900 p-4 rounded overflow-auto max-h-96",children:(0,dt.jsx)("pre",{className:"text-xs",children:JSON.stringify(w,null,2)})})]})]})},vi={PURCHASE:["purchase","onsite_web_purchase","onsite_web_app_purchase","omni_purchase","web_in_store_purchase","web_app_in_store_purchase","offsite_conversion.fb_pixel_purchase","add_payment_info","offsite_conversion.fb_pixel_add_payment_info","initiate_checkout","onsite_web_initiate_checkout","omni_initiated_checkout","offsite_conversion.fb_pixel_initiate_checkout","offsite_conversion.fb_pixel_custom.server_purchase"],LEADS_CONVERSIONS:["lead","onsite_web_lead","offsite_conversion.fb_pixel_lead","complete_registration","offsite_conversion.fb_pixel_complete_registration","omni_complete_registration","offsite_conversion.custom.532547799297472","offsite_conversion.fb_pixel_custom"],TRIAL_SUBSCRIPTION:["start_trial_mobile_app","start_trial_total","offsite_conversion.fb_pixel_custom.TrialStartedRoasEvent"],ENGAGEMENT:["page_engagement","post_engagement","video_view","link_click","post_reaction","like","comment","post"],CONTENT_VIEWING:["view_content","onsite_web_view_content","onsite_web_app_view_content","omni_view_content","offsite_conversion.fb_pixel_view_content","landing_page_view","omni_landing_page_view","onsite_conversion.post_save"],APP_EVENTS:["mobile_app_install","omni_app_install","omni_activate_app","app_custom_event.fb_mobile_activate_app","offsite_conversion.fb_pixel_custom.web2app-checkout-stripe-success"],MESSAGING:["onsite_conversion.messaging_first_reply","onsite_conversion.messaging_conversation_started_7d","onsite_conversion.messaging_block"]},_i=Object.values(vi).flat(),ki={conversions:{description:"All purchase and conversion-related actions",suggestedActions:["purchase","onsite_web_purchase","omni_purchase","offsite_conversion.fb_pixel_purchase","lead","complete_registration"]},revenue_actions:{description:"Purchase actions that generate revenue",suggestedActions:["purchase","onsite_web_purchase","onsite_web_app_purchase","omni_purchase","web_in_store_purchase","offsite_conversion.fb_pixel_purchase"]},trial_starts:{description:"Trial initiation events",suggestedActions:["start_trial_mobile_app","start_trial_total","offsite_conversion.fb_pixel_custom.TrialStartedRoasEvent"]},lead_generation:{description:"Lead capture and registration events",suggestedActions:["lead","onsite_web_lead","offsite_conversion.fb_pixel_lead","complete_registration","offsite_conversion.fb_pixel_complete_registration"]},engagement:{description:"User engagement and interaction events",suggestedActions:["page_engagement","post_engagement","video_view","link_click","post_reaction","like","comment"]},app_installs:{description:"Mobile app installation events",suggestedActions:["mobile_app_install","omni_app_install","omni_activate_app"]},content_views:{description:"Content viewing and page visit events",suggestedActions:["view_content","onsite_web_view_content","omni_view_content","landing_page_view","offsite_conversion.fb_pixel_view_content"]},checkout_funnel:{description:"Checkout process events",suggestedActions:["initiate_checkout","onsite_web_initiate_checkout","omni_initiated_checkout","add_payment_info","offsite_conversion.fb_pixel_add_payment_info"]}},ji=()=>{const[e,t]=(0,a.useState)({}),[r,n]=(0,a.useState)([]),[i,s]=(0,a.useState)(!1),[o,l]=(0,a.useState)({conceptName:"",actionTypes:[],aggregationType:"sum"}),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),p=Object.keys(ki);(0,a.useEffect)(()=>{f(),m()},[]);const m=()=>{n(_i),x()},f=async()=>{try{const e=await Ia();if(e.mappings&&Object.keys(e.mappings).length>0)return t(e.mappings),void localStorage.setItem("meta_action_mappings",JSON.stringify(e.mappings));const r=localStorage.getItem("meta_action_mappings");if(r){const e=JSON.parse(r);t(e),Object.keys(e).length>0&&await La(e)}}catch(e){console.error("Error loading mappings:",e);try{const e=localStorage.getItem("meta_action_mappings");e&&t(JSON.parse(e))}catch(r){console.error("Error loading from localStorage:",r)}}},g=async e=>{try{await La(e),t(e),localStorage.setItem("meta_action_mappings",JSON.stringify(e)),console.log("Action mappings saved successfully")}catch(r){console.error("Error saving mappings to backend:",r),t(e),localStorage.setItem("meta_action_mappings",JSON.stringify(e)),alert("Mappings saved locally, but failed to sync to server. They will be synced next time the page loads.")}},x=async()=>{s(!0);try{const t=await Da(),r=new Set;for(const n of t.slice(0,3))if(n.day_count>0)try{(await Ra({start_date:n.latest_date,end_date:n.latest_date,fields:n.fields,breakdowns:n.breakdowns})).data.forEach(e=>{let t=[];if(e.data&&e.data.data&&Array.isArray(e.data.data))t=e.data.data;else{if(!e.data||!Array.isArray(e.data))return void console.warn("Unexpected data structure in ActionMapper:",e);t=e.data}Array.isArray(t)?t.forEach(e=>{e&&"object"===typeof e?(e.actions&&Array.isArray(e.actions)&&e.actions.forEach(e=>{e&&e.action_type&&r.add(e.action_type)}),e.action_values&&Array.isArray(e.action_values)&&e.action_values.forEach(e=>{e&&e.action_type&&r.add(e.action_type)}),e.conversions&&Array.isArray(e.conversions)&&e.conversions.forEach(e=>{e&&e.action_type&&r.add(e.action_type)}),e.conversion_values&&Array.isArray(e.conversion_values)&&e.conversion_values.forEach(e=>{e&&e.action_type&&r.add(e.action_type)})):console.warn("Invalid record in ActionMapper:",e)}):console.warn("Records is not an array in ActionMapper:",typeof t,t)})}catch(e){console.error("Error loading data for config ".concat(n.config_hash,":"),e)}const a=new Set([..._i,...Array.from(r)]);n(Array.from(a).sort())}catch(e){console.error("Error discovering actions:",e),n(_i)}finally{s(!1)}},b=()=>0===o.actionTypes.length?[]:(e=>{const t=[];return Object.entries(ki).forEach(r=>{let[n,a]=r;const i=e.filter(e=>a.suggestedActions.includes(e));i.length>0&&t.push({concept:n,description:a.description,matchingActions:i,confidence:i.length/a.suggestedActions.length})}),t.sort((e,t)=>t.confidence-e.confidence)})(o.actionTypes),y={totalMappings:Object.keys(e).length,totalActionsMapped:Object.values(e).reduce((e,t)=>e+t.actionTypes.length,0),unmappedActions:r.filter(t=>!Object.values(e).some(e=>e.actionTypes.includes(t)))};return(0,dt.jsxs)("div",{className:"space-y-6",children:[(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,dt.jsx)("h2",{className:"text-xl font-semibold",children:"Meta Action Mapping"}),(0,dt.jsx)("button",{onClick:()=>d(!c),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:c?"Cancel":"Add New Mapping"})]}),(0,dt.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Map Meta action types to business concepts for better reporting and analysis. This helps aggregate related actions into meaningful metrics."}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,dt.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900 p-3 rounded",children:[(0,dt.jsx)("div",{className:"text-sm text-blue-600 dark:text-blue-300",children:"Total Mappings"}),(0,dt.jsx)("div",{className:"text-xl font-bold text-blue-800 dark:text-blue-100",children:y.totalMappings})]}),(0,dt.jsxs)("div",{className:"bg-green-50 dark:bg-green-900 p-3 rounded",children:[(0,dt.jsx)("div",{className:"text-sm text-green-600 dark:text-green-300",children:"Actions Mapped"}),(0,dt.jsx)("div",{className:"text-xl font-bold text-green-800 dark:text-green-100",children:y.totalActionsMapped})]}),(0,dt.jsxs)("div",{className:"bg-orange-50 dark:bg-orange-900 p-3 rounded",children:[(0,dt.jsx)("div",{className:"text-sm text-orange-600 dark:text-orange-300",children:"Unmapped Actions"}),(0,dt.jsx)("div",{className:"text-xl font-bold text-orange-800 dark:text-orange-100",children:y.unmappedActions.length})]})]}),(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("span",{className:"text-sm text-gray-500",children:[r.length," unique action types available (including ",_i.length," known from comprehensive analysis)"]}),(0,dt.jsx)("button",{onClick:x,disabled:i,className:"text-sm text-blue-600 hover:text-blue-800 disabled:text-gray-400",children:i?"Discovering...":"Refresh Action Types"})]})]}),c&&(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,dt.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Create New Mapping"}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Concept Name"}),(0,dt.jsx)("input",{type:"text",value:o.conceptName,onChange:e=>l(Re(Re({},o),{},{conceptName:e.target.value})),placeholder:"e.g., conversions, leads, purchases",className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600"}),(0,dt.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:["Suggested: ",p.join(", ")]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Aggregation Type"}),(0,dt.jsxs)("select",{value:o.aggregationType,onChange:e=>l(Re(Re({},o),{},{aggregationType:e.target.value})),className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600",children:[(0,dt.jsx)("option",{value:"sum",children:"Sum (total count/value)"}),(0,dt.jsx)("option",{value:"count",children:"Count (number of action types)"}),(0,dt.jsx)("option",{value:"average",children:"Average (mean value)"})]})]})]}),o.actionTypes.length>0&&(0,dt.jsxs)("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,dt.jsx)("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"\ud83d\udca1 Smart Suggestions"}),(0,dt.jsxs)("button",{onClick:()=>h(!u),className:"text-xs text-blue-600 hover:text-blue-800",children:[u?"Hide":"Show"," Suggestions"]})]}),u&&(0,dt.jsxs)("div",{className:"space-y-2",children:[b().map((e,t)=>(0,dt.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-700 rounded text-xs",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium text-blue-600",children:e.concept}),(0,dt.jsxs)("span",{className:"text-gray-500 ml-2",children:["(",Math.round(100*e.confidence),"% match)"]}),(0,dt.jsx)("div",{className:"text-gray-400 mt-1",children:e.description})]}),(0,dt.jsx)("button",{onClick:()=>(e=>{l(Re(Re({},o),{},{conceptName:e.concept,actionTypes:[...new Set([...o.actionTypes,...e.matchingActions])]}))})(e),className:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Apply"})]},t)),0===b().length&&(0,dt.jsx)("div",{className:"text-xs text-gray-500 italic",children:"No business concept suggestions for your current selection."})]})]}),(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Select Action Types (",o.actionTypes.length," selected)"]}),Object.entries((e=>{const t={};return Object.keys(vi).forEach(e=>{const r=e.replace(/_/g," ").toLowerCase().replace(/\b\w/g,e=>e.toUpperCase());t[r]=[]}),t.Other=[],e.forEach(e=>{const r=(e=>{for(const[t,r]of Object.entries(vi))if(r.includes(e))return t;return"OTHER"})(e);if("OTHER"===r)t.Other.push(e);else{const n=r.replace(/_/g," ").toLowerCase().replace(/\b\w/g,e=>e.toUpperCase());t[n]?t[n].push(e):t.Other.push(e)}}),t})(r)).map(e=>{let[t,r]=e;return r.length>0&&(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t}),(0,dt.jsx)("div",{className:"flex flex-wrap gap-2",children:r.map(e=>(0,dt.jsx)("button",{onClick:()=>(e=>{const t=o.actionTypes,r=t.includes(e)?t.filter(t=>t!==e):[...t,e];l(Re(Re({},o),{},{actionTypes:r}))})(e),className:"px-3 py-1 rounded-full text-xs ".concat(o.actionTypes.includes(e)?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300"),children:e},e))})]},t)})]}),(0,dt.jsxs)("div",{className:"flex space-x-2",children:[(0,dt.jsx)("button",{onClick:()=>{if(!o.conceptName||0===o.actionTypes.length)return void alert("Please enter a concept name and select at least one action type");const t=Re(Re({},e),{},{[o.conceptName]:{actionTypes:o.actionTypes,aggregationType:o.aggregationType,createdAt:(new Date).toISOString()}});g(t),l({conceptName:"",actionTypes:[],aggregationType:"sum"}),d(!1)},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Create Mapping"}),(0,dt.jsx)("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"})]})]}),(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,dt.jsxs)("h3",{className:"text-lg font-medium mb-4",children:["Current Mappings (",Object.keys(e).length,")"]}),0===Object.keys(e).length?(0,dt.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,dt.jsx)("p",{children:"No mappings created yet."}),(0,dt.jsx)("p",{className:"text-sm mt-2",children:"Create your first mapping to start organizing action types into business concepts."})]}):(0,dt.jsx)("div",{className:"space-y-4",children:Object.entries(e).map(t=>{let[r,n]=t;return(0,dt.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"text-lg font-medium text-blue-800 dark:text-blue-200",children:r}),(0,dt.jsxs)("div",{className:"text-sm text-gray-500",children:["Aggregation: ",n.aggregationType," \u2022 ",n.actionTypes.length," action types"]})]}),(0,dt.jsx)("button",{onClick:()=>(t=>{if(window.confirm('Are you sure you want to delete the mapping for "'.concat(t,'"?'))){const r=Re({},e);delete r[t],g(r)}})(r),className:"text-red-500 hover:text-red-700 text-sm",children:"Delete"})]}),(0,dt.jsx)("div",{className:"flex flex-wrap gap-2",children:n.actionTypes.map(e=>(0,dt.jsx)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-xs",children:e},e))})]},r)})})]}),y.unmappedActions.length>0&&(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,dt.jsxs)("h3",{className:"text-lg font-medium mb-4",children:["Unmapped Action Types (",y.unmappedActions.length,")"]}),(0,dt.jsx)("div",{className:"flex flex-wrap gap-2",children:y.unmappedActions.map(e=>(0,dt.jsx)("span",{className:"px-2 py-1 bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded text-xs",children:e},e))})]})]})},wi=()=>{const[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)("ad_performance_daily"),[i,s]=(0,a.useState)(null),[o,l]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(!1),[p,m]=(0,a.useState)("2025-04-01"),[f,g]=(0,a.useState)(()=>{const e=new Date;return e.setDate(e.getDate()-1),e.toISOString().split("T")[0]}),[x,b]=(0,a.useState)(!1),[y,v]=(0,a.useState)(null),[_,k]=(0,a.useState)(null),[j,w]=(0,a.useState)(null),[N,S]=(0,a.useState)(null),[O,C]=(0,a.useState)(new Set),[E,P]=(0,a.useState)(!1);(0,a.useEffect)(()=>{A(),M("ad_performance_daily")},[]);const A=async()=>{try{const e=await Fa();t(e)}catch(c){console.error("Error loading tables overview:",c),d("Failed to load tables overview: ".concat(c.message))}},M=async e=>{l(!0),d(null),C(new Set);try{const t=await za(e);s(t),n(e)}catch(c){console.error("Error loading aggregated data for ".concat(e,":"),c),d("Failed to load data: ".concat(c.message)),s(null)}finally{l(!1)}},T=e=>"unique_countries"===e?"Countries":"unique_devices"===e?"Devices":"unique_regions"===e?"Regions":e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()).replace("Unique ","").replace("Total ",""),D=(e,t)=>null===e||void 0===e?"\u2014":t.includes("spend")?"$".concat(e.toLocaleString()):(t.includes("unique")||t.includes("total"),e.toLocaleString());if(c)return(0,dt.jsxs)("div",{className:"p-6 bg-red-50 border border-red-200 rounded-lg",children:[(0,dt.jsx)("h3",{className:"text-red-800 font-medium text-lg",children:"Error"}),(0,dt.jsx)("p",{className:"text-red-600 mt-2",children:c}),(0,dt.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Reload Page"})]});const R=e?Object.entries(e).filter(e=>{let[t,r]=e;return t.startsWith("ad_performance_")}).sort((e,t)=>{let[r]=e,[n]=t;return r.localeCompare(n)}):[],I=e?Object.entries(e).filter(e=>{let[t,r]=e;return!t.startsWith("ad_performance_")&&0===r.row_count}).sort((e,t)=>{let[r]=e,[n]=t;return r.localeCompare(n)}):[];return(0,dt.jsxs)("div",{className:"space-y-8",children:[(0,dt.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[(0,dt.jsx)("div",{className:"px-8 py-6 border-b border-gray-200 bg-gray-50",children:(0,dt.jsx)("div",{className:"flex justify-between items-center",children:(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:r.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,dt.jsxs)("p",{className:"text-gray-600 mt-1",children:["Complete daily performance metrics",(null===i||void 0===i?void 0:i.breakdown_dimension)&&" (aggregated across ".concat(i.breakdown_dimension,")")]})]})})}),(0,dt.jsxs)("div",{className:"p-8",children:["composite_validation"!==r&&(0,dt.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,dt.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Fill Missing Data"}),(0,dt.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[(0,dt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,dt.jsx)("label",{htmlFor:"start-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,dt.jsx)("input",{id:"start-date",type:"date",value:p,onChange:e=>m(e.target.value),disabled:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),(0,dt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,dt.jsx)("label",{htmlFor:"end-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,dt.jsx)("input",{id:"end-date",type:"date",value:f,onChange:e=>g(e.target.value),disabled:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),(0,dt.jsx)("button",{onClick:async()=>{if(!r||"composite_validation"===r)return;if(!p||!f)return void v("Both start date and end date are required");if(p>f)return void v("Start date must be before or equal to end date");const e=(new Date).toISOString().split("T")[0];if(f>e)v("End date cannot be in the future");else{b(!0),v(null),k(null);try{const e={ad_performance_daily:null,ad_performance_daily_country:"country",ad_performance_daily_region:"region",ad_performance_daily_device:"device"}[r]||null;await Ua({table_name:r,breakdown_type:e,start_date:p,end_date:f,skip_existing:!0}),k("Successfully filled gaps in ".concat(r," from ").concat(p," to ").concat(f)),setTimeout(()=>{M(r),k(null)},3e3)}catch(c){console.error("Error updating table:",c),v("Failed to update table: ".concat(c.message))}finally{b(!1)}}},disabled:x||!p||!f||p>f,className:"px-6 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:x?(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),(0,dt.jsx)("span",{children:"Updating..."})]}):"Fill Gaps"})]}),_&&(0,dt.jsx)("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-md",children:(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-green-500",children:"\u2705"}),(0,dt.jsx)("span",{className:"text-sm text-green-800",children:_})]})}),y&&(0,dt.jsx)("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-red-500",children:"\u274c"}),(0,dt.jsx)("span",{className:"text-sm text-red-800",children:y})]})})]}),N&&(0,dt.jsx)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-green-500",children:"\u2705"}),(0,dt.jsx)("span",{className:"text-sm text-green-800",children:N})]})}),j&&(0,dt.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-red-500",children:"\u274c"}),(0,dt.jsx)("span",{className:"text-sm text-red-800",children:j})]})}),O.size>0&&"composite_validation"!==r&&(0,dt.jsx)("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,dt.jsxs)("div",{className:"text-sm font-medium text-blue-900",children:[O.size," date",1!==O.size?"s":""," selected"]}),(0,dt.jsx)("button",{onClick:()=>C(new Set),className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Clear selection"})]}),(0,dt.jsx)("button",{onClick:async()=>{if("composite_validation"===r||0===O.size)return;const e=Array.from(O).sort();if(!window.confirm("Are you sure you want to delete all data for ".concat(O.size," selected dates from ").concat(r,"?\n\nDates: ").concat(e.join(", "),"\n\nThis action cannot be undone.")))return;P(!0),w(null),S(null);let t=0,n=0,a=0;const i=[];try{for(const l of e)try{const e=await Ba(r,l);t++,a+=e.rows_deleted}catch(c){var s,o;n++;const t=(null===(s=c.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.error)||c.message||"Unknown error";i.push("".concat(l,": ").concat(t))}0===n?S("Successfully deleted ".concat(a," rows across ").concat(t," dates from ").concat(r)):0===t?w("Failed to delete all ".concat(O.size," dates:\n").concat(i.join("\n"))):(S("Partially successful: ".concat(t," dates deleted (").concat(a," rows), ").concat(n," failed")),i.length>0&&console.error("Bulk delete errors:",i)),C(new Set),setTimeout(()=>{M(r),S(null)},3e3)}catch(c){console.error("Error in bulk delete:",c),w("Bulk delete failed: ".concat(c.message))}finally{P(!1)}},disabled:E,className:"px-4 py-2 bg-red-600 text-white rounded-md text-sm font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:E?(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),(0,dt.jsx)("span",{children:"Deleting..."})]}):"Delete ".concat(O.size," date").concat(1!==O.size?"s":"")})]})}),i&&(()=>{if(null===i||void 0===i||!i.date_analysis)return null;const e=i.date_analysis;return(0,dt.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,dt.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Data Overview"}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.available_days}),(0,dt.jsx)("div",{className:"text-sm text-gray-600",children:"Available Days"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-lg font-semibold text-gray-700",children:e.date_range?e.date_range.start:"N/A"}),(0,dt.jsx)("div",{className:"text-sm text-gray-600",children:"First Date"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-lg font-semibold text-gray-700",children:e.date_range?e.date_range.end:"N/A"}),(0,dt.jsx)("div",{className:"text-sm text-gray-600",children:"Last Date"})]})]}),e.warnings&&e.warnings.length>0&&(0,dt.jsxs)("div",{className:"space-y-2",children:[e.warnings.map((e,t)=>(0,dt.jsxs)("div",{className:"flex items-center space-x-2 text-amber-700 bg-amber-50 px-3 py-2 rounded",children:[(0,dt.jsx)("span",{className:"text-amber-500",children:"\u26a0\ufe0f"}),(0,dt.jsx)("span",{className:"text-sm font-medium",children:e})]},t)),e.missing_dates&&e.missing_dates.length>0&&(0,dt.jsxs)("details",{className:"mt-2",children:[(0,dt.jsxs)("summary",{className:"cursor-pointer text-sm text-gray-600 hover:text-gray-800",children:["View missing dates (",e.missing_dates.length,")"]}),(0,dt.jsx)("div",{className:"mt-2 text-xs text-gray-600 max-h-32 overflow-y-auto",children:e.missing_dates.join(", ")})]}),e.empty_days&&e.empty_days.length>0&&(0,dt.jsxs)("details",{className:"mt-2",children:[(0,dt.jsxs)("summary",{className:"cursor-pointer text-sm text-gray-600 hover:text-gray-800",children:["View empty days (",e.empty_days.length,")"]}),(0,dt.jsx)("div",{className:"mt-2 text-xs text-gray-600 max-h-32 overflow-y-auto",children:e.empty_days.join(", ")})]})]})]})})(),o?(0,dt.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,dt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mr-3"}),(0,dt.jsxs)("span",{className:"text-gray-600",children:["Loading ","composite_validation"===r?"all":"table"," metrics..."]})]}):i&&i.dates&&i.dates.length>0?(0,dt.jsx)("div",{className:"overflow-x-auto",children:(0,dt.jsxs)("table",{className:"min-w-full",children:[(0,dt.jsx)("thead",{className:"bg-gray-50",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900 border-r border-gray-200 sticky left-0 bg-gray-50 z-10",children:(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{children:"Metric"}),"composite_validation"!==r&&(null===i||void 0===i?void 0:i.dates)&&(0,dt.jsx)("input",{type:"checkbox",checked:O.size===i.dates.length&&i.dates.length>0,onChange:e=>{return t=e.target.checked,void C(t?new Set((null===i||void 0===i?void 0:i.dates)||[]):new Set);var t},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",title:"Select all dates"})]})}),i.dates.map(e=>{var t,n;const a=i.date_analysis,s=null===a||void 0===a||null===(t=a.missing_dates)||void 0===t?void 0:t.includes(e),o=null===a||void 0===a||null===(n=a.empty_days)||void 0===n?void 0:n.includes(e),l="composite_validation"!==r,c=O.has(e);return(0,dt.jsx)("th",{className:"px-3 py-3 text-center text-sm font-semibold border-r border-gray-200 min-w-[100px] relative group ".concat(c?"bg-blue-100 text-blue-900 ring-2 ring-blue-300":s?"bg-red-100 text-red-800":o?"bg-yellow-100 text-yellow-800":"text-gray-900"),children:(0,dt.jsxs)("div",{className:"flex flex-col items-center",children:[(0,dt.jsx)("div",{children:(d=e,new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric"}))}),(0,dt.jsx)("div",{className:"text-xs font-normal mt-1 opacity-75",children:e}),(s||o)&&(0,dt.jsx)("div",{className:"text-xs mt-1",children:s?"\u274c":o?"\u26a0\ufe0f":""}),l&&(0,dt.jsx)("div",{className:"mt-1 transition-opacity duration-200 ".concat(c?"opacity-100":"opacity-0 group-hover:opacity-100"),children:(0,dt.jsx)("input",{type:"checkbox",checked:c,onChange:t=>((e,t)=>{const r=new Set(O);t?r.add(e):r.delete(e),C(r)})(e,t.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer",title:"Select ".concat(e," for bulk deletion")})})]})},e);var d})]})}),(0,dt.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:i.metric_names.map((e,t)=>(0,dt.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,dt.jsx)("td",{className:"px-6 py-2 text-sm font-medium text-gray-900 border-r border-gray-200 sticky left-0 bg-inherit z-10",children:T(e)}),i.dates.map(t=>{var r,n,a,s;const o=null===(r=i.metrics_data[t])||void 0===r?void 0:r[e],l=i.date_analysis,c=null===l||void 0===l||null===(n=l.empty_days)||void 0===n?void 0:n.includes(t),d="composite_validation"===i.table_name?null===(a=i.validation_errors)||void 0===a||null===(s=a[t])||void 0===s?void 0:s[e]:null,u="MISSING_BASE"===o||"MISSING_TABLE"===o||"MISSING_DATE"===o||("unique_countries"===e||"unique_devices"===e||"unique_regions"===e)&&0===o,h=d&&"missing"===d.type,p=d&&("discrepancy"===d.type||"mixed"===d.type);let m="text-red-600",f="bg-red-50";if(p){const e=d.max_percentage;e<5?(m="text-yellow-600",f="bg-yellow-50"):e<10?(m="text-orange-600",f="bg-orange-50"):(m="text-red-600",f="bg-red-50")}return(0,dt.jsx)("td",{className:"px-3 py-2 text-center text-sm border-r border-gray-200 font-mono ".concat(u||h?"bg-red-50":p?f:c?"bg-yellow-50 text-yellow-800":"text-gray-700"),children:u?(0,dt.jsx)("div",{className:"text-red-600 font-bold text-lg",title:"Base table missing data",children:"\u2717"}):h?(0,dt.jsx)("div",{className:"text-red-600 font-bold text-lg",title:"All tables missing: ".concat(d.missing_tables.join(", ")),children:"\u2717"}):p?(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"".concat(m," font-bold"),children:D(o,e)}),(0,dt.jsxs)("div",{className:"text-xs ".concat(m," mt-1"),children:[d.discrepancies.map((e,t)=>(0,dt.jsxs)("div",{children:[e.table,": ",e.value]},t)),"mixed"===d.type&&d.missing_tables&&(0,dt.jsxs)("div",{className:"text-red-600 mt-1",children:["Missing: ",d.missing_tables.join(", ")]})]})]}):D(o,e)},"".concat(e,"-").concat(t))})]},e))})]})}):i?(0,dt.jsx)("div",{className:"flex items-center justify-center py-12 text-gray-500",children:(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-lg mb-2",children:"\ud83d\udced"}),(0,dt.jsx)("div",{className:"font-medium text-gray-700 mb-2",children:"Empty Table"}),(0,dt.jsx)("div",{className:"text-sm",children:'This table contains no data yet. Use the "Fill Gaps" feature above to populate it with Meta advertising data.'})]})}):(0,dt.jsx)("div",{className:"flex items-center justify-center py-12 text-gray-500",children:(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-lg mb-2",children:"\ud83d\udcca"}),(0,dt.jsx)("div",{children:"Select a table to view metrics"})]})})]})]}),(0,dt.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[(0,dt.jsx)("div",{className:"px-8 py-6 border-b border-gray-200",children:(0,dt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Available Performance Tables"}),(0,dt.jsx)("p",{className:"text-gray-600 mt-1",children:"Select a table to view complete aggregated daily metrics"})]}),(0,dt.jsx)("button",{onClick:()=>M("composite_validation"),className:"px-6 py-2 rounded-lg font-medium transition-colors ".concat("composite_validation"===r?"bg-purple-600 text-white":"bg-purple-100 text-purple-700 hover:bg-purple-200"),children:"All"})]})}),(0,dt.jsxs)("div",{className:"p-8",children:[(0,dt.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-6",children:R.map(e=>{let[t,n]=e;const a=0===n.row_count;return(0,dt.jsxs)("div",{className:"p-6 border-2 rounded-lg cursor-pointer transition-all duration-200 ".concat(r===t?"border-blue-500 bg-blue-50 shadow-md":a?"border-orange-200 hover:border-orange-300 hover:bg-orange-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),onClick:()=>M(t),children:[(0,dt.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,dt.jsx)("h4",{className:"font-semibold text-gray-900 text-sm",children:t.replace("ad_performance_daily_","").replace("ad_performance_daily","Base")||"Base"}),(0,dt.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded ".concat(a?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"),children:a?"Empty":"".concat(n.row_count.toLocaleString()," rows")})]}),(0,dt.jsxs)("div",{className:"text-xs text-gray-600 mb-2",children:[n.columns.length," columns"]}),(0,dt.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:"ad_performance_daily"===t?"No breakdown dimension":"Breakdown by ".concat(t.replace("ad_performance_daily_",""))}),a?(0,dt.jsxs)("div",{className:"text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded",children:[(0,dt.jsx)("div",{className:"font-medium",children:"No data available"}),(0,dt.jsx)("div",{className:"opacity-75",children:'Use "Fill Gaps" to populate'})]}):n.date_range?(0,dt.jsxs)("div",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:[(0,dt.jsxs)("div",{className:"font-medium",children:[n.available_days," days available"]}),(0,dt.jsx)("div",{className:"opacity-75",children:(()=>{const e=new Date(n.date_range.start),t=new Date(n.date_range.end);return e.getFullYear()===t.getFullYear()?"".concat(e.toLocaleDateString("en-US",{month:"short",day:"numeric"})," to ").concat(t.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})):"".concat(e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})," to ").concat(t.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}))})()})]}):null]},t)})}),I.length>0&&(0,dt.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,dt.jsxs)("button",{onClick:()=>h(!u),className:"flex items-center space-x-2 text-sm text-gray-600 hover:text-gray-800 transition-colors",children:[(0,dt.jsxs)("span",{children:[u?"Hide":"Show"," other empty tables (",I.length,")"]}),(0,dt.jsx)("span",{className:"transform transition-transform duration-200",style:{transform:u?"rotate(180deg)":"rotate(0deg)"},children:"\u25bc"})]}),u&&(0,dt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mt-4",children:I.map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,dt.jsx)("h4",{className:"font-medium text-gray-700 text-sm",children:t}),(0,dt.jsx)("span",{className:"px-2 py-1 text-xs rounded bg-gray-200 text-gray-600",children:"0 rows"})]}),(0,dt.jsxs)("div",{className:"text-xs text-gray-500",children:[r.columns.length," columns"]})]},t)})})]})]})]})]})},Ni=()=>{const[e,t]=(0,a.useState)("table-view"),[r,n]=(0,a.useState)(!1),[i,s]=(0,a.useState)(""),[o,l]=(0,a.useState)(""),[c,d]=(0,a.useState)("1"),[u,h]=(0,a.useState)({}),[p,m]=(0,a.useState)({}),[f,g]=(0,a.useState)(null);return(0,a.useEffect)(()=>{const e=localStorage.getItem("metaDebugger_selectedFields"),t=localStorage.getItem("metaDebugger_selectedBreakdowns");if(e)h(JSON.parse(e));else{const e={};"ad_id,ad_name,adset_id,adset_name,campaign_id,campaign_name,impressions,clicks,spend".split(",").forEach(t=>{e[t]=!0}),h(e)}t&&m(JSON.parse(t))},[]),(0,a.useEffect)(()=>{const e=localStorage.getItem("metaDebugger_startDate"),t=localStorage.getItem("metaDebugger_endDate"),r=localStorage.getItem("metaDebugger_increment");e&&s(e),t&&l(t),r&&d(r)},[]),(0,a.useEffect)(()=>{localStorage.setItem("metaDebugger_startDate",i),localStorage.setItem("metaDebugger_endDate",o),localStorage.setItem("metaDebugger_increment",c),localStorage.setItem("metaDebugger_selectedFields",JSON.stringify(ni(u))),localStorage.setItem("metaDebugger_selectedBreakdowns",JSON.stringify(ni(p)))},[i,o,c,u,p]),(0,a.useEffect)(()=>{const e=e=>{r&&!e.target.closest(".relative")&&n(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[r]),(0,dt.jsx)("div",{className:"flex",children:(0,dt.jsxs)("div",{className:"flex-1 p-6 max-w-5xl",children:[(0,dt.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Meta API Debugger"}),(0,dt.jsx)("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-4 mb-6",children:(0,dt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,dt.jsxs)("div",{className:"flex space-x-4",children:[(0,dt.jsx)("button",{onClick:()=>t("table-view"),className:"px-4 py-2 rounded ".concat("table-view"===e?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700"),children:"Table View"}),(0,dt.jsx)("button",{onClick:()=>t("live"),className:"px-4 py-2 rounded ".concat("live"===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"),children:"Live API Testing"})]}),(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsxs)("button",{onClick:()=>n(!r),className:"px-3 py-2 rounded flex items-center space-x-1 ".concat(["historical","mapping"].includes(e)?"bg-gray-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[(0,dt.jsx)("span",{children:"\u2699\ufe0f"}),(0,dt.jsx)("span",{className:"text-sm",children:"More"}),(0,dt.jsx)("span",{className:"transform transition-transform duration-200 ".concat(r?"rotate-180":""),children:"\u25bc"})]}),r&&(0,dt.jsxs)("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-10 min-w-[200px]",children:[(0,dt.jsx)("button",{onClick:()=>{t("historical"),n(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 first:rounded-t-lg ".concat("historical"===e?"bg-green-50 text-green-700 dark:bg-green-900 dark:text-green-200":"text-gray-700 dark:text-gray-300"),children:"Historical Data Collection"}),(0,dt.jsx)("button",{onClick:()=>{t("mapping"),n(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 last:rounded-b-lg ".concat("mapping"===e?"bg-purple-50 text-purple-700 dark:bg-purple-900 dark:text-purple-200":"text-gray-700 dark:text-gray-300"),children:"Action Mapping"})]})]})]})}),"table-view"===e&&(0,dt.jsx)(wi,{}),"live"===e&&(0,dt.jsx)(fi,{startDateInput:i,setStartDateInput:s,endDateInput:o,setEndDateInput:l,incrementInput:c,setIncrementInput:d,selectedFields:u,setSelectedFields:h,selectedBreakdowns:p,setSelectedBreakdowns:m,error:f,setError:g}),"historical"===e&&(0,dt.jsx)(yi,{startDateInput:i,setStartDateInput:s,endDateInput:o,setEndDateInput:l,selectedFields:u,setSelectedFields:h,selectedBreakdowns:p,setSelectedBreakdowns:m,error:f,setError:g}),"mapping"===e&&(0,dt.jsx)(ji,{selectedFields:u,setSelectedFields:h,selectedBreakdowns:p,setSelectedBreakdowns:m,error:f,setError:g}),f&&(0,dt.jsxs)("div",{className:"mt-4 p-3 bg-red-100 dark:bg-red-800 text-red-800 dark:text-red-100 rounded",children:["Error: ",f]})]})})};function Si(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Si(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}const Oi=function(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Si(e))&&(n&&(n+=" "),n+=t);return n};var Ci=r(9889),Ei=r.n(Ci),Pi=r(620),Ai=r.n(Pi),Mi=r(5268),Ti=r.n(Mi),Di=r(3097),Ri=r.n(Di),Ii=r(9160),Li=r.n(Ii),Fi=function(e){return 0===e?0:e>0?1:-1},zi=function(e){return Ai()(e)&&e.indexOf("%")===e.length-1},Ui=function(e){return Li()(e)&&!Ti()(e)},Bi=function(e){return Ui(e)||Ai()(e)},Vi=0,Hi=function(e){var t=++Vi;return"".concat(e||"").concat(t)},Wi=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!Ui(e)&&!Ai()(e))return n;if(zi(e)){var i=e.indexOf("%");r=t*parseFloat(e.slice(0,i))/100}else r=+e;return Ti()(r)&&(r=n),a&&r>t&&(r=t),r},$i=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},qi=function(e,t){return Ui(e)&&Ui(t)?function(r){return e+r*(t-e)}:function(){return t}};function Gi(e,t,r){return e&&e.length?e.find(function(e){return e&&("function"===typeof t?t(e):Ri()(e,t))===r}):null}var Ki=function(e,t){return Ui(e)&&Ui(t)?e-t:Ai()(e)&&Ai()(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))},Yi=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a]},Xi=r(9686),Ji=r.n(Xi),Qi=r(1629),Zi=r.n(Qi),es=r(6686),ts=r.n(es),rs=r(9062);function ns(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function as(e){return as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},as(e)}var is=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],ss=["points","pathLength"],os={svg:["viewBox","children"],polygon:ss,polyline:ss},ls=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],cs=function(e,t){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var r=e;if((0,a.isValidElement)(e)&&(r=e.props),!ts()(r))return null;var n={};return Object.keys(r).forEach(function(e){ls.includes(e)&&(n[e]=t||function(t){return r[e](r,t)})}),n},ds=function(e,t,r){if(!ts()(e)||"object"!==as(e))return null;var n=null;return Object.keys(e).forEach(function(a){var i=e[a];ls.includes(a)&&"function"===typeof i&&(n||(n={}),n[a]=function(e,t,r){return function(n){return e(t,r,n),null}}(i,t,r))}),n},us=["children"],hs=["children"];function ps(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ms(e){return ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ms(e)}var fs={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},gs=function(e){return"string"===typeof e?e:e?e.displayName||e.name||"Component":""},xs=null,bs=null,ys=function e(t){if(t===xs&&Array.isArray(bs))return bs;var r=[];return a.Children.forEach(t,function(t){Ji()(t)||((0,rs.isFragment)(t)?r=r.concat(e(t.props.children)):r.push(t))}),bs=r,xs=t,r};function vs(e,t){var r=[],n=[];return n=Array.isArray(t)?t.map(function(e){return gs(e)}):[gs(t)],ys(e).forEach(function(e){var t=Ri()(e,"type.displayName")||Ri()(e,"type.name");-1!==n.indexOf(t)&&r.push(e)}),r}function _s(e,t){var r=vs(e,t);return r&&r[0]}var ks=function(e){if(!e||!e.props)return!1;var t=e.props,r=t.width,n=t.height;return!(!Ui(r)||r<=0||!Ui(n)||n<=0)},js=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],ws=function(e){return e&&e.type&&Ai()(e.type)&&js.indexOf(e.type)>=0},Ns=function(e,t,r){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,a.isValidElement)(e)&&(n=e.props),!ts()(n))return null;var i={};return Object.keys(n).forEach(function(e){var a;(function(e,t,r,n){var a,i=null!==(a=null===os||void 0===os?void 0:os[n])&&void 0!==a?a:[];return t.startsWith("data-")||!Zi()(e)&&(n&&i.includes(t)||is.includes(t))||r&&ls.includes(t)})(null===(a=n)||void 0===a?void 0:a[e],e,t,r)&&(i[e]=n[e])}),i},Ss=function e(t,r){if(t===r)return!0;var n=a.Children.count(t);if(n!==a.Children.count(r))return!1;if(0===n)return!0;if(1===n)return Os(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var s=t[i],o=r[i];if(Array.isArray(s)||Array.isArray(o)){if(!e(s,o))return!1}else if(!Os(s,o))return!1}return!0},Os=function(e,t){if(Ji()(e)&&Ji()(t))return!0;if(!Ji()(e)&&!Ji()(t)){var r=e.props||{},n=r.children,a=ps(r,us),i=t.props||{},s=i.children,o=ps(i,hs);return n&&s?ns(a,o)&&Ss(n,s):!n&&!s&&ns(a,o)}return!1},Cs=function(e,t){var r=[],n={};return ys(e).forEach(function(e,a){if(ws(e))r.push(e);else if(e){var i=gs(e.type),s=t[i]||{},o=s.handler,l=s.once;if(o&&(!l||!n[i])){var c=o(e,i,a);r.push(c),n[i]=!0}}}),r};function Es(e){return Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Es(e)}function Ps(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function As(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ps(Object(r),!0).forEach(function(t){Ms(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ps(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ms(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Es(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Es(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Es(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ts(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ds(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ds(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ds(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Rs=(0,a.forwardRef)(function(e,t){var r=e.aspect,n=e.initialDimension,i=void 0===n?{width:-1,height:-1}:n,s=e.width,o=void 0===s?"100%":s,l=e.height,c=void 0===l?"100%":l,d=e.minWidth,u=void 0===d?0:d,h=e.minHeight,p=e.maxHeight,m=e.children,f=e.debounce,g=void 0===f?0:f,x=e.id,b=e.className,y=e.onResize,v=e.style,_=void 0===v?{}:v,k=(0,a.useRef)(null),j=(0,a.useRef)();j.current=y,(0,a.useImperativeHandle)(t,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var w=Ts((0,a.useState)({containerWidth:i.width,containerHeight:i.height}),2),N=w[0],S=w[1],O=(0,a.useCallback)(function(e,t){S(function(r){var n=Math.round(e),a=Math.round(t);return r.containerWidth===n&&r.containerHeight===a?r:{containerWidth:n,containerHeight:a}})},[]);(0,a.useEffect)(function(){var e=function(e){var t,r=e[0].contentRect,n=r.width,a=r.height;O(n,a),null===(t=j.current)||void 0===t||t.call(j,n,a)};g>0&&(e=Ei()(e,g,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),r=k.current.getBoundingClientRect(),n=r.width,a=r.height;return O(n,a),t.observe(k.current),function(){t.disconnect()}},[O,g]);var C=(0,a.useMemo)(function(){var e=N.containerWidth,t=N.containerHeight;if(e<0||t<0)return null;Yi(zi(o)||zi(c),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",o,c),Yi(!r||r>0,"The aspect(%s) must be greater than zero.",r);var n=zi(o)?e:o,i=zi(c)?t:c;r&&r>0&&(n?i=n/r:i&&(n=i*r),p&&i>p&&(i=p)),Yi(n>0||i>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",n,i,o,c,u,h,r);var s=!Array.isArray(m)&&gs(m.type).endsWith("Chart");return a.Children.map(m,function(e){return a.isValidElement(e)?(0,a.cloneElement)(e,As({width:n,height:i},s?{style:As({height:"100%",width:"100%",maxHeight:i,maxWidth:n},e.props.style)}:{})):e})},[r,m,c,p,h,u,N,o]);return a.createElement("div",{id:x?"".concat(x):void 0,className:Oi("recharts-responsive-container",b),style:As(As({},_),{},{width:o,height:c,minWidth:u,minHeight:h,maxHeight:p}),ref:k},C)}),Is=r(6604),Ls=r.n(Is),Fs=r(7424),zs=r.n(Fs),Us="Invariant failed";function Bs(e,t){if(!e)throw new Error(Us)}var Vs=["children","width","height","viewBox","className","style","title","desc"];function Hs(){return Hs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hs.apply(this,arguments)}function Ws(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function $s(e){var t=e.children,r=e.width,n=e.height,i=e.viewBox,s=e.className,o=e.style,l=e.title,c=e.desc,d=Ws(e,Vs),u=i||{width:r,height:n,x:0,y:0},h=Oi("recharts-surface",s);return a.createElement("svg",Hs({},Ns(d,!0,"svg"),{className:h,width:r,height:n,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),a.createElement("title",null,l),a.createElement("desc",null,c),t)}var qs=["children","className"];function Gs(){return Gs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gs.apply(this,arguments)}function Ks(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Ys=a.forwardRef(function(e,t){var r=e.children,n=e.className,i=Ks(e,qs),s=Oi("recharts-layer",n);return a.createElement("g",Gs({className:s},Ns(i,!0),{ref:t}),r)});function Xs(e){return Xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xs(e)}function Js(){return Js=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Js.apply(this,arguments)}function Qs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Zs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function eo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function to(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(r),!0).forEach(function(t){ro(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eo(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ro(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Xs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Xs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xs(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function no(e){return Array.isArray(e)&&Bi(e[0])&&Bi(e[1])?e.join(" ~ "):e}var ao=function(e){var t=e.separator,r=void 0===t?" : ":t,n=e.contentStyle,i=void 0===n?{}:n,s=e.itemStyle,o=void 0===s?{}:s,l=e.labelStyle,c=void 0===l?{}:l,d=e.payload,u=e.formatter,h=e.itemSorter,p=e.wrapperClassName,m=e.labelClassName,f=e.label,g=e.labelFormatter,x=e.accessibilityLayer,b=void 0!==x&&x,y=to({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),v=to({margin:0},c),_=!Ji()(f),k=_?f:"",j=Oi("recharts-default-tooltip",p),w=Oi("recharts-tooltip-label",m);_&&g&&void 0!==d&&null!==d&&(k=g(f,d));var N=b?{role:"status","aria-live":"assertive"}:{};return a.createElement("div",Js({className:j,style:y},N),a.createElement("p",{className:w,style:v},a.isValidElement(k)?k:"".concat(k)),function(){if(d&&d.length){var e=(h?zs()(d,h):d).map(function(e,t){if("none"===e.type)return null;var n=to({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},o),i=e.formatter||u||no,s=e.value,l=e.name,c=s,h=l;if(i&&null!=c&&null!=h){var p=i(s,l,e,t,d);if(Array.isArray(p)){var m=Qs(p,2);c=m[0],h=m[1]}else c=p}return a.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:n},Bi(h)?a.createElement("span",{className:"recharts-tooltip-item-name"},h):null,Bi(h)?a.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,a.createElement("span",{className:"recharts-tooltip-item-value"},c),a.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return a.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function io(e){return io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},io(e)}function so(e,t,r){return t=function(e){var t=function(e,t){if("object"!=io(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=io(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==io(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oo="recharts-tooltip-wrapper",lo={visibility:"hidden"};function co(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return Oi(oo,so(so(so(so({},"".concat(oo,"-right"),Ui(r)&&t&&Ui(t.x)&&r>=t.x),"".concat(oo,"-left"),Ui(r)&&t&&Ui(t.x)&&r<t.x),"".concat(oo,"-bottom"),Ui(n)&&t&&Ui(t.y)&&n>=t.y),"".concat(oo,"-top"),Ui(n)&&t&&Ui(t.y)&&n<t.y))}function uo(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,s=e.reverseDirection,o=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(i&&Ui(i[n]))return i[n];var d=r[n]-o-a,u=r[n]+a;return t[n]?s[n]?d:u:s[n]?d<l[n]?Math.max(u,l[n]):Math.max(d,l[n]):u+o>l[n]+c?Math.max(d,l[n]):Math.max(u,l[n])}function ho(e){return ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ho(e)}function po(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?po(Object(r),!0).forEach(function(t){vo(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):po(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function fo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_o(n.key),n)}}function go(e,t,r){return t=bo(t),function(e,t){if(t&&("object"===ho(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,xo()?Reflect.construct(t,r||[],bo(e).constructor):t.apply(e,r))}function xo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(xo=function(){return!!e})()}function bo(e){return bo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bo(e)}function yo(e,t){return yo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yo(e,t)}function vo(e,t,r){return(t=_o(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _o(e){var t=function(e,t){if("object"!=ho(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ho(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ho(t)?t:t+""}var ko=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return vo(e=go(this,t,[].concat(n)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),vo(e,"handleKeyDown",function(t){var r,n,a,i;"Escape"===t.key&&e.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(r=null===(n=e.props.coordinate)||void 0===n?void 0:n.x)&&void 0!==r?r:0,y:null!==(a=null===(i=e.props.coordinate)||void 0===i?void 0:i.y)&&void 0!==a?a:0}})}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yo(e,t)}(t,e),r=t,n=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,t=this.props,r=t.active,n=t.allowEscapeViewBox,i=t.animationDuration,s=t.animationEasing,o=t.children,l=t.coordinate,c=t.hasPayload,d=t.isAnimationActive,u=t.offset,h=t.position,p=t.reverseDirection,m=t.useTranslate3d,f=t.viewBox,g=t.wrapperStyle,x=function(e){var t,r,n=e.allowEscapeViewBox,a=e.coordinate,i=e.offsetTopLeft,s=e.position,o=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,d=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&a?function(e){var t=e.translateX,r=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}({translateX:t=uo({allowEscapeViewBox:n,coordinate:a,key:"x",offsetTopLeft:i,position:s,reverseDirection:o,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),translateY:r=uo({allowEscapeViewBox:n,coordinate:a,key:"y",offsetTopLeft:i,position:s,reverseDirection:o,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),useTranslate3d:c}):lo,cssClasses:co({translateX:t,translateY:r,coordinate:a})}}({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:u,position:h,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:f}),b=x.cssClasses,y=x.cssProperties,v=mo(mo({transition:d&&r?"transform ".concat(i,"ms ").concat(s):void 0},y),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&c?"visible":"hidden",position:"absolute",top:0,left:0},g);return a.createElement("div",{tabIndex:-1,className:b,style:v,ref:function(t){e.wrapperNode=t}},o)}}],n&&fo(r.prototype,n),i&&fo(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(a.PureComponent),jo={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return jo[e]},set:function(e,t){if("string"===typeof e)jo[e]=t;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(t){jo[t]=e[t]})}}},wo=r(977),No=r.n(wo);function So(e,t,r){return!0===t?No()(e,r):Zi()(t)?No()(e,t):e}function Oo(e){return Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oo(e)}function Co(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Eo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Co(Object(r),!0).forEach(function(t){Ro(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Co(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Po(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Io(n.key),n)}}function Ao(e,t,r){return t=To(t),function(e,t){if(t&&("object"===Oo(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Mo()?Reflect.construct(t,r||[],To(e).constructor):t.apply(e,r))}function Mo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Mo=function(){return!!e})()}function To(e){return To=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},To(e)}function Do(e,t){return Do=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Do(e,t)}function Ro(e,t,r){return(t=Io(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Io(e){var t=function(e,t){if("object"!=Oo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Oo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oo(t)?t:t+""}function Lo(e){return e.dataKey}var Fo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ao(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Do(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e=this,t=this.props,r=t.active,n=t.allowEscapeViewBox,i=t.animationDuration,s=t.animationEasing,o=t.content,l=t.coordinate,c=t.filterNull,d=t.isAnimationActive,u=t.offset,h=t.payload,p=t.payloadUniqBy,m=t.position,f=t.reverseDirection,g=t.useTranslate3d,x=t.viewBox,b=t.wrapperStyle,y=null!==h&&void 0!==h?h:[];c&&y.length&&(y=So(h.filter(function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)}),p,Lo));var v=y.length>0;return a.createElement(ko,{allowEscapeViewBox:n,animationDuration:i,animationEasing:s,isAnimationActive:d,active:r,coordinate:l,hasPayload:v,offset:u,position:m,reverseDirection:f,useTranslate3d:g,viewBox:x,wrapperStyle:b},function(e,t){return a.isValidElement(e)?a.cloneElement(e,t):"function"===typeof e?a.createElement(e,t):a.createElement(ao,t)}(o,Eo(Eo({},this.props),{},{payload:y})))}}],n&&Po(r.prototype,n),i&&Po(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(a.PureComponent);Ro(Fo,"displayName","Tooltip"),Ro(Fo,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!jo.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var zo=r(643),Uo=r.n(zo);Math.abs,Math.atan2;const Bo=Math.cos,Vo=(Math.max,Math.min,Math.sin),Ho=Math.sqrt,Wo=Math.PI,$o=2*Wo;const qo={draw(e,t){const r=Ho(t/Wo);e.moveTo(r,0),e.arc(0,0,r,0,$o)}},Go={draw(e,t){const r=Ho(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Ko=Ho(1/3),Yo=2*Ko,Xo={draw(e,t){const r=Ho(t/Yo),n=r*Ko;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Jo={draw(e,t){const r=Ho(t),n=-r/2;e.rect(n,n,r,r)}},Qo=Vo(Wo/10)/Vo(7*Wo/10),Zo=Vo($o/10)*Qo,el=-Bo($o/10)*Qo,tl={draw(e,t){const r=Ho(.8908130915292852*t),n=Zo*r,a=el*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const t=$o*i/5,s=Bo(t),o=Vo(t);e.lineTo(o*r,-s*r),e.lineTo(s*n-o*a,o*n+s*a)}e.closePath()}},rl=Ho(3),nl={draw(e,t){const r=-Ho(t/(3*rl));e.moveTo(0,2*r),e.lineTo(-rl*r,-r),e.lineTo(rl*r,-r),e.closePath()}},al=-.5,il=Ho(3)/2,sl=1/Ho(12),ol=3*(sl/2+1),ll={draw(e,t){const r=Ho(t/ol),n=r/2,a=r*sl,i=n,s=r*sl+r,o=-i,l=s;e.moveTo(n,a),e.lineTo(i,s),e.lineTo(o,l),e.lineTo(al*n-il*a,il*n+al*a),e.lineTo(al*i-il*s,il*i+al*s),e.lineTo(al*o-il*l,il*o+al*l),e.lineTo(al*n+il*a,al*a-il*n),e.lineTo(al*i+il*s,al*s-il*i),e.lineTo(al*o+il*l,al*l-il*o),e.closePath()}};function cl(e){return function(){return e}}function dl(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ul,hl,pl,ml,fl,gl,xl,bl,yl,vl,_l,kl,jl,wl;const Nl=Math.PI,Sl=2*Nl,Ol=1e-6,Cl=Sl-Ol;function El(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class Pl{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?El:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return El;const r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append(ul||(ul=dl(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(hl||(hl=dl(["Z"]))))}lineTo(e,t){this._append(pl||(pl=dl(["L",",",""])),this._x1=+e,this._y1=+t)}quadraticCurveTo(e,t,r,n){this._append(ml||(ml=dl(["Q",",",",",",",""])),+e,+t,this._x1=+r,this._y1=+n)}bezierCurveTo(e,t,r,n,a,i){this._append(fl||(fl=dl(["C",",",",",",",",",",",""])),+e,+t,+r,+n,this._x1=+a,this._y1=+i)}arcTo(e,t,r,n,a){if(e=+e,t=+t,r=+r,n=+n,(a=+a)<0)throw new Error("negative radius: ".concat(a));let i=this._x1,s=this._y1,o=r-e,l=n-t,c=i-e,d=s-t,u=c*c+d*d;if(null===this._x1)this._append(gl||(gl=dl(["M",",",""])),this._x1=e,this._y1=t);else if(u>Ol)if(Math.abs(d*o-l*c)>Ol&&a){let h=r-i,p=n-s,m=o*o+l*l,f=h*h+p*p,g=Math.sqrt(m),x=Math.sqrt(u),b=a*Math.tan((Nl-Math.acos((m+u-f)/(2*g*x)))/2),y=b/x,v=b/g;Math.abs(y-1)>Ol&&this._append(bl||(bl=dl(["L",",",""])),e+y*c,t+y*d),this._append(yl||(yl=dl(["A",",",",0,0,",",",",",""])),a,a,+(d*h>c*p),this._x1=e+v*o,this._y1=t+v*l)}else this._append(xl||(xl=dl(["L",",",""])),this._x1=e,this._y1=t);else;}arc(e,t,r,n,a,i){if(e=+e,t=+t,i=!!i,(r=+r)<0)throw new Error("negative radius: ".concat(r));let s=r*Math.cos(n),o=r*Math.sin(n),l=e+s,c=t+o,d=1^i,u=i?n-a:a-n;null===this._x1?this._append(vl||(vl=dl(["M",",",""])),l,c):(Math.abs(this._x1-l)>Ol||Math.abs(this._y1-c)>Ol)&&this._append(_l||(_l=dl(["L",",",""])),l,c),r&&(u<0&&(u=u%Sl+Sl),u>Cl?this._append(kl||(kl=dl(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),r,r,d,e-s,t-o,r,r,d,this._x1=l,this._y1=c):u>Ol&&this._append(jl||(jl=dl(["A",",",",0,",",",",",",",""])),r,r,+(u>=Nl),d,this._x1=e+r*Math.cos(a),this._y1=t+r*Math.sin(a)))}rect(e,t,r,n){this._append(wl||(wl=dl(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,r=+r,+n,-r)}toString(){return this._}}function Al(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError("invalid digits: ".concat(r));t=e}return e},()=>new Pl(t)}Ho(3),Ho(3);function Ml(e){return Ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ml(e)}var Tl=["type","size","sizeType"];function Dl(){return Dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dl.apply(this,arguments)}function Rl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Il(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rl(Object(r),!0).forEach(function(t){Ll(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ll(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Ml(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ml(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ml(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fl(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var zl={symbolCircle:qo,symbolCross:Go,symbolDiamond:Xo,symbolSquare:Jo,symbolStar:tl,symbolTriangle:nl,symbolWye:ll},Ul=Math.PI/180,Bl=function(e){var t=e.type,r=void 0===t?"circle":t,n=e.size,i=void 0===n?64:n,s=e.sizeType,o=void 0===s?"area":s,l=Il(Il({},Fl(e,Tl)),{},{type:r,size:i,sizeType:o}),c=l.className,d=l.cx,u=l.cy,h=Ns(l,!0);return d===+d&&u===+u&&i===+i?a.createElement("path",Dl({},h,{className:Oi("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(u,")"),d:function(){var e=function(e){var t="symbol".concat(Uo()(e));return zl[t]||qo}(r),t=function(e,t){let r=null,n=Al(a);function a(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return e="function"===typeof e?e:cl(e||qo),t="function"===typeof t?t:cl(void 0===t?64:+t),a.type=function(t){return arguments.length?(e="function"===typeof t?t:cl(t),a):e},a.size=function(e){return arguments.length?(t="function"===typeof e?e:cl(+e),a):t},a.context=function(e){return arguments.length?(r=null==e?null:e,a):r},a}().type(e).size(function(e,t,r){if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*Ul;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.pow(Math.tan(n),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(i,o,r));return t()}()})):null};function Vl(e){return Vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vl(e)}function Hl(){return Hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hl.apply(this,arguments)}function Wl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Jl(n.key),n)}}function ql(e,t,r){return t=Kl(t),function(e,t){if(t&&("object"===Vl(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Gl()?Reflect.construct(t,r||[],Kl(e).constructor):t.apply(e,r))}function Gl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Gl=function(){return!!e})()}function Kl(e){return Kl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kl(e)}function Yl(e,t){return Yl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yl(e,t)}function Xl(e,t,r){return(t=Jl(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jl(e){var t=function(e,t){if("object"!=Vl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Vl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vl(t)?t:t+""}Bl.registerSymbol=function(e,t){zl["symbol".concat(Uo()(e))]=t};var Ql=32,Zl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ql(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yl(e,t)}(t,e),r=t,n=[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,r=16,n=Ql/6,i=Ql/3,s=e.inactive?t:e.color;if("plainline"===e.type)return a.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:r,x2:Ql,y2:r,className:"recharts-legend-icon"});if("line"===e.type)return a.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(r,"h").concat(i,"\n            A").concat(n,",").concat(n,",0,1,1,").concat(2*i,",").concat(r,"\n            H").concat(Ql,"M").concat(2*i,",").concat(r,"\n            A").concat(n,",").concat(n,",0,1,1,").concat(i,",").concat(r),className:"recharts-legend-icon"});if("rect"===e.type)return a.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(4,"h").concat(Ql,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(a.isValidElement(e.legendIcon)){var o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wl(Object(r),!0).forEach(function(t){Xl(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e);return delete o.legendIcon,a.cloneElement(e.legendIcon,o)}return a.createElement(Bl,{fill:s,cx:r,cy:r,size:Ql,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,r=t.payload,n=t.iconSize,i=t.layout,s=t.formatter,o=t.inactiveColor,l={x:0,y:0,width:Ql,height:Ql},c={display:"horizontal"===i?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map(function(t,r){var i=t.formatter||s,u=Oi(Xl(Xl({"recharts-legend-item":!0},"legend-item-".concat(r),!0),"inactive",t.inactive));if("none"===t.type)return null;var h=Zi()(t.value)?null:t.value;Yi(!Zi()(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var p=t.inactive?o:t.color;return a.createElement("li",Hl({className:u,style:c,key:"legend-item-".concat(r)},ds(e.props,t,r)),a.createElement($s,{width:n,height:n,viewBox:l,style:d},e.renderIcon(t)),a.createElement("span",{className:"recharts-legend-item-text",style:{color:p}},i?i(h,t,r):h))})}},{key:"render",value:function(){var e=this.props,t=e.payload,r=e.layout,n=e.align;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:"horizontal"===r?n:"left"};return a.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}],n&&$l(r.prototype,n),i&&$l(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(a.PureComponent);function ec(e){return ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ec(e)}Xl(Zl,"displayName","Legend"),Xl(Zl,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var tc=["ref"];function rc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rc(Object(r),!0).forEach(function(t){cc(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rc(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ac(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dc(n.key),n)}}function ic(e,t,r){return t=oc(t),function(e,t){if(t&&("object"===ec(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,sc()?Reflect.construct(t,r||[],oc(e).constructor):t.apply(e,r))}function sc(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(sc=function(){return!!e})()}function oc(e){return oc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oc(e)}function lc(e,t){return lc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lc(e,t)}function cc(e,t,r){return(t=dc(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dc(e){var t=function(e,t){if("object"!=ec(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ec(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ec(t)?t:t+""}function uc(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function hc(e){return e.value}var pc=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return cc(e=ic(this,t,[].concat(n)),"lastBoundingBox",{width:-1,height:-1}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lc(e,t)}(t,e),r=t,n=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?nc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,r,n=this.props,a=n.layout,i=n.align,s=n.verticalAlign,o=n.margin,l=n.chartWidth,c=n.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===i&&"vertical"===a?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===i?{right:o&&o.right||0}:{left:o&&o.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(r="middle"===s?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===s?{bottom:o&&o.bottom||0}:{top:o&&o.top||0}),nc(nc({},t),r)}},{key:"render",value:function(){var e=this,t=this.props,r=t.content,n=t.width,i=t.height,s=t.wrapperStyle,o=t.payloadUniqBy,l=t.payload,c=nc(nc({position:"absolute",width:n||"auto",height:i||"auto"},this.getDefaultPosition(s)),s);return a.createElement("div",{className:"recharts-legend-wrapper",style:c,ref:function(t){e.wrapperNode=t}},function(e,t){if(a.isValidElement(e))return a.cloneElement(e,t);if("function"===typeof e)return a.createElement(e,t);t.ref;var r=uc(t,tc);return a.createElement(Zl,r)}(r,nc(nc({},this.props),{},{payload:So(l,o,hc)})))}}],i=[{key:"getWithHeight",value:function(e,t){var r=nc(nc({},this.defaultProps),e.props).layout;return"vertical"===r&&Ui(e.props.height)?{height:e.props.height}:"horizontal"===r?{width:e.props.width||t}:null}}],n&&ac(r.prototype,n),i&&ac(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(a.PureComponent);function mc(){return mc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mc.apply(this,arguments)}cc(pc,"displayName","Legend"),cc(pc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var fc=function(e){var t=e.cx,r=e.cy,n=e.r,i=e.className,s=Oi("recharts-dot",i);return t===+t&&r===+r&&n===+n?a.createElement("circle",mc({},Ns(e,!1),cs(e),{className:s,cx:t,cy:r,r:n})):null},gc=r(5173),xc=r.n(gc),bc=Object.getOwnPropertyNames,yc=Object.getOwnPropertySymbols,vc=Object.prototype.hasOwnProperty;function _c(e,t){return function(r,n,a){return e(r,n,a)&&t(r,n,a)}}function kc(e){return function(t,r,n){if(!t||!r||"object"!==typeof t||"object"!==typeof r)return e(t,r,n);var a=n.cache,i=a.get(t),s=a.get(r);if(i&&s)return i===r&&s===t;a.set(t,r),a.set(r,t);var o=e(t,r,n);return a.delete(t),a.delete(r),o}}function jc(e){return bc(e).concat(yc(e))}var wc=Object.hasOwn||function(e,t){return vc.call(e,t)};function Nc(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Sc=Object.getOwnPropertyDescriptor,Oc=Object.keys;function Cc(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function Ec(e,t){return Nc(e.getTime(),t.getTime())}function Pc(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Ac(e,t){return e===t}function Mc(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a,i,s=new Array(n),o=e.entries(),l=0;(a=o.next())&&!a.done;){for(var c=t.entries(),d=!1,u=0;(i=c.next())&&!i.done;)if(s[u])u++;else{var h=a.value,p=i.value;if(r.equals(h[0],p[0],l,u,e,t,r)&&r.equals(h[1],p[1],h[0],p[0],e,t,r)){d=s[u]=!0;break}u++}if(!d)return!1;l++}return!0}var Tc=Nc;function Dc(e,t,r){var n=Oc(e),a=n.length;if(Oc(t).length!==a)return!1;for(;a-- >0;)if(!Bc(e,t,r,n[a]))return!1;return!0}function Rc(e,t,r){var n,a,i,s=jc(e),o=s.length;if(jc(t).length!==o)return!1;for(;o-- >0;){if(!Bc(e,t,r,n=s[o]))return!1;if(a=Sc(e,n),i=Sc(t,n),(a||i)&&(!a||!i||a.configurable!==i.configurable||a.enumerable!==i.enumerable||a.writable!==i.writable))return!1}return!0}function Ic(e,t){return Nc(e.valueOf(),t.valueOf())}function Lc(e,t){return e.source===t.source&&e.flags===t.flags}function Fc(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a,i,s=new Array(n),o=e.values();(a=o.next())&&!a.done;){for(var l=t.values(),c=!1,d=0;(i=l.next())&&!i.done;){if(!s[d]&&r.equals(a.value,i.value,a.value,i.value,e,t,r)){c=s[d]=!0;break}d++}if(!c)return!1}return!0}function zc(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function Uc(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Bc(e,t,r,n){return!("_owner"!==n&&"__o"!==n&&"__v"!==n||!e.$$typeof&&!t.$$typeof)||wc(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var Vc=Array.isArray,Hc="function"===typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,Wc=Object.assign,$c=Object.prototype.toString.call.bind(Object.prototype.toString);var qc=Gc();Gc({strict:!0}),Gc({circular:!0}),Gc({circular:!0,strict:!0}),Gc({createInternalComparator:function(){return Nc}}),Gc({strict:!0,createInternalComparator:function(){return Nc}}),Gc({circular:!0,createInternalComparator:function(){return Nc}}),Gc({circular:!0,createInternalComparator:function(){return Nc},strict:!0});function Gc(e){void 0===e&&(e={});var t,r=e.circular,n=void 0!==r&&r,a=e.createInternalComparator,i=e.createState,s=e.strict,o=void 0!==s&&s,l=function(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?Rc:Cc,areDatesEqual:Ec,areErrorsEqual:Pc,areFunctionsEqual:Ac,areMapsEqual:n?_c(Mc,Rc):Mc,areNumbersEqual:Tc,areObjectsEqual:n?Rc:Dc,arePrimitiveWrappersEqual:Ic,areRegExpsEqual:Lc,areSetsEqual:n?_c(Fc,Rc):Fc,areTypedArraysEqual:n?Rc:zc,areUrlsEqual:Uc};if(r&&(a=Wc({},a,r(a))),t){var i=kc(a.areArraysEqual),s=kc(a.areMapsEqual),o=kc(a.areObjectsEqual),l=kc(a.areSetsEqual);a=Wc({},a,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:l})}return a}(e),c=function(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,s=e.areNumbersEqual,o=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,d=e.areSetsEqual,u=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(e,p,m){if(e===p)return!0;if(null==e||null==p)return!1;var f=typeof e;if(f!==typeof p)return!1;if("object"!==f)return"number"===f?s(e,p,m):"function"===f&&a(e,p,m);var g=e.constructor;if(g!==p.constructor)return!1;if(g===Object)return o(e,p,m);if(Vc(e))return t(e,p,m);if(null!=Hc&&Hc(e))return u(e,p,m);if(g===Date)return r(e,p,m);if(g===RegExp)return c(e,p,m);if(g===Map)return i(e,p,m);if(g===Set)return d(e,p,m);var x=$c(e);return"[object Date]"===x?r(e,p,m):"[object RegExp]"===x?c(e,p,m):"[object Map]"===x?i(e,p,m):"[object Set]"===x?d(e,p,m):"[object Object]"===x?"function"!==typeof e.then&&"function"!==typeof p.then&&o(e,p,m):"[object URL]"===x?h(e,p,m):"[object Error]"===x?n(e,p,m):"[object Arguments]"===x?o(e,p,m):("[object Boolean]"===x||"[object Number]"===x||"[object String]"===x)&&l(e,p,m)}}(l),d=a?a(c):(t=c,function(e,r,n,a,i,s,o){return t(e,r,o)});return function(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,i=e.strict;if(n)return function(e,s){var o=n(),l=o.cache,c=void 0===l?t?new WeakMap:void 0:l,d=o.meta;return r(e,s,{cache:c,equals:a,meta:d,strict:i})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var s={cache:void 0,equals:a,meta:void 0,strict:i};return function(e,t){return r(e,t,s)}}({circular:n,comparator:c,createState:i,equals:d,strict:o})}function Kc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=-1;requestAnimationFrame(function n(a){r<0&&(r=a),a-r>t?(e(a),r=-1):function(e){"undefined"!==typeof requestAnimationFrame&&requestAnimationFrame(e)}(n)})}function Yc(e){return Yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yc(e)}function Xc(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Jc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jc(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qc(){var e=function(){return null},t=!1,r=function r(n){if(!t){if(Array.isArray(n)){if(!n.length)return;var a=Xc(n),i=a[0],s=a.slice(1);return"number"===typeof i?void Kc(r.bind(null,s),i):(r(i),void Kc(r.bind(null,s)))}"object"===Yc(n)&&e(n),"function"===typeof n&&n()}};return{stop:function(){t=!0},start:function(e){t=!1,r(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function Zc(e){return Zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zc(e)}function ed(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function td(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ed(Object(r),!0).forEach(function(t){rd(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ed(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function rd(e,t,r){return t=function(e){var t=function(e,t){if("object"!==Zc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Zc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Zc(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var nd=function(e){return e},ad=function(e,t){return Object.keys(t).reduce(function(r,n){return td(td({},r),{},rd({},n,e(n,t[n])))},{})},id=function(e,t,r){return e.map(function(e){return"".concat((n=e,n.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())}))," ").concat(t,"ms ").concat(r);var n}).join(",")};function sd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||ld(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function od(e){return function(e){if(Array.isArray(e))return cd(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ld(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ld(e,t){if(e){if("string"===typeof e)return cd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cd(e,t):void 0}}function cd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var dd=1e-4,ud=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},hd=function(e,t){return e.map(function(e,r){return e*Math.pow(t,r)}).reduce(function(e,t){return e+t})},pd=function(e,t){return function(r){var n=ud(e,t);return hd(n,r)}},md=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],a=t[1],i=t[2],s=t[3];if(1===t.length)switch(t[0]){case"linear":n=0,a=0,i=1,s=1;break;case"ease":n=.25,a=.1,i=.25,s=1;break;case"ease-in":n=.42,a=0,i=1,s=1;break;case"ease-out":n=.42,a=0,i=.58,s=1;break;case"ease-in-out":n=0,a=0,i=.58,s=1;break;default:var o=t[0].split("(");if("cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length){var l=sd(o[1].split(")")[0].split(",").map(function(e){return parseFloat(e)}),4);n=l[0],a=l[1],i=l[2],s=l[3]}}[n,i,a,s].every(function(e){return"number"===typeof e&&e>=0&&e<=1});var c,d,u=pd(n,i),h=pd(a,s),p=(c=n,d=i,function(e){var t=ud(c,d),r=[].concat(od(t.map(function(e,t){return e*t}).slice(1)),[0]);return hd(r,e)}),m=function(e){return e>1?1:e<0?0:e},f=function(e){for(var t=e>1?1:e,r=t,n=0;n<8;++n){var a=u(r)-t,i=p(r);if(Math.abs(a-t)<dd||i<dd)return h(r);r=m(r-a/i)}return h(r)};return f.isStepper=!1,f},fd=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0];if("string"===typeof n)switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return md(n);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,r=void 0===t?100:t,n=e.damping,a=void 0===n?8:n,i=e.dt,s=void 0===i?17:i,o=function(e,t,n){var i=n+(-(e-t)*r-n*a)*s/1e3,o=n*s/1e3+e;return Math.abs(o-t)<dd&&Math.abs(i)<dd?[t,0]:[o,i]};return o.isStepper=!0,o.dt=s,o}();default:if("cubic-bezier"===n.split("(")[0])return md(n)}return"function"===typeof n?n:null};function gd(e){return gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gd(e)}function xd(e){return function(e){if(Array.isArray(e))return jd(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||kd(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bd(Object(r),!0).forEach(function(t){vd(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bd(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function vd(e,t,r){return t=function(e){var t=function(e,t){if("object"!==gd(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==gd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===gd(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||kd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kd(e,t){if(e){if("string"===typeof e)return jd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jd(e,t):void 0}}function jd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var wd=function(e,t,r){return e+(t-e)*r},Nd=function(e){return e.from!==e.to},Sd=function e(t,r,n){var a=ad(function(e,r){if(Nd(r)){var n=_d(t(r.from,r.to,r.velocity),2),a=n[0],i=n[1];return yd(yd({},r),{},{from:a,velocity:i})}return r},r);return n<1?ad(function(e,t){return Nd(t)?yd(yd({},t),{},{velocity:wd(t.velocity,a[e].velocity,n),from:wd(t.from,a[e].from,n)}):t},r):e(t,a,n-1)};const Od=function(e,t,r,n,a){var i,s,o,l,c=(i=e,s=t,[Object.keys(i),Object.keys(s)].reduce(function(e,t){return e.filter(function(e){return t.includes(e)})})),d=c.reduce(function(r,n){return yd(yd({},r),{},vd({},n,[e[n],t[n]]))},{}),u=c.reduce(function(r,n){return yd(yd({},r),{},vd({},n,{from:e[n],velocity:0,to:t[n]}))},{}),h=-1,p=function(){return null};return p=r.isStepper?function(n){o||(o=n);var i=(n-o)/r.dt;u=Sd(r,u,i),a(yd(yd(yd({},e),t),ad(function(e,t){return t.from},u))),o=n,Object.values(u).filter(Nd).length&&(h=requestAnimationFrame(p))}:function(i){l||(l=i);var s=(i-l)/n,o=ad(function(e,t){return wd.apply(void 0,xd(t).concat([r(s)]))},d);if(a(yd(yd(yd({},e),t),o)),s<1)h=requestAnimationFrame(p);else{var c=ad(function(e,t){return wd.apply(void 0,xd(t).concat([r(1)]))},d);a(yd(yd(yd({},e),t),c))}},function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(h)}}};function Cd(e){return Cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cd(e)}var Ed=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Pd(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ad(e){return function(e){if(Array.isArray(e))return Md(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Md(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Md(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Md(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Td(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Dd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Td(Object(r),!0).forEach(function(t){Rd(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Td(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Rd(e,t,r){return(t=Ld(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Id(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ld(n.key),n)}}function Ld(e){var t=function(e,t){if("object"!==Cd(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Cd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Cd(t)?t:String(t)}function Fd(e,t){return Fd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fd(e,t)}function zd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(CF){return!1}}();return function(){var r,n=Vd(e);if(t){var a=Vd(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Ud(this,r)}}function Ud(e,t){if(t&&("object"===Cd(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bd(e)}function Bd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vd(e){return Vd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vd(e)}var Hd=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fd(e,t)}(s,e);var t,r,n,i=zd(s);function s(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var n=(r=i.call(this,e,t)).props,a=n.isActive,o=n.attributeName,l=n.from,c=n.to,d=n.steps,u=n.children,h=n.duration;if(r.handleStyleChange=r.handleStyleChange.bind(Bd(r)),r.changeStyle=r.changeStyle.bind(Bd(r)),!a||h<=0)return r.state={style:{}},"function"===typeof u&&(r.state={style:c}),Ud(r);if(d&&d.length)r.state={style:d[0].style};else if(l){if("function"===typeof u)return r.state={style:l},Ud(r);r.state={style:o?Rd({},o,l):l}}else r.state={style:{}};return r}return t=s,r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,r=e.canBegin;this.mounted=!0,t&&r&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.isActive,n=t.canBegin,a=t.attributeName,i=t.shouldReAnimate,s=t.to,o=t.from,l=this.state.style;if(n)if(r){if(!(qc(e.to,s)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var d=c||i?o:e.to;if(this.state&&l){var u={style:a?Rd({},a,d):d};(a&&l[a]!==d||!a&&l!==d)&&this.setState(u)}this.runAnimation(Dd(Dd({},this.props),{},{from:d,begin:0}))}}else{var h={style:a?Rd({},a,s):s};this.state&&l&&(a&&l[a]!==s||!a&&l!==s)&&this.setState(h)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,r=e.from,n=e.to,a=e.duration,i=e.easing,s=e.begin,o=e.onAnimationEnd,l=e.onAnimationStart,c=Od(r,n,fd(i),a,this.changeStyle);this.manager.start([l,s,function(){t.stopJSAnimation=c()},a,o])}},{key:"runStepAnimation",value:function(e){var t=this,r=e.steps,n=e.begin,a=e.onAnimationStart,i=r[0],s=i.style,o=i.duration,l=void 0===o?0:o;return this.manager.start([a].concat(Ad(r.reduce(function(e,n,a){if(0===a)return e;var i=n.duration,s=n.easing,o=void 0===s?"ease":s,l=n.style,c=n.properties,d=n.onAnimationEnd,u=a>0?r[a-1]:n,h=c||Object.keys(l);if("function"===typeof o||"spring"===o)return[].concat(Ad(e),[t.runJSAnimation.bind(t,{from:u.style,to:l,duration:i,easing:o}),i]);var p=id(h,i,o),m=Dd(Dd(Dd({},u.style),l),{},{transition:p});return[].concat(Ad(e),[m,i,d]).filter(nd)},[s,Math.max(l,n)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=Qc());var t=e.begin,r=e.duration,n=e.attributeName,a=e.to,i=e.easing,s=e.onAnimationStart,o=e.onAnimationEnd,l=e.steps,c=e.children,d=this.manager;if(this.unSubscribe=d.subscribe(this.handleStyleChange),"function"!==typeof i&&"function"!==typeof c&&"spring"!==i)if(l.length>1)this.runStepAnimation(e);else{var u=n?Rd({},n,a):a,h=id(Object.keys(u),r,i);d.start([s,t,Dd(Dd({},u),{},{transition:h}),r,o])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,t=e.children,r=(e.begin,e.duration),n=(e.attributeName,e.easing,e.isActive),i=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,Pd(e,Ed)),s=a.Children.count(t),o=this.state.style;if("function"===typeof t)return t(o);if(!n||0===s||r<=0)return t;var l=function(e){var t=e.props,r=t.style,n=void 0===r?{}:r,s=t.className;return(0,a.cloneElement)(e,Dd(Dd({},i),{},{style:Dd(Dd({},n),o),className:s}))};return 1===s?l(a.Children.only(t)):a.createElement("div",null,a.Children.map(t,function(e){return l(e)}))}}],r&&Id(t.prototype,r),n&&Id(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(a.PureComponent);Hd.displayName="Animate",Hd.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},Hd.propTypes={from:xc().oneOfType([xc().object,xc().string]),to:xc().oneOfType([xc().object,xc().string]),attributeName:xc().string,duration:xc().number,begin:xc().number,easing:xc().oneOfType([xc().string,xc().func]),steps:xc().arrayOf(xc().shape({duration:xc().number.isRequired,style:xc().object.isRequired,easing:xc().oneOfType([xc().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),xc().func]),properties:xc().arrayOf("string"),onAnimationEnd:xc().func})),children:xc().oneOfType([xc().node,xc().func]),isActive:xc().bool,canBegin:xc().bool,onAnimationEnd:xc().func,shouldReAnimate:xc().bool,onAnimationStart:xc().func,onAnimationReStart:xc().func};const Wd=Hd;function $d(e){return $d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$d(e)}function qd(){return qd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qd.apply(this,arguments)}function Gd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Kd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Yd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Xd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yd(Object(r),!0).forEach(function(t){Jd(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yd(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Jd(e,t,r){return t=function(e){var t=function(e,t){if("object"!=$d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$d(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qd=function(e,t,r,n,a){var i,s=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],u=0;u<4;u++)d[u]=a[u]>s?s:a[u];i="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(i+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),i+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(i+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,",\n        ").concat(e+r,",").concat(t+o*d[1])),i+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(i+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,",\n        ").concat(e+r-l*d[2],",").concat(t+n)),i+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(i+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+n-o*d[3])),i+="Z"}else if(s>0&&a===+a&&a>0){var h=Math.min(s,a);i="M ".concat(e,",").concat(t+o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+r-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*h,"\n            L ").concat(e+r,",").concat(t+n-o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r-l*h,",").concat(t+n,"\n            L ").concat(e+l*h,",").concat(t+n,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*h," Z")}else i="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return i},Zd=function(e,t){if(!e||!t)return!1;var r=e.x,n=e.y,a=t.x,i=t.y,s=t.width,o=t.height;if(Math.abs(s)>0&&Math.abs(o)>0){var l=Math.min(a,a+s),c=Math.max(a,a+s),d=Math.min(i,i+o),u=Math.max(i,i+o);return r>=l&&r<=c&&n>=d&&n<=u}return!1},eu={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tu=function(e){var t=Xd(Xd({},eu),e),r=(0,a.useRef)(),n=Gd((0,a.useState)(-1),2),i=n[0],s=n[1];(0,a.useEffect)(function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&s(e)}catch(t){}},[]);var o=t.x,l=t.y,c=t.width,d=t.height,u=t.radius,h=t.className,p=t.animationEasing,m=t.animationDuration,f=t.animationBegin,g=t.isAnimationActive,x=t.isUpdateAnimationActive;if(o!==+o||l!==+l||c!==+c||d!==+d||0===c||0===d)return null;var b=Oi("recharts-rectangle",h);return x?a.createElement(Wd,{canBegin:i>0,from:{width:c,height:d,x:o,y:l},to:{width:c,height:d,x:o,y:l},duration:m,animationEasing:p,isActive:x},function(e){var n=e.width,s=e.height,o=e.x,l=e.y;return a.createElement(Wd,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:m,isActive:g,easing:p},a.createElement("path",qd({},Ns(t,!0),{className:b,d:Qd(o,l,n,s,u),ref:r})))}):a.createElement("path",qd({},Ns(t,!0),{className:b,d:Qd(o,l,c,d,u)}))};function ru(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function nu(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class au extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lu;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[r,n]of e)this.set(r,n)}get(e){return super.get(iu(this,e))}has(e){return super.has(iu(this,e))}set(e,t){return super.set(su(this,e),t)}delete(e){return super.delete(ou(this,e))}}Set;function iu(e,t){let{_intern:r,_key:n}=e;const a=n(t);return r.has(a)?r.get(a):t}function su(e,t){let{_intern:r,_key:n}=e;const a=n(t);return r.has(a)?r.get(a):(r.set(a,t),t)}function ou(e,t){let{_intern:r,_key:n}=e;const a=n(t);return r.has(a)&&(t=r.get(a),r.delete(a)),t}function lu(e){return null!==e&&"object"===typeof e?e.valueOf():e}const cu=Symbol("implicit");function du(){var e=new au,t=[],r=[],n=cu;function a(a){let i=e.get(a);if(void 0===i){if(n!==cu)return n;e.set(a,i=t.push(a)-1)}return r[i%r.length]}return a.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new au;for(const n of r)e.has(n)||e.set(n,t.push(n)-1);return a},a.range=function(e){return arguments.length?(r=Array.from(e),a):r.slice()},a.unknown=function(e){return arguments.length?(n=e,a):n},a.copy=function(){return du(t,r).unknown(n)},ru.apply(a,arguments),a}function uu(){var e,t,r=du().unknown(void 0),n=r.domain,a=r.range,i=0,s=1,o=!1,l=0,c=0,d=.5;function u(){var r=n().length,u=s<i,h=u?s:i,p=u?i:s;e=(p-h)/Math.max(1,r-l+2*c),o&&(e=Math.floor(e)),h+=(p-h-e*(r-l))*d,t=e*(1-l),o&&(h=Math.round(h),t=Math.round(t));var m=function(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=0|Math.max(0,Math.ceil((t-e)/r)),i=new Array(a);++n<a;)i[n]=e+n*r;return i}(r).map(function(t){return h+e*t});return a(u?m.reverse():m)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),u()):n()},r.range=function(e){return arguments.length?([i,s]=e,i=+i,s=+s,u()):[i,s]},r.rangeRound=function(e){return[i,s]=e,i=+i,s=+s,o=!0,u()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(o=!!e,u()):o},r.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),u()):l},r.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),u()):l},r.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},r.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},r.copy=function(){return uu(n(),[i,s]).round(o).paddingInner(l).paddingOuter(c).align(d)},ru.apply(u(),arguments)}function hu(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return hu(t())},e}function pu(){return hu(uu.apply(null,arguments).paddingInner(1))}function mu(e){return mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mu(e)}function fu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fu(Object(r),!0).forEach(function(t){xu(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fu(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function xu(e,t,r){return t=function(e){var t=function(e,t){if("object"!=mu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mu(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bu={widthCache:{},cacheCount:0},yu={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},vu="recharts_measurement_span";var _u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||jo.isSsr)return{width:0,height:0};var r=function(e){var t=gu({},e);return Object.keys(t).forEach(function(e){t[e]||delete t[e]}),t}(t),n=JSON.stringify({text:e,copyStyle:r});if(bu.widthCache[n])return bu.widthCache[n];try{var a=document.getElementById(vu);a||((a=document.createElement("span")).setAttribute("id",vu),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var i=gu(gu({},yu),r);Object.assign(a.style,i),a.textContent="".concat(e);var s=a.getBoundingClientRect(),o={width:s.width,height:s.height};return bu.widthCache[n]=o,++bu.cacheCount>2e3&&(bu.cacheCount=0,bu.widthCache={}),o}catch(CF){return{width:0,height:0}}};function ku(e){return ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ku(e)}function ju(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return wu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Nu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Su(n.key),n)}}function Su(e){var t=function(e,t){if("object"!=ku(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ku(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ku(t)?t:t+""}var Ou=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Cu=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Eu=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Pu=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Au={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},Mu=Object.keys(Au),Tu="NaN";var Du=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),""===r||Eu.test(r)||(this.num=NaN,this.unit=""),Mu.includes(r)&&(this.num=function(e,t){return e*Au[t]}(t,r),this.unit="px")}return t=e,n=[{key:"parse",value:function(t){var r,n=ju(null!==(r=Pu.exec(t))&&void 0!==r?r:[],3),a=n[1],i=n[2];return new e(parseFloat(a),null!==i&&void 0!==i?i:"")}}],(r=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&Nu(t.prototype,r),n&&Nu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Ru(e){if(e.includes(Tu))return Tu;for(var t=e;t.includes("*")||t.includes("/");){var r,n=ju(null!==(r=Ou.exec(t))&&void 0!==r?r:[],4),a=n[1],i=n[2],s=n[3],o=Du.parse(null!==a&&void 0!==a?a:""),l=Du.parse(null!==s&&void 0!==s?s:""),c="*"===i?o.multiply(l):o.divide(l);if(c.isNaN())return Tu;t=t.replace(Ou,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,u=ju(null!==(d=Cu.exec(t))&&void 0!==d?d:[],4),h=u[1],p=u[2],m=u[3],f=Du.parse(null!==h&&void 0!==h?h:""),g=Du.parse(null!==m&&void 0!==m?m:""),x="+"===p?f.add(g):f.subtract(g);if(x.isNaN())return Tu;t=t.replace(Cu,x.toString())}return t}var Iu=/\(([^()]*)\)/;function Lu(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var r=ju(Iu.exec(t),2)[1];t=t.replace(Iu,Ru(r))}return t}(t),t=Ru(t)}function Fu(e){var t=function(e){try{return Lu(e)}catch(CF){return Tu}}(e.slice(5,-1));return t===Tu?"":t}var zu=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Uu=["dx","dy","angle","className","breakAll"];function Bu(){return Bu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bu.apply(this,arguments)}function Vu(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Hu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Wu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $u=/[ \f\n\r\t\v\u2028\u2029]+/,qu=function(e){var t=e.children,r=e.breakAll,n=e.style;try{var a=[];return Ji()(t)||(a=r?t.toString().split(""):t.toString().split($u)),{wordsWithComputedWidth:a.map(function(e){return{word:e,width:_u(e,n).width}}),spaceWidth:r?0:_u("\xa0",n).width}}catch(CF){return null}},Gu=function(e){return[{words:Ji()(e)?[]:e.toString().split($u)}]},Ku=function(e){var t=e.width,r=e.scaleToFit,n=e.children,a=e.style,i=e.breakAll,s=e.maxLines;if((t||r)&&!jo.isSsr){var o=qu({breakAll:i,children:n,style:a});return o?function(e,t,r,n,a){var i=e.maxLines,s=e.children,o=e.style,l=e.breakAll,c=Ui(i),d=s,u=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var i=t.word,s=t.width,o=e[e.length-1];if(o&&(null==n||a||o.width+s+r<Number(n)))o.words.push(i),o.width+=s+r;else{var l={words:[i],width:s};e.push(l)}return e},[])},h=u(t);if(!c)return h;for(var p,m=function(e){var t=d.slice(0,e),r=qu({breakAll:l,style:o,children:t+"\u2026"}).wordsWithComputedWidth,a=u(r),s=a.length>i||function(e){return e.reduce(function(e,t){return e.width>t.width?e:t})}(a).width>Number(n);return[s,a]},f=0,g=d.length-1,x=0;f<=g&&x<=d.length-1;){var b=Math.floor((f+g)/2),y=Hu(m(b-1),2),v=y[0],_=y[1],k=Hu(m(b),1)[0];if(v||k||(f=b+1),v&&k&&(g=b-1),!v&&k){p=_;break}x++}return p||h}({breakAll:i,children:n,maxLines:s,style:a},o.wordsWithComputedWidth,o.spaceWidth,t,r):Gu(n)}return Gu(n)},Yu="#808080",Xu=function(e){var t=e.x,r=void 0===t?0:t,n=e.y,i=void 0===n?0:n,s=e.lineHeight,o=void 0===s?"1em":s,l=e.capHeight,c=void 0===l?"0.71em":l,d=e.scaleToFit,u=void 0!==d&&d,h=e.textAnchor,p=void 0===h?"start":h,m=e.verticalAnchor,f=void 0===m?"end":m,g=e.fill,x=void 0===g?Yu:g,b=Vu(e,zu),y=(0,a.useMemo)(function(){return Ku({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:u,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,u,b.style,b.width]),v=b.dx,_=b.dy,k=b.angle,j=b.className,w=b.breakAll,N=Vu(b,Uu);if(!Bi(r)||!Bi(i))return null;var S,O=r+(Ui(v)?v:0),C=i+(Ui(_)?_:0);switch(f){case"start":S=Fu("calc(".concat(c,")"));break;case"middle":S=Fu("calc(".concat((y.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:S=Fu("calc(".concat(y.length-1," * -").concat(o,")"))}var E=[];if(u){var P=y[0].width,A=b.width;E.push("scale(".concat((Ui(A)?A/P:1)/P,")"))}return k&&E.push("rotate(".concat(k,", ").concat(O,", ").concat(C,")")),E.length&&(N.transform=E.join(" ")),a.createElement("text",Bu({},Ns(N,!0),{x:O,y:C,className:Oi("recharts-text",j),textAnchor:p,fill:x.includes("url")?Yu:x}),y.map(function(e,t){var r=e.words.join(w?"":" ");return a.createElement("tspan",{x:O,dy:0===t?S:o,key:"".concat(r,"-").concat(t)},r)}))};const Ju=Math.sqrt(50),Qu=Math.sqrt(10),Zu=Math.sqrt(2);function eh(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),s=i>=Ju?10:i>=Qu?5:i>=Zu?2:1;let o,l,c;return a<0?(c=Math.pow(10,-a)/s,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,a)*s,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=r&&r<2?eh(e,t,2*r):[o,l,c]}function th(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const n=t<e,[a,i,s]=n?eh(t,e,r):eh(e,t,r);if(!(i>=a))return[];const o=i-a+1,l=new Array(o);if(n)if(s<0)for(let c=0;c<o;++c)l[c]=(i-c)/-s;else for(let c=0;c<o;++c)l[c]=(i-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(a+c)/-s;else for(let c=0;c<o;++c)l[c]=(a+c)*s;return l}function rh(e,t,r){return eh(e=+e,t=+t,r=+r)[2]}function nh(e,t,r){r=+r;const n=(t=+t)<(e=+e),a=n?rh(t,e,r):rh(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function ah(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ih(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function sh(e){let t,r,n;function a(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(n,n))return i;do{const t=a+i>>>1;r(e[t],n)<0?a=t+1:i=t}while(a<i)}return a}return 2!==e.length?(t=ah,r=(t,r)=>ah(e(t),r),n=(t,r)=>e(t)-r):(t=e===ah||e===ih?e:oh,r=e,n=e),{left:a,center:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=a(e,t,r,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return i>r&&n(e[i-1],t)>-n(e[i],t)?i-1:i},right:function(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(n,n))return i;do{const t=a+i>>>1;r(e[t],n)<=0?a=t+1:i=t}while(a<i)}return a}}}function oh(){return 0}function lh(e){return null===e?NaN:+e}const ch=sh(ah),dh=ch.right,uh=(ch.left,sh(lh).center,dh);function hh(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function ph(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function mh(){}var fh=.7,gh=1/fh,xh="\\s*([+-]?\\d+)\\s*",bh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vh=/^#([0-9a-f]{3,8})$/,_h=new RegExp("^rgb\\(".concat(xh,",").concat(xh,",").concat(xh,"\\)$")),kh=new RegExp("^rgb\\(".concat(yh,",").concat(yh,",").concat(yh,"\\)$")),jh=new RegExp("^rgba\\(".concat(xh,",").concat(xh,",").concat(xh,",").concat(bh,"\\)$")),wh=new RegExp("^rgba\\(".concat(yh,",").concat(yh,",").concat(yh,",").concat(bh,"\\)$")),Nh=new RegExp("^hsl\\(".concat(bh,",").concat(yh,",").concat(yh,"\\)$")),Sh=new RegExp("^hsla\\(".concat(bh,",").concat(yh,",").concat(yh,",").concat(bh,"\\)$")),Oh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ch(){return this.rgb().formatHex()}function Eh(){return this.rgb().formatRgb()}function Ph(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=vh.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?Ah(t):3===r?new Dh(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?Mh(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?Mh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=_h.exec(e))?new Dh(t[1],t[2],t[3],1):(t=kh.exec(e))?new Dh(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=jh.exec(e))?Mh(t[1],t[2],t[3],t[4]):(t=wh.exec(e))?Mh(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Nh.exec(e))?Uh(t[1],t[2]/100,t[3]/100,1):(t=Sh.exec(e))?Uh(t[1],t[2]/100,t[3]/100,t[4]):Oh.hasOwnProperty(e)?Ah(Oh[e]):"transparent"===e?new Dh(NaN,NaN,NaN,0):null}function Ah(e){return new Dh(e>>16&255,e>>8&255,255&e,1)}function Mh(e,t,r,n){return n<=0&&(e=t=r=NaN),new Dh(e,t,r,n)}function Th(e,t,r,n){return 1===arguments.length?((a=e)instanceof mh||(a=Ph(a)),a?new Dh((a=a.rgb()).r,a.g,a.b,a.opacity):new Dh):new Dh(e,t,r,null==n?1:n);var a}function Dh(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function Rh(){return"#".concat(zh(this.r)).concat(zh(this.g)).concat(zh(this.b))}function Ih(){const e=Lh(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(Fh(this.r),", ").concat(Fh(this.g),", ").concat(Fh(this.b)).concat(1===e?")":", ".concat(e,")"))}function Lh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Fh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function zh(e){return((e=Fh(e))<16?"0":"")+e.toString(16)}function Uh(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Vh(e,t,r,n)}function Bh(e){if(e instanceof Vh)return new Vh(e.h,e.s,e.l,e.opacity);if(e instanceof mh||(e=Ph(e)),!e)return new Vh;if(e instanceof Vh)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),s=NaN,o=i-a,l=(i+a)/2;return o?(s=t===i?(r-n)/o+6*(r<n):r===i?(n-t)/o+2:(t-r)/o+4,o/=l<.5?i+a:2-i-a,s*=60):o=l>0&&l<1?0:s,new Vh(s,o,l,e.opacity)}function Vh(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function Hh(e){return(e=(e||0)%360)<0?e+360:e}function Wh(e){return Math.max(0,Math.min(1,e||0))}function $h(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}function qh(e,t,r,n,a){var i=e*e,s=i*e;return((1-3*e+3*i-s)*t+(4-6*i+3*s)*r+(1+3*e+3*i-3*s)*n+s*a)/6}hh(mh,Ph,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ch,formatHex:Ch,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Bh(this).formatHsl()},formatRgb:Eh,toString:Eh}),hh(Dh,Th,ph(mh,{brighter(e){return e=null==e?gh:Math.pow(gh,e),new Dh(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?fh:Math.pow(fh,e),new Dh(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Dh(Fh(this.r),Fh(this.g),Fh(this.b),Lh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Rh,formatHex:Rh,formatHex8:function(){return"#".concat(zh(this.r)).concat(zh(this.g)).concat(zh(this.b)).concat(zh(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:Ih,toString:Ih})),hh(Vh,function(e,t,r,n){return 1===arguments.length?Bh(e):new Vh(e,t,r,null==n?1:n)},ph(mh,{brighter(e){return e=null==e?gh:Math.pow(gh,e),new Vh(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?fh:Math.pow(fh,e),new Vh(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Dh($h(e>=240?e-240:e+120,a,n),$h(e,a,n),$h(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Vh(Hh(this.h),Wh(this.s),Wh(this.l),Lh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Lh(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(Hh(this.h),", ").concat(100*Wh(this.s),"%, ").concat(100*Wh(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const Gh=e=>()=>e;function Kh(e,t){return function(r){return e+r*t}}function Yh(e){return 1===(e=+e)?Xh:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}(t,r,e):Gh(isNaN(t)?r:t)}}function Xh(e,t){var r=t-e;return r?Kh(e,r):Gh(isNaN(e)?t:e)}const Jh=function e(t){var r=Yh(t);function n(e,t){var n=r((e=Th(e)).r,(t=Th(t)).r),a=r(e.g,t.g),i=r(e.b,t.b),s=Xh(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=a(t),e.b=i(t),e.opacity=s(t),e+""}}return n.gamma=e,n}(1);function Qh(e){return function(t){var r,n,a=t.length,i=new Array(a),s=new Array(a),o=new Array(a);for(r=0;r<a;++r)n=Th(t[r]),i[r]=n.r||0,s[r]=n.g||0,o[r]=n.b||0;return i=e(i),s=e(s),o=e(o),n.opacity=1,function(e){return n.r=i(e),n.g=s(e),n.b=o(e),n+""}}}Qh(function(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),a=e[n],i=e[n+1],s=n>0?e[n-1]:2*a-i,o=n<t-1?e[n+2]:2*i-a;return qh((r-n/t)*t,s,a,i,o)}}),Qh(function(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),a=e[(n+t-1)%t],i=e[n%t],s=e[(n+1)%t],o=e[(n+2)%t];return qh((r-n/t)*t,a,i,s,o)}});function Zh(e,t){var r,n=t?t.length:0,a=e?Math.min(n,e.length):0,i=new Array(a),s=new Array(n);for(r=0;r<a;++r)i[r]=op(e[r],t[r]);for(;r<n;++r)s[r]=t[r];return function(e){for(r=0;r<a;++r)s[r]=i[r](e);return s}}function ep(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function tp(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function rp(e,t){var r,n={},a={};for(r in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)r in e?n[r]=op(e[r],t[r]):a[r]=t[r];return function(e){for(r in n)a[r]=n[r](e);return a}}var np=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ap=new RegExp(np.source,"g");function ip(e,t){var r,n,a,i=np.lastIndex=ap.lastIndex=0,s=-1,o=[],l=[];for(e+="",t+="";(r=np.exec(e))&&(n=ap.exec(t));)(a=n.index)>i&&(a=t.slice(i,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(n=n[0])?o[s]?o[s]+=n:o[++s]=n:(o[++s]=null,l.push({i:s,x:tp(r,n)})),i=ap.lastIndex;return i<t.length&&(a=t.slice(i),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)o[(r=l[n]).i]=r.x(e);return o.join("")})}function sp(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(r=0;r<n;++r)a[r]=e[r]*(1-i)+t[r]*i;return a}}function op(e,t){var r,n,a=typeof t;return null==t||"boolean"===a?Gh(t):("number"===a?tp:"string"===a?(r=Ph(t))?(t=r,Jh):ip:t instanceof Ph?Jh:t instanceof Date?ep:(n=t,!ArrayBuffer.isView(n)||n instanceof DataView?Array.isArray(t)?Zh:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?rp:tp:sp))(e,t)}function lp(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function cp(e){return+e}var dp=[0,1];function up(e){return e}function hp(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r});var r}function pp(e,t,r){var n=e[0],a=e[1],i=t[0],s=t[1];return a<n?(n=hp(a,n),i=r(s,i)):(n=hp(n,a),i=r(i,s)),function(e){return i(n(e))}}function mp(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)a[s]=hp(e[s],e[s+1]),i[s]=r(t[s],t[s+1]);return function(t){var r=uh(e,t,1,n)-1;return i[r](a[r](t))}}function fp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function gp(){var e,t,r,n,a,i,s=dp,o=dp,l=op,c=up;function d(){var e=Math.min(s.length,o.length);return c!==up&&(c=function(e,t){var r;return e>t&&(r=e,e=t,t=r),function(r){return Math.max(e,Math.min(t,r))}}(s[0],s[e-1])),n=e>2?mp:pp,a=i=null,u}function u(t){return null==t||isNaN(t=+t)?r:(a||(a=n(s.map(e),o,l)))(e(c(t)))}return u.invert=function(r){return c(t((i||(i=n(o,s.map(e),tp)))(r)))},u.domain=function(e){return arguments.length?(s=Array.from(e,cp),d()):s.slice()},u.range=function(e){return arguments.length?(o=Array.from(e),d()):o.slice()},u.rangeRound=function(e){return o=Array.from(e),l=lp,d()},u.clamp=function(e){return arguments.length?(c=!!e||up,d()):c!==up},u.interpolate=function(e){return arguments.length?(l=e,d()):l},u.unknown=function(e){return arguments.length?(r=e,u):r},function(r,n){return e=r,t=n,d()}}function xp(){return gp()(up,up)}var bp,yp=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vp(e){if(!(t=yp.exec(e)))throw new Error("invalid format: "+e);var t;return new _p({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function _p(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function kp(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function jp(e){return(e=kp(Math.abs(e)))?e[1]:NaN}function wp(e,t){var r=kp(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}vp.prototype=_p.prototype,_p.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Np={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>wp(100*e,t),r:wp,s:function(e,t){var r=kp(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(bp=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+kp(e,Math.max(0,t+i-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Sp(e){return e}var Op,Cp,Ep,Pp=Array.prototype.map,Ap=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Mp(e){var t,r,n=void 0===e.grouping||void 0===e.thousands?Sp:(t=Pp.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var a=e.length,i=[],s=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),i.push(e.substring(a-=o,a+o)),!((l+=o+1)>n));)o=t[s=(s+1)%t.length];return i.reverse().join(r)}),a=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?Sp:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(Pp.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=vp(e)).fill,r=e.align,u=e.sign,h=e.symbol,p=e.zero,m=e.width,f=e.comma,g=e.precision,x=e.trim,b=e.type;"n"===b?(f=!0,b="g"):Np[b]||(void 0===g&&(g=12),x=!0,b="g"),(p||"0"===t&&"="===r)&&(p=!0,t="0",r="=");var y="$"===h?a:"#"===h&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",v="$"===h?i:/[%p]/.test(b)?l:"",_=Np[b],k=/[defgprs%]/.test(b);function j(e){var a,i,l,h=y,j=v;if("c"===b)j=_(e)+j,e="";else{var w=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:_(Math.abs(e),g),x&&(e=function(e){e:for(var t,r=e.length,n=1,a=-1;n<r;++n)switch(e[n]){case".":a=t=n;break;case"0":0===a&&(a=n),t=n;break;default:if(!+e[n])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),w&&0===+e&&"+"!==u&&(w=!1),h=(w?"("===u?u:c:"-"===u||"("===u?"":u)+h,j=("s"===b?Ap[8+bp/3]:"")+j+(w&&"("===u?")":""),k)for(a=-1,i=e.length;++a<i;)if(48>(l=e.charCodeAt(a))||l>57){j=(46===l?s+e.slice(a+1):e.slice(a))+j,e=e.slice(0,a);break}}f&&!p&&(e=n(e,1/0));var N=h.length+e.length+j.length,S=N<m?new Array(m-N+1).join(t):"";switch(f&&p&&(e=n(S+e,S.length?m-j.length:1/0),S=""),r){case"<":e=h+e+j+S;break;case"=":e=h+S+e+j;break;case"^":e=S.slice(0,N=S.length>>1)+h+e+j+S.slice(N);break;default:e=S+h+e+j}return o(e)}return g=void 0===g?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),j.toString=function(){return e+""},j}return{format:u,formatPrefix:function(e,t){var r=u(((e=vp(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(jp(t)/3))),a=Math.pow(10,-n),i=Ap[8+n/3];return function(e){return r(a*e)+i}}}}function Tp(e,t,r,n){var a,i=nh(e,t,r);switch((n=vp(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(jp(t)/3)))-jp(Math.abs(e)))}(i,s))||(n.precision=a),Ep(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,jp(t)-jp(e))+1}(i,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=a-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(a=function(e){return Math.max(0,-jp(Math.abs(e)))}(i))||(n.precision=a-2*("%"===n.type))}return Cp(n)}function Dp(e){var t=e.domain;return e.ticks=function(e){var r=t();return th(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return Tp(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,a,i=t(),s=0,o=i.length-1,l=i[s],c=i[o],d=10;for(c<l&&(a=l,l=c,c=a,a=s,s=o,o=a);d-- >0;){if((a=rh(l,c,r))===n)return i[s]=l,i[o]=c,t(i);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}n=a}return e},e}function Rp(){var e=xp();return e.copy=function(){return fp(e,Rp())},ru.apply(e,arguments),Dp(e)}function Ip(e){var t;function r(e){return null==e||isNaN(e=+e)?t:e}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,cp),r):e.slice()},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return Ip(e).unknown(t)},e=arguments.length?Array.from(e,cp):[0,1],Dp(r)}function Lp(e,t){var r,n=0,a=(e=e.slice()).length-1,i=e[n],s=e[a];return s<i&&(r=n,n=a,a=r,r=i,i=s,s=r),e[n]=t.floor(i),e[a]=t.ceil(s),e}function Fp(e){return Math.log(e)}function zp(e){return Math.exp(e)}function Up(e){return-Math.log(-e)}function Bp(e){return-Math.exp(-e)}function Vp(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Hp(e){return(t,r)=>-e(-t,r)}function Wp(e){const t=e(Fp,zp),r=t.domain;let n,a,i=10;function s(){return n=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(i),a=function(e){return 10===e?Vp:e===Math.E?Math.exp:t=>Math.pow(e,t)}(i),r()[0]<0?(n=Hp(n),a=Hp(a),e(Up,Bp)):e(Fp,zp),t}return t.base=function(e){return arguments.length?(i=+e,s()):i},t.domain=function(e){return arguments.length?(r(e),s()):r()},t.ticks=e=>{const t=r();let s=t[0],o=t[t.length-1];const l=o<s;l&&([s,o]=[o,s]);let c,d,u=n(s),h=n(o);const p=null==e?10:+e;let m=[];if(!(i%1)&&h-u<p){if(u=Math.floor(u),h=Math.ceil(h),s>0){for(;u<=h;++u)for(c=1;c<i;++c)if(d=u<0?c/a(-u):c*a(u),!(d<s)){if(d>o)break;m.push(d)}}else for(;u<=h;++u)for(c=i-1;c>=1;--c)if(d=u>0?c/a(-u):c*a(u),!(d<s)){if(d>o)break;m.push(d)}2*m.length<p&&(m=th(s,o,p))}else m=th(u,h,Math.min(h-u,p)).map(a);return l?m.reverse():m},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===i?"s":","),"function"!==typeof r&&(i%1||null!=(r=vp(r)).precision||(r.trim=!0),r=Cp(r)),e===1/0)return r;const s=Math.max(1,i*e/t.ticks().length);return e=>{let t=e/a(Math.round(n(e)));return t*i<i-.5&&(t*=i),t<=s?r(e):""}},t.nice=()=>r(Lp(r(),{floor:e=>a(Math.floor(n(e))),ceil:e=>a(Math.ceil(n(e)))})),t}function $p(){const e=Wp(gp()).domain([1,10]);return e.copy=()=>fp(e,$p()).base(e.base()),ru.apply(e,arguments),e}function qp(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Gp(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Kp(e){var t=1,r=e(qp(t),Gp(t));return r.constant=function(r){return arguments.length?e(qp(t=+r),Gp(t)):t},Dp(r)}function Yp(){var e=Kp(gp());return e.copy=function(){return fp(e,Yp()).constant(e.constant())},ru.apply(e,arguments)}function Xp(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Jp(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Qp(e){return e<0?-e*e:e*e}function Zp(e){var t=e(up,up),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(up,up):.5===r?e(Jp,Qp):e(Xp(r),Xp(1/r)):r},Dp(t)}function em(){var e=Zp(gp());return e.copy=function(){return fp(e,em()).exponent(e.exponent())},ru.apply(e,arguments),e}function tm(){return em.apply(null,arguments).exponent(.5)}function rm(e){return Math.sign(e)*e*e}function nm(){var e,t=xp(),r=[0,1],n=!1;function a(r){var a=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(r));return isNaN(a)?e:n?Math.round(a):a}return a.invert=function(e){return t.invert(rm(e))},a.domain=function(e){return arguments.length?(t.domain(e),a):t.domain()},a.range=function(e){return arguments.length?(t.range((r=Array.from(e,cp)).map(rm)),a):r.slice()},a.rangeRound=function(e){return a.range(e).round(!0)},a.round=function(e){return arguments.length?(n=!!e,a):n},a.clamp=function(e){return arguments.length?(t.clamp(e),a):t.clamp()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return nm(t.domain(),r).round(n).clamp(t.clamp()).unknown(e)},ru.apply(a,arguments),Dp(a)}function am(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(r<a||void 0===r&&a>=a)&&(r=a)}return r}function im(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(r>a||void 0===r&&a>=a)&&(r=a)}return r}function sm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ah;if(e===ah)return om;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}function om(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function lm(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,a=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=void 0===a?om:sm(a);n>r;){if(n-r>600){const i=n-r+1,s=t-r+1,o=Math.log(i),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(i-l)/i)*(s-i/2<0?-1:1);lm(e,t,Math.max(r,Math.floor(t-s*l/i+c)),Math.min(n,Math.floor(t+(i-s)*l/i+c)),a)}const i=e[t];let s=r,o=n;for(cm(e,r,t),a(e[n],i)>0&&cm(e,r,n);s<o;){for(cm(e,s,o),++s,--o;a(e[s],i)<0;)++s;for(;a(e[o],i)>0;)--o}0===a(e[r],i)?cm(e,r,o):(++o,cm(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function cm(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function dm(e,t,r){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let r of e)null!=r&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(n=+n)>=n&&(yield n)}}(e,r)),(n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return im(e);if(t>=1)return am(e);var n,a=(n-1)*t,i=Math.floor(a),s=am(lm(e,i).subarray(0,i+1));return s+(im(e.subarray(i+1))-s)*(a-i)}}function um(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lh;if((n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),s=+r(e[i],i,e);return s+(+r(e[i+1],i+1,e)-s)*(a-i)}}function hm(){var e,t=[],r=[],n=[];function a(){var e=0,a=Math.max(1,r.length);for(n=new Array(a-1);++e<a;)n[e-1]=um(t,e/a);return i}function i(t){return null==t||isNaN(t=+t)?e:r[uh(n,t)]}return i.invertExtent=function(e){var a=r.indexOf(e);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},i.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(ah),a()},i.range=function(e){return arguments.length?(r=Array.from(e),a()):r.slice()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.quantiles=function(){return n.slice()},i.copy=function(){return hm().domain(t).range(r).unknown(e)},ru.apply(i,arguments)}function pm(){var e,t=0,r=1,n=1,a=[.5],i=[0,1];function s(t){return null!=t&&t<=t?i[uh(a,t,0,n)]:e}function o(){var e=-1;for(a=new Array(n);++e<n;)a[e]=((e+1)*r-(e-n)*t)/(n+1);return s}return s.domain=function(e){return arguments.length?([t,r]=e,t=+t,r=+r,o()):[t,r]},s.range=function(e){return arguments.length?(n=(i=Array.from(e)).length-1,o()):i.slice()},s.invertExtent=function(e){var s=i.indexOf(e);return s<0?[NaN,NaN]:s<1?[t,a[0]]:s>=n?[a[n-1],r]:[a[s-1],a[s]]},s.unknown=function(t){return arguments.length?(e=t,s):s},s.thresholds=function(){return a.slice()},s.copy=function(){return pm().domain([t,r]).range(i).unknown(e)},ru.apply(Dp(s),arguments)}function mm(){var e,t=[.5],r=[0,1],n=1;function a(a){return null!=a&&a<=a?r[uh(t,a,0,n)]:e}return a.domain=function(e){return arguments.length?(t=Array.from(e),n=Math.min(t.length,r.length-1),a):t.slice()},a.range=function(e){return arguments.length?(r=Array.from(e),n=Math.min(t.length,r.length-1),a):r.slice()},a.invertExtent=function(e){var n=r.indexOf(e);return[t[n-1],t[n]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return mm().domain(t).range(r).unknown(e)},ru.apply(a,arguments)}Op=Mp({thousands:",",grouping:[3],currency:["$",""]}),Cp=Op.format,Ep=Op.formatPrefix;const fm=1e3,gm=6e4,xm=36e5,bm=864e5,ym=6048e5,vm=2592e6,_m=31536e6,km=new Date,jm=new Date;function wm(e,t,r,n){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=t=>(e(t=new Date(+t)),t),a.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),a.round=e=>{const t=a(e),r=a.ceil(e);return e-t<r-e?t:r},a.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),a.range=(r,n,i)=>{const s=[];if(r=a.ceil(r),i=null==i?1:Math.floor(i),!(r<n)||!(i>0))return s;let o;do{s.push(o=new Date(+r)),t(r,i),e(r)}while(o<r&&r<n);return s},a.filter=r=>wm(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}),r&&(a.count=(t,n)=>(km.setTime(+t),jm.setTime(+n),e(km),e(jm),Math.floor(r(km,jm))),a.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(n?t=>n(t)%e===0:t=>a.count(0,t)%e===0):a:null)),a}const Nm=wm(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Nm.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?wm(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Nm:null);Nm.range;const Sm=wm(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*fm)},(e,t)=>(t-e)/fm,e=>e.getUTCSeconds()),Om=(Sm.range,wm(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fm)},(e,t)=>{e.setTime(+e+t*gm)},(e,t)=>(t-e)/gm,e=>e.getMinutes())),Cm=(Om.range,wm(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*gm)},(e,t)=>(t-e)/gm,e=>e.getUTCMinutes())),Em=(Cm.range,wm(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fm-e.getMinutes()*gm)},(e,t)=>{e.setTime(+e+t*xm)},(e,t)=>(t-e)/xm,e=>e.getHours())),Pm=(Em.range,wm(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*xm)},(e,t)=>(t-e)/xm,e=>e.getUTCHours())),Am=(Pm.range,wm(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*gm)/bm,e=>e.getDate()-1)),Mm=(Am.range,wm(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bm,e=>e.getUTCDate()-1)),Tm=(Mm.range,wm(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bm,e=>Math.floor(e/bm)));Tm.range;function Dm(e){return wm(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*gm)/ym)}const Rm=Dm(0),Im=Dm(1),Lm=Dm(2),Fm=Dm(3),zm=Dm(4),Um=Dm(5),Bm=Dm(6);Rm.range,Im.range,Lm.range,Fm.range,zm.range,Um.range,Bm.range;function Vm(e){return wm(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/ym)}const Hm=Vm(0),Wm=Vm(1),$m=Vm(2),qm=Vm(3),Gm=Vm(4),Km=Vm(5),Ym=Vm(6),Xm=(Hm.range,Wm.range,$m.range,qm.range,Gm.range,Km.range,Ym.range,wm(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),Jm=(Xm.range,wm(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),Qm=(Jm.range,wm(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));Qm.every=e=>isFinite(e=Math.floor(e))&&e>0?wm(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null;Qm.range;const Zm=wm(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Zm.every=e=>isFinite(e=Math.floor(e))&&e>0?wm(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null;Zm.range;function ef(e,t,r,n,a,i){const s=[[Sm,1,fm],[Sm,5,5e3],[Sm,15,15e3],[Sm,30,3e4],[i,1,gm],[i,5,3e5],[i,15,9e5],[i,30,18e5],[a,1,xm],[a,3,108e5],[a,6,216e5],[a,12,432e5],[n,1,bm],[n,2,1728e5],[r,1,ym],[t,1,vm],[t,3,7776e6],[e,1,_m]];function o(t,r,n){const a=Math.abs(r-t)/n,i=sh(e=>{let[,,t]=e;return t}).right(s,a);if(i===s.length)return e.every(nh(t/_m,r/_m,n));if(0===i)return Nm.every(Math.max(nh(t,r,n),1));const[o,l]=s[a/s[i-1][2]<s[i][2]/a?i-1:i];return o.every(l)}return[function(e,t,r){const n=t<e;n&&([e,t]=[t,e]);const a=r&&"function"===typeof r.range?r:o(e,t,r),i=a?a.range(e,+t+1):[];return n?i.reverse():i},o]}const[tf,rf]=ef(Zm,Jm,Hm,Tm,Pm,Cm),[nf,af]=ef(Qm,Xm,Rm,Am,Em,Om);function sf(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function of(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function lf(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var cf,df,uf,hf={"-":"",_:" ",0:"0"},pf=/^\s*\d+/,mf=/^%/,ff=/[\\^$*+?|[\]().{}]/g;function gf(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function xf(e){return e.replace(ff,"\\$&")}function bf(e){return new RegExp("^(?:"+e.map(xf).join("|")+")","i")}function yf(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function vf(e,t,r){var n=pf.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function _f(e,t,r){var n=pf.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function kf(e,t,r){var n=pf.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function jf(e,t,r){var n=pf.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function wf(e,t,r){var n=pf.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function Nf(e,t,r){var n=pf.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function Sf(e,t,r){var n=pf.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Of(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Cf(e,t,r){var n=pf.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function Ef(e,t,r){var n=pf.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function Pf(e,t,r){var n=pf.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Af(e,t,r){var n=pf.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function Mf(e,t,r){var n=pf.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Tf(e,t,r){var n=pf.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Df(e,t,r){var n=pf.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Rf(e,t,r){var n=pf.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function If(e,t,r){var n=pf.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Lf(e,t,r){var n=mf.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Ff(e,t,r){var n=pf.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function zf(e,t,r){var n=pf.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function Uf(e,t){return gf(e.getDate(),t,2)}function Bf(e,t){return gf(e.getHours(),t,2)}function Vf(e,t){return gf(e.getHours()%12||12,t,2)}function Hf(e,t){return gf(1+Am.count(Qm(e),e),t,3)}function Wf(e,t){return gf(e.getMilliseconds(),t,3)}function $f(e,t){return Wf(e,t)+"000"}function qf(e,t){return gf(e.getMonth()+1,t,2)}function Gf(e,t){return gf(e.getMinutes(),t,2)}function Kf(e,t){return gf(e.getSeconds(),t,2)}function Yf(e){var t=e.getDay();return 0===t?7:t}function Xf(e,t){return gf(Rm.count(Qm(e)-1,e),t,2)}function Jf(e){var t=e.getDay();return t>=4||0===t?zm(e):zm.ceil(e)}function Qf(e,t){return e=Jf(e),gf(zm.count(Qm(e),e)+(4===Qm(e).getDay()),t,2)}function Zf(e){return e.getDay()}function eg(e,t){return gf(Im.count(Qm(e)-1,e),t,2)}function tg(e,t){return gf(e.getFullYear()%100,t,2)}function rg(e,t){return gf((e=Jf(e)).getFullYear()%100,t,2)}function ng(e,t){return gf(e.getFullYear()%1e4,t,4)}function ag(e,t){var r=e.getDay();return gf((e=r>=4||0===r?zm(e):zm.ceil(e)).getFullYear()%1e4,t,4)}function ig(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+gf(t/60|0,"0",2)+gf(t%60,"0",2)}function sg(e,t){return gf(e.getUTCDate(),t,2)}function og(e,t){return gf(e.getUTCHours(),t,2)}function lg(e,t){return gf(e.getUTCHours()%12||12,t,2)}function cg(e,t){return gf(1+Mm.count(Zm(e),e),t,3)}function dg(e,t){return gf(e.getUTCMilliseconds(),t,3)}function ug(e,t){return dg(e,t)+"000"}function hg(e,t){return gf(e.getUTCMonth()+1,t,2)}function pg(e,t){return gf(e.getUTCMinutes(),t,2)}function mg(e,t){return gf(e.getUTCSeconds(),t,2)}function fg(e){var t=e.getUTCDay();return 0===t?7:t}function gg(e,t){return gf(Hm.count(Zm(e)-1,e),t,2)}function xg(e){var t=e.getUTCDay();return t>=4||0===t?Gm(e):Gm.ceil(e)}function bg(e,t){return e=xg(e),gf(Gm.count(Zm(e),e)+(4===Zm(e).getUTCDay()),t,2)}function yg(e){return e.getUTCDay()}function vg(e,t){return gf(Wm.count(Zm(e)-1,e),t,2)}function _g(e,t){return gf(e.getUTCFullYear()%100,t,2)}function kg(e,t){return gf((e=xg(e)).getUTCFullYear()%100,t,2)}function jg(e,t){return gf(e.getUTCFullYear()%1e4,t,4)}function wg(e,t){var r=e.getUTCDay();return gf((e=r>=4||0===r?Gm(e):Gm.ceil(e)).getUTCFullYear()%1e4,t,4)}function Ng(){return"+0000"}function Sg(){return"%"}function Og(e){return+e}function Cg(e){return Math.floor(+e/1e3)}function Eg(e){return new Date(e)}function Pg(e){return e instanceof Date?+e:+new Date(+e)}function Ag(e,t,r,n,a,i,s,o,l,c){var d=xp(),u=d.invert,h=d.domain,p=c(".%L"),m=c(":%S"),f=c("%I:%M"),g=c("%I %p"),x=c("%a %d"),b=c("%b %d"),y=c("%B"),v=c("%Y");function _(e){return(l(e)<e?p:o(e)<e?m:s(e)<e?f:i(e)<e?g:n(e)<e?a(e)<e?x:b:r(e)<e?y:v)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?h(Array.from(e,Pg)):h().map(Eg)},d.ticks=function(t){var r=h();return e(r[0],r[r.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?_:c(t)},d.nice=function(e){var r=h();return e&&"function"===typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?h(Lp(r,e)):d},d.copy=function(){return fp(d,Ag(e,t,r,n,a,i,s,o,l,c))},d}function Mg(){return ru.apply(Ag(nf,af,Qm,Xm,Rm,Am,Em,Om,Sm,df).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Tg(){return ru.apply(Ag(tf,rf,Zm,Jm,Hm,Mm,Pm,Cm,Sm,uf).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Dg(){var e,t,r,n,a,i=0,s=1,o=up,l=!1;function c(t){return null==t||isNaN(t=+t)?a:o(0===r?.5:(t=(n(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var r,n;return arguments.length?([r,n]=t,o=e(r,n),c):[o(0),o(1)]}}return c.domain=function(a){return arguments.length?([i,s]=a,e=n(i=+i),t=n(s=+s),r=e===t?0:1/(t-e),c):[i,s]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=d(op),c.rangeRound=d(lp),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return n=a,e=a(i),t=a(s),r=e===t?0:1/(t-e),c}}function Rg(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Ig(){var e=Dp(Dg()(up));return e.copy=function(){return Rg(e,Ig())},nu.apply(e,arguments)}function Lg(){var e=Wp(Dg()).domain([1,10]);return e.copy=function(){return Rg(e,Lg()).base(e.base())},nu.apply(e,arguments)}function Fg(){var e=Kp(Dg());return e.copy=function(){return Rg(e,Fg()).constant(e.constant())},nu.apply(e,arguments)}function zg(){var e=Zp(Dg());return e.copy=function(){return Rg(e,zg()).exponent(e.exponent())},nu.apply(e,arguments)}function Ug(){return zg.apply(null,arguments).exponent(.5)}function Bg(){var e=[],t=up;function r(r){if(null!=r&&!isNaN(r=+r))return t((uh(e,r,1)-1)/(e.length-1))}return r.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let r of t)null==r||isNaN(r=+r)||e.push(r);return e.sort(ah),r},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.range=function(){return e.map((r,n)=>t(n/(e.length-1)))},r.quantiles=function(t){return Array.from({length:t+1},(r,n)=>dm(e,n/t))},r.copy=function(){return Bg(t).domain(e)},nu.apply(r,arguments)}function Vg(){var e,t,r,n,a,i,s,o=0,l=.5,c=1,d=1,u=up,h=!1;function p(e){return isNaN(e=+e)?s:(e=.5+((e=+i(e))-t)*(d*e<d*t?n:a),u(h?Math.max(0,Math.min(1,e)):e))}function m(e){return function(t){var r,n,a;return arguments.length?([r,n,a]=t,u=function(e,t){void 0===t&&(t=e,e=op);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return i[t](e-t)}}(e,[r,n,a]),p):[u(0),u(.5),u(1)]}}return p.domain=function(s){return arguments.length?([o,l,c]=s,e=i(o=+o),t=i(l=+l),r=i(c=+c),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),d=t<e?-1:1,p):[o,l,c]},p.clamp=function(e){return arguments.length?(h=!!e,p):h},p.interpolator=function(e){return arguments.length?(u=e,p):u},p.range=m(op),p.rangeRound=m(lp),p.unknown=function(e){return arguments.length?(s=e,p):s},function(s){return i=s,e=s(o),t=s(l),r=s(c),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),d=t<e?-1:1,p}}function Hg(){var e=Dp(Vg()(up));return e.copy=function(){return Rg(e,Hg())},nu.apply(e,arguments)}function Wg(){var e=Wp(Vg()).domain([.1,1,10]);return e.copy=function(){return Rg(e,Wg()).base(e.base())},nu.apply(e,arguments)}function $g(){var e=Kp(Vg());return e.copy=function(){return Rg(e,$g()).constant(e.constant())},nu.apply(e,arguments)}function qg(){var e=Zp(Vg());return e.copy=function(){return Rg(e,qg()).exponent(e.exponent())},nu.apply(e,arguments)}function Gg(){return qg.apply(null,arguments).exponent(.5)}function Kg(e,t){if((a=e.length)>1)for(var r,n,a,i=1,s=e[t[0]],o=s.length;i<a;++i)for(n=s,s=e[t[i]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}!function(e){cf=function(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,c=bf(a),d=yf(a),u=bf(i),h=yf(i),p=bf(s),m=yf(s),f=bf(o),g=yf(o),x=bf(l),b=yf(l),y={a:function(e){return s[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:Uf,e:Uf,f:$f,g:rg,G:ag,H:Bf,I:Vf,j:Hf,L:Wf,m:qf,M:Gf,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Og,s:Cg,S:Kf,u:Yf,U:Xf,V:Qf,w:Zf,W:eg,x:null,X:null,y:tg,Y:ng,Z:ig,"%":Sg},v={a:function(e){return s[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:sg,e:sg,f:ug,g:kg,G:wg,H:og,I:lg,j:cg,L:dg,m:hg,M:pg,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Og,s:Cg,S:mg,u:fg,U:gg,V:bg,w:yg,W:vg,x:null,X:null,y:_g,Y:jg,Z:Ng,"%":Sg},_={a:function(e,t,r){var n=p.exec(t.slice(r));return n?(e.w=m.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=u.exec(t.slice(r));return n?(e.w=h.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=x.exec(t.slice(r));return n?(e.m=b.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=f.exec(t.slice(r));return n?(e.m=g.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return w(e,t,r,n)},d:Pf,e:Pf,f:If,g:Sf,G:Nf,H:Mf,I:Mf,j:Af,L:Rf,m:Ef,M:Tf,p:function(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=d.get(n[0].toLowerCase()),r+n[0].length):-1},q:Cf,Q:Ff,s:zf,S:Df,u:_f,U:kf,V:jf,w:vf,W:wf,x:function(e,t,n){return w(e,r,t,n)},X:function(e,t,r){return w(e,n,t,r)},y:Sf,Y:Nf,Z:Of,"%":Lf};function k(e,t){return function(r){var n,a,i,s=[],o=-1,l=0,c=e.length;for(r instanceof Date||(r=new Date(+r));++o<c;)37===e.charCodeAt(o)&&(s.push(e.slice(l,o)),null!=(a=hf[n=e.charAt(++o)])?n=e.charAt(++o):a="e"===n?" ":"0",(i=t[n])&&(n=i(r,a)),s.push(n),l=o+1);return s.push(e.slice(l,o)),s.join("")}}function j(e,t){return function(r){var n,a,i=lf(1900,void 0,1);if(w(i,e,r+="",0)!=r.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(a=(n=of(lf(i.y,0,1))).getUTCDay(),n=a>4||0===a?Wm.ceil(n):Wm(n),n=Mm.offset(n,7*(i.V-1)),i.y=n.getUTCFullYear(),i.m=n.getUTCMonth(),i.d=n.getUTCDate()+(i.w+6)%7):(a=(n=sf(lf(i.y,0,1))).getDay(),n=a>4||0===a?Im.ceil(n):Im(n),n=Am.offset(n,7*(i.V-1)),i.y=n.getFullYear(),i.m=n.getMonth(),i.d=n.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),a="Z"in i?of(lf(i.y,0,1)).getUTCDay():sf(lf(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,of(i)):sf(i)}}function w(e,t,r,n){for(var a,i,s=0,o=t.length,l=r.length;s<o;){if(n>=l)return-1;if(37===(a=t.charCodeAt(s++))){if(a=t.charAt(s++),!(i=_[a in hf?t.charAt(s++):a])||(n=i(e,r,n))<0)return-1}else if(a!=r.charCodeAt(n++))return-1}return n}return y.x=k(r,y),y.X=k(n,y),y.c=k(t,y),v.x=k(r,v),v.X=k(n,v),v.c=k(t,v),{format:function(e){var t=k(e+="",y);return t.toString=function(){return e},t},parse:function(e){var t=j(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=k(e+="",v);return t.toString=function(){return e},t},utcParse:function(e){var t=j(e+="",!0);return t.toString=function(){return e},t}}}(e),df=cf.format,cf.parse,uf=cf.utcFormat,cf.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Array.prototype.slice;function Yg(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Xg(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Jg(e,t){return e[t]}function Qg(e){const t=[];return t.key=e,t}var Zg=r(539),ex=r.n(Zg),tx=r(6745),rx=r.n(tx),nx=r(3538),ax=r.n(nx),ix=r(9853),sx=r.n(ix),ox=r(8210),lx=r.n(ox);function cx(e){return function(e){if(Array.isArray(e))return dx(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return dx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dx(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ux=function(e){return e},hx={"@@functional/placeholder":!0},px=function(e){return e===hx},mx=function(e){return function t(){return 0===arguments.length||1===arguments.length&&px(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},fx=function e(t,r){return 1===t?r:mx(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=a.filter(function(e){return e!==hx}).length;return s>=t?r.apply(void 0,a):e(t-s,mx(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=a.map(function(e){return px(e)?t.shift():e});return r.apply(void 0,cx(i).concat(t))}))})},gx=function(e){return fx(e.length,e)},xx=function(e,t){for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},bx=gx(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(e){return t[e]}).map(e)}),yx=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return ux;var n=t.reverse(),a=n[0],i=n.slice(1);return function(){return i.reduce(function(e,t){return t(e)},a.apply(void 0,arguments))}},vx=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},_x=function(e){var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t&&a.every(function(e,r){return e===t[r]})?r:(t=a,r=e.apply(void 0,a))}};var kx=gx(function(e,t,r){var n=+e;return n+r*(+t-n)}),jx=gx(function(e,t,r){var n=t-+e;return(r-e)/(n=n||1/0)}),wx=gx(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const Nx={rangeStep:function(e,t,r){for(var n=new(lx())(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i},getDigitCount:function(e){return 0===e?1:Math.floor(new(lx())(e).abs().log(10).toNumber())+1},interpolateNumber:kx,uninterpolateNumber:jx,uninterpolateTruncation:wx};function Sx(e){return function(e){if(Array.isArray(e))return Ex(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Cx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ox(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(l){a=!0,i=l}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||Cx(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cx(e,t){if(e){if("string"===typeof e)return Ex(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ex(e,t):void 0}}function Ex(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Px(e){var t=Ox(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function Ax(e,t,r){if(e.lte(0))return new(lx())(0);var n=Nx.getDigitCount(e.toNumber()),a=new(lx())(10).pow(n),i=e.div(a),s=1!==n?.05:.1,o=new(lx())(Math.ceil(i.div(s).toNumber())).add(r).mul(s).mul(a);return t?o:new(lx())(Math.ceil(o))}function Mx(e,t,r){var n=1,a=new(lx())(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new(lx())(10).pow(Nx.getDigitCount(e)-1),a=new(lx())(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new(lx())(Math.floor(e)))}else 0===e?a=new(lx())(Math.floor((t-1)/2)):r||(a=new(lx())(Math.floor(e)));var s=Math.floor((t-1)/2);return yx(bx(function(e){return a.add(new(lx())(e-s).mul(n)).toNumber()}),xx)(0,t)}function Tx(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new(lx())(0),tickMin:new(lx())(0),tickMax:new(lx())(0)};var i,s=Ax(new(lx())(t).sub(e).div(r-1),n,a);i=e<=0&&t>=0?new(lx())(0):(i=new(lx())(e).add(t).div(2)).sub(new(lx())(i).mod(s));var o=Math.ceil(i.sub(e).div(s).toNumber()),l=Math.ceil(new(lx())(t).sub(i).div(s).toNumber()),c=o+l+1;return c>r?Tx(e,t,r,n,a+1):(c<r&&(l=t>0?l+(r-c):l,o=t>0?o:o+(r-c)),{step:s,tickMin:i.sub(new(lx())(o).mul(s)),tickMax:i.add(new(lx())(l).mul(s))})}var Dx=_x(function(e){var t=Ox(e,2),r=t[0],n=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Math.max(a,2),o=Ox(Px([r,n]),2),l=o[0],c=o[1];if(l===-1/0||c===1/0){var d=c===1/0?[l].concat(Sx(xx(0,a-1).map(function(){return 1/0}))):[].concat(Sx(xx(0,a-1).map(function(){return-1/0})),[c]);return r>n?vx(d):d}if(l===c)return Mx(l,a,i);var u=Tx(l,c,s,i),h=u.step,p=u.tickMin,m=u.tickMax,f=Nx.rangeStep(p,m.add(new(lx())(.1).mul(h)),h);return r>n?vx(f):f}),Rx=(_x(function(e){var t=Ox(e,2),r=t[0],n=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Math.max(a,2),o=Ox(Px([r,n]),2),l=o[0],c=o[1];if(l===-1/0||c===1/0)return[r,n];if(l===c)return Mx(l,a,i);var d=Ax(new(lx())(c).sub(l).div(s-1),i,0),u=yx(bx(function(e){return new(lx())(l).add(new(lx())(e).mul(d)).toNumber()}),xx)(0,s).filter(function(e){return e>=l&&e<=c});return r>n?vx(u):u}),_x(function(e,t){var r=Ox(e,2),n=r[0],a=r[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Ox(Px([n,a]),2),o=s[0],l=s[1];if(o===-1/0||l===1/0)return[n,a];if(o===l)return[o];var c=Math.max(t,2),d=Ax(new(lx())(l).sub(o).div(c-1),i,0),u=[].concat(Sx(Nx.rangeStep(new(lx())(o),new(lx())(l).sub(new(lx())(.99).mul(d)),d)),[l]);return n>a?vx(u):u})),Ix=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Lx(e){return Lx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lx(e)}function Fx(){return Fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fx.apply(this,arguments)}function zx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ux(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ux(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ux(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bx(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Vx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Kx(n.key),n)}}function Hx(e,t,r){return t=$x(t),function(e,t){if(t&&("object"===Lx(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Wx()?Reflect.construct(t,r||[],$x(e).constructor):t.apply(e,r))}function Wx(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Wx=function(){return!!e})()}function $x(e){return $x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$x(e)}function qx(e,t){return qx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qx(e,t)}function Gx(e,t,r){return(t=Kx(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kx(e){var t=function(e,t){if("object"!=Lx(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Lx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lx(t)?t:t+""}var Yx=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Hx(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qx(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e=this.props,t=e.offset,r=e.layout,n=e.width,i=e.dataKey,s=e.data,o=e.dataPointFormatter,l=e.xAxis,c=e.yAxis,d=Bx(e,Ix),u=Ns(d,!1);"x"===this.props.direction&&"number"!==l.type&&Bs(!1);var h=s.map(function(e){var s=o(e,i),d=s.x,h=s.y,p=s.value,m=s.errorVal;if(!m)return null;var f,g,x=[];if(Array.isArray(m)){var b=zx(m,2);f=b[0],g=b[1]}else f=g=m;if("vertical"===r){var y=l.scale,v=h+t,_=v+n,k=v-n,j=y(p-f),w=y(p+g);x.push({x1:w,y1:_,x2:w,y2:k}),x.push({x1:j,y1:v,x2:w,y2:v}),x.push({x1:j,y1:_,x2:j,y2:k})}else if("horizontal"===r){var N=c.scale,S=d+t,O=S-n,C=S+n,E=N(p-f),P=N(p+g);x.push({x1:O,y1:P,x2:C,y2:P}),x.push({x1:S,y1:E,x2:S,y2:P}),x.push({x1:O,y1:E,x2:C,y2:E})}return a.createElement(Ys,Fx({className:"recharts-errorBar",key:"bar-".concat(x.map(function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))},u),x.map(function(e){return a.createElement("line",Fx({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))}))});return a.createElement(Ys,{className:"recharts-errorBars"},h)}}],n&&Vx(r.prototype,n),i&&Vx(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(a.Component);function Xx(e){return Xx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xx(e)}function Jx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Qx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jx(Object(r),!0).forEach(function(t){Zx(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jx(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Zx(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Xx(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Xx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xx(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Gx(Yx,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),Gx(Yx,"displayName","ErrorBar");var eb=function(e){var t=e.children,r=e.formattedGraphicalItems,n=e.legendWidth,a=e.legendContent,i=_s(t,pc);if(!i)return null;var s,o=pc.defaultProps,l=void 0!==o?Qx(Qx({},o),i.props):{};return s=i.props&&i.props.payload?i.props&&i.props.payload:"children"===a?(r||[]).reduce(function(e,t){var r=t.item,n=t.props,a=n.sectors||n.data||[];return e.concat(a.map(function(e){return{type:i.props.iconType||r.props.legendType,value:e.name,color:e.fill,payload:e}}))},[]):(r||[]).map(function(e){var t=e.item,r=t.type.defaultProps,n=void 0!==r?Qx(Qx({},r),t.props):{},a=n.dataKey,i=n.name,s=n.legendType;return{inactive:n.hide,dataKey:a,type:l.iconType||s||"square",color:cb(t),value:i||a,payload:n}}),Qx(Qx(Qx({},l),pc.getWithHeight(i,n)),{},{payload:s,item:i})};function tb(e){return tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tb(e)}function rb(e){return function(e){if(Array.isArray(e))return nb(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return nb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nb(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ab(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ib(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ab(Object(r),!0).forEach(function(t){sb(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ab(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function sb(e,t,r){return t=function(e){var t=function(e,t){if("object"!=tb(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tb(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ob(e,t,r){return Ji()(e)||Ji()(t)?r:Bi(t)?Ri()(e,t,r):Zi()(t)?t(e):r}function lb(e,t,r,n){var a=ax()(e,function(e){return ob(e,t)});if("number"===r){var i=a.filter(function(e){return Ui(e)||parseFloat(e)});return i.length?[rx()(i),ex()(i)]:[1/0,-1/0]}return(n?a.filter(function(e){return!Ji()(e)}):a).map(function(e){return Bi(e)||e instanceof Date?e:""})}var cb=function(e){var t,r,n=e.type.displayName,a=null!==(t=e.type)&&void 0!==t&&t.defaultProps?ib(ib({},e.type.defaultProps),e.props):e.props,i=a.stroke,s=a.fill;switch(n){case"Line":r=i;break;case"Area":case"Radar":r=i&&"none"!==i?i:s;break;default:r=s}return r},db=function(e,t,r,n,a){var i=vs(t.props.children,Yx).filter(function(e){return function(e,t,r){return!!Ji()(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===r?"xAxis"===t:"y"!==r||"yAxis"===t)}(n,a,e.props.direction)});if(i&&i.length){var s=i.map(function(e){return e.props.dataKey});return e.reduce(function(e,t){var n=ob(t,r);if(Ji()(n))return e;var a=Array.isArray(n)?[rx()(n),ex()(n)]:[n,n],i=s.reduce(function(e,r){var n=ob(t,r,0),i=a[0]-Math.abs(Array.isArray(n)?n[0]:n),s=a[1]+Math.abs(Array.isArray(n)?n[1]:n);return[Math.min(i,e[0]),Math.max(s,e[1])]},[1/0,-1/0]);return[Math.min(i[0],e[0]),Math.max(i[1],e[1])]},[1/0,-1/0])}return null},ub=function(e,t,r,n,a){var i=t.map(function(t){var i=t.props.dataKey;return"number"===r&&i&&db(e,t,i,n)||lb(e,i,r,a)});if("number"===r)return i.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]);var s={};return i.reduce(function(e,t){for(var r=0,n=t.length;r<n;r++)s[t[r]]||(s[t[r]]=!0,e.push(t[r]));return e},[])},hb=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},pb=function(e,t,r,n){if(n)return e.map(function(e){return e.coordinate});var a,i,s=e.map(function(e){return e.coordinate===t&&(a=!0),e.coordinate===r&&(i=!0),e.coordinate});return a||s.push(t),i||s.push(r),s},mb=function(e,t,r){if(!e)return null;var n=e.scale,a=e.duplicateDomain,i=e.type,s=e.range,o="scaleBand"===e.realScaleType?n.bandwidth()/2:2,l=(t||r)&&"category"===i&&n.bandwidth?n.bandwidth()/o:0;return l="angleAxis"===e.axisType&&(null===s||void 0===s?void 0:s.length)>=2?2*Fi(s[0]-s[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map(function(e){var t=a?a.indexOf(e):e;return{coordinate:n(t)+l,value:e,offset:l}}).filter(function(e){return!Ti()(e.coordinate)}):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(e,t){return{coordinate:n(e)+l,value:e,index:t,offset:l}}):n.ticks&&!r?n.ticks(e.tickCount).map(function(e){return{coordinate:n(e)+l,value:e,offset:l}}):n.domain().map(function(e,t){return{coordinate:n(e)+l,value:a?a[e]:e,index:t,offset:l}})},fb=new WeakMap,gb=function(e,t){if("function"!==typeof t)return e;fb.has(e)||fb.set(e,new WeakMap);var r=fb.get(e);if(r.has(t))return r.get(t);var n=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return r.set(t,n),n},xb=1e-4,bb={sign:function(e){var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0,s=0;s<t;++s){var o=Ti()(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=i,e[s][r][1]=i+o,i=e[s][r][1])}},expand:function(e,t){if((n=e.length)>0){for(var r,n,a,i=0,s=e[0].length;i<s;++i){for(a=r=0;r<n;++r)a+=e[r][i][1]||0;if(a)for(r=0;r<n;++r)e[r][i][1]/=a}Kg(e,t)}},none:Kg,silhouette:function(e,t){if((r=e.length)>0){for(var r,n=0,a=e[t[0]],i=a.length;n<i;++n){for(var s=0,o=0;s<r;++s)o+=e[s][n][1]||0;a[n][1]+=a[n][0]=-o/2}Kg(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,a,i=0,s=1;s<n;++s){for(var o=0,l=0,c=0;o<a;++o){for(var d=e[t[o]],u=d[s][1]||0,h=(u-(d[s-1][1]||0))/2,p=0;p<o;++p){var m=e[t[p]];h+=(m[s][1]||0)-(m[s-1][1]||0)}l+=u,c+=h*u}r[s-1][1]+=r[s-1][0]=i,l&&(i-=c/l)}r[s-1][1]+=r[s-1][0]=i,Kg(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0;i<t;++i){var s=Ti()(e[i][r][1])?e[i][r][0]:e[i][r][1];s>=0?(e[i][r][0]=a,e[i][r][1]=a+s,a=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}}},yb=function(e,t,r){var n=t.map(function(e){return e.props.dataKey}),a=bb[r],i=function(){var e=cl([]),t=Xg,r=Kg,n=Jg;function a(a){var i,s,o=Array.from(e.apply(this,arguments),Qg),l=o.length,c=-1;for(const e of a)for(i=0,++c;i<l;++i)(o[i][c]=[0,+n(e,o[i].key,c,a)]).data=e;for(i=0,s=Yg(t(o));i<l;++i)o[s[i]].index=i;return r(o,s),o}return a.keys=function(t){return arguments.length?(e="function"===typeof t?t:cl(Array.from(t)),a):e},a.value=function(e){return arguments.length?(n="function"===typeof e?e:cl(+e),a):n},a.order=function(e){return arguments.length?(t=null==e?Xg:"function"===typeof e?e:cl(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(r=null==e?Kg:e,a):r},a}().keys(n).value(function(e,t){return+ob(e,t,0)}).order(Xg).offset(a);return i(e)};function vb(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,s=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ji()(a[t.dataKey])){var o=Gi(r,"value",a[t.dataKey]);if(o)return o.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var l=ob(a,Ji()(s)?t.dataKey:s);return Ji()(l)?null:t.scale(l)}var _b=function(e){var t=e.axis,r=e.ticks,n=e.offset,a=e.bandSize,i=e.entry,s=e.index;if("category"===t.type)return r[s]?r[s].coordinate+n:null;var o=ob(i,t.dataKey,t.domain[s]);return Ji()(o)?null:t.scale(o)-a/2+n},kb=function(e,t,r){return Object.keys(e).reduce(function(n,a){var i=e[a].stackedData.reduce(function(e,n){var a=function(e){return e.reduce(function(e,t){return[rx()(t.concat([e[0]]).filter(Ui)),ex()(t.concat([e[1]]).filter(Ui))]},[1/0,-1/0])}(n.slice(t,r+1));return[Math.min(e[0],a[0]),Math.max(e[1],a[1])]},[1/0,-1/0]);return[Math.min(i[0],n[0]),Math.max(i[1],n[1])]},[1/0,-1/0]).map(function(e){return e===1/0||e===-1/0?0:e})},jb=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,wb=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Nb=function(e,t,r){if(Zi()(e))return e(t,r);if(!Array.isArray(e))return t;var n=[];if(Ui(e[0]))n[0]=r?e[0]:Math.min(e[0],t[0]);else if(jb.test(e[0])){var a=+jb.exec(e[0])[1];n[0]=t[0]-a}else Zi()(e[0])?n[0]=e[0](t[0]):n[0]=t[0];if(Ui(e[1]))n[1]=r?e[1]:Math.max(e[1],t[1]);else if(wb.test(e[1])){var i=+wb.exec(e[1])[1];n[1]=t[1]+i}else Zi()(e[1])?n[1]=e[1](t[1]):n[1]=t[1];return n},Sb=function(e,t,r){if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=zs()(t,function(e){return e.coordinate}),i=1/0,s=1,o=a.length;s<o;s++){var l=a[s],c=a[s-1];i=Math.min((l.coordinate||0)-(c.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0},Ob=function(e,t,r){return e&&e.length?sx()(e,Ri()(r,"type.defaultProps.domain"))?t:e:t},Cb=function(e,t){var r=e.type.defaultProps?ib(ib({},e.type.defaultProps),e.props):e.props,n=r.dataKey,a=r.name,i=r.unit,s=r.formatter,o=r.tooltipType,l=r.chartType,c=r.hide;return ib(ib({},Ns(e,!1)),{},{dataKey:n,unit:i,formatter:s,name:a||n,color:cb(e),value:ob(t,n),type:o,payload:t,chartType:l,hide:c})};function Eb(e){return Eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eb(e)}function Pb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ab(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pb(Object(r),!0).forEach(function(t){Mb(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pb(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Mb(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Eb(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Eb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Eb(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Tb=["Webkit","Moz","O","ms"];function Db(e){return Db="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Db(e)}function Rb(){return Rb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rb.apply(this,arguments)}function Ib(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Lb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ib(Object(r),!0).forEach(function(t){Hb(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ib(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Fb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wb(n.key),n)}}function zb(e,t,r){return t=Bb(t),function(e,t){if(t&&("object"===Db(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ub()?Reflect.construct(t,r||[],Bb(e).constructor):t.apply(e,r))}function Ub(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ub=function(){return!!e})()}function Bb(e){return Bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bb(e)}function Vb(e,t){return Vb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vb(e,t)}function Hb(e,t,r){return(t=Wb(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wb(e){var t=function(e,t){if("object"!=Db(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Db(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Db(t)?t:t+""}var $b=function(e){return e.changedTouches&&!!e.changedTouches.length},qb=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Hb(r=zb(this,t,[e]),"handleDrag",function(e){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(e):r.state.isSlideMoving&&r.handleSlideDrag(e)}),Hb(r,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&r.handleDrag(e.changedTouches[0])}),Hb(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var e=r.props,t=e.endIndex,n=e.onDragEnd,a=e.startIndex;null===n||void 0===n||n({endIndex:t,startIndex:a})}),r.detachDragEndListener()}),Hb(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Hb(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Hb(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Hb(r,"handleSlideDragStart",function(e){var t=$b(e)?e.changedTouches[0]:e;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vb(e,t)}(t,e),r=t,n=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var r=e.startX,n=e.endX,a=this.state.scaleValues,i=this.props,s=i.gap,o=i.data.length-1,l=Math.min(r,n),c=Math.max(r,n),d=t.getIndexInRange(a,l),u=t.getIndexInRange(a,c);return{startIndex:d-d%s,endIndex:u===o?o:u-u%s}}},{key:"getTextOfTick",value:function(e){var t=this.props,r=t.data,n=t.tickFormatter,a=t.dataKey,i=ob(r[e],a,e);return Zi()(n)?n(i,e):i}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,r=t.slideMoveStartX,n=t.startX,a=t.endX,i=this.props,s=i.x,o=i.width,l=i.travellerWidth,c=i.startIndex,d=i.endIndex,u=i.onChange,h=e.pageX-r;h>0?h=Math.min(h,s+o-l-a,s+o-l-n):h<0&&(h=Math.max(h,s-n,s-a));var p=this.getIndex({startX:n+h,endX:a+h});p.startIndex===c&&p.endIndex===d||!u||u(p),this.setState({startX:n+h,endX:a+h,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var r=$b(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:r.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,r=t.brushMoveStartX,n=t.movingTravellerId,a=t.endX,i=t.startX,s=this.state[n],o=this.props,l=o.x,c=o.width,d=o.travellerWidth,u=o.onChange,h=o.gap,p=o.data,m={startX:this.state.startX,endX:this.state.endX},f=e.pageX-r;f>0?f=Math.min(f,l+c-d-s):f<0&&(f=Math.max(f,l-s)),m[n]=s+f;var g=this.getIndex(m),x=g.startIndex,b=g.endIndex;this.setState(Hb(Hb({},n,s+f),"brushMoveStartX",e.pageX),function(){u&&function(){var e=p.length-1;return"startX"===n&&(a>i?x%h===0:b%h===0)||a<i&&b===e||"endX"===n&&(a>i?b%h===0:x%h===0)||a>i&&b===e}()&&u(g)})}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var r=this,n=this.state,a=n.scaleValues,i=n.startX,s=n.endX,o=this.state[t],l=a.indexOf(o);if(-1!==l){var c=l+e;if(!(-1===c||c>=a.length)){var d=a[c];"startX"===t&&d>=s||"endX"===t&&d<=i||this.setState(Hb({},t,d),function(){r.props.onChange(r.getIndex({startX:r.state.startX,endX:r.state.endX}))})}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,i=e.height,s=e.fill,o=e.stroke;return a.createElement("rect",{stroke:o,fill:s,x:t,y:r,width:n,height:i})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,i=e.height,s=e.data,o=e.children,l=e.padding,c=a.Children.only(o);return c?a.cloneElement(c,{x:t,y:r,width:n,height:i,margin:l,compact:!0,data:s}):null}},{key:"renderTravellerLayer",value:function(e,r){var n,i,s=this,o=this.props,l=o.y,c=o.travellerWidth,d=o.height,u=o.traveller,h=o.ariaLabel,p=o.data,m=o.startIndex,f=o.endIndex,g=Math.max(e,this.props.x),x=Lb(Lb({},Ns(this.props,!1)),{},{x:g,y:l,width:c,height:d}),b=h||"Min value: ".concat(null===(n=p[m])||void 0===n?void 0:n.name,", Max value: ").concat(null===(i=p[f])||void 0===i?void 0:i.name);return a.createElement(Ys,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":e,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[r],onTouchStart:this.travellerDragStartHandlers[r],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),s.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,r))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(u,x))}},{key:"renderSlide",value:function(e,t){var r=this.props,n=r.y,i=r.height,s=r.stroke,o=r.travellerWidth,l=Math.min(e,t)+o,c=Math.max(Math.abs(t-e)-o,0);return a.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:s,fillOpacity:.2,x:l,y:n,width:c,height:i})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,r=e.endIndex,n=e.y,i=e.height,s=e.travellerWidth,o=e.stroke,l=this.state,c=l.startX,d=l.endX,u={pointerEvents:"none",fill:o};return a.createElement(Ys,{className:"recharts-brush-texts"},a.createElement(Xu,Rb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(c,d)-5,y:n+i/2},u),this.getTextOfTick(t)),a.createElement(Xu,Rb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(c,d)+s+5,y:n+i/2},u),this.getTextOfTick(r)))}},{key:"render",value:function(){var e=this.props,t=e.data,r=e.className,n=e.children,i=e.x,s=e.y,o=e.width,l=e.height,c=e.alwaysShowText,d=this.state,u=d.startX,h=d.endX,p=d.isTextActive,m=d.isSlideMoving,f=d.isTravellerMoving,g=d.isTravellerFocused;if(!t||!t.length||!Ui(i)||!Ui(s)||!Ui(o)||!Ui(l)||o<=0||l<=0)return null;var x=Oi("recharts-brush",r),b=1===a.Children.count(n),y=function(e,t){if(!e)return null;var r=e.replace(/(\w)/,function(e){return e.toUpperCase()}),n=Tb.reduce(function(e,n){return Ab(Ab({},e),{},Mb({},n+r,t))},{});return n[e]=t,n}("userSelect","none");return a.createElement(Ys,{className:x,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:y},this.renderBackground(),b&&this.renderPanorama(),this.renderSlide(u,h),this.renderTravellerLayer(u,"startX"),this.renderTravellerLayer(h,"endX"),(p||m||f||g||c)&&this.renderText())}}],i=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,r=e.y,n=e.width,i=e.height,s=e.stroke,o=Math.floor(r+i/2)-1;return a.createElement(a.Fragment,null,a.createElement("rect",{x:t,y:r,width:n,height:i,fill:s,stroke:"none"}),a.createElement("line",{x1:t+1,y1:o,x2:t+n-1,y2:o,fill:"none",stroke:"#fff"}),a.createElement("line",{x1:t+1,y1:o+2,x2:t+n-1,y2:o+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,r){return a.isValidElement(e)?a.cloneElement(e,r):Zi()(e)?e(r):t.renderDefaultTraveller(r)}},{key:"getDerivedStateFromProps",value:function(e,t){var r=e.data,n=e.width,a=e.x,i=e.travellerWidth,s=e.updateId,o=e.startIndex,l=e.endIndex;if(r!==t.prevData||s!==t.prevUpdateId)return Lb({prevData:r,prevTravellerWidth:i,prevUpdateId:s,prevX:a,prevWidth:n},r&&r.length?function(e){var t=e.data,r=e.startIndex,n=e.endIndex,a=e.x,i=e.width,s=e.travellerWidth;if(!t||!t.length)return{};var o=t.length,l=pu().domain(Ls()(0,o)).range([a,a+i-s]),c=l.domain().map(function(e){return l(e)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(r),endX:l(n),scale:l,scaleValues:c}}({data:r,width:n,x:a,travellerWidth:i,startIndex:o,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(n!==t.prevWidth||a!==t.prevX||i!==t.prevTravellerWidth)){t.scale.range([a,a+n-i]);var c=t.scale.domain().map(function(e){return t.scale(e)});return{prevData:r,prevTravellerWidth:i,prevUpdateId:s,prevX:a,prevWidth:n,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var r=0,n=e.length-1;n-r>1;){var a=Math.floor((r+n)/2);e[a]>t?n=a:r=a}return t>=e[n]?n:r}}],n&&Fb(r.prototype,n),i&&Fb(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(a.PureComponent);function Gb(e){return Gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gb(e)}function Kb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Yb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kb(Object(r),!0).forEach(function(t){Xb(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kb(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Xb(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Gb(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Gb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gb(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Hb(qb,"displayName","Brush"),Hb(qb,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Jb=Math.PI/180,Qb=function(e){return 180*e/Math.PI},Zb=function(e,t,r,n){return{x:e+Math.cos(-Jb*n)*r,y:t+Math.sin(-Jb*n)*r}},ey=function(e,t){var r=e.x,n=e.y,a=t.cx,i=t.cy,s=function(e,t){var r=e.x,n=e.y,a=t.x,i=t.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(n-i,2))}({x:r,y:n},{x:a,y:i});if(s<=0)return{radius:s};var o=(r-a)/s,l=Math.acos(o);return n>i&&(l=2*Math.PI-l),{radius:s,angle:Qb(l),angleInRadian:l}},ty=function(e,t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360);return e+360*Math.min(a,i)},ry=function(e,t){var r=e.x,n=e.y,a=ey({x:r,y:n},t),i=a.radius,s=a.angle,o=t.innerRadius,l=t.outerRadius;if(i<o||i>l)return!1;if(0===i)return!0;var c,d=function(e){var t=e.startAngle,r=e.endAngle,n=Math.floor(t/360),a=Math.floor(r/360),i=Math.min(n,a);return{startAngle:t-360*i,endAngle:r-360*i}}(t),u=d.startAngle,h=d.endAngle,p=s;if(u<=h){for(;p>h;)p-=360;for(;p<u;)p+=360;c=p>=u&&p<=h}else{for(;p>u;)p-=360;for(;p<h;)p+=360;c=p>=h&&p<=u}return c?Yb(Yb({},t),{},{radius:i,angle:ty(p,t)}):null};function ny(e){return ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ny(e)}var ay=["offset"];function iy(e){return function(e){if(Array.isArray(e))return sy(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return sy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sy(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oy(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ly(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function cy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ly(Object(r),!0).forEach(function(t){dy(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ly(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function dy(e,t,r){return t=function(e){var t=function(e,t){if("object"!=ny(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ny(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ny(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uy(){return uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uy.apply(this,arguments)}var hy=function(e,t,r){var n,i,s=e.position,o=e.viewBox,l=e.offset,c=e.className,d=o,u=d.cx,h=d.cy,p=d.innerRadius,m=d.outerRadius,f=d.startAngle,g=d.endAngle,x=d.clockWise,b=(p+m)/2,y=function(e,t){return Fi(t-e)*Math.min(Math.abs(t-e),360)}(f,g),v=y>=0?1:-1;"insideStart"===s?(n=f+v*l,i=x):"insideEnd"===s?(n=g-v*l,i=!x):"end"===s&&(n=g+v*l,i=x),i=y<=0?i:!i;var _=Zb(u,h,b,n),k=Zb(u,h,b,n+359*(i?1:-1)),j="M".concat(_.x,",").concat(_.y,"\n    A").concat(b,",").concat(b,",0,1,").concat(i?0:1,",\n    ").concat(k.x,",").concat(k.y),w=Ji()(e.id)?Hi("recharts-radial-line-"):e.id;return a.createElement("text",uy({},r,{dominantBaseline:"central",className:Oi("recharts-radial-bar-label",c)}),a.createElement("defs",null,a.createElement("path",{id:w,d:j})),a.createElement("textPath",{xlinkHref:"#".concat(w)},t))};function py(e){var t,r=e.offset,n=cy({offset:void 0===r?5:r},oy(e,ay)),i=n.viewBox,s=n.position,o=n.value,l=n.children,c=n.content,d=n.className,u=void 0===d?"":d,h=n.textBreakAll;if(!i||Ji()(o)&&Ji()(l)&&!(0,a.isValidElement)(c)&&!Zi()(c))return null;if((0,a.isValidElement)(c))return(0,a.cloneElement)(c,n);if(Zi()(c)){if(t=(0,a.createElement)(c,n),(0,a.isValidElement)(t))return t}else t=function(e){var t=e.value,r=e.formatter,n=Ji()(e.children)?t:e.children;return Zi()(r)?r(n):n}(n);var p=function(e){return"cx"in e&&Ui(e.cx)}(i),m=Ns(n,!0);if(p&&("insideStart"===s||"insideEnd"===s||"end"===s))return hy(n,t,m);var f=p?function(e){var t=e.viewBox,r=e.offset,n=e.position,a=t,i=a.cx,s=a.cy,o=a.innerRadius,l=a.outerRadius,c=(a.startAngle+a.endAngle)/2;if("outside"===n){var d=Zb(i,s,l+r,c),u=d.x;return{x:u,y:d.y,textAnchor:u>=i?"start":"end",verticalAnchor:"middle"}}if("center"===n)return{x:i,y:s,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===n)return{x:i,y:s,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===n)return{x:i,y:s,textAnchor:"middle",verticalAnchor:"end"};var h=Zb(i,s,(o+l)/2,c);return{x:h.x,y:h.y,textAnchor:"middle",verticalAnchor:"middle"}}(n):function(e){var t=e.viewBox,r=e.parentViewBox,n=e.offset,a=e.position,i=t,s=i.x,o=i.y,l=i.width,c=i.height,d=c>=0?1:-1,u=d*n,h=d>0?"end":"start",p=d>0?"start":"end",m=l>=0?1:-1,f=m*n,g=m>0?"end":"start",x=m>0?"start":"end";if("top"===a)return cy(cy({},{x:s+l/2,y:o-d*n,textAnchor:"middle",verticalAnchor:h}),r?{height:Math.max(o-r.y,0),width:l}:{});if("bottom"===a)return cy(cy({},{x:s+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:p}),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{});if("left"===a){var b={x:s-f,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return cy(cy({},b),r?{width:Math.max(b.x-r.x,0),height:c}:{})}if("right"===a){var y={x:s+l+f,y:o+c/2,textAnchor:x,verticalAnchor:"middle"};return cy(cy({},y),r?{width:Math.max(r.x+r.width-y.x,0),height:c}:{})}var v=r?{width:l,height:c}:{};return"insideLeft"===a?cy({x:s+f,y:o+c/2,textAnchor:x,verticalAnchor:"middle"},v):"insideRight"===a?cy({x:s+l-f,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},v):"insideTop"===a?cy({x:s+l/2,y:o+u,textAnchor:"middle",verticalAnchor:p},v):"insideBottom"===a?cy({x:s+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:h},v):"insideTopLeft"===a?cy({x:s+f,y:o+u,textAnchor:x,verticalAnchor:p},v):"insideTopRight"===a?cy({x:s+l-f,y:o+u,textAnchor:g,verticalAnchor:p},v):"insideBottomLeft"===a?cy({x:s+f,y:o+c-u,textAnchor:x,verticalAnchor:h},v):"insideBottomRight"===a?cy({x:s+l-f,y:o+c-u,textAnchor:g,verticalAnchor:h},v):ts()(a)&&(Ui(a.x)||zi(a.x))&&(Ui(a.y)||zi(a.y))?cy({x:s+Wi(a.x,l),y:o+Wi(a.y,c),textAnchor:"end",verticalAnchor:"end"},v):cy({x:s+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},v)}(n);return a.createElement(Xu,uy({className:Oi("recharts-label",u)},m,f,{breakAll:h}),t)}py.displayName="Label";var my=function(e){var t=e.cx,r=e.cy,n=e.angle,a=e.startAngle,i=e.endAngle,s=e.r,o=e.radius,l=e.innerRadius,c=e.outerRadius,d=e.x,u=e.y,h=e.top,p=e.left,m=e.width,f=e.height,g=e.clockWise,x=e.labelViewBox;if(x)return x;if(Ui(m)&&Ui(f)){if(Ui(d)&&Ui(u))return{x:d,y:u,width:m,height:f};if(Ui(h)&&Ui(p))return{x:h,y:p,width:m,height:f}}return Ui(d)&&Ui(u)?{x:d,y:u,width:0,height:0}:Ui(t)&&Ui(r)?{cx:t,cy:r,startAngle:a||n||0,endAngle:i||n||0,innerRadius:l||0,outerRadius:c||o||s||0,clockWise:g}:e.viewBox?e.viewBox:{}};py.parseViewBox=my,py.renderCallByParent=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var n=e.children,i=my(e),s=vs(n,py).map(function(e,r){return(0,a.cloneElement)(e,{viewBox:t||i,key:"label-".concat(r)})});if(!r)return s;var o=function(e,t){return e?!0===e?a.createElement(py,{key:"label-implicit",viewBox:t}):Bi(e)?a.createElement(py,{key:"label-implicit",viewBox:t,value:e}):(0,a.isValidElement)(e)?e.type===py?(0,a.cloneElement)(e,{key:"label-implicit",viewBox:t}):a.createElement(py,{key:"label-implicit",content:e,viewBox:t}):Zi()(e)?a.createElement(py,{key:"label-implicit",content:e,viewBox:t}):ts()(e)?a.createElement(py,uy({viewBox:t},e,{key:"label-implicit"})):null:null}(e.label,t||i);return[o].concat(iy(s))};var fy=function(e,t){var r=e.alwaysShow,n=e.ifOverflow;return r&&(n="extendDomain"),n===t},gy=r(1733),xy=r.n(gy),by=r(7002),yy=r.n(by),vy=function(e){return null};vy.displayName="Cell";var _y=r(4065),ky=r.n(_y);function jy(e){return jy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jy(e)}var wy=["valueAccessor"],Ny=["data","dataKey","clockWise","id","textBreakAll"];function Sy(e){return function(e){if(Array.isArray(e))return Oy(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Oy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oy(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Cy(){return Cy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cy.apply(this,arguments)}function Ey(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Py(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ey(Object(r),!0).forEach(function(t){Ay(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ey(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ay(e,t,r){return t=function(e){var t=function(e,t){if("object"!=jy(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=jy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jy(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function My(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Ty=function(e){return Array.isArray(e.value)?ky()(e.value):e.value};function Dy(e){var t=e.valueAccessor,r=void 0===t?Ty:t,n=My(e,wy),i=n.data,s=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,d=My(n,Ny);return i&&i.length?a.createElement(Ys,{className:"recharts-label-list"},i.map(function(e,t){var n=Ji()(s)?r(e,t):ob(e&&e.payload,s),i=Ji()(l)?{}:{id:"".concat(l,"-").concat(t)};return a.createElement(py,Cy({},Ns(e,!0),d,i,{parentViewBox:e.parentViewBox,value:n,textBreakAll:c,viewBox:py.parseViewBox(Ji()(o)?e:Py(Py({},e),{},{clockWise:o})),key:"label-".concat(t),index:t}))})):null}Dy.displayName="LabelList",Dy.renderCallByParent=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var n=vs(e.children,Dy).map(function(e,r){return(0,a.cloneElement)(e,{data:t,key:"labelList-".concat(r)})});if(!r)return n;var i=function(e,t){return e?!0===e?a.createElement(Dy,{key:"labelList-implicit",data:t}):a.isValidElement(e)||Zi()(e)?a.createElement(Dy,{key:"labelList-implicit",data:t,content:e}):ts()(e)?a.createElement(Dy,Cy({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t);return[i].concat(Sy(n))};var Ry=r(2322),Iy=r.n(Ry),Ly=r(6361),Fy=r.n(Ly);function zy(e){return zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zy(e)}function Uy(){return Uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uy.apply(this,arguments)}function By(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Vy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Hy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Wy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hy(Object(r),!0).forEach(function(t){$y(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hy(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $y(e,t,r){return t=function(e){var t=function(e,t){if("object"!=zy(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zy(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qy=function(e,t,r,n,a){var i,s=r-n;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+r,",").concat(t),i+="L ".concat(e+r-s/2,",").concat(t+a),i+="L ".concat(e+r-s/2-n,",").concat(t+a),i+="L ".concat(e,",").concat(t," Z")},Gy={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ky=function(e){var t=Wy(Wy({},Gy),e),r=(0,a.useRef)(),n=By((0,a.useState)(-1),2),i=n[0],s=n[1];(0,a.useEffect)(function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&s(e)}catch(t){}},[]);var o=t.x,l=t.y,c=t.upperWidth,d=t.lowerWidth,u=t.height,h=t.className,p=t.animationEasing,m=t.animationDuration,f=t.animationBegin,g=t.isUpdateAnimationActive;if(o!==+o||l!==+l||c!==+c||d!==+d||u!==+u||0===c&&0===d||0===u)return null;var x=Oi("recharts-trapezoid",h);return g?a.createElement(Wd,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:u,x:o,y:l},to:{upperWidth:c,lowerWidth:d,height:u,x:o,y:l},duration:m,animationEasing:p,isActive:g},function(e){var n=e.upperWidth,s=e.lowerWidth,o=e.height,l=e.x,c=e.y;return a.createElement(Wd,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:m,easing:p},a.createElement("path",Uy({},Ns(t,!0),{className:x,d:qy(l,c,n,s,o),ref:r})))}):a.createElement("g",null,a.createElement("path",Uy({},Ns(t,!0),{className:x,d:qy(o,l,c,d,u)})))};function Yy(e){return Yy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yy(e)}function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xy.apply(this,arguments)}function Jy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Qy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jy(Object(r),!0).forEach(function(t){Zy(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jy(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Zy(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Yy(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Yy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yy(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ev=function(e){var t=e.cx,r=e.cy,n=e.radius,a=e.angle,i=e.sign,s=e.isExternal,o=e.cornerRadius,l=e.cornerIsExternal,c=o*(s?1:-1)+n,d=Math.asin(o/c)/Jb,u=l?a:a+i*d,h=l?a-i*d:a;return{center:Zb(t,r,c,u),circleTangency:Zb(t,r,n,u),lineTangency:Zb(t,r,c*Math.cos(d*Jb),h),theta:d}},tv=function(e){var t=e.cx,r=e.cy,n=e.innerRadius,a=e.outerRadius,i=e.startAngle,s=function(e,t){return Fi(t-e)*Math.min(Math.abs(t-e),359.999)}(i,e.endAngle),o=i+s,l=Zb(t,r,a,i),c=Zb(t,r,a,o),d="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(a,",").concat(a,",0,\n    ").concat(+(Math.abs(s)>180),",").concat(+(i>o),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(n>0){var u=Zb(t,r,n,i),h=Zb(t,r,n,o);d+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(n,",").concat(n,",0,\n            ").concat(+(Math.abs(s)>180),",").concat(+(i<=o),",\n            ").concat(u.x,",").concat(u.y," Z")}else d+="L ".concat(t,",").concat(r," Z");return d},rv={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},nv=function(e){var t=Qy(Qy({},rv),e),r=t.cx,n=t.cy,i=t.innerRadius,s=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,h=t.className;if(s<i||d===u)return null;var p,m=Oi("recharts-sector",h),f=s-i,g=Wi(o,f,0,!0);return p=g>0&&Math.abs(d-u)<360?function(e){var t=e.cx,r=e.cy,n=e.innerRadius,a=e.outerRadius,i=e.cornerRadius,s=e.forceCornerRadius,o=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,d=Fi(c-l),u=ev({cx:t,cy:r,radius:a,angle:l,sign:d,cornerRadius:i,cornerIsExternal:o}),h=u.circleTangency,p=u.lineTangency,m=u.theta,f=ev({cx:t,cy:r,radius:a,angle:c,sign:-d,cornerRadius:i,cornerIsExternal:o}),g=f.circleTangency,x=f.lineTangency,b=f.theta,y=o?Math.abs(l-c):Math.abs(l-c)-m-b;if(y<0)return s?"M ".concat(p.x,",").concat(p.y,"\n        a").concat(i,",").concat(i,",0,0,1,").concat(2*i,",0\n        a").concat(i,",").concat(i,",0,0,1,").concat(2*-i,",0\n      "):tv({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:l,endAngle:c});var v="M ".concat(p.x,",").concat(p.y,"\n    A").concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,"\n  ");if(n>0){var _=ev({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),k=_.circleTangency,j=_.lineTangency,w=_.theta,N=ev({cx:t,cy:r,radius:n,angle:c,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),S=N.circleTangency,O=N.lineTangency,C=N.theta,E=o?Math.abs(l-c):Math.abs(l-c)-w-C;if(E<0&&0===i)return"".concat(v,"L").concat(t,",").concat(r,"Z");v+="L".concat(O.x,",").concat(O.y,"\n      A").concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(S.x,",").concat(S.y,"\n      A").concat(n,",").concat(n,",0,").concat(+(E>180),",").concat(+(d>0),",").concat(k.x,",").concat(k.y,"\n      A").concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(j.x,",").concat(j.y,"Z")}else v+="L".concat(t,",").concat(r,"Z");return v}({cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:Math.min(g,f/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):tv({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:d,endAngle:u}),a.createElement("path",Xy({},Ns(t,!0),{className:m,d:p,role:"img"}))},av=["option","shapeType","propTransformer","activeClassName","isActive"];function iv(e){return iv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iv(e)}function sv(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ov(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function lv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ov(Object(r),!0).forEach(function(t){cv(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ov(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function cv(e,t,r){return t=function(e){var t=function(e,t){if("object"!=iv(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=iv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iv(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dv(e,t){return lv(lv({},t),e)}function uv(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return a.createElement(tu,r);case"trapezoid":return a.createElement(Ky,r);case"sector":return a.createElement(nv,r);case"symbols":if(function(e){return"symbols"===e}(t))return a.createElement(Bl,r);break;default:return null}}function hv(e){var t,r=e.option,n=e.shapeType,i=e.propTransformer,s=void 0===i?dv:i,o=e.activeClassName,l=void 0===o?"recharts-active-shape":o,c=e.isActive,d=sv(e,av);if((0,a.isValidElement)(r))t=(0,a.cloneElement)(r,lv(lv({},d),function(e){return(0,a.isValidElement)(e)?e.props:e}(r)));else if(Zi()(r))t=r(d);else if(Iy()(r)&&!Fy()(r)){var u=s(r,d);t=a.createElement(uv,{shapeType:n,elementProps:u})}else{var h=d;t=a.createElement(uv,{shapeType:n,elementProps:h})}return c?a.createElement(Ys,{className:l},t):t}function pv(e,t){return null!=t&&"trapezoids"in e.props}function mv(e,t){return null!=t&&"sectors"in e.props}function fv(e,t){return null!=t&&"points"in e.props}function gv(e,t){var r,n,a=e.x===(null===t||void 0===t||null===(r=t.labelViewBox)||void 0===r?void 0:r.x)||e.x===t.x,i=e.y===(null===t||void 0===t||null===(n=t.labelViewBox)||void 0===n?void 0:n.y)||e.y===t.y;return a&&i}function xv(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function bv(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function yv(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=function(e,t){var r;return pv(e,t)?r="trapezoids":mv(e,t)?r="sectors":fv(e,t)&&(r="points"),r}(r,t),i=function(e,t){var r,n;return pv(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:mv(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:fv(e,t)?t.payload:{}}(r,t),s=n.filter(function(e,n){var s=sx()(i,e),o=r.props[a].filter(function(e){var n=function(e,t){var r;return pv(e,t)?r=gv:mv(e,t)?r=xv:fv(e,t)&&(r=bv),r}(r,t);return n(e,t)}),l=r.props[a].indexOf(o[o.length-1]);return s&&n===l});return n.indexOf(s[s.length-1])}var vv=["x","y"];function _v(e){return _v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_v(e)}function kv(){return kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kv.apply(this,arguments)}function jv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jv(Object(r),!0).forEach(function(t){Nv(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Nv(e,t,r){return t=function(e){var t=function(e,t){if("object"!=_v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_v(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sv(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ov(e,t){var r=e.x,n=e.y,a=Sv(e,vv),i="".concat(r),s=parseInt(i,10),o="".concat(n),l=parseInt(o,10),c="".concat(t.height||a.height),d=parseInt(c,10),u="".concat(t.width||a.width),h=parseInt(u,10);return wv(wv(wv(wv(wv({},t),a),s?{x:s}:{}),l?{y:l}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function Cv(e){return a.createElement(hv,kv({shapeType:"rectangle",propTransformer:Ov,activeClassName:"recharts-active-bar"},e))}var Ev,Pv=["value","background"];function Av(e){return Av="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Av(e)}function Mv(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Tv(){return Tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tv.apply(this,arguments)}function Dv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Rv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dv(Object(r),!0).forEach(function(t){Bv(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Iv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vv(n.key),n)}}function Lv(e,t,r){return t=zv(t),function(e,t){if(t&&("object"===Av(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fv()?Reflect.construct(t,r||[],zv(e).constructor):t.apply(e,r))}function Fv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Fv=function(){return!!e})()}function zv(e){return zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zv(e)}function Uv(e,t){return Uv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Uv(e,t)}function Bv(e,t,r){return(t=Vv(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vv(e){var t=function(e,t){if("object"!=Av(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Av(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Av(t)?t:t+""}var Hv=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Bv(e=Lv(this,t,[].concat(n)),"state",{isAnimationFinished:!1}),Bv(e,"id",Hi("recharts-bar-")),Bv(e,"handleAnimationEnd",function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),t&&t()}),Bv(e,"handleAnimationStart",function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),t&&t()}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uv(e,t)}(t,e),r=t,n=[{key:"renderRectanglesStatically",value:function(e){var t=this,r=this.props,n=r.shape,i=r.dataKey,s=r.activeIndex,o=r.activeBar,l=Ns(this.props,!1);return e&&e.map(function(e,r){var c=r===s,d=c?o:n,u=Rv(Rv(Rv({},l),e),{},{isActive:c,option:d,index:r,dataKey:i,onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd});return a.createElement(Ys,Tv({className:"recharts-bar-rectangle"},ds(t.props,e,r),{key:"rectangle-".concat(null===e||void 0===e?void 0:e.x,"-").concat(null===e||void 0===e?void 0:e.y,"-").concat(null===e||void 0===e?void 0:e.value,"-").concat(r)}),a.createElement(Cv,u))})}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,r=t.data,n=t.layout,i=t.isAnimationActive,s=t.animationBegin,o=t.animationDuration,l=t.animationEasing,c=t.animationId,d=this.state.prevData;return a.createElement(Wd,{begin:s,duration:o,isActive:i,easing:l,from:{t:0},to:{t:1},key:"bar-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var i=t.t,s=r.map(function(e,t){var r=d&&d[t];if(r){var a=qi(r.x,e.x),s=qi(r.y,e.y),o=qi(r.width,e.width),l=qi(r.height,e.height);return Rv(Rv({},e),{},{x:a(i),y:s(i),width:o(i),height:l(i)})}if("horizontal"===n){var c=qi(0,e.height)(i);return Rv(Rv({},e),{},{y:e.y+e.height-c,height:c})}var u=qi(0,e.width)(i);return Rv(Rv({},e),{},{width:u})});return a.createElement(Ys,null,e.renderRectanglesStatically(s))})}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,r=e.isAnimationActive,n=this.state.prevData;return!(r&&t&&t.length)||n&&sx()(n,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,t=this.props,r=t.data,n=t.dataKey,i=t.activeIndex,s=Ns(this.props.background,!1);return r.map(function(t,r){t.value;var o=t.background,l=Mv(t,Pv);if(!o)return null;var c=Rv(Rv(Rv(Rv(Rv({},l),{},{fill:"#eee"},o),s),ds(e.props,t,r)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:n,index:r,className:"recharts-bar-background-rectangle"});return a.createElement(Cv,Tv({key:"background-bar-".concat(r),option:e.props.background,isActive:r===i},c))})}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.data,i=r.xAxis,s=r.yAxis,o=r.layout,l=vs(r.children,Yx);if(!l)return null;var c="vertical"===o?n[0].height/2:n[0].width/2,d=function(e,t){var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:ob(e,t)}},u={clipPath:e?"url(#clipPath-".concat(t,")"):null};return a.createElement(Ys,u,l.map(function(e){return a.cloneElement(e,{key:"error-bar-".concat(t,"-").concat(e.props.dataKey),data:n,xAxis:i,yAxis:s,layout:o,offset:c,dataPointFormatter:d})}))}},{key:"render",value:function(){var e=this.props,t=e.hide,r=e.data,n=e.className,i=e.xAxis,s=e.yAxis,o=e.left,l=e.top,c=e.width,d=e.height,u=e.isAnimationActive,h=e.background,p=e.id;if(t||!r||!r.length)return null;var m=this.state.isAnimationFinished,f=Oi("recharts-bar",n),g=i&&i.allowDataOverflow,x=s&&s.allowDataOverflow,b=g||x,y=Ji()(p)?this.id:p;return a.createElement(Ys,{className:f},g||x?a.createElement("defs",null,a.createElement("clipPath",{id:"clipPath-".concat(y)},a.createElement("rect",{x:g?o:o-c/2,y:x?l:l-d/2,width:g?c:2*c,height:x?d:2*d}))):null,a.createElement(Ys,{className:"recharts-bar-rectangles",clipPath:b?"url(#clipPath-".concat(y,")"):null},h?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(b,y),(!u||m)&&Dy.renderCallByParent(this.props,r))}}],i=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],n&&Iv(r.prototype,n),i&&Iv(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(a.PureComponent);function Wv(e){return Wv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wv(e)}function $v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yv(n.key),n)}}function qv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Gv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qv(Object(r),!0).forEach(function(t){Kv(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Kv(e,t,r){return(t=Yv(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yv(e){var t=function(e,t){if("object"!=Wv(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Wv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wv(t)?t:t+""}Ev=Hv,Bv(Hv,"displayName","Bar"),Bv(Hv,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!jo.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),Bv(Hv,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,s=e.yAxis,o=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,d=e.dataStartIndex,u=e.displayedData,h=e.offset,p=function(e,t){if(!e)return null;for(var r=0,n=e.length;r<n;r++)if(e[r].item===t)return e[r].position;return null}(n,r);if(!p)return null;var m=t.layout,f=r.type.defaultProps,g=void 0!==f?Rv(Rv({},f),r.props):r.props,x=g.dataKey,b=g.children,y=g.minPointSize,v="horizontal"===m?s:i,_=c?v.scale.domain():null,k=function(e){var t=e.numericAxis,r=t.scale.domain();if("number"===t.type){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]}({numericAxis:v}),j=vs(b,vy),w=u.map(function(e,t){var n,u,h,f,g,b;c?n=function(e,t){if(!t||2!==t.length||!Ui(t[0])||!Ui(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!Ui(e[0])||e[0]<r)&&(a[0]=r),(!Ui(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a}(c[d+t],_):(n=ob(e,x),Array.isArray(n)||(n=[k,n]));var v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(r,n){if("number"===typeof e)return e;var a="number"===typeof r;return a?e(r,n):(a||Bs(!1),t)}}(y,Ev.defaultProps.minPointSize)(n[1],t);if("horizontal"===m){var w,N=[s.scale(n[0]),s.scale(n[1])],S=N[0],O=N[1];u=_b({axis:i,ticks:o,bandSize:a,offset:p.offset,entry:e,index:t}),h=null!==(w=null!==O&&void 0!==O?O:S)&&void 0!==w?w:void 0,f=p.size;var C=S-O;if(g=Number.isNaN(C)?0:C,b={x:u,y:s.y,width:f,height:s.height},Math.abs(v)>0&&Math.abs(g)<Math.abs(v)){var E=Fi(g||v)*(Math.abs(v)-Math.abs(g));h-=E,g+=E}}else{var P=[i.scale(n[0]),i.scale(n[1])],A=P[0],M=P[1];if(u=A,h=_b({axis:s,ticks:l,bandSize:a,offset:p.offset,entry:e,index:t}),f=M-A,g=p.size,b={x:i.x,y:h,width:i.width,height:g},Math.abs(v)>0&&Math.abs(f)<Math.abs(v))f+=Fi(f||v)*(Math.abs(v)-Math.abs(f))}return Rv(Rv(Rv({},e),{},{x:u,y:h,width:f,height:g,value:c?n:n[1],payload:e,background:b},j&&j[t]&&j[t].props),{},{tooltipPayload:[Cb(r,e)],tooltipPosition:{x:u+f/2,y:h+g/2}})});return Rv({data:w,layout:m},h)});var Xv=function(e,t){var r=e.x,n=e.y,a=t.x,i=t.y;return{x:Math.min(r,a),y:Math.min(n,i),width:Math.abs(a-r),height:Math.abs(i-n)}},Jv=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,r=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.bandAware,n=t.position;if(void 0!==e){if(n)switch(n){case"start":default:return this.scale(e);case"middle":var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a;case"end":var i=this.bandwidth?this.bandwidth():0;return this.scale(e)+i}if(r){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),r=t[0],n=t[t.length-1];return r<=n?e>=r&&e<=n:e>=n&&e<=r}}],n=[{key:"create",value:function(t){return new e(t)}}],r&&$v(t.prototype,r),n&&$v(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();Kv(Jv,"EPS",1e-4);var Qv=function(e){var t=Object.keys(e).reduce(function(t,r){return Gv(Gv({},t),{},Kv({},r,Jv.create(e[r])))},{});return Gv(Gv({},t),{},{apply:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.bandAware,a=r.position;return xy()(e,function(e,r){return t[r].apply(e,{bandAware:n,position:a})})},isInRange:function(e){return yy()(e,function(e,r){return t[r].isInRange(e)})}})};function Zv(){return Zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zv.apply(this,arguments)}function e_(e){return e_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e_(e)}function t_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function r_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?t_(Object(r),!0).forEach(function(t){l_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function n_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c_(n.key),n)}}function a_(e,t,r){return t=s_(t),function(e,t){if(t&&("object"===e_(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,i_()?Reflect.construct(t,r||[],s_(e).constructor):t.apply(e,r))}function i_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(i_=function(){return!!e})()}function s_(e){return s_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s_(e)}function o_(e,t){return o_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o_(e,t)}function l_(e,t,r){return(t=c_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c_(e){var t=function(e,t){if("object"!=e_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=e_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==e_(t)?t:t+""}var d_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a_(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o_(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e=this.props,r=e.x,n=e.y,i=e.r,s=e.alwaysShow,o=e.clipPathId,l=Bi(r),c=Bi(n);if(Yi(void 0===s,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!l||!c)return null;var d=function(e){var t=e.x,r=e.y,n=e.xAxis,a=e.yAxis,i=Qv({x:n.scale,y:a.scale}),s=i.apply({x:t,y:r},{bandAware:!0});return fy(e,"discard")&&!i.isInRange(s)?null:s}(this.props);if(!d)return null;var u=d.x,h=d.y,p=this.props,m=p.shape,f=p.className,g=r_(r_({clipPath:fy(this.props,"hidden")?"url(#".concat(o,")"):void 0},Ns(this.props,!0)),{},{cx:u,cy:h});return a.createElement(Ys,{className:Oi("recharts-reference-dot",f)},t.renderDot(m,g),py.renderCallByParent(this.props,{x:u-i,y:h-i,width:2*i,height:2*i}))}}],n&&n_(r.prototype,n),i&&n_(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(a.Component);l_(d_,"displayName","ReferenceDot"),l_(d_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),l_(d_,"renderDot",function(e,t){return a.isValidElement(e)?a.cloneElement(e,t):Zi()(e)?e(t):a.createElement(fc,Zv({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))});var u_=r(4597),h_=r.n(u_),p_=r(8990),m_=r.n(p_),f_=r(5797),g_=r.n(f_)()(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")});var x_=(0,a.createContext)(void 0),b_=(0,a.createContext)(void 0),y_=(0,a.createContext)(void 0),v_=(0,a.createContext)({}),__=(0,a.createContext)(void 0),k_=(0,a.createContext)(0),j_=(0,a.createContext)(0),w_=function(e){var t=e.state,r=t.xAxisMap,n=t.yAxisMap,i=t.offset,s=e.clipPathId,o=e.children,l=e.width,c=e.height,d=g_(i);return a.createElement(x_.Provider,{value:r},a.createElement(b_.Provider,{value:n},a.createElement(v_.Provider,{value:i},a.createElement(y_.Provider,{value:d},a.createElement(__.Provider,{value:s},a.createElement(k_.Provider,{value:c},a.createElement(j_.Provider,{value:l},o)))))))};var N_=function(e){var t=(0,a.useContext)(x_);null==t&&Bs(!1);var r=t[e];return null==r&&Bs(!1),r},S_=function(e){var t=(0,a.useContext)(b_);null==t&&Bs(!1);var r=t[e];return null==r&&Bs(!1),r},O_=function(){return(0,a.useContext)(j_)},C_=function(){return(0,a.useContext)(k_)};function E_(e){return E_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E_(e)}function P_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F_(n.key),n)}}function A_(e,t,r){return t=T_(t),function(e,t){if(t&&("object"===E_(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,M_()?Reflect.construct(t,r||[],T_(e).constructor):t.apply(e,r))}function M_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(M_=function(){return!!e})()}function T_(e){return T_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T_(e)}function D_(e,t){return D_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D_(e,t)}function R_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function I_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R_(Object(r),!0).forEach(function(t){L_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function L_(e,t,r){return(t=F_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F_(e){var t=function(e,t){if("object"!=E_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=E_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E_(t)?t:t+""}function z_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return U_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B_(){return B_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B_.apply(this,arguments)}function V_(e){var t=e.x,r=e.y,n=e.segment,i=e.xAxisId,s=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=(0,a.useContext)(__),u=N_(i),h=S_(s),p=(0,a.useContext)(y_);if(!d||!p)return null;Yi(void 0===c,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=function(e,t,r,n,a,i,s,o,l){var c=a.x,d=a.y,u=a.width,h=a.height;if(r){var p=l.y,m=e.y.apply(p,{position:i});if(fy(l,"discard")&&!e.y.isInRange(m))return null;var f=[{x:c+u,y:m},{x:c,y:m}];return"left"===o?f.reverse():f}if(t){var g=l.x,x=e.x.apply(g,{position:i});if(fy(l,"discard")&&!e.x.isInRange(x))return null;var b=[{x:x,y:d+h},{x:x,y:d}];return"top"===s?b.reverse():b}if(n){var y=l.segment.map(function(t){return e.apply(t,{position:i})});return fy(l,"discard")&&h_()(y,function(t){return!e.isInRange(t)})?null:y}return null}(Qv({x:u.scale,y:h.scale}),Bi(t),Bi(r),n&&2===n.length,p,e.position,u.orientation,h.orientation,e);if(!m)return null;var f=z_(m,2),g=f[0],x=g.x,b=g.y,y=f[1],v=y.x,_=y.y,k=I_(I_({clipPath:fy(e,"hidden")?"url(#".concat(d,")"):void 0},Ns(e,!0)),{},{x1:x,y1:b,x2:v,y2:_});return a.createElement(Ys,{className:Oi("recharts-reference-line",l)},function(e,t){return a.isValidElement(e)?a.cloneElement(e,t):Zi()(e)?e(t):a.createElement("line",B_({},t,{className:"recharts-reference-line-line"}))}(o,k),py.renderCallByParent(e,function(e){var t=e.x1,r=e.y1,n=e.x2,a=e.y2;return Xv({x:t,y:r},{x:n,y:a})}({x1:x,y1:b,x2:v,y2:_})))}var H_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),A_(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D_(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return a.createElement(V_,this.props)}}])&&P_(r.prototype,n),i&&P_(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(a.Component);function W_(){return W_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W_.apply(this,arguments)}function $_(e){return $_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$_(e)}function q_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function G_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q_(Object(r),!0).forEach(function(t){Z_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function K_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ek(n.key),n)}}function Y_(e,t,r){return t=J_(t),function(e,t){if(t&&("object"===$_(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,X_()?Reflect.construct(t,r||[],J_(e).constructor):t.apply(e,r))}function X_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(X_=function(){return!!e})()}function J_(e){return J_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},J_(e)}function Q_(e,t){return Q_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Q_(e,t)}function Z_(e,t,r){return(t=ek(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ek(e){var t=function(e,t){if("object"!=$_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$_(t)?t:t+""}L_(H_,"displayName","ReferenceLine"),L_(H_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var tk=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Y_(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q_(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e=this.props,r=e.x1,n=e.x2,i=e.y1,s=e.y2,o=e.className,l=e.alwaysShow,c=e.clipPathId;Yi(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Bi(r),u=Bi(n),h=Bi(i),p=Bi(s),m=this.props.shape;if(!d&&!u&&!h&&!p&&!m)return null;var f=function(e,t,r,n,a){var i=a.x1,s=a.x2,o=a.y1,l=a.y2,c=a.xAxis,d=a.yAxis;if(!c||!d)return null;var u=Qv({x:c.scale,y:d.scale}),h={x:e?u.x.apply(i,{position:"start"}):u.x.rangeMin,y:r?u.y.apply(o,{position:"start"}):u.y.rangeMin},p={x:t?u.x.apply(s,{position:"end"}):u.x.rangeMax,y:n?u.y.apply(l,{position:"end"}):u.y.rangeMax};return!fy(a,"discard")||u.isInRange(h)&&u.isInRange(p)?Xv(h,p):null}(d,u,h,p,this.props);if(!f&&!m)return null;var g=fy(this.props,"hidden")?"url(#".concat(c,")"):void 0;return a.createElement(Ys,{className:Oi("recharts-reference-area",o)},t.renderRect(m,G_(G_({clipPath:g},Ns(this.props,!0)),f)),py.renderCallByParent(this.props,f))}}],n&&K_(r.prototype,n),i&&K_(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(a.Component);function rk(e){return function(e){if(Array.isArray(e))return nk(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return nk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nk(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Z_(tk,"displayName","ReferenceArea"),Z_(tk,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),Z_(tk,"renderRect",function(e,t){return a.isValidElement(e)?a.cloneElement(e,t):Zi()(e)?e(t):a.createElement(tu,W_({},t,{className:"recharts-reference-area-rect"}))});var ak=function(e,t,r,n,a){var i=vs(e,H_),s=vs(e,d_),o=[].concat(rk(i),rk(s)),l=vs(e,tk),c="".concat(n,"Id"),d=n[0],u=t;if(o.length&&(u=o.reduce(function(e,t){if(t.props[c]===r&&fy(t.props,"extendDomain")&&Ui(t.props[d])){var n=t.props[d];return[Math.min(e[0],n),Math.max(e[1],n)]}return e},u)),l.length){var h="".concat(d,"1"),p="".concat(d,"2");u=l.reduce(function(e,t){if(t.props[c]===r&&fy(t.props,"extendDomain")&&Ui(t.props[h])&&Ui(t.props[p])){var n=t.props[h],a=t.props[p];return[Math.min(e[0],n,a),Math.max(e[1],n,a)]}return e},u)}return a&&a.length&&(u=a.reduce(function(e,t){return Ui(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e},u)),u},ik=r(7283),sk=new(r.n(ik)()),ok="recharts.syncMouseEvents";function lk(e){return lk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lk(e)}function ck(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uk(n.key),n)}}function dk(e,t,r){return(t=uk(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uk(e){var t=function(e,t){if("object"!=lk(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lk(t)?t:t+""}var hk=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),dk(this,"activeIndex",0),dk(this,"coordinateList",[]),dk(this,"layout","horizontal")},t=[{key:"setDetails",value:function(e){var t,r=e.coordinateList,n=void 0===r?null:r,a=e.container,i=void 0===a?null:a,s=e.layout,o=void 0===s?null:s,l=e.offset,c=void 0===l?null:l,d=e.mouseHandlerCallback,u=void 0===d?null:d;this.coordinateList=null!==(t=null!==n&&void 0!==n?n:this.coordinateList)&&void 0!==t?t:[],this.container=null!==i&&void 0!==i?i:this.container,this.layout=null!==o&&void 0!==o?o:this.layout,this.offset=null!==c&&void 0!==c?c:this.offset,this.mouseHandlerCallback=null!==u&&void 0!==u?u:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var r=this.container.getBoundingClientRect(),n=r.x,a=r.y,i=r.height,s=this.coordinateList[this.activeIndex].coordinate,o=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,c=n+s+o,d=a+this.offset.top+i/2+l;this.mouseHandlerCallback({pageX:c,pageY:d})}}}],t&&ck(e.prototype,t),r&&ck(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function pk(){}function mk(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function fk(e){this._context=e}function gk(e){this._context=e}function xk(e){this._context=e}fk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mk(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mk(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},gk.prototype={areaStart:pk,areaEnd:pk,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:mk(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},xk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:mk(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class bk{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function yk(e){this._context=e}function vk(e){this._context=e}function _k(e){return new vk(e)}function kk(e){return e<0?-1:1}function jk(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),s=(r-e._y1)/(a||n<0&&-0),o=(i*a+s*n)/(n+a);return(kk(i)+kk(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(o))||0}function wk(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Nk(e,t,r){var n=e._x0,a=e._y0,i=e._x1,s=e._y1,o=(i-n)/3;e._context.bezierCurveTo(n+o,a+o*t,i-o,s-o*r,i,s)}function Sk(e){this._context=e}function Ok(e){this._context=new Ck(e)}function Ck(e){this._context=e}function Ek(e){this._context=e}function Pk(e){var t,r,n=e.length-1,a=new Array(n),i=new Array(n),s=new Array(n);for(a[0]=0,i[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,i[t]=4,s[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,i[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/i[t-1],i[t]-=r,s[t]-=r*s[t-1];for(a[n-1]=s[n-1]/i[n-1],t=n-2;t>=0;--t)a[t]=(s[t]-a[t+1])/i[t];for(i[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Ak(e,t){this._context=e,this._t=t}function Mk(e){return e[0]}function Tk(e){return e[1]}function Dk(e,t){var r=cl(!0),n=null,a=_k,i=null,s=Al(o);function o(o){var l,c,d,u=(o=Yg(o)).length,h=!1;for(null==n&&(i=a(d=s())),l=0;l<=u;++l)!(l<u&&r(c=o[l],l,o))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(c,l,o),+t(c,l,o));if(d)return i=null,d+""||null}return e="function"===typeof e?e:void 0===e?Mk:cl(e),t="function"===typeof t?t:void 0===t?Tk:cl(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:cl(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:cl(+e),o):t},o.defined=function(e){return arguments.length?(r="function"===typeof e?e:cl(!!e),o):r},o.curve=function(e){return arguments.length?(a=e,null!=n&&(i=a(n)),o):a},o.context=function(e){return arguments.length?(null==e?n=i=null:i=a(n=e),o):n},o}function Rk(e,t,r){var n=null,a=cl(!0),i=null,s=_k,o=null,l=Al(c);function c(c){var d,u,h,p,m,f=(c=Yg(c)).length,g=!1,x=new Array(f),b=new Array(f);for(null==i&&(o=s(m=l())),d=0;d<=f;++d){if(!(d<f&&a(p=c[d],d,c))===g)if(g=!g)u=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=d-1;h>=u;--h)o.point(x[h],b[h]);o.lineEnd(),o.areaEnd()}g&&(x[d]=+e(p,d,c),b[d]=+t(p,d,c),o.point(n?+n(p,d,c):x[d],r?+r(p,d,c):b[d]))}if(m)return o=null,m+""||null}function d(){return Dk().defined(a).curve(s).context(i)}return e="function"===typeof e?e:void 0===e?Mk:cl(+e),t="function"===typeof t?t:cl(void 0===t?0:+t),r="function"===typeof r?r:void 0===r?Tk:cl(+r),c.x=function(t){return arguments.length?(e="function"===typeof t?t:cl(+t),n=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:cl(+t),c):e},c.x1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:cl(+e),c):n},c.y=function(e){return arguments.length?(t="function"===typeof e?e:cl(+e),r=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:cl(+e),c):t},c.y1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:cl(+e),c):r},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(r)},c.lineX1=function(){return d().x(n).y(t)},c.defined=function(e){return arguments.length?(a="function"===typeof e?e:cl(!!e),c):a},c.curve=function(e){return arguments.length?(s=e,null!=i&&(o=s(i)),c):s},c.context=function(e){return arguments.length?(null==e?i=o=null:o=s(i=e),c):i},c}function Ik(e){return Ik="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ik(e)}function Lk(){return Lk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lk.apply(this,arguments)}function Fk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function zk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fk(Object(r),!0).forEach(function(t){Uk(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fk(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Uk(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Ik(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ik(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ik(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}yk.prototype={areaStart:pk,areaEnd:pk,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},vk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},Sk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Nk(this,this._t0,wk(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Nk(this,wk(this,r=jk(this,e,t)),r);break;default:Nk(this,this._t0,r=jk(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(Ok.prototype=Object.create(Sk.prototype)).point=function(e,t){Sk.prototype.point.call(this,t,e)},Ck.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}},Ek.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=Pk(e),a=Pk(t),i=0,s=1;s<r;++i,++s)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[s],t[s]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Ak.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};var Bk={curveBasisClosed:function(e){return new gk(e)},curveBasisOpen:function(e){return new xk(e)},curveBasis:function(e){return new fk(e)},curveBumpX:function(e){return new bk(e,!0)},curveBumpY:function(e){return new bk(e,!1)},curveLinearClosed:function(e){return new yk(e)},curveLinear:_k,curveMonotoneX:function(e){return new Sk(e)},curveMonotoneY:function(e){return new Ok(e)},curveNatural:function(e){return new Ek(e)},curveStep:function(e){return new Ak(e,.5)},curveStepAfter:function(e){return new Ak(e,1)},curveStepBefore:function(e){return new Ak(e,0)}},Vk=function(e){return e.x===+e.x&&e.y===+e.y},Hk=function(e){return e.x},Wk=function(e){return e.y},$k=function(e){var t,r=e.type,n=void 0===r?"linear":r,a=e.points,i=void 0===a?[]:a,s=e.baseLine,o=e.layout,l=e.connectNulls,c=void 0!==l&&l,d=function(e,t){if(Zi()(e))return e;var r="curve".concat(Uo()(e));return"curveMonotone"!==r&&"curveBump"!==r||!t?Bk[r]||_k:Bk["".concat(r).concat("vertical"===t?"Y":"X")]}(n,o),u=c?i.filter(function(e){return Vk(e)}):i;if(Array.isArray(s)){var h=c?s.filter(function(e){return Vk(e)}):s,p=u.map(function(e,t){return zk(zk({},e),{},{base:h[t]})});return(t="vertical"===o?Rk().y(Wk).x1(Hk).x0(function(e){return e.base.x}):Rk().x(Hk).y1(Wk).y0(function(e){return e.base.y})).defined(Vk).curve(d),t(p)}return(t="vertical"===o&&Ui(s)?Rk().y(Wk).x1(Hk).x0(s):Ui(s)?Rk().x(Hk).y1(Wk).y0(s):Dk().x(Hk).y(Wk)).defined(Vk).curve(d),t(u)},qk=function(e){var t=e.className,r=e.points,n=e.path,i=e.pathRef;if((!r||!r.length)&&!n)return null;var s=r&&r.length?$k(e):n;return a.createElement("path",Lk({},Ns(e,!1),cs(e),{className:Oi("recharts-curve",t),d:s,ref:i}))};function Gk(e){return Gk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gk(e)}var Kk=["x","y","top","left","width","height","className"];function Yk(){return Yk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yk.apply(this,arguments)}function Xk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Jk(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Gk(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Gk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gk(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qk(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Zk=function(e,t,r,n,a,i){return"M".concat(e,",").concat(a,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r)},ej=function(e){var t=e.x,r=void 0===t?0:t,n=e.y,i=void 0===n?0:n,s=e.top,o=void 0===s?0:s,l=e.left,c=void 0===l?0:l,d=e.width,u=void 0===d?0:d,h=e.height,p=void 0===h?0:h,m=e.className,f=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xk(Object(r),!0).forEach(function(t){Jk(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xk(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({x:r,y:i,top:o,left:c,width:u,height:p},Qk(e,Kk));return Ui(r)&&Ui(i)&&Ui(u)&&Ui(p)&&Ui(o)&&Ui(c)?a.createElement("path",Yk({},Ns(f,!0),{className:Oi("recharts-cross",m),d:Zk(r,i,u,p,o,c)})):null};function tj(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle;return{points:[Zb(t,r,n,a),Zb(t,r,n,i)],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function rj(e,t,r){var n,a,i,s;if("horizontal"===e)i=n=t.x,a=r.top,s=r.top+r.height;else if("vertical"===e)s=a=t.y,n=r.left,i=r.left+r.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return tj(t);var o=t.cx,l=t.cy,c=t.innerRadius,d=t.outerRadius,u=t.angle,h=Zb(o,l,c,u),p=Zb(o,l,d,u);n=h.x,a=h.y,i=p.x,s=p.y}return[{x:n,y:a},{x:i,y:s}]}function nj(e){return nj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nj(e)}function aj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ij(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aj(Object(r),!0).forEach(function(t){sj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function sj(e,t,r){return t=function(e){var t=function(e,t){if("object"!=nj(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=nj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nj(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oj(e){var t,r,n,i=e.element,s=e.tooltipEventType,o=e.isActive,l=e.activeCoordinate,c=e.activePayload,d=e.offset,u=e.activeTooltipIndex,h=e.tooltipAxisBandSize,p=e.layout,m=e.chartName,f=null!==(t=i.props.cursor)&&void 0!==t?t:null===(r=i.type.defaultProps)||void 0===r?void 0:r.cursor;if(!i||!f||!o||!l||"ScatterChart"!==m&&"axis"!==s)return null;var g=qk;if("ScatterChart"===m)n=l,g=ej;else if("BarChart"===m)n=function(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-a:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-a,width:"horizontal"===e?n:r.width-1,height:"horizontal"===e?r.height-1:n}}(p,l,d,h),g=tu;else if("radial"===p){var x=tj(l),b=x.cx,y=x.cy,v=x.radius;n={cx:b,cy:y,startAngle:x.startAngle,endAngle:x.endAngle,innerRadius:v,outerRadius:v},g=nv}else n={points:rj(p,l,d)},g=qk;var _=ij(ij(ij(ij({stroke:"#ccc",pointerEvents:"none"},d),n),Ns(f,!1)),{},{payload:c,payloadIndex:u,className:Oi("recharts-tooltip-cursor",f.className)});return(0,a.isValidElement)(f)?(0,a.cloneElement)(f,_):(0,a.createElement)(g,_)}var lj=["item"],cj=["children","className","width","height","style","compact","title","desc"];function dj(e){return dj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dj(e)}function uj(){return uj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uj.apply(this,arguments)}function hj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||vj(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pj(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Nj(n.key),n)}}function fj(e,t,r){return t=xj(t),function(e,t){if(t&&("object"===dj(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,gj()?Reflect.construct(t,r||[],xj(e).constructor):t.apply(e,r))}function gj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(gj=function(){return!!e})()}function xj(e){return xj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xj(e)}function bj(e,t){return bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bj(e,t)}function yj(e){return function(e){if(Array.isArray(e))return _j(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||vj(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vj(e,t){if(e){if("string"===typeof e)return _j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_j(e,t):void 0}}function _j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function jj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kj(Object(r),!0).forEach(function(t){wj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function wj(e,t,r){return(t=Nj(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nj(e){var t=function(e,t){if("object"!=dj(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=dj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dj(t)?t:t+""}var Sj={xAxis:["bottom","top"],yAxis:["left","right"]},Oj={width:"100%",height:"100%"},Cj={x:0,y:0};function Ej(e){return e}var Pj=function(e,t){var r=t.graphicalItems,n=t.dataStartIndex,a=t.dataEndIndex,i=(null!==r&&void 0!==r?r:[]).reduce(function(e,t){var r=t.props.data;return r&&r.length?[].concat(yj(e),yj(r)):e},[]);return i.length>0?i:e&&e.length&&Ui(n)&&Ui(a)?e.slice(n,a+1):[]};function Aj(e){return"number"===e?[0,"auto"]:void 0}var Mj=function(e,t,r,n){var a=e.graphicalItems,i=e.tooltipAxis,s=Pj(t,e);return r<0||!a||!a.length||r>=s.length?null:a.reduce(function(a,o){var l,c,d=null!==(l=o.props.data)&&void 0!==l?l:t;(d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1)),i.dataKey&&!i.allowDuplicatedCategory)?c=Gi(void 0===d?s:d,i.dataKey,n):c=d&&d[r]||s[r];return c?[].concat(yj(a),[Cb(o,c)]):a},[])},Tj=function(e,t,r,n){var a=n||{x:e.chartX,y:e.chartY},i=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(a,r),s=e.orderedTooltipTicks,o=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,i=-1,s=null!==(t=null===r||void 0===r?void 0:r.length)&&void 0!==t?t:0;if(s<=1)return 0;if(a&&"angleAxis"===a.axisType&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var o=a.range,l=0;l<s;l++){var c=l>0?n[l-1].coordinate:n[s-1].coordinate,d=n[l].coordinate,u=l>=s-1?n[0].coordinate:n[l+1].coordinate,h=void 0;if(Fi(d-c)!==Fi(u-d)){var p=[];if(Fi(u-d)===Fi(o[1]-o[0])){h=u;var m=d+o[1]-o[0];p[0]=Math.min(m,(m+c)/2),p[1]=Math.max(m,(m+c)/2)}else{h=c;var f=u+o[1]-o[0];p[0]=Math.min(d,(f+d)/2),p[1]=Math.max(d,(f+d)/2)}var g=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>g[0]&&e<=g[1]||e>=p[0]&&e<=p[1]){i=n[l].index;break}}else{var x=Math.min(c,u),b=Math.max(c,u);if(e>(x+d)/2&&e<=(b+d)/2){i=n[l].index;break}}}else for(var y=0;y<s;y++)if(0===y&&e<=(r[y].coordinate+r[y+1].coordinate)/2||y>0&&y<s-1&&e>(r[y].coordinate+r[y-1].coordinate)/2&&e<=(r[y].coordinate+r[y+1].coordinate)/2||y===s-1&&e>(r[y].coordinate+r[y-1].coordinate)/2){i=r[y].index;break}return i}(i,s,l,o);if(c>=0&&l){var d=l[c]&&l[c].value,u=Mj(e,t,c,d),h=function(e,t,r,n){var a=t.find(function(e){return e&&e.index===r});if(a){if("horizontal"===e)return{x:a.coordinate,y:n.y};if("vertical"===e)return{x:n.x,y:a.coordinate};if("centric"===e){var i=a.coordinate,s=n.radius;return jj(jj(jj({},n),Zb(n.cx,n.cy,s,i)),{},{angle:i,radius:s})}var o=a.coordinate,l=n.angle;return jj(jj(jj({},n),Zb(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return Cj}(r,s,c,a);return{activeTooltipIndex:c,activeLabel:d,activePayload:u,activeCoordinate:h}}return null},Dj=function(e,t){var r=t.axes,n=t.graphicalItems,a=t.axisType,i=t.axisIdKey,s=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=e.stackOffset,h=hb(c,a);return r.reduce(function(t,r){var p,m=void 0!==r.type.defaultProps?jj(jj({},r.type.defaultProps),r.props):r.props,f=m.type,g=m.dataKey,x=m.allowDataOverflow,b=m.allowDuplicatedCategory,y=m.scale,v=m.ticks,_=m.includeHidden,k=m[i];if(t[k])return t;var j,w,N,S=Pj(e.data,{graphicalItems:n.filter(function(e){var t;return(i in e.props?e.props[i]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[i])===k}),dataStartIndex:o,dataEndIndex:l}),O=S.length;(function(e,t,r){if("number"===r&&!0===t&&Array.isArray(e)){var n=null===e||void 0===e?void 0:e[0],a=null===e||void 0===e?void 0:e[1];if(n&&a&&Ui(n)&&Ui(a))return!0}return!1})(m.domain,x,f)&&(j=Nb(m.domain,null,x),!h||"number"!==f&&"auto"===y||(N=lb(S,g,"category")));var C=Aj(f);if(!j||0===j.length){var E,P=null!==(E=m.domain)&&void 0!==E?E:C;if(g){if(j=lb(S,g,f),"category"===f&&h){var A=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++){if(r[e[n]])return!0;r[e[n]]=!0}return!1}(j);b&&A?(w=j,j=Ls()(0,O)):b||(j=Ob(P,j,r).reduce(function(e,t){return e.indexOf(t)>=0?e:[].concat(yj(e),[t])},[]))}else if("category"===f)j=b?j.filter(function(e){return""!==e&&!Ji()(e)}):Ob(P,j,r).reduce(function(e,t){return e.indexOf(t)>=0||""===t||Ji()(t)?e:[].concat(yj(e),[t])},[]);else if("number"===f){var M=function(e,t,r,n,a){var i=t.map(function(t){return db(e,t,r,a,n)}).filter(function(e){return!Ji()(e)});return i&&i.length?i.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]):null}(S,n.filter(function(e){var t,r,n=i in e.props?e.props[i]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[i],a="hide"in e.props?e.props.hide:null===(r=e.type.defaultProps)||void 0===r?void 0:r.hide;return n===k&&(_||!a)}),g,a,c);M&&(j=M)}!h||"number"!==f&&"auto"===y||(N=lb(S,g,"category"))}else j=h?Ls()(0,O):s&&s[k]&&s[k].hasStack&&"number"===f?"expand"===u?[0,1]:kb(s[k].stackGroups,o,l):ub(S,n.filter(function(e){var t=i in e.props?e.props[i]:e.type.defaultProps[i],r="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===k&&(_||!r)}),f,c,!0);if("number"===f)j=ak(d,j,k,a,v),P&&(j=Nb(P,j,x));else if("category"===f&&P){var T=P;j.every(function(e){return T.indexOf(e)>=0})&&(j=T)}}return jj(jj({},t),{},wj({},k,jj(jj({},m),{},{axisType:a,domain:j,categoricalDomain:N,duplicateDomain:w,originalDomain:null!==(p=m.domain)&&void 0!==p?p:C,isCategorical:h,layout:c})))},{})},Rj=function(e,t){var r=t.axisType,n=void 0===r?"xAxis":r,a=t.AxisComp,i=t.graphicalItems,s=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.children,d="".concat(n,"Id"),u=vs(c,a),h={};return u&&u.length?h=Dj(e,{axes:u,graphicalItems:i,axisType:n,axisIdKey:d,stackGroups:s,dataStartIndex:o,dataEndIndex:l}):i&&i.length&&(h=function(e,t){var r=t.graphicalItems,n=t.Axis,a=t.axisType,i=t.axisIdKey,s=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=Pj(e.data,{graphicalItems:r,dataStartIndex:o,dataEndIndex:l}),h=u.length,p=hb(c,a),m=-1;return r.reduce(function(e,t){var f,g=(void 0!==t.type.defaultProps?jj(jj({},t.type.defaultProps),t.props):t.props)[i],x=Aj("number");return e[g]?e:(m++,p?f=Ls()(0,h):s&&s[g]&&s[g].hasStack?(f=kb(s[g].stackGroups,o,l),f=ak(d,f,g,a)):(f=Nb(x,ub(u,r.filter(function(e){var t,r,n=i in e.props?e.props[i]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[i],a="hide"in e.props?e.props.hide:null===(r=e.type.defaultProps)||void 0===r?void 0:r.hide;return n===g&&!a}),"number",c),n.defaultProps.allowDataOverflow),f=ak(d,f,g,a)),jj(jj({},e),{},wj({},g,jj(jj({axisType:a},n.defaultProps),{},{hide:!0,orientation:Ri()(Sj,"".concat(a,".").concat(m%2),null),domain:f,originalDomain:x,isCategorical:p,layout:c}))))},{})}(e,{Axis:a,graphicalItems:i,axisType:n,axisIdKey:d,stackGroups:s,dataStartIndex:o,dataEndIndex:l})),h},Ij=function(e){var t=e.children,r=e.defaultShowTooltip,n=_s(t,qb),a=0,i=0;return e.data&&0!==e.data.length&&(i=e.data.length-1),n&&n.props&&(n.props.startIndex>=0&&(a=n.props.startIndex),n.props.endIndex>=0&&(i=n.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:i,activeTooltipIndex:-1,isTooltipActive:Boolean(r)}},Lj=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Fj=function(e,t){var r=e.props,n=(e.graphicalItems,e.xAxisMap),a=void 0===n?{}:n,i=e.yAxisMap,s=void 0===i?{}:i,o=r.width,l=r.height,c=r.children,d=r.margin||{},u=_s(c,qb),h=_s(c,pc),p=Object.keys(s).reduce(function(e,t){var r=s[t],n=r.orientation;return r.mirror||r.hide?e:jj(jj({},e),{},wj({},n,e[n]+r.width))},{left:d.left||0,right:d.right||0}),m=Object.keys(a).reduce(function(e,t){var r=a[t],n=r.orientation;return r.mirror||r.hide?e:jj(jj({},e),{},wj({},n,Ri()(e,"".concat(n))+r.height))},{top:d.top||0,bottom:d.bottom||0}),f=jj(jj({},m),p),g=f.bottom;u&&(f.bottom+=u.props.height||qb.defaultProps.height),h&&t&&(f=function(e,t,r,n){var a=r.children,i=r.width,s=r.margin,o=i-(s.left||0)-(s.right||0),l=eb({children:a,legendWidth:o});if(l){var c=n||{},d=c.width,u=c.height,h=l.align,p=l.verticalAlign,m=l.layout;if(("vertical"===m||"horizontal"===m&&"middle"===p)&&"center"!==h&&Ui(e[h]))return ib(ib({},e),{},sb({},h,e[h]+(d||0)));if(("horizontal"===m||"vertical"===m&&"center"===h)&&"middle"!==p&&Ui(e[p]))return ib(ib({},e),{},sb({},p,e[p]+(u||0)))}return e}(f,0,r,t));var x=o-f.left-f.right,b=l-f.top-f.bottom;return jj(jj({brushBottom:g},f),{},{width:Math.max(x,0),height:Math.max(b,0)})},zj=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},Uj=["type","layout","connectNulls","ref"],Bj=["key"];function Vj(e){return Vj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vj(e)}function Hj(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Wj(){return Wj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wj.apply(this,arguments)}function $j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function qj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$j(Object(r),!0).forEach(function(t){ew(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$j(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Gj(e){return function(e){if(Array.isArray(e))return Kj(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Kj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kj(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Yj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tw(n.key),n)}}function Xj(e,t,r){return t=Qj(t),function(e,t){if(t&&("object"===Vj(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Jj()?Reflect.construct(t,r||[],Qj(e).constructor):t.apply(e,r))}function Jj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Jj=function(){return!!e})()}function Qj(e){return Qj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qj(e)}function Zj(e,t){return Zj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zj(e,t)}function ew(e,t,r){return(t=tw(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tw(e){var t=function(e,t){if("object"!=Vj(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Vj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vj(t)?t:t+""}var rw=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return ew(e=Xj(this,t,[].concat(n)),"state",{isAnimationFinished:!0,totalLength:0}),ew(e,"generateSimpleStrokeDasharray",function(e,t){return"".concat(t,"px ").concat(e-t,"px")}),ew(e,"getStrokeDasharray",function(r,n,a){var i=a.reduce(function(e,t){return e+t});if(!i)return e.generateSimpleStrokeDasharray(n,r);for(var s=Math.floor(r/i),o=r%i,l=n-r,c=[],d=0,u=0;d<a.length;u+=a[d],++d)if(u+a[d]>o){c=[].concat(Gj(a.slice(0,d)),[o-u]);break}var h=c.length%2===0?[0,l]:[l];return[].concat(Gj(t.repeat(a,s)),Gj(c),h).map(function(e){return"".concat(e,"px")}).join(", ")}),ew(e,"id",Hi("recharts-line-")),ew(e,"pathRef",function(t){e.mainCurve=t}),ew(e,"handleAnimationEnd",function(){e.setState({isAnimationFinished:!0}),e.props.onAnimationEnd&&e.props.onAnimationEnd()}),ew(e,"handleAnimationStart",function(){e.setState({isAnimationFinished:!1}),e.props.onAnimationStart&&e.props.onAnimationStart()}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zj(e,t)}(t,e),r=t,n=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.points,i=r.xAxis,s=r.yAxis,o=r.layout,l=vs(r.children,Yx);if(!l)return null;var c=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:ob(e.payload,t)}},d={clipPath:e?"url(#clipPath-".concat(t,")"):null};return a.createElement(Ys,d,l.map(function(e){return a.cloneElement(e,{key:"bar-".concat(e.props.dataKey),data:n,xAxis:i,yAxis:s,layout:o,dataPointFormatter:c})}))}},{key:"renderDots",value:function(e,r,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.dot,o=i.points,l=i.dataKey,c=Ns(this.props,!1),d=Ns(s,!0),u=o.map(function(e,r){var n=qj(qj(qj({key:"dot-".concat(r),r:3},c),d),{},{index:r,cx:e.x,cy:e.y,value:e.value,dataKey:l,payload:e.payload,points:o});return t.renderDotItem(s,n)}),h={clipPath:e?"url(#clipPath-".concat(r?"":"dots-").concat(n,")"):null};return a.createElement(Ys,Wj({className:"recharts-line-dots",key:"dots"},h),u)}},{key:"renderCurveStatically",value:function(e,t,r,n){var i=this.props,s=i.type,o=i.layout,l=i.connectNulls,c=(i.ref,Hj(i,Uj)),d=qj(qj(qj({},Ns(c,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:t?"url(#clipPath-".concat(r,")"):null,points:e},n),{},{type:s,layout:o,connectNulls:l});return a.createElement(qk,Wj({},d,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,t){var r=this,n=this.props,i=n.points,s=n.strokeDasharray,o=n.isAnimationActive,l=n.animationBegin,c=n.animationDuration,d=n.animationEasing,u=n.animationId,h=n.animateNewValues,p=n.width,m=n.height,f=this.state,g=f.prevPoints,x=f.totalLength;return a.createElement(Wd,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"line-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var a=n.t;if(g){var o=g.length/i.length,l=i.map(function(e,t){var r=Math.floor(t*o);if(g[r]){var n=g[r],i=qi(n.x,e.x),s=qi(n.y,e.y);return qj(qj({},e),{},{x:i(a),y:s(a)})}if(h){var l=qi(2*p,e.x),c=qi(m/2,e.y);return qj(qj({},e),{},{x:l(a),y:c(a)})}return qj(qj({},e),{},{x:e.x,y:e.y})});return r.renderCurveStatically(l,e,t)}var c,d=qi(0,x)(a);if(s){var u="".concat(s).split(/[,\s]+/gim).map(function(e){return parseFloat(e)});c=r.getStrokeDasharray(d,x,u)}else c=r.generateSimpleStrokeDasharray(x,d);return r.renderCurveStatically(i,e,t,{strokeDasharray:c})})}},{key:"renderCurve",value:function(e,t){var r=this.props,n=r.points,a=r.isAnimationActive,i=this.state,s=i.prevPoints,o=i.totalLength;return a&&n&&n.length&&(!s&&o>0||!sx()(s,n))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(n,e,t)}},{key:"render",value:function(){var e,t=this.props,r=t.hide,n=t.dot,i=t.points,s=t.className,o=t.xAxis,l=t.yAxis,c=t.top,d=t.left,u=t.width,h=t.height,p=t.isAnimationActive,m=t.id;if(r||!i||!i.length)return null;var f=this.state.isAnimationFinished,g=1===i.length,x=Oi("recharts-line",s),b=o&&o.allowDataOverflow,y=l&&l.allowDataOverflow,v=b||y,_=Ji()(m)?this.id:m,k=null!==(e=Ns(n,!1))&&void 0!==e?e:{r:3,strokeWidth:2},j=k.r,w=void 0===j?3:j,N=k.strokeWidth,S=void 0===N?2:N,O=(function(e){return e&&"object"===ms(e)&&"clipDot"in e}(n)?n:{}).clipDot,C=void 0===O||O,E=2*w+S;return a.createElement(Ys,{className:x},b||y?a.createElement("defs",null,a.createElement("clipPath",{id:"clipPath-".concat(_)},a.createElement("rect",{x:b?d:d-u/2,y:y?c:c-h/2,width:b?u:2*u,height:y?h:2*h})),!C&&a.createElement("clipPath",{id:"clipPath-dots-".concat(_)},a.createElement("rect",{x:d-E/2,y:c-E/2,width:u+E,height:h+E}))):null,!g&&this.renderCurve(v,_),this.renderErrorBar(v,_),(g||n)&&this.renderDots(v,C,_),(!p||f)&&Dy.renderCallByParent(this.props,i))}}],i=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var r=e.length%2!==0?[].concat(Gj(e),[0]):e,n=[],a=0;a<t;++a)n=[].concat(Gj(n),Gj(r));return n}},{key:"renderDotItem",value:function(e,t){var r;if(a.isValidElement(e))r=a.cloneElement(e,t);else if(Zi()(e))r=e(t);else{var n=t.key,i=Hj(t,Bj),s=Oi("recharts-line-dot","boolean"!==typeof e?e.className:"");r=a.createElement(fc,Wj({key:n},i,{className:s}))}return r}}],n&&Yj(r.prototype,n),i&&Yj(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(a.PureComponent);function nw(e,t,r){if(t<1)return[];if(1===t&&void 0===r)return e;for(var n=[],a=0;a<e.length;a+=t){if(void 0!==r&&!0!==r(e[a]))return;n.push(e[a])}return n}function aw(e,t,r){return function(e){var t=e.width,r=e.height,n=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=n*Math.PI/180,i=Math.atan(r/t),s=a>i&&a<Math.PI-i?r/Math.sin(a):t/Math.cos(a);return Math.abs(s)}({width:e.width+t.width,height:e.height+t.height},r)}function iw(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function sw(e){return sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sw(e)}function ow(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function lw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ow(Object(r),!0).forEach(function(t){cw(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ow(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function cw(e,t,r){return t=function(e){var t=function(e,t){if("object"!=sw(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=sw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sw(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dw(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,s=e.minTickGap,o=e.orientation,l=e.interval,c=e.tickFormatter,d=e.unit,u=e.angle;if(!a||!a.length||!n)return[];if(Ui(l)||jo.isSsr)return function(e,t){return nw(e,t+1)}(a,"number"===typeof l&&Ui(l)?l:0);var h=[],p="top"===o||"bottom"===o?"width":"height",m=d&&"width"===p?_u(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},f=function(e,n){var a=Zi()(c)?c(e.value,n):e.value;return"width"===p?aw(_u(a,{fontSize:t,letterSpacing:r}),m,u):_u(a,{fontSize:t,letterSpacing:r})[p]},g=a.length>=2?Fi(a[1].coordinate-a[0].coordinate):1,x=function(e,t,r){var n="width"===r,a=e.x,i=e.y,s=e.width,o=e.height;return 1===t?{start:n?a:i,end:n?a+s:i+o}:{start:n?a+s:i+o,end:n?a:i}}(i,g,p);return"equidistantPreserveStart"===l?function(e,t,r,n,a){for(var i,s=(n||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,h=function(){var t=null===n||void 0===n?void 0:n[c];if(void 0===t)return{v:nw(n,d)};var i,s=c,h=function(){return void 0===i&&(i=r(t,s)),i},p=t.coordinate,m=0===c||iw(e,p,h,u,l);m||(c=0,u=o,d+=1),m&&(u=p+e*(h()/2+a),c+=d)};d<=s.length;)if(i=h())return i.v;return[]}(g,x,f,a,s):(h="preserveStart"===l||"preserveStartEnd"===l?function(e,t,r,n,a,i){var s=(n||[]).slice(),o=s.length,l=t.start,c=t.end;if(i){var d=n[o-1],u=r(d,o-1),h=e*(d.coordinate+e*u/2-c);s[o-1]=d=lw(lw({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate}),iw(e,d.tickCoord,function(){return u},l,c)&&(c=d.tickCoord-e*(u/2+a),s[o-1]=lw(lw({},d),{},{isShow:!0}))}for(var p=i?o-1:o,m=function(t){var n,i=s[t],o=function(){return void 0===n&&(n=r(i,t)),n};if(0===t){var d=e*(i.coordinate-e*o()/2-l);s[t]=i=lw(lw({},i),{},{tickCoord:d<0?i.coordinate-d*e:i.coordinate})}else s[t]=i=lw(lw({},i),{},{tickCoord:i.coordinate});iw(e,i.tickCoord,o,l,c)&&(l=i.tickCoord+e*(o()/2+a),s[t]=lw(lw({},i),{},{isShow:!0}))},f=0;f<p;f++)m(f);return s}(g,x,f,a,s,"preserveStartEnd"===l):function(e,t,r,n,a){for(var i=(n||[]).slice(),s=i.length,o=t.start,l=t.end,c=function(t){var n,c=i[t],d=function(){return void 0===n&&(n=r(c,t)),n};if(t===s-1){var u=e*(c.coordinate+e*d()/2-l);i[t]=c=lw(lw({},c),{},{tickCoord:u>0?c.coordinate-u*e:c.coordinate})}else i[t]=c=lw(lw({},c),{},{tickCoord:c.coordinate});iw(e,c.tickCoord,d,o,l)&&(l=c.tickCoord-e*(d()/2+a),i[t]=lw(lw({},c),{},{isShow:!0}))},d=s-1;d>=0;d--)c(d);return i}(g,x,f,a,s),h.filter(function(e){return e.isShow}))}ew(rw,"displayName","Line"),ew(rw,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!jo.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),ew(rw,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,s=e.dataKey,o=e.bandSize,l=e.displayedData,c=e.offset,d=t.layout,u=l.map(function(e,t){var l=ob(e,s);return"horizontal"===d?{x:vb({axis:r,ticks:a,bandSize:o,entry:e,index:t}),y:Ji()(l)?null:n.scale(l),value:l,payload:e}:{x:Ji()(l)?null:r.scale(l),y:vb({axis:n,ticks:i,bandSize:o,entry:e,index:t}),value:l,payload:e}});return qj({points:u,layout:d},c)});var uw=["viewBox"],hw=["viewBox"],pw=["ticks"];function mw(e){return mw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mw(e)}function fw(){return fw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fw.apply(this,arguments)}function gw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function xw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gw(Object(r),!0).forEach(function(t){ww(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gw(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function bw(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function yw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Nw(n.key),n)}}function vw(e,t,r){return t=kw(t),function(e,t){if(t&&("object"===mw(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_w()?Reflect.construct(t,r||[],kw(e).constructor):t.apply(e,r))}function _w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_w=function(){return!!e})()}function kw(e){return kw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kw(e)}function jw(e,t){return jw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jw(e,t)}function ww(e,t,r){return(t=Nw(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nw(e){var t=function(e,t){if("object"!=mw(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mw(t)?t:t+""}var Sw=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=vw(this,t,[e])).state={fontSize:"",letterSpacing:""},r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jw(e,t)}(t,e),r=t,n=[{key:"shouldComponentUpdate",value:function(e,t){var r=e.viewBox,n=bw(e,uw),a=this.props,i=a.viewBox,s=bw(a,hw);return!ns(r,i)||!ns(n,s)||!ns(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,r,n,a,i,s,o=this.props,l=o.x,c=o.y,d=o.width,u=o.height,h=o.orientation,p=o.tickSize,m=o.mirror,f=o.tickMargin,g=m?-1:1,x=e.tickSize||p,b=Ui(e.tickCoord)?e.tickCoord:e.coordinate;switch(h){case"top":t=r=e.coordinate,s=(n=(a=c+ +!m*u)-g*x)-g*f,i=b;break;case"left":n=a=e.coordinate,i=(t=(r=l+ +!m*d)-g*x)-g*f,s=b;break;case"right":n=a=e.coordinate,i=(t=(r=l+ +m*d)+g*x)+g*f,s=b;break;default:t=r=e.coordinate,s=(n=(a=c+ +m*u)+g*x)+g*f,i=b}return{line:{x1:t,y1:n,x2:r,y2:a},tick:{x:i,y:s}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,r=t.orientation,n=t.mirror;switch(r){case"left":e=n?"start":"end";break;case"right":e=n?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,r=e.mirror,n="end";switch(t){case"left":case"right":n="middle";break;case"top":n=r?"start":"end";break;default:n=r?"end":"start"}return n}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,i=e.height,s=e.orientation,o=e.mirror,l=e.axisLine,c=xw(xw(xw({},Ns(this.props,!1)),Ns(l,!1)),{},{fill:"none"});if("top"===s||"bottom"===s){var d=+("top"===s&&!o||"bottom"===s&&o);c=xw(xw({},c),{},{x1:t,y1:r+d*i,x2:t+n,y2:r+d*i})}else{var u=+("left"===s&&!o||"right"===s&&o);c=xw(xw({},c),{},{x1:t+u*n,y1:r,x2:t+u*n,y2:r+i})}return a.createElement("line",fw({},c,{className:Oi("recharts-cartesian-axis-line",Ri()(l,"className"))}))}},{key:"renderTicks",value:function(e,r,n){var i=this,s=this.props,o=s.tickLine,l=s.stroke,c=s.tick,d=s.tickFormatter,u=s.unit,h=dw(xw(xw({},this.props),{},{ticks:e}),r,n),p=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),f=Ns(this.props,!1),g=Ns(c,!1),x=xw(xw({},f),{},{fill:"none"},Ns(o,!1)),b=h.map(function(e,r){var n=i.getTickLineCoord(e),s=n.line,b=n.tick,y=xw(xw(xw(xw({textAnchor:p,verticalAnchor:m},f),{},{stroke:"none",fill:l},g),b),{},{index:r,payload:e,visibleTicksCount:h.length,tickFormatter:d});return a.createElement(Ys,fw({className:"recharts-cartesian-axis-tick",key:"tick-".concat(e.value,"-").concat(e.coordinate,"-").concat(e.tickCoord)},ds(i.props,e,r)),o&&a.createElement("line",fw({},x,s,{className:Oi("recharts-cartesian-axis-tick-line",Ri()(o,"className"))})),c&&t.renderTickItem(c,y,"".concat(Zi()(d)?d(e.value,r):e.value).concat(u||"")))});return a.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var e=this,t=this.props,r=t.axisLine,n=t.width,i=t.height,s=t.ticksGenerator,o=t.className;if(t.hide)return null;var l=this.props,c=l.ticks,d=bw(l,pw),u=c;return Zi()(s)&&(u=c&&c.length>0?s(this.props):s(d)),n<=0||i<=0||!u||!u.length?null:a.createElement(Ys,{className:Oi("recharts-cartesian-axis",o),ref:function(t){e.layerReference=t}},r&&this.renderAxisLine(),this.renderTicks(u,this.state.fontSize,this.state.letterSpacing),py.renderCallByParent(this.props))}}],i=[{key:"renderTickItem",value:function(e,t,r){return a.isValidElement(e)?a.cloneElement(e,t):Zi()(e)?e(t):a.createElement(Xu,fw({},t,{className:"recharts-cartesian-axis-tick-value"}),r)}}],n&&yw(r.prototype,n),i&&yw(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(a.Component);function Ow(e){return Ow="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ow(e)}function Cw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Dw(n.key),n)}}function Ew(e,t,r){return t=Aw(t),function(e,t){if(t&&("object"===Ow(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Pw()?Reflect.construct(t,r||[],Aw(e).constructor):t.apply(e,r))}function Pw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Pw=function(){return!!e})()}function Aw(e){return Aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Aw(e)}function Mw(e,t){return Mw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mw(e,t)}function Tw(e,t,r){return(t=Dw(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dw(e){var t=function(e,t){if("object"!=Ow(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ow(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ow(t)?t:t+""}function Rw(){return Rw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rw.apply(this,arguments)}function Iw(e){var t=e.xAxisId,r=O_(),n=C_(),i=N_(t);return null==i?null:a.createElement(Sw,Rw({},i,{className:Oi("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(e){return mb(e,!0)}}))}ww(Sw,"displayName","CartesianAxis"),ww(Sw,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Lw=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ew(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mw(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return a.createElement(Iw,this.props)}}])&&Cw(r.prototype,n),i&&Cw(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(a.Component);function Fw(e){return Fw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fw(e)}function zw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$w(n.key),n)}}function Uw(e,t,r){return t=Vw(t),function(e,t){if(t&&("object"===Fw(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Bw()?Reflect.construct(t,r||[],Vw(e).constructor):t.apply(e,r))}function Bw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Bw=function(){return!!e})()}function Vw(e){return Vw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vw(e)}function Hw(e,t){return Hw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hw(e,t)}function Ww(e,t,r){return(t=$w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $w(e){var t=function(e,t){if("object"!=Fw(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Fw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fw(t)?t:t+""}function qw(){return qw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qw.apply(this,arguments)}Tw(Lw,"displayName","XAxis"),Tw(Lw,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});var Gw=function(e){var t=e.yAxisId,r=O_(),n=C_(),i=S_(t);return null==i?null:a.createElement(Sw,qw({},i,{className:Oi("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(e){return mb(e,!0)}}))},Kw=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Uw(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hw(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return a.createElement(Gw,this.props)}}])&&zw(r.prototype,n),i&&zw(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(a.Component);Ww(Kw,"displayName","YAxis"),Ww(Kw,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var Yw=function(e){var t=e.chartName,r=e.GraphicalChild,n=e.defaultTooltipEventType,i=void 0===n?"axis":n,s=e.validateTooltipEventTypes,o=void 0===s?["axis"]:s,l=e.axisComponents,c=e.legendContent,d=e.formatAxisMap,u=e.defaultProps,h=function(e,t){var r=t.graphicalItems,n=t.stackGroups,a=t.offset,i=t.updateId,s=t.dataStartIndex,o=t.dataEndIndex,c=e.barSize,d=e.layout,u=e.barGap,h=e.barCategoryGap,p=e.maxBarSize,m=Lj(d),f=m.numericAxisName,g=m.cateAxisName,x=function(e){return!(!e||!e.length)&&e.some(function(e){var t=gs(e&&e.type);return t&&t.indexOf("Bar")>=0})}(r),b=[];return r.forEach(function(r,m){var y=Pj(e.data,{graphicalItems:[r],dataStartIndex:s,dataEndIndex:o}),v=void 0!==r.type.defaultProps?jj(jj({},r.type.defaultProps),r.props):r.props,_=v.dataKey,k=v.maxBarSize,j=v["".concat(f,"Id")],w=v["".concat(g,"Id")],N=l.reduce(function(e,r){var n=t["".concat(r.axisType,"Map")],a=v["".concat(r.axisType,"Id")];n&&n[a]||"zAxis"===r.axisType||Bs(!1);var i=n[a];return jj(jj({},e),{},wj(wj({},r.axisType,i),"".concat(r.axisType,"Ticks"),mb(i)))},{}),S=N[g],O=N["".concat(g,"Ticks")],C=n&&n[j]&&n[j].hasStack&&function(e,t){var r,n=(null!==(r=e.type)&&void 0!==r&&r.defaultProps?ib(ib({},e.type.defaultProps),e.props):e.props).stackId;if(Bi(n)){var a=t[n];if(a){var i=a.items.indexOf(e);return i>=0?a.stackedData[i]:null}}return null}(r,n[j].stackGroups),E=gs(r.type).indexOf("Bar")>=0,P=Sb(S,O),A=[],M=x&&function(e){var t=e.barSize,r=e.totalSize,n=e.stackGroups,a=void 0===n?{}:n;if(!a)return{};for(var i={},s=Object.keys(a),o=0,l=s.length;o<l;o++)for(var c=a[s[o]].stackGroups,d=Object.keys(c),u=0,h=d.length;u<h;u++){var p=c[d[u]],m=p.items,f=p.cateAxisId,g=m.filter(function(e){return gs(e.type).indexOf("Bar")>=0});if(g&&g.length){var x=g[0].type.defaultProps,b=void 0!==x?ib(ib({},x),g[0].props):g[0].props,y=b.barSize,v=b[f];i[v]||(i[v]=[]);var _=Ji()(y)?t:y;i[v].push({item:g[0],stackList:g.slice(1),barSize:Ji()(_)?void 0:Wi(_,r,0)})}}return i}({barSize:c,stackGroups:n,totalSize:zj(N,g)});if(E){var T,D,R=Ji()(k)?p:k,I=null!==(T=null!==(D=Sb(S,O,!0))&&void 0!==D?D:R)&&void 0!==T?T:0;A=function(e){var t=e.barGap,r=e.barCategoryGap,n=e.bandSize,a=e.sizeList,i=void 0===a?[]:a,s=e.maxBarSize,o=i.length;if(o<1)return null;var l,c=Wi(t,n,0,!0),d=[];if(i[0].barSize===+i[0].barSize){var u=!1,h=n/o,p=i.reduce(function(e,t){return e+t.barSize||0},0);(p+=(o-1)*c)>=n&&(p-=(o-1)*c,c=0),p>=n&&h>0&&(u=!0,p=o*(h*=.9));var m={offset:((n-p)/2|0)-c,size:0};l=i.reduce(function(e,t){var r={item:t.item,position:{offset:m.offset+m.size+c,size:u?h:t.barSize}},n=[].concat(rb(e),[r]);return m=n[n.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){n.push({item:e,position:m})}),n},d)}else{var f=Wi(r,n,0,!0);n-2*f-(o-1)*c<=0&&(c=0);var g=(n-2*f-(o-1)*c)/o;g>1&&(g>>=0);var x=s===+s?Math.min(g,s):g;l=i.reduce(function(e,t,r){var n=[].concat(rb(e),[{item:t.item,position:{offset:f+(g+c)*r+(g-x)/2,size:x}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){n.push({item:e,position:n[n.length-1].position})}),n},d)}return l}({barGap:u,barCategoryGap:h,bandSize:I!==P?I:P,sizeList:M[w],maxBarSize:R}),I!==P&&(A=A.map(function(e){return jj(jj({},e),{},{position:jj(jj({},e.position),{},{offset:e.position.offset-I/2})})}))}var L,F,z=r&&r.type&&r.type.getComposedData;z&&b.push({props:jj(jj({},z(jj(jj({},N),{},{displayedData:y,props:e,dataKey:_,item:r,bandSize:P,barPosition:A,offset:a,stackedData:C,layout:d,dataStartIndex:s,dataEndIndex:o}))),{},wj(wj(wj({key:r.key||"item-".concat(m)},f,N[f]),g,N[g]),"animationId",i)),childIndex:(L=r,F=e.children,ys(F).indexOf(L)),item:r})}),b},p=function(e,n){var a=e.props,i=e.dataStartIndex,s=e.dataEndIndex,o=e.updateId;if(!ks({props:a}))return null;var c=a.children,u=a.layout,p=a.stackOffset,m=a.data,f=a.reverseStackOrder,g=Lj(u),x=g.numericAxisName,b=g.cateAxisName,y=vs(c,r),v=function(e,t,r,n,a,i){if(!e)return null;var s=(i?t.reverse():t).reduce(function(e,t){var a,i=null!==(a=t.type)&&void 0!==a&&a.defaultProps?ib(ib({},t.type.defaultProps),t.props):t.props,s=i.stackId;if(i.hide)return e;var o=i[r],l=e[o]||{hasStack:!1,stackGroups:{}};if(Bi(s)){var c=l.stackGroups[s]||{numericAxisId:r,cateAxisId:n,items:[]};c.items.push(t),l.hasStack=!0,l.stackGroups[s]=c}else l.stackGroups[Hi("_stackId_")]={numericAxisId:r,cateAxisId:n,items:[t]};return ib(ib({},e),{},sb({},o,l))},{});return Object.keys(s).reduce(function(t,i){var o=s[i];return o.hasStack&&(o.stackGroups=Object.keys(o.stackGroups).reduce(function(t,i){var s=o.stackGroups[i];return ib(ib({},t),{},sb({},i,{numericAxisId:r,cateAxisId:n,items:s.items,stackedData:yb(e,s.items,a)}))},{})),ib(ib({},t),{},sb({},i,o))},{})}(m,y,"".concat(x,"Id"),"".concat(b,"Id"),p,f),_=l.reduce(function(e,t){var r="".concat(t.axisType,"Map");return jj(jj({},e),{},wj({},r,Rj(a,jj(jj({},t),{},{graphicalItems:y,stackGroups:t.axisType===x&&v,dataStartIndex:i,dataEndIndex:s}))))},{}),k=Fj(jj(jj({},_),{},{props:a,graphicalItems:y}),null===n||void 0===n?void 0:n.legendBBox);Object.keys(_).forEach(function(e){_[e]=d(a,_[e],k,e.replace("Map",""),t)});var j=function(e){var t=$i(e),r=mb(t,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:zs()(r,function(e){return e.coordinate}),tooltipAxis:t,tooltipAxisBandSize:Sb(t,r)}}(_["".concat(b,"Map")]),w=h(a,jj(jj({},_),{},{dataStartIndex:i,dataEndIndex:s,updateId:o,graphicalItems:y,stackGroups:v,offset:k}));return jj(jj({formattedGraphicalItems:w,graphicalItems:y,offset:k,stackGroups:v},j),_)},m=function(e){function r(e){var n,i,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),wj(s=fj(this,r,[e]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),wj(s,"accessibilityManager",new hk),wj(s,"handleLegendBBoxUpdate",function(e){if(e){var t=s.state,r=t.dataStartIndex,n=t.dataEndIndex,a=t.updateId;s.setState(jj({legendBBox:e},p({props:s.props,dataStartIndex:r,dataEndIndex:n,updateId:a},jj(jj({},s.state),{},{legendBBox:e}))))}}),wj(s,"handleReceiveSyncEvent",function(e,t,r){if(s.props.syncId===e){if(r===s.eventEmitterSymbol&&"function"!==typeof s.props.syncMethod)return;s.applySyncEvent(t)}}),wj(s,"handleBrushChange",function(e){var t=e.startIndex,r=e.endIndex;if(t!==s.state.dataStartIndex||r!==s.state.dataEndIndex){var n=s.state.updateId;s.setState(function(){return jj({dataStartIndex:t,dataEndIndex:r},p({props:s.props,dataStartIndex:t,dataEndIndex:r,updateId:n},s.state))}),s.triggerSyncEvent({dataStartIndex:t,dataEndIndex:r})}}),wj(s,"handleMouseEnter",function(e){var t=s.getMouseInfo(e);if(t){var r=jj(jj({},t),{},{isTooltipActive:!0});s.setState(r),s.triggerSyncEvent(r);var n=s.props.onMouseEnter;Zi()(n)&&n(r,e)}}),wj(s,"triggeredAfterMouseMove",function(e){var t=s.getMouseInfo(e),r=t?jj(jj({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};s.setState(r),s.triggerSyncEvent(r);var n=s.props.onMouseMove;Zi()(n)&&n(r,e)}),wj(s,"handleItemMouseEnter",function(e){s.setState(function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}})}),wj(s,"handleItemMouseLeave",function(){s.setState(function(){return{isTooltipActive:!1}})}),wj(s,"handleMouseMove",function(e){e.persist(),s.throttleTriggeredAfterMouseMove(e)}),wj(s,"handleMouseLeave",function(e){s.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};s.setState(t),s.triggerSyncEvent(t);var r=s.props.onMouseLeave;Zi()(r)&&r(t,e)}),wj(s,"handleOuterEvent",function(e){var t,r=function(e){var t=e&&e.type;return t&&fs[t]?fs[t]:null}(e),n=Ri()(s.props,"".concat(r));r&&Zi()(n)&&n(null!==(t=/.*touch.*/i.test(r)?s.getMouseInfo(e.changedTouches[0]):s.getMouseInfo(e))&&void 0!==t?t:{},e)}),wj(s,"handleClick",function(e){var t=s.getMouseInfo(e);if(t){var r=jj(jj({},t),{},{isTooltipActive:!0});s.setState(r),s.triggerSyncEvent(r);var n=s.props.onClick;Zi()(n)&&n(r,e)}}),wj(s,"handleMouseDown",function(e){var t=s.props.onMouseDown;Zi()(t)&&t(s.getMouseInfo(e),e)}),wj(s,"handleMouseUp",function(e){var t=s.props.onMouseUp;Zi()(t)&&t(s.getMouseInfo(e),e)}),wj(s,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.throttleTriggeredAfterMouseMove(e.changedTouches[0])}),wj(s,"handleTouchStart",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.handleMouseDown(e.changedTouches[0])}),wj(s,"handleTouchEnd",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.handleMouseUp(e.changedTouches[0])}),wj(s,"handleDoubleClick",function(e){var t=s.props.onDoubleClick;Zi()(t)&&t(s.getMouseInfo(e),e)}),wj(s,"handleContextMenu",function(e){var t=s.props.onContextMenu;Zi()(t)&&t(s.getMouseInfo(e),e)}),wj(s,"triggerSyncEvent",function(e){void 0!==s.props.syncId&&sk.emit(ok,s.props.syncId,e,s.eventEmitterSymbol)}),wj(s,"applySyncEvent",function(e){var t=s.props,r=t.layout,n=t.syncMethod,a=s.state.updateId,i=e.dataStartIndex,o=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)s.setState(jj({dataStartIndex:i,dataEndIndex:o},p({props:s.props,dataStartIndex:i,dataEndIndex:o,updateId:a},s.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,c=e.chartY,d=e.activeTooltipIndex,u=s.state,h=u.offset,m=u.tooltipTicks;if(!h)return;if("function"===typeof n)d=n(m,e);else if("value"===n){d=-1;for(var f=0;f<m.length;f++)if(m[f].value===e.activeLabel){d=f;break}}var g=jj(jj({},h),{},{x:h.left,y:h.top}),x=Math.min(l,g.x+g.width),b=Math.min(c,g.y+g.height),y=m[d]&&m[d].value,v=Mj(s.state,s.props.data,d),_=m[d]?{x:"horizontal"===r?m[d].coordinate:x,y:"horizontal"===r?b:m[d].coordinate}:Cj;s.setState(jj(jj({},e),{},{activeLabel:y,activeCoordinate:_,activePayload:v,activeTooltipIndex:d}))}else s.setState(e)}),wj(s,"renderCursor",function(e){var r,n=s.state,i=n.isTooltipActive,o=n.activeCoordinate,l=n.activePayload,c=n.offset,d=n.activeTooltipIndex,u=n.tooltipAxisBandSize,h=s.getTooltipEventType(),p=null!==(r=e.props.active)&&void 0!==r?r:i,m=s.props.layout,f=e.key||"_recharts-cursor";return a.createElement(oj,{key:f,activeCoordinate:o,activePayload:l,activeTooltipIndex:d,chartName:t,element:e,isActive:p,layout:m,offset:c,tooltipAxisBandSize:u,tooltipEventType:h})}),wj(s,"renderPolarAxis",function(e,t,r){var n=Ri()(e,"type.axisType"),i=Ri()(s.state,"".concat(n,"Map")),o=e.type.defaultProps,l=void 0!==o?jj(jj({},o),e.props):e.props,c=i&&i[l["".concat(n,"Id")]];return(0,a.cloneElement)(e,jj(jj({},c),{},{className:Oi(n,c.className),key:e.key||"".concat(t,"-").concat(r),ticks:mb(c,!0)}))}),wj(s,"renderPolarGrid",function(e){var t=e.props,r=t.radialLines,n=t.polarAngles,i=t.polarRadius,o=s.state,l=o.radiusAxisMap,c=o.angleAxisMap,d=$i(l),u=$i(c),h=u.cx,p=u.cy,m=u.innerRadius,f=u.outerRadius;return(0,a.cloneElement)(e,{polarAngles:Array.isArray(n)?n:mb(u,!0).map(function(e){return e.coordinate}),polarRadius:Array.isArray(i)?i:mb(d,!0).map(function(e){return e.coordinate}),cx:h,cy:p,innerRadius:m,outerRadius:f,key:e.key||"polar-grid",radialLines:r})}),wj(s,"renderLegend",function(){var e=s.state.formattedGraphicalItems,t=s.props,r=t.children,n=t.width,i=t.height,o=s.props.margin||{},l=n-(o.left||0)-(o.right||0),d=eb({children:r,formattedGraphicalItems:e,legendWidth:l,legendContent:c});if(!d)return null;var u=d.item,h=pj(d,lj);return(0,a.cloneElement)(u,jj(jj({},h),{},{chartWidth:n,chartHeight:i,margin:o,onBBoxUpdate:s.handleLegendBBoxUpdate}))}),wj(s,"renderTooltip",function(){var e,t=s.props,r=t.children,n=t.accessibilityLayer,i=_s(r,Fo);if(!i)return null;var o=s.state,l=o.isTooltipActive,c=o.activeCoordinate,d=o.activePayload,u=o.activeLabel,h=o.offset,p=null!==(e=i.props.active)&&void 0!==e?e:l;return(0,a.cloneElement)(i,{viewBox:jj(jj({},h),{},{x:h.left,y:h.top}),active:p,label:u,payload:p?d:[],coordinate:c,accessibilityLayer:n})}),wj(s,"renderBrush",function(e){var t=s.props,r=t.margin,n=t.data,i=s.state,o=i.offset,l=i.dataStartIndex,c=i.dataEndIndex,d=i.updateId;return(0,a.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:gb(s.handleBrushChange,e.props.onChange),data:n,x:Ui(e.props.x)?e.props.x:o.left,y:Ui(e.props.y)?e.props.y:o.top+o.height+o.brushBottom-(r.bottom||0),width:Ui(e.props.width)?e.props.width:o.width,startIndex:l,endIndex:c,updateId:"brush-".concat(d)})}),wj(s,"renderReferenceElement",function(e,t,r){if(!e)return null;var n=s.clipPathId,i=s.state,o=i.xAxisMap,l=i.yAxisMap,c=i.offset,d=e.type.defaultProps||{},u=e.props,h=u.xAxisId,p=void 0===h?d.xAxisId:h,m=u.yAxisId,f=void 0===m?d.yAxisId:m;return(0,a.cloneElement)(e,{key:e.key||"".concat(t,"-").concat(r),xAxis:o[p],yAxis:l[f],viewBox:{x:c.left,y:c.top,width:c.width,height:c.height},clipPathId:n})}),wj(s,"renderActivePoints",function(e){var t=e.item,n=e.activePoint,a=e.basePoint,i=e.childIndex,s=e.isRange,o=[],l=t.props.key,c=void 0!==t.item.type.defaultProps?jj(jj({},t.item.type.defaultProps),t.item.props):t.item.props,d=c.activeDot,u=jj(jj({index:i,dataKey:c.dataKey,cx:n.x,cy:n.y,r:4,fill:cb(t.item),strokeWidth:2,stroke:"#fff",payload:n.payload,value:n.value},Ns(d,!1)),cs(d));return o.push(r.renderActiveDot(d,u,"".concat(l,"-activePoint-").concat(i))),a?o.push(r.renderActiveDot(d,jj(jj({},u),{},{cx:a.x,cy:a.y}),"".concat(l,"-basePoint-").concat(i))):s&&o.push(null),o}),wj(s,"renderGraphicChild",function(e,t,r){var n=s.filterFormatItem(e,t,r);if(!n)return null;var i=s.getTooltipEventType(),o=s.state,l=o.isTooltipActive,c=o.tooltipAxis,d=o.activeTooltipIndex,u=o.activeLabel,h=_s(s.props.children,Fo),p=n.props,m=p.points,f=p.isRange,g=p.baseLine,x=void 0!==n.item.type.defaultProps?jj(jj({},n.item.type.defaultProps),n.item.props):n.item.props,b=x.activeDot,y=x.hide,v=x.activeBar,_=x.activeShape,k=Boolean(!y&&l&&h&&(b||v||_)),j={};"axis"!==i&&h&&"click"===h.props.trigger?j={onClick:gb(s.handleItemMouseEnter,e.props.onClick)}:"axis"!==i&&(j={onMouseLeave:gb(s.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:gb(s.handleItemMouseEnter,e.props.onMouseEnter)});var w=(0,a.cloneElement)(e,jj(jj({},n.props),j));if(k){if(!(d>=0)){var N,S=(null!==(N=s.getItemByXY(s.state.activeCoordinate))&&void 0!==N?N:{graphicalItem:w}).graphicalItem,O=S.item,C=void 0===O?e:O,E=S.childIndex,P=jj(jj(jj({},n.props),j),{},{activeIndex:E});return[(0,a.cloneElement)(C,P),null,null]}var A,M;if(c.dataKey&&!c.allowDuplicatedCategory){var T="function"===typeof c.dataKey?function(e){return"function"===typeof c.dataKey?c.dataKey(e.payload):null}:"payload.".concat(c.dataKey.toString());A=Gi(m,T,u),M=f&&g&&Gi(g,T,u)}else A=null===m||void 0===m?void 0:m[d],M=f&&g&&g[d];if(_||v){var D=void 0!==e.props.activeIndex?e.props.activeIndex:d;return[(0,a.cloneElement)(e,jj(jj(jj({},n.props),j),{},{activeIndex:D})),null,null]}if(!Ji()(A))return[w].concat(yj(s.renderActivePoints({item:n,activePoint:A,basePoint:M,childIndex:d,isRange:f})))}return f?[w,null,null]:[w,null]}),wj(s,"renderCustomized",function(e,t,r){return(0,a.cloneElement)(e,jj(jj({key:"recharts-customized-".concat(r)},s.props),s.state))}),wj(s,"renderMap",{CartesianGrid:{handler:Ej,once:!0},ReferenceArea:{handler:s.renderReferenceElement},ReferenceLine:{handler:Ej},ReferenceDot:{handler:s.renderReferenceElement},XAxis:{handler:Ej},YAxis:{handler:Ej},Brush:{handler:s.renderBrush,once:!0},Bar:{handler:s.renderGraphicChild},Line:{handler:s.renderGraphicChild},Area:{handler:s.renderGraphicChild},Radar:{handler:s.renderGraphicChild},RadialBar:{handler:s.renderGraphicChild},Scatter:{handler:s.renderGraphicChild},Pie:{handler:s.renderGraphicChild},Funnel:{handler:s.renderGraphicChild},Tooltip:{handler:s.renderCursor,once:!0},PolarGrid:{handler:s.renderPolarGrid,once:!0},PolarAngleAxis:{handler:s.renderPolarAxis},PolarRadiusAxis:{handler:s.renderPolarAxis},Customized:{handler:s.renderCustomized}}),s.clipPathId="".concat(null!==(n=e.id)&&void 0!==n?n:Hi("recharts"),"-clip"),s.throttleTriggeredAfterMouseMove=Ei()(s.triggeredAfterMouseMove,null!==(i=e.throttleDelay)&&void 0!==i?i:1e3/60),s.state={},s}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bj(e,t)}(r,e),n=r,s=[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,r=e.data,n=e.height,a=e.layout,i=_s(t,Fo);if(i){var s=i.props.defaultIndex;if(!("number"!==typeof s||s<0||s>this.state.tooltipTicks.length-1)){var o=this.state.tooltipTicks[s]&&this.state.tooltipTicks[s].value,l=Mj(this.state,r,s,o),c=this.state.tooltipTicks[s].coordinate,d=(this.state.offset.top+n)/2,u="horizontal"===a?{x:c,y:d}:{y:c,x:d},h=this.state.formattedGraphicalItems.find(function(e){return"Scatter"===e.item.type.name});h&&(u=jj(jj({},u),h.props.points[s].tooltipPosition),l=h.props.points[s].tooltipPayload);var p={activeTooltipIndex:s,isTooltipActive:!0,activeLabel:o,activePayload:l,activeCoordinate:u};this.setState(p),this.renderCursor(i),this.accessibilityManager.setIndex(s)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return this.props.accessibilityLayer?(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(r=this.props.margin.left)&&void 0!==r?r:0,top:null!==(n=this.props.margin.top)&&void 0!==n?n:0}}),null):null;var r,n}},{key:"componentDidUpdate",value:function(e){Ss([_s(e.children,Fo)],[_s(this.props.children,Fo)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=_s(this.props.children,Fo);if(e&&"boolean"===typeof e.props.shared){var t=e.props.shared?"axis":"item";return o.indexOf(t)>=0?t:i}return i}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,r=this.container,n=r.getBoundingClientRect(),a={top:(t=n).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},i={chartX:Math.round(e.pageX-a.left),chartY:Math.round(e.pageY-a.top)},s=n.width/r.offsetWidth||1,o=this.inRange(i.chartX,i.chartY,s);if(!o)return null;var l=this.state,c=l.xAxisMap,d=l.yAxisMap,u=this.getTooltipEventType(),h=Tj(this.state,this.props.data,this.props.layout,o);if("axis"!==u&&c&&d){var p=$i(c).scale,m=$i(d).scale,f=p&&p.invert?p.invert(i.chartX):null,g=m&&m.invert?m.invert(i.chartY):null;return jj(jj({},i),{},{xValue:f,yValue:g},h)}return h?jj(jj({},i),h):null}},{key:"inRange",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.props.layout,a=e/r,i=t/r;if("horizontal"===n||"vertical"===n){var s=this.state.offset;return a>=s.left&&a<=s.left+s.width&&i>=s.top&&i<=s.top+s.height?{x:a,y:i}:null}var o=this.state,l=o.angleAxisMap,c=o.radiusAxisMap;if(l&&c){var d=$i(l);return ry({x:a,y:i},d)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),r=_s(e,Fo),n={};return r&&"axis"===t&&(n="click"===r.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),jj(jj({},cs(this.props,this.handleOuterEvent)),n)}},{key:"addListener",value:function(){sk.on(ok,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){sk.removeListener(ok,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,r){for(var n=this.state.formattedGraphicalItems,a=0,i=n.length;a<i;a++){var s=n[a];if(s.item===e||s.props.key===e.key||t===gs(s.item.type)&&r===s.childIndex)return s}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,r=t.left,n=t.top,i=t.height,s=t.width;return a.createElement("defs",null,a.createElement("clipPath",{id:e},a.createElement("rect",{x:r,y:n,height:i,width:s})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce(function(e,t){var r=hj(t,2),n=r[0],a=r[1];return jj(jj({},e),{},wj({},n,a.scale))},{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce(function(e,t){var r=hj(t,2),n=r[0],a=r[1];return jj(jj({},e),{},wj({},n,a.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,r=t.formattedGraphicalItems,n=t.activeItem;if(r&&r.length)for(var a=0,i=r.length;a<i;a++){var s=r[a],o=s.props,l=s.item,c=void 0!==l.type.defaultProps?jj(jj({},l.type.defaultProps),l.props):l.props,d=gs(l.type);if("Bar"===d){var u=(o.data||[]).find(function(t){return Zd(e,t)});if(u)return{graphicalItem:s,payload:u}}else if("RadialBar"===d){var h=(o.data||[]).find(function(t){return ry(e,t)});if(h)return{graphicalItem:s,payload:h}}else if(pv(s,n)||mv(s,n)||fv(s,n)){var p=yv({graphicalItem:s,activeTooltipItem:n,itemData:c.data}),m=void 0===c.activeIndex?p:c.activeIndex;return{graphicalItem:jj(jj({},s),{},{childIndex:m}),payload:fv(s,n)?c.data[p]:s.props.data[p]}}}return null}},{key:"render",value:function(){var e=this;if(!ks(this))return null;var t,r,n=this.props,i=n.children,s=n.className,o=n.width,l=n.height,c=n.style,d=n.compact,u=n.title,h=n.desc,p=pj(n,cj),m=Ns(p,!1);if(d)return a.createElement(w_,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},a.createElement($s,uj({},m,{width:o,height:l,title:u,desc:h}),this.renderClipPath(),Cs(i,this.renderMap)));this.props.accessibilityLayer&&(m.tabIndex=null!==(t=this.props.tabIndex)&&void 0!==t?t:0,m.role=null!==(r=this.props.role)&&void 0!==r?r:"application",m.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},m.onFocus=function(){e.accessibilityManager.focus()});var f=this.parseEventsOfWrapper();return a.createElement(w_,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},a.createElement("div",uj({className:Oi("recharts-wrapper",s),style:jj({position:"relative",cursor:"default",width:o,height:l},c)},f,{ref:function(t){e.container=t}}),a.createElement($s,uj({},m,{width:o,height:l,title:u,desc:h,style:Oj}),this.renderClipPath(),Cs(i,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],s&&mj(n.prototype,s),l&&mj(n,l),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,s,l}(a.Component);wj(m,"displayName",t),wj(m,"defaultProps",jj({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},u)),wj(m,"getDerivedStateFromProps",function(e,t){var r=e.dataKey,n=e.data,a=e.children,i=e.width,s=e.height,o=e.layout,l=e.stackOffset,c=e.margin,d=t.dataStartIndex,u=t.dataEndIndex;if(void 0===t.updateId){var h=Ij(e);return jj(jj(jj({},h),{},{updateId:0},p(jj(jj({props:e},h),{},{updateId:0}),t)),{},{prevDataKey:r,prevData:n,prevWidth:i,prevHeight:s,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:a})}if(r!==t.prevDataKey||n!==t.prevData||i!==t.prevWidth||s!==t.prevHeight||o!==t.prevLayout||l!==t.prevStackOffset||!ns(c,t.prevMargin)){var m=Ij(e),f={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},g=jj(jj({},Tj(t,n,o)),{},{updateId:t.updateId+1}),x=jj(jj(jj({},m),f),g);return jj(jj(jj({},x),p(jj({props:e},x),t)),{},{prevDataKey:r,prevData:n,prevWidth:i,prevHeight:s,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:a})}if(!Ss(a,t.prevChildren)){var b,y,v,_,k=_s(a,qb),j=k&&null!==(b=null===(y=k.props)||void 0===y?void 0:y.startIndex)&&void 0!==b?b:d,w=k&&null!==(v=null===(_=k.props)||void 0===_?void 0:_.endIndex)&&void 0!==v?v:u,N=j!==d||w!==u,S=!Ji()(n)&&!N?t.updateId:t.updateId+1;return jj(jj({updateId:S},p(jj(jj({props:e},t),{},{updateId:S,dataStartIndex:j,dataEndIndex:w}),t)),{},{prevChildren:a,dataStartIndex:j,dataEndIndex:w})}return null}),wj(m,"renderActiveDot",function(e,t,r){var n;return n=(0,a.isValidElement)(e)?(0,a.cloneElement)(e,t):Zi()(e)?e(t):a.createElement(fc,t),a.createElement(Ys,{className:"recharts-active-dot",key:r},n)});var f=(0,a.forwardRef)(function(e,t){return a.createElement(m,uj({},e,{ref:t}))});return f.displayName=m.displayName,f}({chartName:"LineChart",GraphicalChild:rw,axisComponents:[{axisType:"xAxis",AxisComp:Lw},{axisType:"yAxis",AxisComp:Kw}],formatAxisMap:function(e,r,n,a,i){var s=e.width,o=e.height,l=e.layout,c=e.children,d=Object.keys(r),u={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:o-n.bottom,bottomMirror:o-n.bottom},h=!!_s(c,Hv);return d.reduce(function(s,o){var c,d,p,m,f,g=r[o],x=g.orientation,b=g.domain,y=g.padding,v=void 0===y?{}:y,_=g.mirror,k=g.reversed,j="".concat(x).concat(_?"Mirror":"");if("number"===g.type&&("gap"===g.padding||"no-gap"===g.padding)){var w=b[1]-b[0],N=1/0,S=g.categoricalDomain.sort(Ki);if(S.forEach(function(e,t){t>0&&(N=Math.min((e||0)-(S[t-1]||0),N))}),Number.isFinite(N)){var O=N/w,C="vertical"===g.layout?n.height:n.width;if("gap"===g.padding&&(c=O*C/2),"no-gap"===g.padding){var E=Wi(e.barCategoryGap,O*C),P=O*C/2;c=P-E-(P-E)/C*E}}}d="xAxis"===a?[n.left+(v.left||0)+(c||0),n.left+n.width-(v.right||0)-(c||0)]:"yAxis"===a?"horizontal"===l?[n.top+n.height-(v.bottom||0),n.top+(v.top||0)]:[n.top+(v.top||0)+(c||0),n.top+n.height-(v.bottom||0)-(c||0)]:g.range,k&&(d=[d[1],d[0]]);var A=function(e,r,n){var a=e.scale,i=e.type,s=e.layout,o=e.axisType;if("auto"===a)return"radial"===s&&"radiusAxis"===o?{scale:uu(),realScaleType:"band"}:"radial"===s&&"angleAxis"===o?{scale:Rp(),realScaleType:"linear"}:"category"===i&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:pu(),realScaleType:"point"}:"category"===i?{scale:uu(),realScaleType:"band"}:{scale:Rp(),realScaleType:"linear"};if(Ai()(a)){var l="scale".concat(Uo()(a));return{scale:(t[l]||pu)(),realScaleType:t[l]?l:"point"}}return Zi()(a)?{scale:a}:{scale:pu(),realScaleType:"point"}}(g,i,h),M=A.scale,T=A.realScaleType;M.domain(b).range(d),function(e){var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-xb,i=Math.max(n[0],n[1])+xb,s=e(t[0]),o=e(t[r-1]);(s<a||s>i||o<a||o>i)&&e.domain([t[0],t[r-1]])}}(M);var D=function(e,t){var r=t.realScaleType,n=t.type,a=t.tickCount,i=t.originalDomain,s=t.allowDecimals,o=r||t.scale;if("auto"!==o&&"linear"!==o)return null;if(a&&"number"===n&&i&&("auto"===i[0]||"auto"===i[1])){var l=e.domain();if(!l.length)return null;var c=Dx(l,a,s);return e.domain([rx()(c),ex()(c)]),{niceTicks:c}}if(a&&"number"===n){var d=e.domain();return{niceTicks:Rx(d,a,s)}}return null}(M,Gv(Gv({},g),{},{realScaleType:T}));"xAxis"===a?(f="top"===x&&!_||"bottom"===x&&_,p=n.left,m=u[j]-f*g.height):"yAxis"===a&&(f="left"===x&&!_||"right"===x&&_,p=u[j]-f*g.width,m=n.top);var R=Gv(Gv(Gv({},g),D),{},{realScaleType:T,x:p,y:m,scale:M,width:"xAxis"===a?n.width:g.width,height:"yAxis"===a?n.height:g.height});return R.bandSize=Sb(R,D),g.hide||"xAxis"!==a?g.hide||(u[j]+=(f?-1:1)*R.width):u[j]+=(f?-1:1)*R.height,Gv(Gv({},s),{},Kv({},o,R))},{})}}),Xw=["x1","y1","x2","y2","key"],Jw=["offset"];function Qw(e){return Qw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qw(e)}function Zw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zw(Object(r),!0).forEach(function(t){tN(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zw(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tN(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Qw(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Qw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qw(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rN(){return rN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rN.apply(this,arguments)}function nN(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var aN=function(e){var t=e.fill;if(!t||"none"===t)return null;var r=e.fillOpacity,n=e.x,i=e.y,s=e.width,o=e.height,l=e.ry;return a.createElement("rect",{x:n,y:i,ry:l,width:s,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function iN(e,t){var r;if(a.isValidElement(e))r=a.cloneElement(e,t);else if(Zi()(e))r=e(t);else{var n=t.x1,i=t.y1,s=t.x2,o=t.y2,l=t.key,c=nN(t,Xw),d=Ns(c,!1),u=(d.offset,nN(d,Jw));r=a.createElement("line",rN({},u,{x1:n,y1:i,x2:s,y2:o,fill:"none",key:l}))}return r}function sN(e){var t=e.x,r=e.width,n=e.horizontal,i=void 0===n||n,s=e.horizontalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(n,a){var s=eN(eN({},e),{},{x1:t,y1:n,x2:t+r,y2:n,key:"line-".concat(a),index:a});return iN(i,s)});return a.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function oN(e){var t=e.y,r=e.height,n=e.vertical,i=void 0===n||n,s=e.verticalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(n,a){var s=eN(eN({},e),{},{x1:n,y1:t,x2:n,y2:t+r,key:"line-".concat(a),index:a});return iN(i,s)});return a.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function lN(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,i=e.y,s=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal;if(!(void 0===c||c)||!t||!t.length)return null;var d=l.map(function(e){return Math.round(e+i-i)}).sort(function(e,t){return e-t});i!==d[0]&&d.unshift(0);var u=d.map(function(e,l){var c=!d[l+1]?i+o-e:d[l+1]-e;if(c<=0)return null;var u=l%t.length;return a.createElement("rect",{key:"react-".concat(l),y:e,x:n,height:c,width:s,stroke:"none",fill:t[u],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return a.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function cN(e){var t=e.vertical,r=void 0===t||t,n=e.verticalFill,i=e.fillOpacity,s=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!r||!n||!n.length)return null;var u=d.map(function(e){return Math.round(e+s-s)}).sort(function(e,t){return e-t});s!==u[0]&&u.unshift(0);var h=u.map(function(e,t){var r=!u[t+1]?s+l-e:u[t+1]-e;if(r<=0)return null;var d=t%n.length;return a.createElement("rect",{key:"react-".concat(t),x:e,y:o,width:r,height:c,stroke:"none",fill:n[d],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return a.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var dN=function(e,t){var r=e.xAxis,n=e.width,a=e.height,i=e.offset;return pb(dw(eN(eN(eN({},Sw.defaultProps),r),{},{ticks:mb(r,!0),viewBox:{x:0,y:0,width:n,height:a}})),i.left,i.left+i.width,t)},uN=function(e,t){var r=e.yAxis,n=e.width,a=e.height,i=e.offset;return pb(dw(eN(eN(eN({},Sw.defaultProps),r),{},{ticks:mb(r,!0),viewBox:{x:0,y:0,width:n,height:a}})),i.top,i.top+i.height,t)},hN={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function pN(e){var t,r,n,i,s,o,l=O_(),c=C_(),d=(0,a.useContext)(v_),u=eN(eN({},e),{},{stroke:null!==(t=e.stroke)&&void 0!==t?t:hN.stroke,fill:null!==(r=e.fill)&&void 0!==r?r:hN.fill,horizontal:null!==(n=e.horizontal)&&void 0!==n?n:hN.horizontal,horizontalFill:null!==(i=e.horizontalFill)&&void 0!==i?i:hN.horizontalFill,vertical:null!==(s=e.vertical)&&void 0!==s?s:hN.vertical,verticalFill:null!==(o=e.verticalFill)&&void 0!==o?o:hN.verticalFill,x:Ui(e.x)?e.x:d.left,y:Ui(e.y)?e.y:d.top,width:Ui(e.width)?e.width:d.width,height:Ui(e.height)?e.height:d.height}),h=u.x,p=u.y,m=u.width,f=u.height,g=u.syncWithTicks,x=u.horizontalValues,b=u.verticalValues,y=function(){var e=(0,a.useContext)(x_);return $i(e)}(),v=function(){var e=(0,a.useContext)(b_);return m_()(e,function(e){return yy()(e.domain,Number.isFinite)})||$i(e)}();if(!Ui(m)||m<=0||!Ui(f)||f<=0||!Ui(h)||h!==+h||!Ui(p)||p!==+p)return null;var _=u.verticalCoordinatesGenerator||dN,k=u.horizontalCoordinatesGenerator||uN,j=u.horizontalPoints,w=u.verticalPoints;if((!j||!j.length)&&Zi()(k)){var N=x&&x.length,S=k({yAxis:v?eN(eN({},v),{},{ticks:N?x:v.ticks}):void 0,width:l,height:c,offset:d},!!N||g);Yi(Array.isArray(S),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Qw(S),"]")),Array.isArray(S)&&(j=S)}if((!w||!w.length)&&Zi()(_)){var O=b&&b.length,C=_({xAxis:y?eN(eN({},y),{},{ticks:O?b:y.ticks}):void 0,width:l,height:c,offset:d},!!O||g);Yi(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Qw(C),"]")),Array.isArray(C)&&(w=C)}return a.createElement("g",{className:"recharts-cartesian-grid"},a.createElement(aN,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),a.createElement(sN,rN({},u,{offset:d,horizontalPoints:j,xAxis:y,yAxis:v})),a.createElement(oN,rN({},u,{offset:d,verticalPoints:w,xAxis:y,yAxis:v})),a.createElement(lN,rN({},u,{horizontalPoints:j})),a.createElement(cN,rN({},u,{verticalPoints:w})))}pN.displayName="CartesianGrid";const mN=Ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),fN=Ue("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),gN=Ue("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),xN=Ue("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"16",key:"10p56q"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);function bN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function yN(e,t){if(e){if("string"==typeof e)return bN(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bN(e,t):void 0}}function vN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,s,o=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||yN(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _N=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function kN(){return kN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kN.apply(null,arguments)}function jN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Me(n.key),n)}}function wN(e,t){return wN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wN(e,t)}function NN(e){return NN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},NN(e)}function SN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(SN=function(){return!!e})()}function ON(e,t){if(t&&("object"==Ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function CN(e){return function(e){if(Array.isArray(e))return bN(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yN(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var EN=function(){function e(e){var t=this;this._insertTag=function(e){var r;r=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,r),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{r.insertRule(e,r.cssRules.length)}catch(CF){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach(function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),this.tags=[],this.ctr=0},e}(),PN=Math.abs,AN=String.fromCharCode,MN=Object.assign;function TN(e){return e.trim()}function DN(e,t,r){return e.replace(t,r)}function RN(e,t){return e.indexOf(t)}function IN(e,t){return 0|e.charCodeAt(t)}function LN(e,t,r){return e.slice(t,r)}function FN(e){return e.length}function zN(e){return e.length}function UN(e,t){return t.push(e),e}var BN=1,VN=1,HN=0,WN=0,$N=0,qN="";function GN(e,t,r,n,a,i,s){return{value:e,root:t,parent:r,type:n,props:a,children:i,line:BN,column:VN,length:s,return:""}}function KN(e,t){return MN(GN("",null,null,"",null,null,0),e,{length:-e.length},t)}function YN(){return $N=WN>0?IN(qN,--WN):0,VN--,10===$N&&(VN=1,BN--),$N}function XN(){return $N=WN<HN?IN(qN,WN++):0,VN++,10===$N&&(VN=1,BN++),$N}function JN(){return IN(qN,WN)}function QN(){return WN}function ZN(e,t){return LN(qN,e,t)}function eS(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function tS(e){return BN=VN=1,HN=FN(qN=e),WN=0,[]}function rS(e){return qN="",e}function nS(e){return TN(ZN(WN-1,sS(91===e?e+2:40===e?e+1:e)))}function aS(e){for(;($N=JN())&&$N<33;)XN();return eS(e)>2||eS($N)>3?"":" "}function iS(e,t){for(;--t&&XN()&&!($N<48||$N>102||$N>57&&$N<65||$N>70&&$N<97););return ZN(e,QN()+(t<6&&32==JN()&&32==XN()))}function sS(e){for(;XN();)switch($N){case e:return WN;case 34:case 39:34!==e&&39!==e&&sS($N);break;case 40:41===e&&sS(e);break;case 92:XN()}return WN}function oS(e,t){for(;XN()&&e+$N!==57&&(e+$N!==84||47!==JN()););return"/*"+ZN(t,WN-1)+"*"+AN(47===e?e:XN())}function lS(e){for(;!eS(JN());)XN();return ZN(e,WN)}var cS="-ms-",dS="-moz-",uS="-webkit-",hS="comm",pS="rule",mS="decl",fS="@keyframes";function gS(e,t){for(var r="",n=zN(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function xS(e,t,r,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case mS:return e.return=e.return||e.value;case hS:return"";case fS:return e.return=e.value+"{"+gS(e.children,n)+"}";case pS:e.value=e.props.join(",")}return FN(r=gS(e.children,n))?e.return=e.value+"{"+r+"}":""}function bS(e){return function(t){t.root||(t=t.return)&&e(t)}}function yS(e){return rS(vS("",null,null,null,[""],e=tS(e),0,[0],e))}function vS(e,t,r,n,a,i,s,o,l){for(var c=0,d=0,u=s,h=0,p=0,m=0,f=1,g=1,x=1,b=0,y="",v=a,_=i,k=n,j=y;g;)switch(m=b,b=XN()){case 40:if(108!=m&&58==IN(j,u-1)){-1!=RN(j+=DN(nS(b),"&","&\f"),"&\f")&&(x=-1);break}case 34:case 39:case 91:j+=nS(b);break;case 9:case 10:case 13:case 32:j+=aS(m);break;case 92:j+=iS(QN()-1,7);continue;case 47:switch(JN()){case 42:case 47:UN(kS(oS(XN(),QN()),t,r),l);break;default:j+="/"}break;case 123*f:o[c++]=FN(j)*x;case 125*f:case 59:case 0:switch(b){case 0:case 125:g=0;case 59+d:-1==x&&(j=DN(j,/\f/g,"")),p>0&&FN(j)-u&&UN(p>32?jS(j+";",n,r,u-1):jS(DN(j," ","")+";",n,r,u-2),l);break;case 59:j+=";";default:if(UN(k=_S(j,t,r,c,d,a,o,y,v=[],_=[],u),i),123===b)if(0===d)vS(j,t,k,k,v,i,u,o,_);else switch(99===h&&110===IN(j,3)?100:h){case 100:case 108:case 109:case 115:vS(e,k,k,n&&UN(_S(e,k,k,0,0,a,o,y,a,v=[],u),_),a,_,u,o,n?v:_);break;default:vS(j,k,k,k,[""],_,0,o,_)}}c=d=p=0,f=x=1,y=j="",u=s;break;case 58:u=1+FN(j),p=m;default:if(f<1)if(123==b)--f;else if(125==b&&0==f++&&125==YN())continue;switch(j+=AN(b),b*f){case 38:x=d>0?1:(j+="\f",-1);break;case 44:o[c++]=(FN(j)-1)*x,x=1;break;case 64:45===JN()&&(j+=nS(XN())),h=JN(),d=u=FN(y=j+=lS(QN())),b++;break;case 45:45===m&&2==FN(j)&&(f=0)}}return i}function _S(e,t,r,n,a,i,s,o,l,c,d){for(var u=a-1,h=0===a?i:[""],p=zN(h),m=0,f=0,g=0;m<n;++m)for(var x=0,b=LN(e,u+1,u=PN(f=s[m])),y=e;x<p;++x)(y=TN(f>0?h[x]+" "+b:DN(b,/&\f/g,h[x])))&&(l[g++]=y);return GN(e,t,r,0===a?pS:o,l,c,d)}function kS(e,t,r){return GN(e,t,r,hS,AN($N),LN(e,2,-2),0)}function jS(e,t,r,n){return GN(e,t,r,mS,LN(e,0,n),LN(e,n+1,-1),n)}var wS=function(e,t,r){for(var n=0,a=0;n=a,a=JN(),38===n&&12===a&&(t[r]=1),!eS(a);)XN();return ZN(e,WN)},NS=function(e,t){return rS(function(e,t){var r=-1,n=44;do{switch(eS(n)){case 0:38===n&&12===JN()&&(t[r]=1),e[r]+=wS(WN-1,t,r);break;case 2:e[r]+=nS(n);break;case 4:if(44===n){e[++r]=58===JN()?"&\f":"",t[r]=e[r].length;break}default:e[r]+=AN(n)}}while(n=XN());return e}(tS(e),t))},SS=new WeakMap,OS=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;"rule"!==r.type;)if(!(r=r.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||SS.get(r))&&!n){SS.set(e,!0);for(var a=[],i=NS(t,a),s=r.props,o=0,l=0;o<i.length;o++)for(var c=0;c<s.length;c++,l++)e.props[l]=a[o]?i[o].replace(/&\f/g,s[c]):s[c]+" "+i[o]}}},CS=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ES(e,t){switch(function(e,t){return 45^IN(e,0)?(((t<<2^IN(e,0))<<2^IN(e,1))<<2^IN(e,2))<<2^IN(e,3):0}(e,t)){case 5103:return uS+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return uS+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return uS+e+dS+e+cS+e+e;case 6828:case 4268:return uS+e+cS+e+e;case 6165:return uS+e+cS+"flex-"+e+e;case 5187:return uS+e+DN(e,/(\w+).+(:[^]+)/,uS+"box-$1$2"+cS+"flex-$1$2")+e;case 5443:return uS+e+cS+"flex-item-"+DN(e,/flex-|-self/,"")+e;case 4675:return uS+e+cS+"flex-line-pack"+DN(e,/align-content|flex-|-self/,"")+e;case 5548:return uS+e+cS+DN(e,"shrink","negative")+e;case 5292:return uS+e+cS+DN(e,"basis","preferred-size")+e;case 6060:return uS+"box-"+DN(e,"-grow","")+uS+e+cS+DN(e,"grow","positive")+e;case 4554:return uS+DN(e,/([^-])(transform)/g,"$1"+uS+"$2")+e;case 6187:return DN(DN(DN(e,/(zoom-|grab)/,uS+"$1"),/(image-set)/,uS+"$1"),e,"")+e;case 5495:case 3959:return DN(e,/(image-set\([^]*)/,uS+"$1$`$1");case 4968:return DN(DN(e,/(.+:)(flex-)?(.*)/,uS+"box-pack:$3"+cS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+uS+e+e;case 4095:case 3583:case 4068:case 2532:return DN(e,/(.+)-inline(.+)/,uS+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(FN(e)-1-t>6)switch(IN(e,t+1)){case 109:if(45!==IN(e,t+4))break;case 102:return DN(e,/(.+:)(.+)-([^]+)/,"$1"+uS+"$2-$3$1"+dS+(108==IN(e,t+3)?"$3":"$2-$3"))+e;case 115:return~RN(e,"stretch")?ES(DN(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==IN(e,t+1))break;case 6444:switch(IN(e,FN(e)-3-(~RN(e,"!important")&&10))){case 107:return DN(e,":",":"+uS)+e;case 101:return DN(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+uS+(45===IN(e,14)?"inline-":"")+"box$3$1"+uS+"$2$3$1"+cS+"$2box$3")+e}break;case 5936:switch(IN(e,t+11)){case 114:return uS+e+cS+DN(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return uS+e+cS+DN(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return uS+e+cS+DN(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return uS+e+cS+e+e}return e}var PS=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case mS:e.return=ES(e.value,e.length);break;case fS:return gS([KN(e,{value:DN(e.value,"@","@"+uS)})],n);case pS:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return gS([KN(e,{props:[DN(t,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return gS([KN(e,{props:[DN(t,/:(plac\w+)/,":"+uS+"input-$1")]}),KN(e,{props:[DN(t,/:(plac\w+)/,":-moz-$1")]}),KN(e,{props:[DN(t,/:(plac\w+)/,cS+"input-$1")]})],n)}return""})}}],AS=function(e){var t=e.key;if("css"===t){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))})}var n,a,i=e.stylisPlugins||PS,s={},o=[];n=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(e){for(var t=e.getAttribute("data-emotion").split(" "),r=1;r<t.length;r++)s[t[r]]=!0;o.push(e)});var l,c=[OS,CS],d=[xS,bS(function(e){l.insert(e)})],u=function(e){var t=zN(e);return function(r,n,a,i){for(var s="",o=0;o<t;o++)s+=e[o](r,n,a,i)||"";return s}}(c.concat(i,d));a=function(e,t,r,n){l=r,gS(yS(e?e+"{"+t.styles+"}":t.styles),u),n&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new EN({key:t,container:n,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:a};return h.sheet.hydrate(o),h};var MS=function(e,t,r){var n=e.key+"-"+t.name;!1===r&&void 0===e.registered[n]&&(e.registered[n]=t.styles)};var TS={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function DS(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}var RS=/[A-Z]|^ms/g,IS=/_EMO_([^_]+?)_([^]*?)_EMO_/g,LS=function(e){return 45===e.charCodeAt(1)},FS=function(e){return null!=e&&"boolean"!==typeof e},zS=DS(function(e){return LS(e)?e:e.replace(RS,"-$&").toLowerCase()}),US=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(IS,function(e,t,r){return VS={name:t,styles:r,next:VS},t})}return 1===TS[e]||LS(e)||"number"!==typeof t||0===t?t:t+"px"};function BS(e,t,r){if(null==r)return"";var n=r;if(void 0!==n.__emotion_styles)return n;switch(typeof r){case"boolean":return"";case"object":var a=r;if(1===a.anim)return VS={name:a.name,styles:a.styles,next:VS},a.name;var i=r;if(void 0!==i.styles){var s=i.next;if(void 0!==s)for(;void 0!==s;)VS={name:s.name,styles:s.styles,next:VS},s=s.next;return i.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var a=0;a<r.length;a++)n+=BS(e,t,r[a])+";";else for(var i in r){var s=r[i];if("object"!==typeof s){var o=s;null!=t&&void 0!==t[o]?n+=i+"{"+t[o]+"}":FS(o)&&(n+=zS(i)+":"+US(i,o)+";")}else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var l=BS(e,t,s);switch(i){case"animation":case"animationName":n+=zS(i)+":"+l+";";break;default:n+=i+"{"+l+"}"}}else for(var c=0;c<s.length;c++)FS(s[c])&&(n+=zS(i)+":"+US(i,s[c])+";")}return n}(e,t,r);case"function":if(void 0!==e){var o=VS,l=r(e);return VS=o,BS(e,t,l)}}var c=r;if(null==t)return c;var d=t[c];return void 0!==d?d:c}var VS,HS=/label:\s*([^\s;{]+)\s*(;|$)/g;function WS(e,t,r){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,a="";VS=void 0;var i=e[0];null==i||void 0===i.raw?(n=!1,a+=BS(r,t,i)):a+=i[0];for(var s=1;s<e.length;s++){if(a+=BS(r,t,e[s]),n)a+=i[s]}HS.lastIndex=0;for(var o,l="";null!==(o=HS.exec(a));)l+="-"+o[1];var c=function(e){for(var t,r=0,n=0,a=e.length;a>=4;++n,a-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(a){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}(a)+l;return{name:c,styles:a,next:VS}}var $S=!!i.useInsertionEffect&&i.useInsertionEffect,qS=$S||function(e){return e()},GS=($S||a.useLayoutEffect,a.createContext("undefined"!==typeof HTMLElement?AS({key:"css"}):null)),KS=(GS.Provider,function(e){return(0,a.forwardRef)(function(t,r){var n=(0,a.useContext)(GS);return e(t,n,r)})}),YS=a.createContext({});var XS={}.hasOwnProperty,JS="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",QS=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;return MS(t,r,n),qS(function(){return function(e,t,r){MS(e,t,r);var n=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a=t;do{e.insert(t===a?"."+n:"",a,e.sheet,!0),a=a.next}while(void 0!==a)}}(t,r,n)}),null},ZS=KS(function(e,t,r){var n=e.css;"string"===typeof n&&void 0!==t.registered[n]&&(n=t.registered[n]);var i=e[JS],s=[n],o="";"string"===typeof e.className?o=function(e,t,r){var n="";return r.split(" ").forEach(function(r){void 0!==e[r]?t.push(e[r]+";"):r&&(n+=r+" ")}),n}(t.registered,s,e.className):null!=e.className&&(o=e.className+" ");var l=WS(s,void 0,a.useContext(YS));o+=t.key+"-"+l.name;var c={};for(var d in e)XS.call(e,d)&&"css"!==d&&d!==JS&&(c[d]=e[d]);return c.className=o,r&&(c.ref=r),a.createElement(a.Fragment,null,a.createElement(QS,{cache:t,serialized:l,isStringTag:"string"===typeof i}),a.createElement(i,c))}),eO=ZS,tO=(r(219),function(e,t){var r=arguments;if(null==t||!XS.call(t,"css"))return a.createElement.apply(void 0,r);var n=r.length,i=new Array(n);i[0]=eO,i[1]=function(e,t){var r={};for(var n in t)XS.call(t,n)&&(r[n]=t[n]);return r[JS]=e,r}(e,t);for(var s=2;s<n;s++)i[s]=r[s];return a.createElement.apply(null,i)});!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(tO||(tO={}));function rO(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return WS(t)}const nO=Math.min,aO=Math.max,iO=Math.round,sO=Math.floor,oO=e=>({x:e,y:e});function lO(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function cO(){return"undefined"!==typeof window}function dO(e){return pO(e)?(e.nodeName||"").toLowerCase():"#document"}function uO(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function hO(e){var t;return null==(t=(pO(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function pO(e){return!!cO()&&(e instanceof Node||e instanceof uO(e).Node)}function mO(e){return!!cO()&&(e instanceof Element||e instanceof uO(e).Element)}function fO(e){return!!cO()&&(e instanceof HTMLElement||e instanceof uO(e).HTMLElement)}function gO(e){return!(!cO()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof uO(e).ShadowRoot)}function xO(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=vO(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function bO(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function yO(e){return["html","body","#document"].includes(dO(e))}function vO(e){return uO(e).getComputedStyle(e)}function _O(e){if("html"===dO(e))return e;const t=e.assignedSlot||e.parentNode||gO(e)&&e.host||hO(e);return gO(t)?t.host:t}function kO(e){const t=_O(e);return yO(t)?e.ownerDocument?e.ownerDocument.body:e.body:fO(t)&&xO(t)?t:kO(t)}function jO(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);const a=kO(e),i=a===(null==(n=e.ownerDocument)?void 0:n.body),s=uO(a);if(i){const e=wO(s);return t.concat(s,s.visualViewport||[],xO(a)?a:[],e&&r?jO(e):[])}return t.concat(a,jO(a,[],r))}function wO(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function NO(e){const t=vO(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=fO(e),i=a?e.offsetWidth:r,s=a?e.offsetHeight:n,o=iO(r)!==i||iO(n)!==s;return o&&(r=i,n=s),{width:r,height:n,$:o}}function SO(e){return mO(e)?e:e.contextElement}function OO(e){const t=SO(e);if(!fO(t))return oO(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=NO(t);let s=(i?iO(r.width):r.width)/n,o=(i?iO(r.height):r.height)/a;return s&&Number.isFinite(s)||(s=1),o&&Number.isFinite(o)||(o=1),{x:s,y:o}}const CO=oO(0);function EO(e){const t=uO(e);return bO()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:CO}function PO(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r=!1);const a=e.getBoundingClientRect(),i=SO(e);let s=oO(1);t&&(n?mO(n)&&(s=OO(n)):s=OO(e));const o=function(e,t,r){return void 0===t&&(t=!1),!(!r||t&&r!==uO(e))&&t}(i,r,n)?EO(i):oO(0);let l=(a.left+o.x)/s.x,c=(a.top+o.y)/s.y,d=a.width/s.x,u=a.height/s.y;if(i){const e=uO(i),t=n&&mO(n)?uO(n):n;let r=e,a=wO(r);for(;a&&n&&t!==r;){const e=OO(a),t=a.getBoundingClientRect(),n=vO(a),i=t.left+(a.clientLeft+parseFloat(n.paddingLeft))*e.x,s=t.top+(a.clientTop+parseFloat(n.paddingTop))*e.y;l*=e.x,c*=e.y,d*=e.x,u*=e.y,l+=i,c+=s,r=uO(a),a=wO(r)}}return lO({width:d,height:u,x:l,y:c})}function AO(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function MO(e,t,r,n){void 0===n&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:s="function"===typeof ResizeObserver,layoutShift:o="function"===typeof IntersectionObserver,animationFrame:l=!1}=n,c=SO(e),d=a||i?[...c?jO(c):[],...jO(t)]:[];d.forEach(e=>{a&&e.addEventListener("scroll",r,{passive:!0}),i&&e.addEventListener("resize",r)});const u=c&&o?function(e,t){let r,n=null;const a=hO(e);function i(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return function s(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),i();const c=e.getBoundingClientRect(),{left:d,top:u,width:h,height:p}=c;if(o||t(),!h||!p)return;const m={rootMargin:-sO(u)+"px "+-sO(a.clientWidth-(d+h))+"px "+-sO(a.clientHeight-(u+p))+"px "+-sO(d)+"px",threshold:aO(0,nO(1,l))||1};let f=!0;function g(t){const n=t[0].intersectionRatio;if(n!==l){if(!f)return s();n?s(!1,n):r=setTimeout(()=>{s(!1,1e-7)},1e3)}1!==n||AO(c,e.getBoundingClientRect())||s(),f=!1}try{n=new IntersectionObserver(g,Re(Re({},m),{},{root:a.ownerDocument}))}catch(x){n=new IntersectionObserver(g,m)}n.observe(e)}(!0),i}(c,r):null;let h,p=-1,m=null;s&&(m=new ResizeObserver(e=>{let[n]=e;n&&n.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=m)||e.observe(t)})),r()}),c&&!l&&m.observe(c),m.observe(t));let f=l?PO(e):null;return l&&function t(){const n=PO(e);f&&!AO(f,n)&&r();f=n,h=requestAnimationFrame(t)}(),r(),()=>{var e;d.forEach(e=>{a&&e.removeEventListener("scroll",r),i&&e.removeEventListener("resize",r)}),null==u||u(),null==(e=m)||e.disconnect(),m=null,l&&cancelAnimationFrame(h)}}var TO=a.useLayoutEffect,DO=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],RO=function(){};function IO(e,t){return t?"-"===t[0]?e+t:e+"__"+t:e}function LO(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var i=[].concat(n);if(t&&e)for(var s in t)t.hasOwnProperty(s)&&t[s]&&i.push("".concat(IO(e,s)));return i.filter(function(e){return e}).map(function(e){return String(e).trim()}).join(" ")}var FO=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):"object"===Ae(e)&&null!==e?[e]:[];var t},zO=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,Re({},Ie(e,DO))},UO=function(e,t,r){var n=e.cx,a=e.getStyles,i=e.getClassNames,s=e.className;return{css:a(t,e),className:n(null!==r&&void 0!==r?r:{},i(t,e),s)}};function BO(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function VO(e){return BO(e)?window.pageYOffset:e.scrollTop}function HO(e,t){BO(e)?window.scrollTo(0,t):e.scrollTop=t}function WO(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:RO,a=VO(e),i=t-a,s=0;!function t(){var o=function(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}(s+=10,a,i,r);HO(e,o),s<r?window.requestAnimationFrame(t):n(e)}()}function $O(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?HO(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&HO(e,Math.max(t.offsetTop-a,0))}function qO(){try{return document.createEvent("TouchEvent"),!0}catch(CF){return!1}}var GO=!1,KO={get passive(){return GO=!0}},YO="undefined"!==typeof window?window:{};YO.addEventListener&&YO.removeEventListener&&(YO.addEventListener("p",RO,KO),YO.removeEventListener("p",RO,!1));var XO=GO;function JO(e){return null!=e}function QO(e,t,r){return e?t:r}var ZO=["children","innerProps"],eC=["children","innerProps"];function tC(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,i=e.shouldScroll,s=e.isFixedPosition,o=e.controlHeight,l=function(e){var t=getComputedStyle(e),r="absolute"===t.position,n=/(auto|scroll)/;if("fixed"===t.position)return document.documentElement;for(var a=e;a=a.parentElement;)if(t=getComputedStyle(a),(!r||"static"!==t.position)&&n.test(t.overflow+t.overflowY+t.overflowX))return a;return document.documentElement}(r),c={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return c;var d,u=l.getBoundingClientRect().height,h=r.getBoundingClientRect(),p=h.bottom,m=h.height,f=h.top,g=r.offsetParent.getBoundingClientRect().top,x=s?window.innerHeight:BO(d=l)?window.innerHeight:d.clientHeight,b=VO(l),y=parseInt(getComputedStyle(r).marginBottom,10),v=parseInt(getComputedStyle(r).marginTop,10),_=g-v,k=x-f,j=_+b,w=u-b-f,N=p-x+b+y,S=b+f-v,O=160;switch(a){case"auto":case"bottom":if(k>=m)return{placement:"bottom",maxHeight:t};if(w>=m&&!s)return i&&WO(l,N,O),{placement:"bottom",maxHeight:t};if(!s&&w>=n||s&&k>=n)return i&&WO(l,N,O),{placement:"bottom",maxHeight:s?k-y:w-y};if("auto"===a||s){var C=t,E=s?_:j;return E>=n&&(C=Math.min(E-y-o,t)),{placement:"top",maxHeight:C}}if("bottom"===a)return i&&HO(l,N),{placement:"bottom",maxHeight:t};break;case"top":if(_>=m)return{placement:"top",maxHeight:t};if(j>=m&&!s)return i&&WO(l,S,O),{placement:"top",maxHeight:t};if(!s&&j>=n||s&&_>=n){var P=t;return(!s&&j>=n||s&&_>=n)&&(P=s?_-v:j-v),i&&WO(l,S,O),{placement:"top",maxHeight:P}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return c}var rC,nC=function(e){return"auto"===e?"bottom":e},aC=(0,a.createContext)(null),iC=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,i=e.menuPlacement,s=e.menuPosition,o=e.menuShouldScrollIntoView,l=e.theme,c=((0,a.useContext)(aC)||{}).setPortalPlacement,d=(0,a.useRef)(null),u=vN((0,a.useState)(n),2),h=u[0],p=u[1],m=vN((0,a.useState)(null),2),f=m[0],g=m[1],x=l.spacing.controlHeight;return TO(function(){var e=d.current;if(e){var t="fixed"===s,a=tC({maxHeight:n,menuEl:e,minHeight:r,placement:i,shouldScroll:o&&!t,isFixedPosition:t,controlHeight:x});p(a.maxHeight),g(a.placement),null===c||void 0===c||c(a.placement)}},[n,i,s,o,r,c,x]),t({ref:d,placerProps:Re(Re({},e),{},{placement:f||nC(i),maxHeight:h})})},sC=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return tO("div",kN({},UO(e,"menu",{menu:!0}),{ref:r},n),t)},oC=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return Re({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},lC=oC,cC=oC,dC=["size"],uC=["innerProps","isRtl","size"];var hC={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},pC=function(e){var t=e.size,r=Ie(e,dC);return tO("svg",kN({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:hC},r))},mC=function(e){return tO(pC,kN({size:20},e),tO("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},fC=function(e){return tO(pC,kN({size:20},e),tO("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},gC=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,i=n.colors;return Re({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?i.neutral60:i.neutral20,padding:2*a,":hover":{color:r?i.neutral80:i.neutral40}})},xC=gC,bC=gC,yC=function(){var e=rO.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(rC||(rC=dl(["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"]))),vC=function(e){var t=e.delay,r=e.offset;return tO("span",{css:rO({animation:"".concat(yC," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},_C=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,i=e.innerProps,s=e.menuIsOpen;return tO("div",kN({ref:a},UO(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":s}),i,{"aria-disabled":r||void 0}),t)},kC=["data"],jC=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,i=e.Heading,s=e.headingProps,o=e.innerProps,l=e.label,c=e.theme,d=e.selectProps;return tO("div",kN({},UO(e,"group",{group:!0}),o),tO(i,kN({},s,{selectProps:d,theme:c,getStyles:n,getClassNames:a,cx:r}),l),tO("div",null,t))},wC=["innerRef","isDisabled","isHidden","inputClassName"],NC={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},SC={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Re({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},NC)},OC=function(e){return Re({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},NC)},CC=function(e){var t=e.cx,r=e.value,n=zO(e),a=n.innerRef,i=n.isDisabled,s=n.isHidden,o=n.inputClassName,l=Ie(n,wC);return tO("div",kN({},UO(e,"input",{"input-container":!0}),{"data-value":r||""}),tO("input",kN({className:t({input:!0},o),ref:a,style:OC(s),disabled:i},l)))},EC=function(e){var t=e.children,r=e.innerProps;return tO("div",r,t)};var PC=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,i=e.isDisabled,s=e.removeProps,o=e.selectProps,l=r.Container,c=r.Label,d=r.Remove;return tO(l,{data:n,innerProps:Re(Re({},UO(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":i})),a),selectProps:o},tO(c,{data:n,innerProps:Re({},UO(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},t),tO(d,{data:n,innerProps:Re(Re({},UO(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},s),selectProps:o}))},AC={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return tO("div",kN({},UO(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||tO(mC,null))},Control:_C,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return tO("div",kN({},UO(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||tO(fC,null))},DownChevron:fC,CrossIcon:mC,Group:jC,GroupHeading:function(e){var t=zO(e);t.data;var r=Ie(t,kC);return tO("div",kN({},UO(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return tO("div",kN({},UO(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return tO("span",kN({},t,UO(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:CC,LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=void 0===n?4:n,i=Ie(e,uC);return tO("div",kN({},UO(Re(Re({},i),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),tO(vC,{delay:0,offset:r}),tO(vC,{delay:160,offset:!0}),tO(vC,{delay:320,offset:!r}))},Menu:sC,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return tO("div",kN({},UO(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,i=e.innerProps,s=e.menuPlacement,l=e.menuPosition,c=(0,a.useRef)(null),d=(0,a.useRef)(null),u=vN((0,a.useState)(nC(s)),2),h=u[0],p=u[1],m=(0,a.useMemo)(function(){return{setPortalPlacement:p}},[]),f=vN((0,a.useState)(null),2),g=f[0],x=f[1],b=(0,a.useCallback)(function(){if(n){var e=function(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}(n),t="fixed"===l?0:window.pageYOffset,r=e[h]+t;r===(null===g||void 0===g?void 0:g.offset)&&e.left===(null===g||void 0===g?void 0:g.rect.left)&&e.width===(null===g||void 0===g?void 0:g.rect.width)||x({offset:r,rect:e})}},[n,l,h,null===g||void 0===g?void 0:g.offset,null===g||void 0===g?void 0:g.rect.left,null===g||void 0===g?void 0:g.rect.width]);TO(function(){b()},[b]);var y=(0,a.useCallback)(function(){"function"===typeof d.current&&(d.current(),d.current=null),n&&c.current&&(d.current=MO(n,c.current,b,{elementResize:"ResizeObserver"in window}))},[n,b]);TO(function(){y()},[y]);var v=(0,a.useCallback)(function(e){c.current=e,y()},[y]);if(!t&&"fixed"!==l||!g)return null;var _=tO("div",kN({ref:v},UO(Re(Re({},e),{},{offset:g.offset,position:l,rect:g.rect}),"menuPortal",{"menu-portal":!0}),i),r);return tO(aC.Provider,{value:m},t?(0,o.createPortal)(_,t):_)},LoadingMessage:function(e){var t=e.children,r=void 0===t?"Loading...":t,n=e.innerProps,a=Ie(e,eC);return tO("div",kN({},UO(Re(Re({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=void 0===t?"No options":t,n=e.innerProps,a=Ie(e,ZO);return tO("div",kN({},UO(Re(Re({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:PC,MultiValueContainer:EC,MultiValueLabel:EC,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return tO("div",kN({role:"button"},r),t||tO(mC,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,i=e.innerRef,s=e.innerProps;return tO("div",kN({},UO(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:i,"aria-disabled":r},s),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return tO("div",kN({},UO(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return tO("div",kN({},UO(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return tO("div",kN({},UO(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return tO("div",kN({},UO(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},MC=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function TC(e,t){return e===t||!(!MC(e)||!MC(t))}function DC(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!TC(e[r],t[r]))return!1;return!0}for(var RC={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},IC=function(e){return tO("span",kN({css:RC},e))},LC={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,i=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return i?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=void 0===r?"":r,a=e.labels,i=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,i?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,i=void 0===a?"":a,s=e.selectValue,o=e.isDisabled,l=e.isSelected,c=e.isAppleDevice,d=function(e,t){return e&&e.length?"".concat(e.indexOf(t)+1," of ").concat(e.length):""};if("value"===t&&s)return"value ".concat(i," focused, ").concat(d(s,r),".");if("menu"===t&&c){var u=o?" disabled":"",h="".concat(l?" selected":"").concat(u);return"".concat(i).concat(h,", ").concat(d(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},FC=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,i=e.focusableOptions,s=e.isFocused,o=e.selectValue,l=e.selectProps,c=e.id,d=e.isAppleDevice,u=l.ariaLiveMessages,h=l.getOptionLabel,p=l.inputValue,m=l.isMulti,f=l.isOptionDisabled,g=l.isSearchable,x=l.menuIsOpen,b=l.options,y=l.screenReaderStatus,v=l.tabSelectsValue,_=l.isLoading,k=l["aria-label"],j=l["aria-live"],w=(0,a.useMemo)(function(){return Re(Re({},LC),u||{})},[u]),N=(0,a.useMemo)(function(){var e,r="";if(t&&w.onChange){var n=t.option,a=t.options,i=t.removedValue,s=t.removedValues,l=t.value,c=i||n||(e=l,Array.isArray(e)?null:e),d=c?h(c):"",u=a||s||void 0,p=u?u.map(h):[],m=Re({isDisabled:c&&f(c,o),label:d,labels:p},t);r=w.onChange(m)}return r},[t,w,f,o,h]),S=(0,a.useMemo)(function(){var e="",t=r||n,a=!!(r&&o&&o.includes(r));if(t&&w.onFocus){var s={focused:t,label:h(t),isDisabled:f(t,o),isSelected:a,options:i,context:t===r?"menu":"value",selectValue:o,isAppleDevice:d};e=w.onFocus(s)}return e},[r,n,h,f,w,i,o,d]),O=(0,a.useMemo)(function(){var e="";if(x&&b.length&&!_&&w.onFilter){var t=y({count:i.length});e=w.onFilter({inputValue:p,resultsMessage:t})}return e},[i,p,x,w,b,y,_]),C="initial-input-focus"===(null===t||void 0===t?void 0:t.action),E=(0,a.useMemo)(function(){var e="";if(w.guidance){var t=n?"value":x?"menu":"input";e=w.guidance({"aria-label":k,context:t,isDisabled:r&&f(r,o),isMulti:m,isSearchable:g,tabSelectsValue:v,isInitialFocus:C})}return e},[k,r,n,m,f,g,x,w,o,v,C]),P=tO(a.Fragment,null,tO("span",{id:"aria-selection"},N),tO("span",{id:"aria-focused"},S),tO("span",{id:"aria-results"},O),tO("span",{id:"aria-guidance"},E));return tO(a.Fragment,null,tO(IC,{id:c},C&&P),tO(IC,{"aria-live":j,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!C&&P))},zC=[{base:"A",letters:"A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",letters:"\ua732"},{base:"AE",letters:"\xc6\u01fc\u01e2"},{base:"AO",letters:"\ua734"},{base:"AU",letters:"\ua736"},{base:"AV",letters:"\ua738\ua73a"},{base:"AY",letters:"\ua73c"},{base:"B",letters:"B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181"},{base:"C",letters:"C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e"},{base:"D",letters:"D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779"},{base:"DZ",letters:"\u01f1\u01c4"},{base:"Dz",letters:"\u01f2\u01c5"},{base:"E",letters:"E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e"},{base:"F",letters:"F\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",letters:"G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e"},{base:"H",letters:"H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",letters:"I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",letters:"J\u24bf\uff2a\u0134\u0248"},{base:"K",letters:"K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",letters:"L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",letters:"\u01c7"},{base:"Lj",letters:"\u01c8"},{base:"M",letters:"M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c"},{base:"N",letters:"N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4"},{base:"NJ",letters:"\u01ca"},{base:"Nj",letters:"\u01cb"},{base:"O",letters:"O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OI",letters:"\u01a2"},{base:"OO",letters:"\ua74e"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",letters:"Q\u24c6\uff31\ua756\ua758\u024a"},{base:"R",letters:"R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",letters:"S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",letters:"T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"TZ",letters:"\ua728"},{base:"U",letters:"U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",letters:"V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",letters:"\ua760"},{base:"W",letters:"W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",letters:"X\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",letters:"Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",letters:"Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",letters:"a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250"},{base:"aa",letters:"\ua733"},{base:"ae",letters:"\xe6\u01fd\u01e3"},{base:"ao",letters:"\ua735"},{base:"au",letters:"\ua737"},{base:"av",letters:"\ua739\ua73b"},{base:"ay",letters:"\ua73d"},{base:"b",letters:"b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253"},{base:"c",letters:"c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",letters:"d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a"},{base:"dz",letters:"\u01f3\u01c6"},{base:"e",letters:"e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd"},{base:"f",letters:"f\u24d5\uff46\u1e1f\u0192\ua77c"},{base:"g",letters:"g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f"},{base:"h",letters:"h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",letters:"j\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",letters:"k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",letters:"l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747"},{base:"lj",letters:"\u01c9"},{base:"m",letters:"m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",letters:"n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5"},{base:"nj",letters:"\u01cc"},{base:"o",letters:"o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275"},{base:"oi",letters:"\u01a3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\ua74f"},{base:"p",letters:"p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755"},{base:"q",letters:"q\u24e0\uff51\u024b\ua757\ua759"},{base:"r",letters:"r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",letters:"s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b"},{base:"t",letters:"t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"tz",letters:"\ua729"},{base:"u",letters:"u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",letters:"v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",letters:"\ua761"},{base:"w",letters:"w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",letters:"x\u24e7\uff58\u1e8b\u1e8d"},{base:"y",letters:"y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",letters:"z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],UC=new RegExp("["+zC.map(function(e){return e.letters}).join("")+"]","g"),BC={},VC=0;VC<zC.length;VC++)for(var HC=zC[VC],WC=0;WC<HC.letters.length;WC++)BC[HC.letters[WC]]=HC.base;var $C=function(e){return e.replace(UC,function(e){return BC[e]})},qC=function(e,t){void 0===t&&(t=DC);var r=null;function n(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(r&&r.lastThis===this&&t(n,r.lastArgs))return r.lastResult;var i=e.apply(this,n);return r={lastResult:i,lastArgs:n,lastThis:this},i}return n.clear=function(){r=null},n}($C),GC=function(e){return e.replace(/^\s+|\s+$/g,"")},KC=function(e){return"".concat(e.label," ").concat(e.value)},YC=["innerRef"];function XC(e){var t=e.innerRef,r=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var a=Object.entries(e).filter(function(e){var t=vN(e,1)[0];return!r.includes(t)});return a.reduce(function(e,t){var r=vN(t,2),n=r[0],a=r[1];return e[n]=a,e},{})}(Ie(e,YC),"onExited","in","enter","exit","appear");return tO("input",kN({ref:t},r,{css:rO({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var JC=["boxSizing","height","overflow","paddingRight","position"],QC={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function ZC(e){e.cancelable&&e.preventDefault()}function eE(e){e.stopPropagation()}function tE(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;0===e?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function rE(){return"ontouchstart"in window||navigator.maxTouchPoints}var nE=!("undefined"===typeof window||!window.document||!window.document.createElement),aE=0,iE={capture:!1,passive:!1};var sE=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},oE={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function lE(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,i=function(e){var t=e.isEnabled,r=e.onBottomArrive,n=e.onBottomLeave,i=e.onTopArrive,s=e.onTopLeave,o=(0,a.useRef)(!1),l=(0,a.useRef)(!1),c=(0,a.useRef)(0),d=(0,a.useRef)(null),u=(0,a.useCallback)(function(e,t){if(null!==d.current){var a=d.current,c=a.scrollTop,u=a.scrollHeight,h=a.clientHeight,p=d.current,m=t>0,f=u-h-c,g=!1;f>t&&o.current&&(n&&n(e),o.current=!1),m&&l.current&&(s&&s(e),l.current=!1),m&&t>f?(r&&!o.current&&r(e),p.scrollTop=u,g=!0,o.current=!0):!m&&-t>c&&(i&&!l.current&&i(e),p.scrollTop=0,g=!0,l.current=!0),g&&function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()}(e)}},[r,n,i,s]),h=(0,a.useCallback)(function(e){u(e,e.deltaY)},[u]),p=(0,a.useCallback)(function(e){c.current=e.changedTouches[0].clientY},[]),m=(0,a.useCallback)(function(e){var t=c.current-e.changedTouches[0].clientY;u(e,t)},[u]),f=(0,a.useCallback)(function(e){if(e){var t=!!XO&&{passive:!1};e.addEventListener("wheel",h,t),e.addEventListener("touchstart",p,t),e.addEventListener("touchmove",m,t)}},[m,p,h]),g=(0,a.useCallback)(function(e){e&&(e.removeEventListener("wheel",h,!1),e.removeEventListener("touchstart",p,!1),e.removeEventListener("touchmove",m,!1))},[m,p,h]);return(0,a.useEffect)(function(){if(t){var e=d.current;return f(e),function(){g(e)}}},[t,f,g]),function(e){d.current=e}}({isEnabled:void 0===n||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(e){var t=e.isEnabled,r=e.accountForScrollbars,n=void 0===r||r,i=(0,a.useRef)({}),s=(0,a.useRef)(null),o=(0,a.useCallback)(function(e){if(nE){var t=document.body,r=t&&t.style;if(n&&JC.forEach(function(e){var t=r&&r[e];i.current[e]=t}),n&&aE<1){var a=parseInt(i.current.paddingRight,10)||0,s=document.body?document.body.clientWidth:0,o=window.innerWidth-s+a||0;Object.keys(QC).forEach(function(e){var t=QC[e];r&&(r[e]=t)}),r&&(r.paddingRight="".concat(o,"px"))}t&&rE()&&(t.addEventListener("touchmove",ZC,iE),e&&(e.addEventListener("touchstart",tE,iE),e.addEventListener("touchmove",eE,iE))),aE+=1}},[n]),l=(0,a.useCallback)(function(e){if(nE){var t=document.body,r=t&&t.style;aE=Math.max(aE-1,0),n&&aE<1&&JC.forEach(function(e){var t=i.current[e];r&&(r[e]=t)}),t&&rE()&&(t.removeEventListener("touchmove",ZC,iE),e&&(e.removeEventListener("touchstart",tE,iE),e.removeEventListener("touchmove",eE,iE)))}},[n]);return(0,a.useEffect)(function(){if(t){var e=s.current;return o(e),function(){l(e)}}},[t,o,l]),function(e){s.current=e}}({isEnabled:r});return tO(a.Fragment,null,r&&tO("div",{onClick:sE,css:oE}),t(function(e){i(e),s(e)}))}var cE={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},dE=function(e){var t=e.name,r=e.onFocus;return tO("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:cE,value:"",onChange:function(){}})};function uE(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function hE(){return uE(/^Mac/i)}function pE(){return uE(/^iPhone/i)||uE(/^iPad/i)||hE()&&navigator.maxTouchPoints>1}var mE={clearIndicator:bC,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,i=a.colors,s=a.borderRadius;return Re({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?i.neutral5:i.neutral0,borderColor:r?i.neutral10:n?i.primary:i.neutral20,borderRadius:s,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(i.primary):void 0,"&:hover":{borderColor:n?i.primary:i.neutral30}})},dropdownIndicator:xC,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return Re({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,i=n.colors;return Re({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?i.neutral10:i.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,i=a.spacing,s=a.colors;return Re(Re({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},SC),t?{}:{margin:i.baseUnit/2,paddingBottom:i.baseUnit/2,paddingTop:i.baseUnit/2,color:s.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,i=a.colors,s=a.spacing.baseUnit;return Re({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?i.neutral60:i.neutral20,padding:2*s})},loadingMessage:cC,menu:function(e,t){var r,n=e.placement,a=e.theme,i=a.borderRadius,s=a.spacing,o=a.colors;return Re((Te(r={label:"menu"},function(e){return e?{bottom:"top",top:"bottom"}[e]:"bottom"}(n),"100%"),Te(r,"position","absolute"),Te(r,"width","100%"),Te(r,"zIndex",1),r),t?{}:{backgroundColor:o.neutral0,borderRadius:i,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:s.menuGutter,marginTop:s.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return Re({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,i=r.colors;return Re({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:i.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,i=e.cropWithEllipsis;return Re({overflow:"hidden",textOverflow:i||void 0===i?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,i=r.colors,s=e.isFocused;return Re({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:s?i.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:i.dangerLight,color:i.danger}})},noOptionsMessage:lC,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,i=e.theme,s=i.spacing,o=i.colors;return Re({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?o.primary:n?o.primary25:"transparent",color:r?o.neutral20:a?o.neutral0:"inherit",padding:"".concat(2*s.baseUnit,"px ").concat(3*s.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?o.primary:o.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return Re({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,i=n.colors;return Re({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?i.neutral40:i.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,i=e.selectProps.controlShouldRenderValue;return Re({alignItems:"center",display:n&&a&&i?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}};var fE,gE={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},xE={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:qO(),captureMenuScroll:!qO(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=Re({ignoreCase:!0,ignoreAccents:!0,stringify:KC,trim:!0,matchFrom:"any"},fE),n=r.ignoreCase,a=r.ignoreAccents,i=r.stringify,s=r.trim,o=r.matchFrom,l=s?GC(t):t,c=s?GC(i(e)):i(e);return n&&(l=l.toLowerCase(),c=c.toLowerCase()),a&&(l=qC(l),c=$C(c)),"start"===o?c.substr(0,l.length)===l:c.indexOf(l)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(CF){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function bE(e,t,r,n){return{type:"option",data:t,isDisabled:SE(e,t,r),isSelected:OE(e,t,r),label:wE(e,t),value:NE(e,t),index:n}}function yE(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(r,n){return bE(e,r,t,n)}).filter(function(t){return kE(e,t)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var i=bE(e,r,t,n);return kE(e,i)?i:void 0}).filter(JO)}function vE(e){return e.reduce(function(e,t){return"group"===t.type?e.push.apply(e,CN(t.options.map(function(e){return e.data}))):e.push(t.data),e},[])}function _E(e,t){return e.reduce(function(e,r){return"group"===r.type?e.push.apply(e,CN(r.options.map(function(e){return{data:e.data,id:"".concat(t,"-").concat(r.index,"-").concat(e.index)}}))):e.push({data:r.data,id:"".concat(t,"-").concat(r.index)}),e},[])}function kE(e,t){var r=e.inputValue,n=void 0===r?"":r,a=t.data,i=t.isSelected,s=t.label,o=t.value;return(!EE(e)||!i)&&CE(e,{label:s,value:o,data:a},n)}var jE=function(e,t){var r;return(null===(r=e.find(function(e){return e.data===t}))||void 0===r?void 0:r.id)||null},wE=function(e,t){return e.getOptionLabel(t)},NE=function(e,t){return e.getOptionValue(t)};function SE(e,t,r){return"function"===typeof e.isOptionDisabled&&e.isOptionDisabled(t,r)}function OE(e,t,r){if(r.indexOf(t)>-1)return!0;if("function"===typeof e.isOptionSelected)return e.isOptionSelected(t,r);var n=NE(e,t);return r.some(function(t){return NE(e,t)===n})}function CE(e,t,r){return!e.filterOption||e.filterOption(t,r)}var EE=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return void 0===t?r:t},PE=1,AE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wN(e,t)}(r,e);var t=function(e){var t=SN();return function(){var r,n=NN(e);if(t){var a=NN(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return ON(this,r)}}(r);function r(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(n=t.call(this,e)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},n.blockOptionHover=!1,n.isComposing=!1,n.commonProps=void 0,n.initialTouchX=0,n.initialTouchY=0,n.openAfterFocus=!1,n.scrollToFocusedOptionOnUpdate=!1,n.userIsDragging=void 0,n.isAppleDevice=hE()||pE(),n.controlRef=null,n.getControlRef=function(e){n.controlRef=e},n.focusedOptionRef=null,n.getFocusedOptionRef=function(e){n.focusedOptionRef=e},n.menuListRef=null,n.getMenuListRef=function(e){n.menuListRef=e},n.inputRef=null,n.getInputRef=function(e){n.inputRef=e},n.focus=n.focusInput,n.blur=n.blurInput,n.onChange=function(e,t){var r=n.props,a=r.onChange,i=r.name;t.name=i,n.ariaOnChange(e,t),a(e,t)},n.setValue=function(e,t,r){var a=n.props,i=a.closeMenuOnSelect,s=a.isMulti,o=a.inputValue;n.onInputChange("",{action:"set-value",prevInputValue:o}),i&&(n.setState({inputIsHiddenAfterUpdate:!s}),n.onMenuClose()),n.setState({clearFocusValueOnUpdate:!0}),n.onChange(e,{action:t,option:r})},n.selectOption=function(e){var t=n.props,r=t.blurInputOnSelect,a=t.isMulti,i=t.name,s=n.state.selectValue,o=a&&n.isOptionSelected(e,s),l=n.isOptionDisabled(e,s);if(o){var c=n.getOptionValue(e);n.setValue(s.filter(function(e){return n.getOptionValue(e)!==c}),"deselect-option",e)}else{if(l)return void n.ariaOnChange(e,{action:"select-option",option:e,name:i});a?n.setValue([].concat(CN(s),[e]),"select-option",e):n.setValue(e,"select-option")}r&&n.blurInput()},n.removeValue=function(e){var t=n.props.isMulti,r=n.state.selectValue,a=n.getOptionValue(e),i=r.filter(function(e){return n.getOptionValue(e)!==a}),s=QO(t,i,i[0]||null);n.onChange(s,{action:"remove-value",removedValue:e}),n.focusInput()},n.clearValue=function(){var e=n.state.selectValue;n.onChange(QO(n.props.isMulti,[],null),{action:"clear",removedValues:e})},n.popValue=function(){var e=n.props.isMulti,t=n.state.selectValue,r=t[t.length-1],a=t.slice(0,t.length-1),i=QO(e,a,a[0]||null);r&&n.onChange(i,{action:"pop-value",removedValue:r})},n.getFocusedOptionId=function(e){return jE(n.state.focusableOptionsWithIds,e)},n.getFocusableOptionsWithIds=function(){return _E(yE(n.props,n.state.selectValue),n.getElementId("option"))},n.getValue=function(){return n.state.selectValue},n.cx=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return LO.apply(void 0,[n.props.classNamePrefix].concat(t))},n.getOptionLabel=function(e){return wE(n.props,e)},n.getOptionValue=function(e){return NE(n.props,e)},n.getStyles=function(e,t){var r=n.props.unstyled,a=mE[e](t,r);a.boxSizing="border-box";var i=n.props.styles[e];return i?i(a,t):a},n.getClassNames=function(e,t){var r,a;return null===(r=(a=n.props.classNames)[e])||void 0===r?void 0:r.call(a,t)},n.getElementId=function(e){return"".concat(n.state.instancePrefix,"-").concat(e)},n.getComponents=function(){return e=n.props,Re(Re({},AC),e.components);var e},n.buildCategorizedOptions=function(){return yE(n.props,n.state.selectValue)},n.getCategorizedOptions=function(){return n.props.menuIsOpen?n.buildCategorizedOptions():[]},n.buildFocusableOptions=function(){return vE(n.buildCategorizedOptions())},n.getFocusableOptions=function(){return n.props.menuIsOpen?n.buildFocusableOptions():[]},n.ariaOnChange=function(e,t){n.setState({ariaSelection:Re({value:e},t)})},n.onMenuMouseDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),n.focusInput())},n.onMenuMouseMove=function(e){n.blockOptionHover=!1},n.onControlMouseDown=function(e){if(!e.defaultPrevented){var t=n.props.openMenuOnClick;n.state.isFocused?n.props.menuIsOpen?"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&n.onMenuClose():t&&n.openMenu("first"):(t&&(n.openAfterFocus=!0),n.focusInput()),"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()}},n.onDropdownIndicatorMouseDown=function(e){if((!e||"mousedown"!==e.type||0===e.button)&&!n.props.isDisabled){var t=n.props,r=t.isMulti,a=t.menuIsOpen;n.focusInput(),a?(n.setState({inputIsHiddenAfterUpdate:!r}),n.onMenuClose()):n.openMenu("first"),e.preventDefault()}},n.onClearIndicatorMouseDown=function(e){e&&"mousedown"===e.type&&0!==e.button||(n.clearValue(),e.preventDefault(),n.openAfterFocus=!1,"touchend"===e.type?n.focusInput():setTimeout(function(){return n.focusInput()}))},n.onScroll=function(e){"boolean"===typeof n.props.closeMenuOnScroll?e.target instanceof HTMLElement&&BO(e.target)&&n.props.onMenuClose():"function"===typeof n.props.closeMenuOnScroll&&n.props.closeMenuOnScroll(e)&&n.props.onMenuClose()},n.onCompositionStart=function(){n.isComposing=!0},n.onCompositionEnd=function(){n.isComposing=!1},n.onTouchStart=function(e){var t=e.touches,r=t&&t.item(0);r&&(n.initialTouchX=r.clientX,n.initialTouchY=r.clientY,n.userIsDragging=!1)},n.onTouchMove=function(e){var t=e.touches,r=t&&t.item(0);if(r){var a=Math.abs(r.clientX-n.initialTouchX),i=Math.abs(r.clientY-n.initialTouchY);n.userIsDragging=a>5||i>5}},n.onTouchEnd=function(e){n.userIsDragging||(n.controlRef&&!n.controlRef.contains(e.target)&&n.menuListRef&&!n.menuListRef.contains(e.target)&&n.blurInput(),n.initialTouchX=0,n.initialTouchY=0)},n.onControlTouchEnd=function(e){n.userIsDragging||n.onControlMouseDown(e)},n.onClearIndicatorTouchEnd=function(e){n.userIsDragging||n.onClearIndicatorMouseDown(e)},n.onDropdownIndicatorTouchEnd=function(e){n.userIsDragging||n.onDropdownIndicatorMouseDown(e)},n.handleInputChange=function(e){var t=n.props.inputValue,r=e.currentTarget.value;n.setState({inputIsHiddenAfterUpdate:!1}),n.onInputChange(r,{action:"input-change",prevInputValue:t}),n.props.menuIsOpen||n.onMenuOpen()},n.onInputFocus=function(e){n.props.onFocus&&n.props.onFocus(e),n.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(n.openAfterFocus||n.props.openMenuOnFocus)&&n.openMenu("first"),n.openAfterFocus=!1},n.onInputBlur=function(e){var t=n.props.inputValue;n.menuListRef&&n.menuListRef.contains(document.activeElement)?n.inputRef.focus():(n.props.onBlur&&n.props.onBlur(e),n.onInputChange("",{action:"input-blur",prevInputValue:t}),n.onMenuClose(),n.setState({focusedValue:null,isFocused:!1}))},n.onOptionHover=function(e){if(!n.blockOptionHover&&n.state.focusedOption!==e){var t=n.getFocusableOptions().indexOf(e);n.setState({focusedOption:e,focusedOptionId:t>-1?n.getFocusedOptionId(e):null})}},n.shouldHideSelectedOptions=function(){return EE(n.props)},n.onValueInputFocus=function(e){e.preventDefault(),e.stopPropagation(),n.focus()},n.onKeyDown=function(e){var t=n.props,r=t.isMulti,a=t.backspaceRemovesValue,i=t.escapeClearsValue,s=t.inputValue,o=t.isClearable,l=t.isDisabled,c=t.menuIsOpen,d=t.onKeyDown,u=t.tabSelectsValue,h=t.openMenuOnFocus,p=n.state,m=p.focusedOption,f=p.focusedValue,g=p.selectValue;if(!l&&("function"!==typeof d||(d(e),!e.defaultPrevented))){switch(n.blockOptionHover=!0,e.key){case"ArrowLeft":if(!r||s)return;n.focusValue("previous");break;case"ArrowRight":if(!r||s)return;n.focusValue("next");break;case"Delete":case"Backspace":if(s)return;if(f)n.removeValue(f);else{if(!a)return;r?n.popValue():o&&n.clearValue()}break;case"Tab":if(n.isComposing)return;if(e.shiftKey||!c||!u||!m||h&&n.isOptionSelected(m,g))return;n.selectOption(m);break;case"Enter":if(229===e.keyCode)break;if(c){if(!m)return;if(n.isComposing)return;n.selectOption(m);break}return;case"Escape":c?(n.setState({inputIsHiddenAfterUpdate:!1}),n.onInputChange("",{action:"menu-close",prevInputValue:s}),n.onMenuClose()):o&&i&&n.clearValue();break;case" ":if(s)return;if(!c){n.openMenu("first");break}if(!m)return;n.selectOption(m);break;case"ArrowUp":c?n.focusOption("up"):n.openMenu("last");break;case"ArrowDown":c?n.focusOption("down"):n.openMenu("first");break;case"PageUp":if(!c)return;n.focusOption("pageup");break;case"PageDown":if(!c)return;n.focusOption("pagedown");break;case"Home":if(!c)return;n.focusOption("first");break;case"End":if(!c)return;n.focusOption("last");break;default:return}e.preventDefault()}},n.state.instancePrefix="react-select-"+(n.props.instanceId||++PE),n.state.selectValue=FO(e.value),e.menuIsOpen&&n.state.selectValue.length){var a=n.getFocusableOptionsWithIds(),i=n.buildFocusableOptions(),s=i.indexOf(n.state.selectValue[0]);n.state.focusableOptionsWithIds=a,n.state.focusedOption=i[s],n.state.focusedOptionId=jE(a,i[s])}return n}return function(e,t,r){t&&jN(e.prototype,t),r&&jN(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&$O(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.isDisabled,n=t.menuIsOpen,a=this.state.isFocused;(a&&!r&&e.isDisabled||a&&n&&!e.menuIsOpen)&&this.focusInput(),a&&r&&!e.isDisabled?this.setState({isFocused:!1},this.onMenuClose):a||r||!e.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&($O(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this,r=this.state,n=r.selectValue,a=r.isFocused,i=this.buildFocusableOptions(),s="first"===e?0:i.length-1;if(!this.props.isMulti){var o=i.indexOf(n[0]);o>-1&&(s=o)}this.scrollToFocusedOptionOnUpdate=!(a&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:i[s],focusedOptionId:this.getFocusedOptionId(i[s])},function(){return t.onMenuOpen()})}},{key:"focusValue",value:function(e){var t=this.state,r=t.selectValue,n=t.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var a=r.indexOf(n);n||(a=-1);var i=r.length-1,s=-1;if(r.length){switch(e){case"previous":s=0===a?0:-1===a?i:a-1;break;case"next":a>-1&&a<i&&(s=a+1)}this.setState({inputIsHidden:-1!==s,focusedValue:r[s]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,r=this.state.focusedOption,n=this.getFocusableOptions();if(n.length){var a=0,i=n.indexOf(r);r||(i=-1),"up"===e?a=i>0?i-1:n.length-1:"down"===e?a=(i+1)%n.length:"pageup"===e?(a=i-t)<0&&(a=0):"pagedown"===e?(a=i+t)>n.length-1&&(a=n.length-1):"last"===e&&(a=n.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:n[a],focusedValue:null,focusedOptionId:this.getFocusedOptionId(n[a])})}}},{key:"getTheme",value:function(){return this.props.theme?"function"===typeof this.props.theme?this.props.theme(gE):Re(Re({},gE),this.props.theme):gE}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.cx,r=this.getStyles,n=this.getClassNames,a=this.getValue,i=this.selectOption,s=this.setValue,o=this.props,l=o.isMulti,c=o.isRtl,d=o.options;return{clearValue:e,cx:t,getStyles:r,getClassNames:n,getValue:a,hasValue:this.hasValue(),isMulti:l,isRtl:c,options:d,selectOption:i,selectProps:o,setValue:s,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,r=e.isMulti;return void 0===t?r:t}},{key:"isOptionDisabled",value:function(e,t){return SE(this.props,e,t)}},{key:"isOptionSelected",value:function(e,t){return OE(this.props,e,t)}},{key:"filterOption",value:function(e,t){return CE(this.props,e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"===typeof this.props.formatOptionLabel){var r=this.props.inputValue,n=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:r,selectValue:n})}return this.getOptionLabel(e)}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var e=this.props,t=e.isDisabled,r=e.isSearchable,n=e.inputId,i=e.inputValue,s=e.tabIndex,o=e.form,l=e.menuIsOpen,c=e.required,d=this.getComponents().Input,u=this.state,h=u.inputIsHidden,p=u.ariaSelection,m=this.commonProps,f=n||this.getElementId("input"),g=Re(Re(Re({"aria-autocomplete":"list","aria-expanded":l,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":c,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},l&&{"aria-controls":this.getElementId("listbox")}),!r&&{"aria-readonly":!0}),this.hasValue()?"initial-input-focus"===(null===p||void 0===p?void 0:p.action)&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return r?a.createElement(d,kN({},m,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:f,innerRef:this.getInputRef,isDisabled:t,isHidden:h,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:s,form:o,type:"text",value:i},g)):a.createElement(XC,kN({id:f,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:RO,onFocus:this.onInputFocus,disabled:t,tabIndex:s,inputMode:"none",form:o,value:""},g))}},{key:"renderPlaceholderOrValue",value:function(){var e=this,t=this.getComponents(),r=t.MultiValue,n=t.MultiValueContainer,i=t.MultiValueLabel,s=t.MultiValueRemove,o=t.SingleValue,l=t.Placeholder,c=this.commonProps,d=this.props,u=d.controlShouldRenderValue,h=d.isDisabled,p=d.isMulti,m=d.inputValue,f=d.placeholder,g=this.state,x=g.selectValue,b=g.focusedValue,y=g.isFocused;if(!this.hasValue()||!u)return m?null:a.createElement(l,kN({},c,{key:"placeholder",isDisabled:h,isFocused:y,innerProps:{id:this.getElementId("placeholder")}}),f);if(p)return x.map(function(t,o){var l=t===b,d="".concat(e.getOptionLabel(t),"-").concat(e.getOptionValue(t));return a.createElement(r,kN({},c,{components:{Container:n,Label:i,Remove:s},isFocused:l,isDisabled:h,key:d,index:o,removeProps:{onClick:function(){return e.removeValue(t)},onTouchEnd:function(){return e.removeValue(t)},onMouseDown:function(e){e.preventDefault()}},data:t}),e.formatOptionLabel(t,"value"))});if(m)return null;var v=x[0];return a.createElement(o,kN({},c,{data:v,isDisabled:h}),this.formatOptionLabel(v,"value"))}},{key:"renderClearIndicator",value:function(){var e=this.getComponents().ClearIndicator,t=this.commonProps,r=this.props,n=r.isDisabled,i=r.isLoading,s=this.state.isFocused;if(!this.isClearable()||!e||n||!this.hasValue()||i)return null;var o={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return a.createElement(e,kN({},t,{innerProps:o,isFocused:s}))}},{key:"renderLoadingIndicator",value:function(){var e=this.getComponents().LoadingIndicator,t=this.commonProps,r=this.props,n=r.isDisabled,i=r.isLoading,s=this.state.isFocused;if(!e||!i)return null;return a.createElement(e,kN({},t,{innerProps:{"aria-hidden":"true"},isDisabled:n,isFocused:s}))}},{key:"renderIndicatorSeparator",value:function(){var e=this.getComponents(),t=e.DropdownIndicator,r=e.IndicatorSeparator;if(!t||!r)return null;var n=this.commonProps,i=this.props.isDisabled,s=this.state.isFocused;return a.createElement(r,kN({},n,{isDisabled:i,isFocused:s}))}},{key:"renderDropdownIndicator",value:function(){var e=this.getComponents().DropdownIndicator;if(!e)return null;var t=this.commonProps,r=this.props.isDisabled,n=this.state.isFocused,i={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return a.createElement(e,kN({},t,{innerProps:i,isDisabled:r,isFocused:n}))}},{key:"renderMenu",value:function(){var e=this,t=this.getComponents(),r=t.Group,n=t.GroupHeading,i=t.Menu,s=t.MenuList,o=t.MenuPortal,l=t.LoadingMessage,c=t.NoOptionsMessage,d=t.Option,u=this.commonProps,h=this.state.focusedOption,p=this.props,m=p.captureMenuScroll,f=p.inputValue,g=p.isLoading,x=p.loadingMessage,b=p.minMenuHeight,y=p.maxMenuHeight,v=p.menuIsOpen,_=p.menuPlacement,k=p.menuPosition,j=p.menuPortalTarget,w=p.menuShouldBlockScroll,N=p.menuShouldScrollIntoView,S=p.noOptionsMessage,O=p.onMenuScrollToTop,C=p.onMenuScrollToBottom;if(!v)return null;var E,P=function(t,r){var n=t.type,i=t.data,s=t.isDisabled,o=t.isSelected,l=t.label,c=t.value,p=h===i,m=s?void 0:function(){return e.onOptionHover(i)},f=s?void 0:function(){return e.selectOption(i)},g="".concat(e.getElementId("option"),"-").concat(r),x={id:g,onClick:f,onMouseMove:m,onMouseOver:m,tabIndex:-1,role:"option","aria-selected":e.isAppleDevice?void 0:o};return a.createElement(d,kN({},u,{innerProps:x,data:i,isDisabled:s,isSelected:o,key:g,label:l,type:n,value:c,isFocused:p,innerRef:p?e.getFocusedOptionRef:void 0}),e.formatOptionLabel(t.data,"menu"))};if(this.hasOptions())E=this.getCategorizedOptions().map(function(t){if("group"===t.type){var i=t.data,s=t.options,o=t.index,l="".concat(e.getElementId("group"),"-").concat(o),c="".concat(l,"-heading");return a.createElement(r,kN({},u,{key:l,data:i,options:s,Heading:n,headingProps:{id:c,data:t.data},label:e.formatGroupLabel(t.data)}),t.options.map(function(e){return P(e,"".concat(o,"-").concat(e.index))}))}if("option"===t.type)return P(t,"".concat(t.index))});else if(g){var A=x({inputValue:f});if(null===A)return null;E=a.createElement(l,u,A)}else{var M=S({inputValue:f});if(null===M)return null;E=a.createElement(c,u,M)}var T={minMenuHeight:b,maxMenuHeight:y,menuPlacement:_,menuPosition:k,menuShouldScrollIntoView:N},D=a.createElement(iC,kN({},u,T),function(t){var r=t.ref,n=t.placerProps,o=n.placement,l=n.maxHeight;return a.createElement(i,kN({},u,T,{innerRef:r,innerProps:{onMouseDown:e.onMenuMouseDown,onMouseMove:e.onMenuMouseMove},isLoading:g,placement:o}),a.createElement(lE,{captureEnabled:m,onTopArrive:O,onBottomArrive:C,lockEnabled:w},function(t){return a.createElement(s,kN({},u,{innerRef:function(r){e.getMenuListRef(r),t(r)},innerProps:{role:"listbox","aria-multiselectable":u.isMulti,id:e.getElementId("listbox")},isLoading:g,maxHeight:l,focusedOption:h}),E)}))});return j||"fixed"===k?a.createElement(o,kN({},u,{appendTo:j,controlElement:this.controlRef,menuPlacement:_,menuPosition:k}),D):D}},{key:"renderFormField",value:function(){var e=this,t=this.props,r=t.delimiter,n=t.isDisabled,i=t.isMulti,s=t.name,o=t.required,l=this.state.selectValue;if(o&&!this.hasValue()&&!n)return a.createElement(dE,{name:s,onFocus:this.onValueInputFocus});if(s&&!n){if(i){if(r){var c=l.map(function(t){return e.getOptionValue(t)}).join(r);return a.createElement("input",{name:s,type:"hidden",value:c})}var d=l.length>0?l.map(function(t,r){return a.createElement("input",{key:"i-".concat(r),name:s,type:"hidden",value:e.getOptionValue(t)})}):a.createElement("input",{name:s,type:"hidden",value:""});return a.createElement("div",null,d)}var u=l[0]?this.getOptionValue(l[0]):"";return a.createElement("input",{name:s,type:"hidden",value:u})}}},{key:"renderLiveRegion",value:function(){var e=this.commonProps,t=this.state,r=t.ariaSelection,n=t.focusedOption,i=t.focusedValue,s=t.isFocused,o=t.selectValue,l=this.getFocusableOptions();return a.createElement(FC,kN({},e,{id:this.getElementId("live-region"),ariaSelection:r,focusedOption:n,focusedValue:i,isFocused:s,selectValue:o,focusableOptions:l,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var e=this.getComponents(),t=e.Control,r=e.IndicatorsContainer,n=e.SelectContainer,i=e.ValueContainer,s=this.props,o=s.className,l=s.id,c=s.isDisabled,d=s.menuIsOpen,u=this.state.isFocused,h=this.commonProps=this.getCommonProps();return a.createElement(n,kN({},h,{className:o,innerProps:{id:l,onKeyDown:this.onKeyDown},isDisabled:c,isFocused:u}),this.renderLiveRegion(),a.createElement(t,kN({},h,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:c,isFocused:u,menuIsOpen:d}),a.createElement(i,kN({},h,{isDisabled:c}),this.renderPlaceholderOrValue(),this.renderInput()),a.createElement(r,kN({},h,{isDisabled:c}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=t.prevProps,n=t.clearFocusValueOnUpdate,a=t.inputIsHiddenAfterUpdate,i=t.ariaSelection,s=t.isFocused,o=t.prevWasFocused,l=t.instancePrefix,c=e.options,d=e.value,u=e.menuIsOpen,h=e.inputValue,p=e.isMulti,m=FO(d),f={};if(r&&(d!==r.value||c!==r.options||u!==r.menuIsOpen||h!==r.inputValue)){var g=u?function(e,t){return vE(yE(e,t))}(e,m):[],x=u?_E(yE(e,m),"".concat(l,"-option")):[],b=n?function(e,t){var r=e.focusedValue,n=e.selectValue.indexOf(r);if(n>-1){if(t.indexOf(r)>-1)return r;if(n<t.length)return t[n]}return null}(t,m):null,y=function(e,t){var r=e.focusedOption;return r&&t.indexOf(r)>-1?r:t[0]}(t,g);f={selectValue:m,focusedOption:y,focusedOptionId:jE(x,y),focusableOptionsWithIds:x,focusedValue:b,clearFocusValueOnUpdate:!1}}var v=null!=a&&e!==r?{inputIsHidden:a,inputIsHiddenAfterUpdate:void 0}:{},_=i,k=s&&o;return s&&!k&&(_={value:QO(p,m,m[0]||null),options:m,action:"initial-input-focus"},k=!o),"initial-input-focus"===(null===i||void 0===i?void 0:i.action)&&(_=null),Re(Re(Re({},f),v),{},{prevProps:e,ariaSelection:_,prevWasFocused:k})}}]),r}(a.Component);AE.defaultProps=xE;var ME=(0,a.forwardRef)(function(e,t){var r=function(e){var t=e.defaultInputValue,r=void 0===t?"":t,n=e.defaultMenuIsOpen,i=void 0!==n&&n,s=e.defaultValue,o=void 0===s?null:s,l=e.inputValue,c=e.menuIsOpen,d=e.onChange,u=e.onInputChange,h=e.onMenuClose,p=e.onMenuOpen,m=e.value,f=Ie(e,_N),g=vN((0,a.useState)(void 0!==l?l:r),2),x=g[0],b=g[1],y=vN((0,a.useState)(void 0!==c?c:i),2),v=y[0],_=y[1],k=vN((0,a.useState)(void 0!==m?m:o),2),j=k[0],w=k[1],N=(0,a.useCallback)(function(e,t){"function"===typeof d&&d(e,t),w(e)},[d]),S=(0,a.useCallback)(function(e,t){var r;"function"===typeof u&&(r=u(e,t)),b(void 0!==r?r:e)},[u]),O=(0,a.useCallback)(function(){"function"===typeof p&&p(),_(!0)},[p]),C=(0,a.useCallback)(function(){"function"===typeof h&&h(),_(!1)},[h]),E=void 0!==l?l:x,P=void 0!==c?c:v,A=void 0!==m?m:j;return Re(Re({},f),{},{inputValue:E,menuIsOpen:P,onChange:N,onInputChange:S,onMenuClose:C,onMenuOpen:O,value:A})}(e);return a.createElement(AE,kN({ref:t},r))}),TE=ME;function DE(e){return e+.5|0}const RE=(e,t,r)=>Math.max(Math.min(e,r),t);function IE(e){return RE(DE(2.55*e),0,255)}function LE(e){return RE(DE(255*e),0,255)}function FE(e){return RE(DE(e/2.55)/100,0,1)}function zE(e){return RE(DE(100*e),0,100)}const UE={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},BE=[..."0123456789ABCDEF"],VE=e=>BE[15&e],HE=e=>BE[(240&e)>>4]+BE[15&e],WE=e=>(240&e)>>4===(15&e);function $E(e){var t=(e=>WE(e.r)&&WE(e.g)&&WE(e.b)&&WE(e.a))(e)?VE:HE;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const qE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function GE(e,t,r){const n=t*Math.min(r,1-r),a=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return r-n*Math.max(Math.min(a-3,9-a,1),-1)};return[a(0),a(8),a(4)]}function KE(e,t,r){const n=function(n){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(n+e/60)%6;return r-r*t*Math.max(Math.min(a,4-a,1),0)};return[n(5),n(3),n(1)]}function YE(e,t,r){const n=GE(e,1,.5);let a;for(t+r>1&&(a=1/(t+r),t*=a,r*=a),a=0;a<3;a++)n[a]*=1-t-r,n[a]+=t;return n}function XE(e){const t=e.r/255,r=e.g/255,n=e.b/255,a=Math.max(t,r,n),i=Math.min(t,r,n),s=(a+i)/2;let o,l,c;return a!==i&&(c=a-i,l=s>.5?c/(2-a-i):c/(a+i),o=function(e,t,r,n,a){return e===a?(t-r)/n+(t<r?6:0):t===a?(r-e)/n+2:(e-t)/n+4}(t,r,n,c,a),o=60*o+.5),[0|o,l||0,s]}function JE(e,t,r,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,r,n)).map(LE)}function QE(e,t,r){return JE(GE,e,t,r)}function ZE(e){return(e%360+360)%360}function eP(e){const t=qE.exec(e);let r,n=255;if(!t)return;t[5]!==r&&(n=t[6]?IE(+t[5]):LE(+t[5]));const a=ZE(+t[2]),i=+t[3]/100,s=+t[4]/100;return r="hwb"===t[1]?function(e,t,r){return JE(YE,e,t,r)}(a,i,s):"hsv"===t[1]?function(e,t,r){return JE(KE,e,t,r)}(a,i,s):QE(a,i,s),{r:r[0],g:r[1],b:r[2],a:n}}const tP={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},rP={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let nP;function aP(e){nP||(nP=function(){const e={},t=Object.keys(rP),r=Object.keys(tP);let n,a,i,s,o;for(n=0;n<t.length;n++){for(s=o=t[n],a=0;a<r.length;a++)i=r[a],o=o.replace(i,tP[i]);i=parseInt(rP[s],16),e[o]=[i>>16&255,i>>8&255,255&i]}return e}(),nP.transparent=[0,0,0,0]);const t=nP[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const iP=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const sP=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,oP=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function lP(e,t,r){if(e){let n=XE(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*r,0===t?360:1)),n=QE(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function cP(e,t){return e?Object.assign(t||{},e):e}function dP(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=LE(e[3]))):(t=cP(e,{r:0,g:0,b:0,a:1})).a=LE(t.a),t}function uP(e){return"r"===e.charAt(0)?function(e){const t=iP.exec(e);let r,n,a,i=255;if(t){if(t[7]!==r){const e=+t[7];i=t[8]?IE(e):RE(255*e,0,255)}return r=+t[1],n=+t[3],a=+t[5],r=255&(t[2]?IE(r):RE(r,0,255)),n=255&(t[4]?IE(n):RE(n,0,255)),a=255&(t[6]?IE(a):RE(a,0,255)),{r:r,g:n,b:a,a:i}}}(e):eP(e)}class hP{constructor(e){if(e instanceof hP)return e;const t=typeof e;let r;"object"===t?r=dP(e):"string"===t&&(r=function(e){var t,r=e.length;return"#"===e[0]&&(4===r||5===r?t={r:255&17*UE[e[1]],g:255&17*UE[e[2]],b:255&17*UE[e[3]],a:5===r?17*UE[e[4]]:255}:7!==r&&9!==r||(t={r:UE[e[1]]<<4|UE[e[2]],g:UE[e[3]]<<4|UE[e[4]],b:UE[e[5]]<<4|UE[e[6]],a:9===r?UE[e[7]]<<4|UE[e[8]]:255})),t}(e)||aP(e)||uP(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=cP(this._rgb);return e&&(e.a=FE(e.a)),e}set rgb(e){this._rgb=dP(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(FE(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?$E(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=XE(e),r=t[0],n=zE(t[1]),a=zE(t[2]);return e.a<255?"hsla(".concat(r,", ").concat(n,"%, ").concat(a,"%, ").concat(FE(e.a),")"):"hsl(".concat(r,", ").concat(n,"%, ").concat(a,"%)")}(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,n=e.rgb;let a;const i=t===a?.5:t,s=2*i-1,o=r.a-n.a,l=((s*o===-1?s:(s+o)/(1+s*o))+1)/2;a=1-l,r.r=255&l*r.r+a*n.r+.5,r.g=255&l*r.g+a*n.g+.5,r.b=255&l*r.b+a*n.b+.5,r.a=i*r.a+(1-i)*n.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,r){const n=oP(FE(e.r)),a=oP(FE(e.g)),i=oP(FE(e.b));return{r:LE(sP(n+r*(oP(FE(t.r))-n))),g:LE(sP(a+r*(oP(FE(t.g))-a))),b:LE(sP(i+r*(oP(FE(t.b))-i))),a:e.a+r*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new hP(this.rgb)}alpha(e){return this._rgb.a=LE(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=DE(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return lP(this._rgb,2,e),this}darken(e){return lP(this._rgb,2,-e),this}saturate(e){return lP(this._rgb,1,e),this}desaturate(e){return lP(this._rgb,1,-e),this}rotate(e){return function(e,t){var r=XE(e);r[0]=ZE(r[0]+t),r=QE(r),e.r=r[0],e.g=r[1],e.b=r[2]}(this._rgb,e),this}}function pP(){}const mP=(()=>{let e=0;return()=>e++})();function fP(e){return null===e||void 0===e}function gP(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function xP(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function bP(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function yP(e,t){return bP(e)?e:t}function vP(e,t){return"undefined"===typeof e?t:e}const _P=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function kP(e,t,r){if(e&&"function"===typeof e.call)return e.apply(r,t)}function jP(e,t,r,n){let a,i,s;if(gP(e))if(i=e.length,n)for(a=i-1;a>=0;a--)t.call(r,e[a],a);else for(a=0;a<i;a++)t.call(r,e[a],a);else if(xP(e))for(s=Object.keys(e),i=s.length,a=0;a<i;a++)t.call(r,e[s[a]],s[a])}function wP(e,t){let r,n,a,i;if(!e||!t||e.length!==t.length)return!1;for(r=0,n=e.length;r<n;++r)if(a=e[r],i=t[r],a.datasetIndex!==i.datasetIndex||a.index!==i.index)return!1;return!0}function NP(e){if(gP(e))return e.map(NP);if(xP(e)){const t=Object.create(null),r=Object.keys(e),n=r.length;let a=0;for(;a<n;++a)t[r[a]]=NP(e[r[a]]);return t}return e}function SP(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function OP(e,t,r,n){if(!SP(e))return;const a=t[e],i=r[e];xP(a)&&xP(i)?CP(a,i,n):t[e]=NP(i)}function CP(e,t,r){const n=gP(t)?t:[t],a=n.length;if(!xP(e))return e;const i=(r=r||{}).merger||OP;let s;for(let o=0;o<a;++o){if(s=n[o],!xP(s))continue;const t=Object.keys(s);for(let n=0,a=t.length;n<a;++n)i(t[n],e,s,r)}return e}function EP(e,t){return CP(e,t,{merger:PP})}function PP(e,t,r){if(!SP(e))return;const n=t[e],a=r[e];xP(n)&&xP(a)?EP(n,a):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=NP(a))}const AP={"":e=>e,x:e=>e.x,y:e=>e.y};function MP(e,t){const r=AP[t]||(AP[t]=function(e){const t=function(e){const t=e.split("."),r=[];let n="";for(const a of t)n+=a,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}(e);return e=>{for(const r of t){if(""===r)break;e=e&&e[r]}return e}}(t));return r(e)}function TP(e){return e.charAt(0).toUpperCase()+e.slice(1)}const DP=e=>"undefined"!==typeof e,RP=e=>"function"===typeof e,IP=(e,t)=>{if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0};const LP=Math.PI,FP=2*LP,zP=FP+LP,UP=Number.POSITIVE_INFINITY,BP=LP/180,VP=LP/2,HP=LP/4,WP=2*LP/3,$P=Math.log10,qP=Math.sign;function GP(e,t,r){return Math.abs(e-t)<r}function KP(e){const t=Math.round(e);e=GP(e,t,e/1e3)?t:e;const r=Math.pow(10,Math.floor($P(e))),n=e/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function YP(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function XP(e,t,r){let n,a,i;for(n=0,a=e.length;n<a;n++)i=e[n][r],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function JP(e){return e*(LP/180)}function QP(e){return e*(180/LP)}function ZP(e){if(!bP(e))return;let t=1,r=0;for(;Math.round(e*t)/t!==e;)t*=10,r++;return r}function eA(e,t){const r=t.x-e.x,n=t.y-e.y,a=Math.sqrt(r*r+n*n);let i=Math.atan2(n,r);return i<-.5*LP&&(i+=FP),{angle:i,distance:a}}function tA(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function rA(e,t){return(e-t+zP)%FP-LP}function nA(e){return(e%FP+FP)%FP}function aA(e,t,r,n){const a=nA(e),i=nA(t),s=nA(r),o=nA(i-a),l=nA(s-a),c=nA(a-i),d=nA(a-s);return a===i||a===s||n&&i===s||o>l&&c<d}function iA(e,t,r){return Math.max(t,Math.min(r,e))}function sA(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,r)-n&&e<=Math.max(t,r)+n}function oA(e,t,r){r=r||(r=>e[r]<t);let n,a=e.length-1,i=0;for(;a-i>1;)n=i+a>>1,r(n)?i=n:a=n;return{lo:i,hi:a}}const lA=(e,t,r,n)=>oA(e,r,n?n=>{const a=e[n][t];return a<r||a===r&&e[n+1][t]===r}:n=>e[n][t]<r),cA=(e,t,r)=>oA(e,r,n=>e[n][t]>=r);const dA=["push","pop","shift","splice","unshift"];function uA(e,t){const r=e._chartjs;if(!r)return;const n=r.listeners,a=n.indexOf(t);-1!==a&&n.splice(a,1),n.length>0||(dA.forEach(t=>{delete e[t]}),delete e._chartjs)}function hA(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const pA="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function mA(e,t){let r=[],n=!1;return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];r=i,n||(n=!0,pA.call(window,()=>{n=!1,e.apply(t,r)}))}}const fA=e=>"start"===e?"left":"end"===e?"right":"center",gA=(e,t,r)=>"start"===e?t:"end"===e?r:(t+r)/2;function xA(e,t,r){const n=t.length;let a=0,i=n;if(e._sorted){const{iScale:s,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=s.axis,{min:u,max:h,minDefined:p,maxDefined:m}=s.getUserBounds();if(p){if(a=Math.min(lA(l,d,u).lo,r?n:lA(t,d,s.getPixelForValue(u)).lo),c){const e=l.slice(0,a+1).reverse().findIndex(e=>!fP(e[o.axis]));a-=Math.max(0,e)}a=iA(a,0,n-1)}if(m){let e=Math.max(lA(l,s.axis,h,!0).hi+1,r?0:lA(t,d,s.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!fP(e[o.axis]));e+=Math.max(0,t)}i=iA(e,a,n)-a}else i=n-a}return{start:a,count:i}}function bA(e){const{xScale:t,yScale:r,_scaleRanges:n}=e,a={xmin:t.min,xmax:t.max,ymin:r.min,ymax:r.max};if(!n)return e._scaleRanges=a,!0;const i=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,a),i}const yA=e=>0===e||1===e,vA=(e,t,r)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*FP/r),_A=(e,t,r)=>Math.pow(2,-10*e)*Math.sin((e-t)*FP/r)+1,kA={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*VP),easeOutSine:e=>Math.sin(e*VP),easeInOutSine:e=>-.5*(Math.cos(LP*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>yA(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>yA(e)?e:vA(e,.075,.3),easeOutElastic:e=>yA(e)?e:_A(e,.075,.3),easeInOutElastic(e){const t=.1125;return yA(e)?e:e<.5?.5*vA(2*e,t,.45):.5+.5*_A(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-kA.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,r=2.75;return e<1/r?t*e*e:e<2/r?t*(e-=1.5/r)*e+.75:e<2.5/r?t*(e-=2.25/r)*e+.9375:t*(e-=2.625/r)*e+.984375},easeInOutBounce:e=>e<.5?.5*kA.easeInBounce(2*e):.5*kA.easeOutBounce(2*e-1)+.5};function jA(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function wA(e){return jA(e)?e:new hP(e)}function NA(e){return jA(e)?e:new hP(e).saturate(.5).darken(.1).hexString()}const SA=["x","y","borderWidth","radius","tension"],OA=["color","borderColor","backgroundColor"];const CA=new Map;function EA(e,t,r){return function(e,t){t=t||{};const r=e+JSON.stringify(t);let n=CA.get(r);return n||(n=new Intl.NumberFormat(e,t),CA.set(r,n)),n}(t,r).format(e)}const PA={values:e=>gP(e)?e:""+e,numeric(e,t,r){if(0===e)return"0";const n=this.chart.options.locale;let a,i=e;if(r.length>1){const t=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(t<1e-4||t>1e15)&&(a="scientific"),i=function(e,t){let r=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(r)>=1&&e!==Math.floor(e)&&(r=e-Math.floor(e));return r}(e,r)}const s=$P(Math.abs(i)),o=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:a,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),EA(e,n,l)},logarithmic(e,t,r){if(0===e)return"0";const n=r[t].significand||e/Math.pow(10,Math.floor($P(e)));return[1,2,3,5,10,15].includes(n)||t>.8*r.length?PA.numeric.call(this,e,t,r):""}};var AA={formatters:PA};const MA=Object.create(null),TA=Object.create(null);function DA(e,t){if(!t)return e;const r=t.split(".");for(let n=0,a=r.length;n<a;++n){const t=r[n];e=e[t]||(e[t]=Object.create(null))}return e}function RA(e,t,r){return"string"===typeof t?CP(DA(e,t),r):CP(DA(e,""),t)}class IA{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>NA(t.backgroundColor),this.hoverBorderColor=(e,t)=>NA(t.borderColor),this.hoverColor=(e,t)=>NA(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return RA(this,e,t)}get(e){return DA(this,e)}describe(e,t){return RA(TA,e,t)}override(e,t){return RA(MA,e,t)}route(e,t,r,n){const a=DA(this,e),i=DA(this,r),s="_"+t;Object.defineProperties(a,{[s]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[s],t=i[n];return xP(e)?Object.assign({},t,e):vP(e,t)},set(e){this[s]=e}}})}apply(e){e.forEach(e=>e(this))}}var LA=new IA({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:OA},numbers:{type:"number",properties:SA}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:AA.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function FA(e,t,r,n,a){let i=t[a];return i||(i=t[a]=e.measureText(a).width,r.push(a)),i>n&&(n=i),n}function zA(e,t,r,n){let a=(n=n||{}).data=n.data||{},i=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(a=n.data={},i=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let s=0;const o=r.length;let l,c,d,u,h;for(l=0;l<o;l++)if(u=r[l],void 0===u||null===u||gP(u)){if(gP(u))for(c=0,d=u.length;c<d;c++)h=u[c],void 0===h||null===h||gP(h)||(s=FA(e,a,i,s,h))}else s=FA(e,a,i,s,u);e.restore();const p=i.length/2;if(p>r.length){for(l=0;l<p;l++)delete a[i[l]];i.splice(0,p)}return s}function UA(e,t,r){const n=e.currentDevicePixelRatio,a=0!==r?Math.max(r/2,.5):0;return Math.round((t-a)*n)/n+a}function BA(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function VA(e,t,r,n){HA(e,t,r,n,null)}function HA(e,t,r,n,a){let i,s,o,l,c,d,u,h;const p=t.pointStyle,m=t.rotation,f=t.radius;let g=(m||0)*BP;if(p&&"object"===typeof p&&(i=p.toString(),"[object HTMLImageElement]"===i||"[object HTMLCanvasElement]"===i))return e.save(),e.translate(r,n),e.rotate(g),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void e.restore();if(!(isNaN(f)||f<=0)){switch(e.beginPath(),p){default:a?e.ellipse(r,n,a/2,f,0,0,FP):e.arc(r,n,f,0,FP),e.closePath();break;case"triangle":d=a?a/2:f,e.moveTo(r+Math.sin(g)*d,n-Math.cos(g)*f),g+=WP,e.lineTo(r+Math.sin(g)*d,n-Math.cos(g)*f),g+=WP,e.lineTo(r+Math.sin(g)*d,n-Math.cos(g)*f),e.closePath();break;case"rectRounded":c=.516*f,l=f-c,s=Math.cos(g+HP)*l,u=Math.cos(g+HP)*(a?a/2-c:l),o=Math.sin(g+HP)*l,h=Math.sin(g+HP)*(a?a/2-c:l),e.arc(r-u,n-o,c,g-LP,g-VP),e.arc(r+h,n-s,c,g-VP,g),e.arc(r+u,n+o,c,g,g+VP),e.arc(r-h,n+s,c,g+VP,g+LP),e.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*f,d=a?a/2:l,e.rect(r-d,n-l,2*d,2*l);break}g+=HP;case"rectRot":u=Math.cos(g)*(a?a/2:f),s=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(a?a/2:f),e.moveTo(r-u,n-o),e.lineTo(r+h,n-s),e.lineTo(r+u,n+o),e.lineTo(r-h,n+s),e.closePath();break;case"crossRot":g+=HP;case"cross":u=Math.cos(g)*(a?a/2:f),s=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(a?a/2:f),e.moveTo(r-u,n-o),e.lineTo(r+u,n+o),e.moveTo(r+h,n-s),e.lineTo(r-h,n+s);break;case"star":u=Math.cos(g)*(a?a/2:f),s=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(a?a/2:f),e.moveTo(r-u,n-o),e.lineTo(r+u,n+o),e.moveTo(r+h,n-s),e.lineTo(r-h,n+s),g+=HP,u=Math.cos(g)*(a?a/2:f),s=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(a?a/2:f),e.moveTo(r-u,n-o),e.lineTo(r+u,n+o),e.moveTo(r+h,n-s),e.lineTo(r-h,n+s);break;case"line":s=a?a/2:Math.cos(g)*f,o=Math.sin(g)*f,e.moveTo(r-s,n-o),e.lineTo(r+s,n+o);break;case"dash":e.moveTo(r,n),e.lineTo(r+Math.cos(g)*(a?a/2:f),n+Math.sin(g)*f);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function WA(e,t,r){return r=r||.5,!t||e&&e.x>t.left-r&&e.x<t.right+r&&e.y>t.top-r&&e.y<t.bottom+r}function $A(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function qA(e){e.restore()}function GA(e,t,r,n,a){if(!t)return e.lineTo(r.x,r.y);if("middle"===a){const n=(t.x+r.x)/2;e.lineTo(n,t.y),e.lineTo(n,r.y)}else"after"===a!==!!n?e.lineTo(t.x,r.y):e.lineTo(r.x,t.y);e.lineTo(r.x,r.y)}function KA(e,t,r,n){if(!t)return e.lineTo(r.x,r.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function YA(e,t,r,n,a){if(a.strikethrough||a.underline){const i=e.measureText(n),s=t-i.actualBoundingBoxLeft,o=t+i.actualBoundingBoxRight,l=r-i.actualBoundingBoxAscent,c=r+i.actualBoundingBoxDescent,d=a.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(s,d),e.lineTo(o,d),e.stroke()}}function XA(e,t){const r=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=r}function JA(e,t,r,n,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=gP(t)?t:[t],o=i.strokeWidth>0&&""!==i.strokeColor;let l,c;for(e.save(),e.font=a.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),fP(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,i),l=0;l<s.length;++l)c=s[l],i.backdrop&&XA(e,i.backdrop),o&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),fP(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(c,r,n,i.maxWidth)),e.fillText(c,r,n,i.maxWidth),YA(e,r,n,c,i),n+=Number(a.lineHeight);e.restore()}function QA(e,t){const{x:r,y:n,w:a,h:i,radius:s}=t;e.arc(r+s.topLeft,n+s.topLeft,s.topLeft,1.5*LP,LP,!0),e.lineTo(r,n+i-s.bottomLeft),e.arc(r+s.bottomLeft,n+i-s.bottomLeft,s.bottomLeft,LP,VP,!0),e.lineTo(r+a-s.bottomRight,n+i),e.arc(r+a-s.bottomRight,n+i-s.bottomRight,s.bottomRight,VP,0,!0),e.lineTo(r+a,n+s.topRight),e.arc(r+a-s.topRight,n+s.topRight,s.topRight,0,-VP,!0),e.lineTo(r+s.topLeft,n)}const ZA=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,eM=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function tM(e,t){const r=(""+e).match(ZA);if(!r||"normal"===r[1])return 1.2*t;switch(e=+r[2],r[3]){case"px":return e;case"%":e/=100}return t*e}const rM=e=>+e||0;function nM(e,t){const r={},n=xP(t),a=n?Object.keys(t):t,i=xP(e)?n?r=>vP(e[r],e[t[r]]):t=>e[t]:()=>e;for(const s of a)r[s]=rM(i(s));return r}function aM(e){return nM(e,{top:"y",right:"x",bottom:"y",left:"x"})}function iM(e){return nM(e,["topLeft","topRight","bottomLeft","bottomRight"])}function sM(e){const t=aM(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function oM(e,t){e=e||{},t=t||LA.font;let r=vP(e.size,t.size);"string"===typeof r&&(r=parseInt(r,10));let n=vP(e.style,t.style);n&&!(""+n).match(eM)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const a={family:vP(e.family,t.family),lineHeight:tM(vP(e.lineHeight,t.lineHeight),r),size:r,style:n,weight:vP(e.weight,t.weight),string:""};return a.string=function(e){return!e||fP(e.size)||fP(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(a),a}function lM(e,t,r,n){let a,i,s,o=!0;for(a=0,i=e.length;a<i;++a)if(s=e[a],void 0!==s&&(void 0!==t&&"function"===typeof s&&(s=s(t),o=!1),void 0!==r&&gP(s)&&(s=s[r%s.length],o=!1),void 0!==s))return n&&!o&&(n.cacheable=!1),s}function cM(e,t){return Object.assign(Object.create(e),t)}function dM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const a=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof r&&(r=_M("_fallback",e));const i={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:a,_fallback:r,_getTarget:n,override:n=>dM([n,...e],t,a,r)};return new Proxy(i,{deleteProperty:(t,r)=>(delete t[r],delete t._keys,delete e[0][r],!0),get:(r,n)=>fM(r,n,()=>function(e,t,r,n){let a;for(const i of t)if(a=_M(pM(i,e),r),"undefined"!==typeof a)return mM(e,a)?yM(r,n,e,a):a}(n,t,e,r)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>kM(e).includes(t),ownKeys:e=>kM(e),set(e,t,r){const a=e._storage||(e._storage=n());return e[t]=a[t]=r,delete e._keys,!0}})}function uM(e,t,r,n){const a={_cacheable:!1,_proxy:e,_context:t,_subProxy:r,_stack:new Set,_descriptors:hM(e,n),setContext:t=>uM(e,t,r,n),override:a=>uM(e.override(a),t,r,n)};return new Proxy(a,{deleteProperty:(t,r)=>(delete t[r],delete e[r],!0),get:(e,t,r)=>fM(e,t,()=>function(e,t,r){const{_proxy:n,_context:a,_subProxy:i,_descriptors:s}=e;let o=n[t];RP(o)&&s.isScriptable(t)&&(o=function(e,t,r,n){const{_proxy:a,_context:i,_subProxy:s,_stack:o}=r;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(i,s||n);o.delete(e),mM(e,l)&&(l=yM(a._scopes,a,e,l));return l}(t,o,e,r));gP(o)&&o.length&&(o=function(e,t,r,n){const{_proxy:a,_context:i,_subProxy:s,_descriptors:o}=r;if("undefined"!==typeof i.index&&n(e))return t[i.index%t.length];if(xP(t[0])){const r=t,n=a._scopes.filter(e=>e!==r);t=[];for(const l of r){const r=yM(n,a,e,l);t.push(uM(r,i,s&&s[e],o))}}return t}(t,o,e,s.isIndexable));mM(t,o)&&(o=uM(o,a,i&&i[t],s));return o}(e,t,r)),getOwnPropertyDescriptor:(t,r)=>t._descriptors.allKeys?Reflect.has(e,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,r),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,r)=>Reflect.has(e,r),ownKeys:()=>Reflect.ownKeys(e),set:(t,r,n)=>(e[r]=n,delete t[r],!0)})}function hM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:r=t.scriptable,_indexable:n=t.indexable,_allKeys:a=t.allKeys}=e;return{allKeys:a,scriptable:r,indexable:n,isScriptable:RP(r)?r:()=>r,isIndexable:RP(n)?n:()=>n}}const pM=(e,t)=>e?e+TP(t):t,mM=(e,t)=>xP(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function fM(e,t,r){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const n=r();return e[t]=n,n}function gM(e,t,r){return RP(e)?e(t,r):e}const xM=(e,t)=>!0===e?t:"string"===typeof e?MP(t,e):void 0;function bM(e,t,r,n,a){for(const i of t){const t=xM(r,i);if(t){e.add(t);const i=gM(t._fallback,r,a);if("undefined"!==typeof i&&i!==r&&i!==n)return i}else if(!1===t&&"undefined"!==typeof n&&r!==n)return null}return!1}function yM(e,t,r,n){const a=t._rootScopes,i=gM(t._fallback,r,n),s=[...e,...a],o=new Set;o.add(n);let l=vM(o,s,r,i||r,n);return null!==l&&(("undefined"===typeof i||i===r||(l=vM(o,s,i,l,n),null!==l))&&dM(Array.from(o),[""],a,i,()=>function(e,t,r){const n=e._getTarget();t in n||(n[t]={});const a=n[t];if(gP(a)&&xP(r))return r;return a||{}}(t,r,n)))}function vM(e,t,r,n,a){for(;r;)r=bM(e,t,r,n,a);return r}function _M(e,t){for(const r of t){if(!r)continue;const t=r[e];if("undefined"!==typeof t)return t}}function kM(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const r of e)for(const e of Object.keys(r).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function jM(e,t,r,n){const{iScale:a}=e,{key:i="r"}=this._parsing,s=new Array(n);let o,l,c,d;for(o=0,l=n;o<l;++o)c=o+r,d=t[c],s[o]={r:a.parse(MP(d,i),c)};return s}const wM=Number.EPSILON||1e-14,NM=(e,t)=>t<e.length&&!e[t].skip&&e[t],SM=e=>"x"===e?"y":"x";function OM(e,t,r,n){const a=e.skip?t:e,i=t,s=r.skip?t:r,o=tA(i,a),l=tA(s,i);let c=o/(o+l),d=l/(o+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=n*c,h=n*d;return{previous:{x:i.x-u*(s.x-a.x),y:i.y-u*(s.y-a.y)},next:{x:i.x+h*(s.x-a.x),y:i.y+h*(s.y-a.y)}}}function CM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const r=SM(t),n=e.length,a=Array(n).fill(0),i=Array(n);let s,o,l,c=NM(e,0);for(s=0;s<n;++s)if(o=l,l=c,c=NM(e,s+1),l){if(c){const e=c[t]-l[t];a[s]=0!==e?(c[r]-l[r])/e:0}i[s]=o?c?qP(a[s-1])!==qP(a[s])?0:(a[s-1]+a[s])/2:a[s-1]:a[s]}!function(e,t,r){const n=e.length;let a,i,s,o,l,c=NM(e,0);for(let d=0;d<n-1;++d)l=c,c=NM(e,d+1),l&&c&&(GP(t[d],0,wM)?r[d]=r[d+1]=0:(a=r[d]/t[d],i=r[d+1]/t[d],o=Math.pow(a,2)+Math.pow(i,2),o<=9||(s=3/Math.sqrt(o),r[d]=a*s*t[d],r[d+1]=i*s*t[d])))}(e,a,i),function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const n=SM(r),a=e.length;let i,s,o,l=NM(e,0);for(let c=0;c<a;++c){if(s=o,o=l,l=NM(e,c+1),!o)continue;const a=o[r],d=o[n];s&&(i=(a-s[r])/3,o["cp1".concat(r)]=a-i,o["cp1".concat(n)]=d-i*t[c]),l&&(i=(l[r]-a)/3,o["cp2".concat(r)]=a+i,o["cp2".concat(n)]=d+i*t[c])}}(e,i,t)}function EM(e,t,r){return Math.max(Math.min(e,r),t)}function PM(e,t,r,n,a){let i,s,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)CM(e,a);else{let r=n?e[e.length-1]:e[0];for(i=0,s=e.length;i<s;++i)o=e[i],l=OM(r,o,e[Math.min(i+1,s-(n?0:1))%s],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,r=o}t.capBezierPoints&&function(e,t){let r,n,a,i,s,o=WA(e[0],t);for(r=0,n=e.length;r<n;++r)s=i,i=o,o=r<n-1&&WA(e[r+1],t),i&&(a=e[r],s&&(a.cp1x=EM(a.cp1x,t.left,t.right),a.cp1y=EM(a.cp1y,t.top,t.bottom)),o&&(a.cp2x=EM(a.cp2x,t.left,t.right),a.cp2y=EM(a.cp2y,t.top,t.bottom)))}(e,r)}function AM(){return"undefined"!==typeof window&&"undefined"!==typeof document}function MM(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function TM(e,t,r){let n;return"string"===typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[r])):n=e,n}const DM=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const RM=["top","right","bottom","left"];function IM(e,t,r){const n={};r=r?"-"+r:"";for(let a=0;a<4;a++){const i=RM[a];n[i]=parseFloat(e[t+"-"+i+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function LM(e,t){if("native"in e)return e;const{canvas:r,currentDevicePixelRatio:n}=t,a=DM(r),i="border-box"===a.boxSizing,s=IM(a,"padding"),o=IM(a,"border","width"),{x:l,y:c,box:d}=function(e,t){const r=e.touches,n=r&&r.length?r[0]:e,{offsetX:a,offsetY:i}=n;let s,o,l=!1;if(((e,t,r)=>(e>0||t>0)&&(!r||!r.shadowRoot))(a,i,e.target))s=a,o=i;else{const e=t.getBoundingClientRect();s=n.clientX-e.left,o=n.clientY-e.top,l=!0}return{x:s,y:o,box:l}}(e,r),u=s.left+(d&&o.left),h=s.top+(d&&o.top);let{width:p,height:m}=t;return i&&(p-=s.width+o.width,m-=s.height+o.height),{x:Math.round((l-u)/p*r.width/n),y:Math.round((c-h)/m*r.height/n)}}const FM=e=>Math.round(10*e)/10;function zM(e,t,r,n){const a=DM(e),i=IM(a,"margin"),s=TM(a.maxWidth,e,"clientWidth")||UP,o=TM(a.maxHeight,e,"clientHeight")||UP,l=function(e,t,r){let n,a;if(void 0===t||void 0===r){const i=e&&MM(e);if(i){const e=i.getBoundingClientRect(),s=DM(i),o=IM(s,"border","width"),l=IM(s,"padding");t=e.width-l.width-o.width,r=e.height-l.height-o.height,n=TM(s.maxWidth,i,"clientWidth"),a=TM(s.maxHeight,i,"clientHeight")}else t=e.clientWidth,r=e.clientHeight}return{width:t,height:r,maxWidth:n||UP,maxHeight:a||UP}}(e,t,r);let{width:c,height:d}=l;if("content-box"===a.boxSizing){const e=IM(a,"border","width"),t=IM(a,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-i.width),d=Math.max(0,n?c/n:d-i.height),c=FM(Math.min(c,s,l.maxWidth)),d=FM(Math.min(d,o,l.maxHeight)),c&&!d&&(d=FM(c/2));return(void 0!==t||void 0!==r)&&n&&l.height&&d>l.height&&(d=l.height,c=FM(Math.floor(d*n))),{width:c,height:d}}function UM(e,t,r){const n=t||1,a=Math.floor(e.height*n),i=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const s=e.canvas;return s.style&&(r||!s.style.height&&!s.style.width)&&(s.style.height="".concat(e.height,"px"),s.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==n||s.height!==a||s.width!==i)&&(e.currentDevicePixelRatio=n,s.height=a,s.width=i,e.ctx.setTransform(n,0,0,n,0,0),!0)}const BM=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};AM()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(CF){}return e}();function VM(e,t){const r=function(e,t){return DM(e).getPropertyValue(t)}(e,t),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function HM(e,t,r,n){return{x:e.x+r*(t.x-e.x),y:e.y+r*(t.y-e.y)}}function WM(e,t,r,n){return{x:e.x+r*(t.x-e.x),y:"middle"===n?r<.5?e.y:t.y:"after"===n?r<1?e.y:t.y:r>0?t.y:e.y}}function $M(e,t,r,n){const a={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},s=HM(e,a,r),o=HM(a,i,r),l=HM(i,t,r),c=HM(s,o,r),d=HM(o,l,r);return HM(c,d,r)}function qM(e,t,r){return e?function(e,t){return{x:r=>e+e+t-r,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,r):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function GM(e,t){let r,n;"ltr"!==t&&"rtl"!==t||(r=e.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",t,"important"),e.prevTextDirection=n)}function KM(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function YM(e){return"angle"===e?{between:aA,compare:rA,normalize:nA}:{between:sA,compare:(e,t)=>e-t,normalize:e=>e}}function XM(e){let{start:t,end:r,count:n,loop:a,style:i}=e;return{start:t%n,end:r%n,loop:a&&(r-t+1)%n===0,style:i}}function JM(e,t,r){if(!r)return[e];const{property:n,start:a,end:i}=r,s=t.length,{compare:o,between:l,normalize:c}=YM(n),{start:d,end:u,loop:h,style:p}=function(e,t,r){const{property:n,start:a,end:i}=r,{between:s,normalize:o}=YM(n),l=t.length;let c,d,{start:u,end:h,loop:p}=e;if(p){for(u+=l,h+=l,c=0,d=l;c<d&&s(o(t[u%l][n]),a,i);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:p,style:e.style}}(e,t,r),m=[];let f,g,x,b=!1,y=null;const v=()=>b||l(a,x,f)&&0!==o(a,x),_=()=>!b||0===o(i,f)||l(i,x,f);for(let k=d,j=d;k<=u;++k)g=t[k%s],g.skip||(f=c(g[n]),f!==x&&(b=l(f,a,i),null===y&&v()&&(y=0===o(f,a)?k:j),null!==y&&_()&&(m.push(XM({start:y,end:k,loop:h,count:s,style:p})),y=null),j=k,x=f));return null!==y&&m.push(XM({start:y,end:u,loop:h,count:s,style:p})),m}function QM(e,t){const r=[],n=e.segments;for(let a=0;a<n.length;a++){const i=JM(n[a],e.points,t);i.length&&r.push(...i)}return r}function ZM(e,t,r,n){return n&&n.setContext&&r?function(e,t,r,n){const a=e._chart.getContext(),i=eT(e.options),{_datasetIndex:s,options:{spanGaps:o}}=e,l=r.length,c=[];let d=i,u=t[0].start,h=u;function p(e,t,n,a){const i=o?-1:1;if(e!==t){for(e+=l;r[e%l].skip;)e-=i;for(;r[t%l].skip;)t+=i;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:n,style:a}),d=a,u=t%l)}}for(const m of t){u=o?u:m.start;let e,t=r[u%l];for(h=u+1;h<=m.end;h++){const i=r[h%l];e=eT(n.setContext(cM(a,{type:"segment",p0:t,p1:i,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:s}))),tT(e,d)&&p(u,h-1,m.loop,d),t=i,d=e}u<h-1&&p(u,h-1,m.loop,d)}return c}(e,t,r,n):t}function eT(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function tT(e,t){if(!t)return!1;const r=[],n=function(e,t){return jA(t)?(r.includes(t)||r.push(t),r.indexOf(t)):t};return JSON.stringify(e,n)!==JSON.stringify(t,n)}function rT(e,t,r){return e.options.clip?e[r]:t[r]}function nT(e,t){const r=t._clip;if(r.disabled)return!1;const n=function(e,t){const{xScale:r,yScale:n}=e;return r&&n?{left:rT(r,t,"left"),right:rT(r,t,"right"),top:rT(n,t,"top"),bottom:rT(n,t,"bottom")}:t}(t,e.chartArea);return{left:!1===r.left?0:n.left-(!0===r.left?0:r.left),right:!1===r.right?e.width:n.right+(!0===r.right?0:r.right),top:!1===r.top?0:n.top-(!0===r.top?0:r.top),bottom:!1===r.bottom?e.height:n.bottom+(!0===r.bottom?0:r.bottom)}}class aT{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,n){const a=t.listeners[n],i=t.duration;a.forEach(n=>n({chart:e,initial:t.initial,numSteps:i,currentStep:Math.min(r-t.start,i)}))}_refresh(){this._request||(this._running=!0,this._request=pA.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((r,n)=>{if(!r.running||!r.items.length)return;const a=r.items;let i,s=a.length-1,o=!1;for(;s>=0;--s)i=a[s],i._active?(i._total>r.duration&&(r.duration=i._total),i.tick(e),o=!0):(a[s]=a[a.length-1],a.pop());o&&(n.draw(),this._notify(n,r,e,"progress")),a.length||(r.running=!1,this._notify(n,r,e,"complete"),r.initial=!1),t+=a.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let n=r.length-1;for(;n>=0;--n)r[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var iT=new aT;const sT="transparent",oT={boolean:(e,t,r)=>r>.5?t:e,color(e,t,r){const n=wA(e||sT),a=n.valid&&wA(t||sT);return a&&a.valid?a.mix(n,r).hexString():t},number:(e,t,r)=>e+(t-e)*r};class lT{constructor(e,t,r,n){const a=t[r];n=lM([e.to,n,a,e.from]);const i=lM([e.from,a,n]);this._active=!0,this._fn=e.fn||oT[e.type||typeof i],this._easing=kA[e.easing]||kA.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=i,this._to=n,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const n=this._target[this._prop],a=r-this._start,i=this._duration-a;this._start=r,this._duration=Math.floor(Math.max(i,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=lM([e.to,t,n,e.from]),this._from=lM([e.from,n,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,n=this._prop,a=this._from,i=this._loop,s=this._to;let o;if(this._active=a!==s&&(i||t<r),!this._active)return this._target[n]=s,void this._notify(!0);t<0?this._target[n]=a:(o=t/r%2,o=i&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[n]=this._fn(a,s,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let n=0;n<r.length;n++)r[n][t]()}}class cT{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!xP(e))return;const t=Object.keys(LA.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const a=e[n];if(!xP(a))return;const i={};for(const e of t)i[e]=a[e];(gP(a.properties)&&a.properties||[n]).forEach(e=>{e!==n&&r.has(e)||r.set(e,i)})})}_animateOptions(e,t){const r=t.options,n=function(e,t){if(!t)return;let r=e.options;if(!r)return void(e.options=t);r.$shared&&(e.options=r=Object.assign({},r,{$shared:!1,$animations:{}}));return r}(e,r);if(!n)return[];const a=this._createAnimations(n,r);return r.$shared&&function(e,t){const r=[],n=Object.keys(t);for(let a=0;a<n.length;a++){const t=e[n[a]];t&&t.active()&&r.push(t.wait())}return Promise.all(r)}(e.options.$animations,r).then(()=>{e.options=r},()=>{}),a}_createAnimations(e,t){const r=this._properties,n=[],a=e.$animations||(e.$animations={}),i=Object.keys(t),s=Date.now();let o;for(o=i.length-1;o>=0;--o){const l=i[o];if("$"===l.charAt(0))continue;if("options"===l){n.push(...this._animateOptions(e,t));continue}const c=t[l];let d=a[l];const u=r.get(l);if(d){if(u&&d.active()){d.update(u,c,s);continue}d.cancel()}u&&u.duration?(a[l]=d=new lT(u,e,l,c),n.push(d)):e[l]=c}return n}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const r=this._createAnimations(e,t);return r.length?(iT.add(this._chart,r),!0):void 0}}function dT(e,t){const r=e&&e.options||{},n=r.reverse,a=void 0===r.min?t:0,i=void 0===r.max?t:0;return{start:n?i:a,end:n?a:i}}function uT(e,t){const r=[],n=e._getSortedDatasetMetas(t);let a,i;for(a=0,i=n.length;a<i;++a)r.push(n[a].index);return r}function hT(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=e.keys,i="single"===n.mode;let s,o,l,c;if(null===t)return;let d=!1;for(s=0,o=a.length;s<o;++s){if(l=+a[s],l===r){if(d=!0,n.all)continue;break}c=e.values[l],bP(c)&&(i||0===t||qP(t)===qP(c))&&(t+=c)}return d||n.all?t:0}function pT(e,t){const r=e&&e.options.stacked;return r||void 0===r&&void 0!==t.stack}function mT(e,t,r){const n=e[t]||(e[t]={});return n[r]||(n[r]={})}function fT(e,t,r,n){for(const a of t.getMatchingVisibleMetas(n).reverse()){const t=e[a.index];if(r&&t>0||!r&&t<0)return a.index}return null}function gT(e,t){const{chart:r,_cachedMeta:n}=e,a=r._stacks||(r._stacks={}),{iScale:i,vScale:s,index:o}=n,l=i.axis,c=s.axis,d=function(e,t,r){return"".concat(e.id,".").concat(t.id,".").concat(r.stack||r.type)}(i,s,n),u=t.length;let h;for(let p=0;p<u;++p){const e=t[p],{[l]:r,[c]:i}=e;h=(e._stacks||(e._stacks={}))[c]=mT(a,d,r),h[o]=i,h._top=fT(h,s,!0,n.type),h._bottom=fT(h,s,!1,n.type);(h._visualValues||(h._visualValues={}))[o]=i}}function xT(e,t){const r=e.scales;return Object.keys(r).filter(e=>r[e].axis===t).shift()}function bT(e,t){const r=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[n]||void 0===t[n][r])return;delete t[n][r],void 0!==t[n]._visualValues&&void 0!==t[n]._visualValues[r]&&delete t[n]._visualValues[r]}}}const yT=e=>"reset"===e||"none"===e,vT=(e,t)=>t?e:Object.assign({},e);class _T{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=pT(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&bT(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),n=(e,t,r,n)=>"x"===e?t:"r"===e?n:r,a=t.xAxisID=vP(r.xAxisID,xT(e,"x")),i=t.yAxisID=vP(r.yAxisID,xT(e,"y")),s=t.rAxisID=vP(r.rAxisID,xT(e,"r")),o=t.indexAxis,l=t.iAxisID=n(o,a,i,s),c=t.vAxisID=n(o,i,a,s);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(i),t.rScale=this.getScaleForId(s),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&uA(this._data,this),e._stacked&&bT(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(xP(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:r,vScale:n}=t,a="x"===r.axis?"x":"y",i="x"===n.axis?"x":"y",s=Object.keys(e),o=new Array(s.length);let l,c,d;for(l=0,c=s.length;l<c;++l)d=s[l],o[l]={[a]:d,[i]:e[d]};return o}(t,e)}else if(r!==t){if(r){uA(r,this);const e=this._cachedMeta;bT(e),e._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),dA.forEach(t=>{const r="_onData"+TP(t),n=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];const s=n.apply(this,a);return e._chartjs.listeners.forEach(e=>{"function"===typeof e[r]&&e[r](...a)}),s}})}))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let n=!1;this._dataCheck();const a=t._stacked;t._stacked=pT(t.vScale,t),t.stack!==r.stack&&(n=!0,bT(t),t.stack=r.stack),this._resyncElements(e),(n||a!==t._stacked)&&(gT(this,t._parsed),t._stacked=pT(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:n}=this,{iScale:a,_stacked:i}=r,s=a.axis;let o,l,c,d=0===e&&t===n.length||r._sorted,u=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=n,r._sorted=!0,c=n;else{c=gP(n[e])?this.parseArrayData(r,n,e,t):xP(n[e])?this.parseObjectData(r,n,e,t):this.parsePrimitiveData(r,n,e,t);const a=()=>null===l[s]||u&&l[s]<u[s];for(o=0;o<t;++o)r._parsed[o+e]=l=c[o],d&&(a()&&(d=!1),u=l);r._sorted=d}i&&gT(this,c)}parsePrimitiveData(e,t,r,n){const{iScale:a,vScale:i}=e,s=a.axis,o=i.axis,l=a.getLabels(),c=a===i,d=new Array(n);let u,h,p;for(u=0,h=n;u<h;++u)p=u+r,d[u]={[s]:c||a.parse(l[p],p),[o]:i.parse(t[p],p)};return d}parseArrayData(e,t,r,n){const{xScale:a,yScale:i}=e,s=new Array(n);let o,l,c,d;for(o=0,l=n;o<l;++o)c=o+r,d=t[c],s[o]={x:a.parse(d[0],c),y:i.parse(d[1],c)};return s}parseObjectData(e,t,r,n){const{xScale:a,yScale:i}=e,{xAxisKey:s="x",yAxisKey:o="y"}=this._parsing,l=new Array(n);let c,d,u,h;for(c=0,d=n;c<d;++c)u=c+r,h=t[u],l[c]={x:a.parse(MP(h,s),u),y:i.parse(MP(h,o),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const n=this.chart,a=this._cachedMeta,i=t[e.axis];return hT({keys:uT(n,!0),values:t._stacks[e.axis]._visualValues},i,a.index,{mode:r})}updateRangeFromParsed(e,t,r,n){const a=r[t.axis];let i=null===a?NaN:a;const s=n&&r._stacks[t.axis];n&&s&&(n.values=s,i=hT(n,a,this._cachedMeta.index)),e.min=Math.min(e.min,i),e.max=Math.max(e.max,i)}getMinMax(e,t){const r=this._cachedMeta,n=r._parsed,a=r._sorted&&e===r.iScale,i=n.length,s=this._getOtherScale(e),o=((e,t,r)=>e&&!t.hidden&&t._stacked&&{keys:uT(r,!0),values:null})(t,r,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:r,minDefined:n,maxDefined:a}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:a?r:Number.POSITIVE_INFINITY}}(s);let u,h;function p(){h=n[u];const t=h[s.axis];return!bP(h[e.axis])||c>t||d<t}for(u=0;u<i&&(p()||(this.updateRangeFromParsed(l,e,h,o),!a));++u);if(a)for(u=i-1;u>=0;--u)if(!p()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let n,a,i;for(n=0,a=t.length;n<a;++n)i=t[n][e.axis],bP(i)&&r.push(i);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,n=t.vScale,a=this.getParsed(e);return{label:r?""+r.getLabelForValue(a[r.axis]):"",value:n?""+n.getLabelForValue(a[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,r,n,a;return xP(e)?(t=e.top,r=e.right,n=e.bottom,a=e.left):t=r=n=a=e,{top:t,right:r,bottom:n,left:a,disabled:!1===e}}(vP(this.options.clip,function(e,t,r){if(!1===r)return!1;const n=dT(e,r),a=dT(t,r);return{top:a.end,right:n.end,bottom:a.start,left:n.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,n=r.data||[],a=t.chartArea,i=[],s=this._drawStart||0,o=this._drawCount||n.length-s,l=this.options.drawActiveElementsOnTop;let c;for(r.dataset&&r.dataset.draw(e,a,s,o),c=s;c<s+o;++c){const t=n[c];t.hidden||(t.active&&l?i.push(t):t.draw(e,a))}for(c=0;c<i.length;++c)i[c].draw(e,a)}getStyle(e,t){const r=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const n=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];a=t.$context||(t.$context=function(e,t,r){return cM(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:r,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),a.parsed=this.getParsed(e),a.raw=n.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=function(e,t){return cM(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),a.dataset=n,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=r,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2?arguments[2]:void 0;const n="active"===t,a=this._cachedDataOpts,i=e+"-"+t,s=a[i],o=this.enableOptionSharing&&DP(r);if(s)return vT(s,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=n?["".concat(e,"Hover"),"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys(LA.elements[e]),p=l.resolveNamedOptions(u,h,()=>this.getContext(r,n,t),d);return p.$shared&&(p.$shared=o,a[i]=Object.freeze(vT(p,o))),p}_resolveAnimations(e,t,r){const n=this.chart,a=this._cachedDataOpts,i="animation-".concat(t),s=a[i];if(s)return s;let o;if(!1!==n.options.animation){const n=this.chart.config,a=n.datasetAnimationScopeKeys(this._type,t),i=n.getOptionScopes(this.getDataset(),a);o=n.createResolver(i,this.getContext(e,r,t))}const l=new cT(n,o&&o.animations);return o&&o._cacheable&&(a[i]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||yT(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),n=this._sharedOptions,a=this.getSharedOptions(r),i=this.includeOptions(t,a)||a!==n;return this.updateSharedOptions(a,t,r),{sharedOptions:a,includeOptions:i}}updateElement(e,t,r,n){yT(n)?Object.assign(e,r):this._resolveAnimations(t,n).update(e,r)}updateSharedOptions(e,t,r){e&&!yT(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,n){e.active=n;const a=this.getStyle(t,n);this._resolveAnimations(t,r,n).update(e,{options:!n&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[s,o,l]of this._syncList)this[s](o,l);this._syncList=[];const n=r.length,a=t.length,i=Math.min(a,n);i&&this.parse(0,i),a>n?this._insertElements(n,a-n,e):a<n&&this._removeElements(a,n-a)}_insertElements(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=this._cachedMeta,a=n.data,i=e+t;let s;const o=e=>{for(e.length+=t,s=e.length-1;s>=i;s--)e[s]=e[s-t]};for(o(a),s=e;s<i;++s)a[s]=new this.dataElementType;this._parsing&&o(n._parsed),this.parse(e,t),r&&this.updateElements(a,e,t,"reset")}updateElements(e,t,r,n){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const n=r._parsed.splice(e,t);r._stacked&&bT(r,n)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,n]=e;this[t](r,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function kT(e){const t=e.iScale,r=function(e,t){if(!e._cache.$bar){const r=e.getMatchingVisibleMetas(t);let n=[];for(let t=0,a=r.length;t<a;t++)n=n.concat(r[t].controller.getAllParsedValues(e));e._cache.$bar=hA(n.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let n,a,i,s,o=t._length;const l=()=>{32767!==i&&-32768!==i&&(DP(s)&&(o=Math.min(o,Math.abs(i-s)||o)),s=i)};for(n=0,a=r.length;n<a;++n)i=t.getPixelForValue(r[n]),l();for(s=void 0,n=0,a=t.ticks.length;n<a;++n)i=t.getPixelForTick(n),l();return o}function jT(e,t,r,n){return gP(e)?function(e,t,r,n){const a=r.parse(e[0],n),i=r.parse(e[1],n),s=Math.min(a,i),o=Math.max(a,i);let l=s,c=o;Math.abs(s)>Math.abs(o)&&(l=o,c=s),t[r.axis]=c,t._custom={barStart:l,barEnd:c,start:a,end:i,min:s,max:o}}(e,t,r,n):t[r.axis]=r.parse(e,n),t}function wT(e,t,r,n){const a=e.iScale,i=e.vScale,s=a.getLabels(),o=a===i,l=[];let c,d,u,h;for(c=r,d=r+n;c<d;++c)h=t[c],u={},u[a.axis]=o||a.parse(s[c],c),l.push(jT(h,u,i,c));return l}function NT(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function ST(e,t,r,n){let a=t.borderSkipped;const i={};if(!a)return void(e.borderSkipped=i);if(!0===a)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:s,end:o,reverse:l,top:c,bottom:d}=function(e){let t,r,n,a,i;return e.horizontal?(t=e.base>e.x,r="left",n="right"):(t=e.base<e.y,r="bottom",n="top"),t?(a="end",i="start"):(a="start",i="end"),{start:r,end:n,reverse:t,top:a,bottom:i}}(e);"middle"===a&&r&&(e.enableBorderRadius=!0,(r._top||0)===n?a=c:(r._bottom||0)===n?a=d:(i[OT(d,s,o,l)]=!0,a=c)),i[OT(a,s,o,l)]=!0,e.borderSkipped=i}function OT(e,t,r,n){var a,i,s;return n?(s=r,e=CT(e=(a=e)===(i=t)?s:a===s?i:a,r,t)):e=CT(e,t,r),e}function CT(e,t,r){return"start"===e?t:"end"===e?r:e}function ET(e,t,r){let{inflateAmount:n}=t;e.inflateAmount="auto"===n?1===r?.33:0:n}Te(_T,"defaults",{}),Te(_T,"datasetElementType",null),Te(_T,"dataElementType",null);class PT extends _T{parsePrimitiveData(e,t,r,n){return wT(e,t,r,n)}parseArrayData(e,t,r,n){return wT(e,t,r,n)}parseObjectData(e,t,r,n){const{iScale:a,vScale:i}=e,{xAxisKey:s="x",yAxisKey:o="y"}=this._parsing,l="x"===a.axis?s:o,c="x"===i.axis?s:o,d=[];let u,h,p,m;for(u=r,h=r+n;u<h;++u)m=t[u],p={},p[a.axis]=a.parse(MP(m,l),u),d.push(jT(MP(m,c),p,i,u));return d}updateRangeFromParsed(e,t,r,n){super.updateRangeFromParsed(e,t,r,n);const a=r._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:n}=t,a=this.getParsed(e),i=a._custom,s=NT(i)?"["+i.start+", "+i.end+"]":""+n.getLabelForValue(a[n.axis]);return{label:""+r.getLabelForValue(a[r.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,n){const a="reset"===n,{index:i,_cachedMeta:{vScale:s}}=this,o=s.getBasePixel(),l=s.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,n);for(let h=t;h<t+r;h++){const t=this.getParsed(h),r=a||fP(t[s.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),p=this._calculateBarIndexPixels(h,c),m=(t._stacks||{})[s.axis],f={horizontal:l,base:r.base,enableBorderRadius:!m||NT(t._custom)||i===m._top||i===m._bottom,x:l?r.head:p.center,y:l?p.center:r.head,height:l?p.size:Math.abs(r.size),width:l?Math.abs(r.size):p.size};u&&(f.options=d||this.resolveDataElementOptions(h,e[h].active?"active":n));const g=f.options||e[h].options;ST(f,g,m,i),ET(f,g,c.ratio),this.updateElement(e[h],h,f,n)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,n=r.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),a=r.options.stacked,i=[],s=this._cachedMeta.controller.getParsed(t),o=s&&s[r.axis],l=e=>{const t=e._parsed.find(e=>e[r.axis]===o),n=t&&t[e.vScale.axis];if(fP(n)||isNaN(n))return!0};for(const c of n)if((void 0===t||!l(c))&&((!1===a||-1===i.indexOf(c.stack)||void 0===a&&void 0===c.stack)&&i.push(c.stack),c.index===e))break;return i.length||i.push(void 0),i}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[vP("x"===this.chart.options.indexAxis?r.xAxisID:r.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,r){const n=this._getStacks(e,r),a=void 0!==t?n.indexOf(t):-1;return-1===a?n.length-1:a}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,n=[];let a,i;for(a=0,i=t.data.length;a<i;++a)n.push(r.getPixelForValue(this.getParsed(a)[r.axis],a));const s=e.barThickness;return{min:s||kT(t),pixels:n,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:s?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:n},options:{base:a,minBarLength:i}}=this,s=a||0,o=this.getParsed(e),l=o._custom,c=NT(l);let d,u,h=o[t.axis],p=0,m=r?this.applyStack(t,o,r):h;m!==h&&(p=m-h,m=h),c&&(h=l.barStart,m=l.barEnd-l.barStart,0!==h&&qP(h)!==qP(l.barEnd)&&(p=0),p+=h);const f=fP(a)||c?p:a;let g=t.getPixelForValue(f);if(d=this.chart.getDataVisibility(e)?t.getPixelForValue(p+m):g,u=d-g,Math.abs(u)<i){u=function(e,t,r){return 0!==e?qP(e):(t.isHorizontal()?1:-1)*(t.min>=r?1:-1)}(u,t,s)*i,h===s&&(g-=u/2);const e=t.getPixelForDecimal(0),a=t.getPixelForDecimal(1),l=Math.min(e,a),p=Math.max(e,a);g=Math.max(Math.min(g,p),l),d=g+u,r&&!c&&(o._stacks[t.axis]._visualValues[n]=t.getValueForPixel(d)-t.getValueForPixel(g))}if(g===t.getPixelForValue(s)){const e=qP(u)*t.getLineWidthForValue(s)/2;g+=e,u-=e}return{size:u,base:g,head:d,center:d+u/2}}_calculateBarIndexPixels(e,t){const r=t.scale,n=this.options,a=n.skipNull,i=vP(n.maxBarThickness,1/0);let s,o;const l=this._getAxisCount();if(t.grouped){const r=a?this._getStackCount(e):t.stackCount,c="flex"===n.barThickness?function(e,t,r,n){const a=t.pixels,i=a[e];let s=e>0?a[e-1]:null,o=e<a.length-1?a[e+1]:null;const l=r.categoryPercentage;null===s&&(s=i-(null===o?t.end-t.start:o-i)),null===o&&(o=i+i-s);const c=i-(i-Math.min(s,o))/2*l;return{chunk:Math.abs(o-s)/2*l/n,ratio:r.barPercentage,start:c}}(e,t,n,r*l):function(e,t,r,n){const a=r.barThickness;let i,s;return fP(a)?(i=t.min*r.categoryPercentage,s=r.barPercentage):(i=a*n,s=1),{chunk:i/n,ratio:s,start:t.pixels[e]-i/2}}(e,t,n,r*l),d="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,u=this._getAxis().indexOf(vP(d,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+u;s=c.start+c.chunk*h+c.chunk/2,o=Math.min(i,c.chunk*c.ratio)}else s=r.getPixelForValue(this.getParsed(e)[r.axis],e),o=Math.min(i,t.min*t.ratio);return{base:s-o/2,head:s+o/2,center:s,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,n=r.length;let a=0;for(;a<n;++a)null===this.getParsed(a)[t.axis]||r[a].hidden||r[a].draw(this._ctx)}}Te(PT,"id","bar"),Te(PT,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Te(PT,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class AT extends _T{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,r,n){const a=super.parsePrimitiveData(e,t,r,n);for(let i=0;i<a.length;i++)a[i]._custom=this.resolveDataElementOptions(i+r).radius;return a}parseArrayData(e,t,r,n){const a=super.parseArrayData(e,t,r,n);for(let i=0;i<a.length;i++){const e=t[r+i];a[i]._custom=vP(e[2],this.resolveDataElementOptions(i+r).radius)}return a}parseObjectData(e,t,r,n){const a=super.parseObjectData(e,t,r,n);for(let i=0;i<a.length;i++){const e=t[r+i];a[i]._custom=vP(e&&e.r&&+e.r,this.resolveDataElementOptions(i+r).radius)}return a}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let r=e.length-1;r>=0;--r)t=Math.max(t,e[r].size(this.resolveDataElementOptions(r))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:a}=t,i=this.getParsed(e),s=n.getLabelForValue(i.x),o=a.getLabelForValue(i.y),l=i._custom;return{label:r[e]||"",value:"("+s+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,r,n){const a="reset"===n,{iScale:i,vScale:s}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,n),c=i.axis,d=s.axis;for(let u=t;u<t+r;u++){const t=e[u],r=!a&&this.getParsed(u),h={},p=h[c]=a?i.getPixelForDecimal(.5):i.getPixelForValue(r[c]),m=h[d]=a?s.getBasePixel():s.getPixelForValue(r[d]);h.skip=isNaN(p)||isNaN(m),l&&(h.options=o||this.resolveDataElementOptions(u,t.active?"active":n),a&&(h.options.radius=0)),this.updateElement(t,u,h,n)}}resolveDataElementOptions(e,t){const r=this.getParsed(e);let n=super.resolveDataElementOptions(e,t);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const a=n.radius;return"active"!==t&&(n.radius=0),n.radius+=vP(r&&r._custom,a),n}}Te(AT,"id","bubble"),Te(AT,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Te(AT,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class MT extends _T{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,n=this._cachedMeta;if(!1===this._parsing)n._parsed=r;else{let a,i,s=e=>+r[e];if(xP(r[e])){const{key:e="value"}=this._parsing;s=t=>+MP(r[t],e)}for(a=e,i=e+t;a<i;++a)n._parsed[a]=s(a)}}_getRotation(){return JP(this.options.rotation-90)}_getCircumference(){return JP(this.options.circumference)}_getRotationExtents(){let e=FP,t=-FP;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const n=this.chart.getDatasetMeta(r).controller,a=n._getRotation(),i=n._getCircumference();e=Math.min(e,a),t=Math.max(t,a+i)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,n=this._cachedMeta,a=n.data,i=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,s=Math.max((Math.min(r.width,r.height)-i)/2,0),o=Math.min(((e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100:+e/t)(this.options.cutout,s),1),l=this._getRingWeight(this.index),{circumference:c,rotation:d}=this._getRotationExtents(),{ratioX:u,ratioY:h,offsetX:p,offsetY:m}=function(e,t,r){let n=1,a=1,i=0,s=0;if(t<FP){const o=e,l=o+t,c=Math.cos(o),d=Math.sin(o),u=Math.cos(l),h=Math.sin(l),p=(e,t,n)=>aA(e,o,l,!0)?1:Math.max(t,t*r,n,n*r),m=(e,t,n)=>aA(e,o,l,!0)?-1:Math.min(t,t*r,n,n*r),f=p(0,c,u),g=p(VP,d,h),x=m(LP,c,u),b=m(LP+VP,d,h);n=(f-x)/2,a=(g-b)/2,i=-(f+x)/2,s=-(g+b)/2}return{ratioX:n,ratioY:a,offsetX:i,offsetY:s}}(d,c,o),f=(r.width-i)/u,g=(r.height-i)/h,x=Math.max(Math.min(f,g)/2,0),b=_P(this.options.radius,x),y=(b-Math.max(b*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*b,this.offsetY=m*b,n.total=this.calculateTotal(),this.outerRadius=b-y*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-y*l,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){const r=this.options,n=this._cachedMeta,a=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||null===n._parsed[e]||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*a/FP)}updateElements(e,t,r,n){const a="reset"===n,i=this.chart,s=i.chartArea,o=i.options.animation,l=(s.left+s.right)/2,c=(s.top+s.bottom)/2,d=a&&o.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:p,includeOptions:m}=this._getSharedOptions(t,n);let f,g=this._getRotation();for(f=0;f<t;++f)g+=this._circumference(f,a);for(f=t;f<t+r;++f){const t=this._circumference(f,a),r=e[f],i={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:u};m&&(i.options=p||this.resolveDataElementOptions(f,r.active?"active":n)),g+=t,this.updateElement(r,f,i,n)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let r,n=0;for(r=0;r<t.length;r++){const a=e._parsed[r];null===a||isNaN(a)||!this.chart.getDataVisibility(r)||t[r].hidden||(n+=Math.abs(a))}return n}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?FP*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,n=r.data.labels||[],a=EA(t._parsed[e],r.options.locale);return{label:n[e]||"",value:a}}getMaxBorderWidth(e){let t=0;const r=this.chart;let n,a,i,s,o;if(!e)for(n=0,a=r.data.datasets.length;n<a;++n)if(r.isDatasetVisible(n)){i=r.getDatasetMeta(n),e=i.data,s=i.controller;break}if(!e)return 0;for(n=0,a=e.length;n<a;++n)o=s.resolveDataElementOptions(n),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,n=e.length;r<n;++r){const e=this.resolveDataElementOptions(r);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(vP(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Te(MT,"id","doughnut"),Te(MT,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Te(MT,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Te(MT,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:n}}=e.legend.options;return t.labels.map((t,a)=>{const i=e.getDatasetMeta(0).controller.getStyle(a);return{text:t,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,fontColor:n,lineWidth:i.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}});class TT extends _T{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:n=[],_dataset:a}=t,i=this.chart._animationsDisabled;let{start:s,count:o}=xA(t,n,i);this._drawStart=s,this._drawCount=o,bA(t)&&(s=0,o=n.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!a._decimated,r.points=n;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:l},e),this.updateElements(n,s,o,e)}updateElements(e,t,r,n){const a="reset"===n,{iScale:i,vScale:s,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,n),u=i.axis,h=s.axis,{spanGaps:p,segment:m}=this.options,f=YP(p)?p:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||a||"none"===n,x=t+r,b=e.length;let y=t>0&&this.getParsed(t-1);for(let v=0;v<b;++v){const r=e[v],p=g?r:{};if(v<t||v>=x){p.skip=!0;continue}const b=this.getParsed(v),_=fP(b[h]),k=p[u]=i.getPixelForValue(b[u],v),j=p[h]=a||_?s.getBasePixel():s.getPixelForValue(o?this.applyStack(s,b,o):b[h],v);p.skip=isNaN(k)||isNaN(j)||_,p.stop=v>0&&Math.abs(b[u]-y[u])>f,m&&(p.parsed=b,p.raw=l.data[v]),d&&(p.options=c||this.resolveDataElementOptions(v,r.active?"active":n)),g||this.updateElement(r,v,p,n),y=b}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return r;const a=n[0].size(this.resolveDataElementOptions(0)),i=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,a,i)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Te(TT,"id","line"),Te(TT,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Te(TT,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class DT extends _T{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,n=r.data.labels||[],a=EA(t._parsed[e].r,r.options.locale);return{label:n[e]||"",value:a}}parseObjectData(e,t,r,n){return jM.bind(this)(e,t,r,n)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,r)=>{const n=this.getParsed(r).r;!isNaN(n)&&this.chart.getDataVisibility(r)&&(n<t.min&&(t.min=n),n>t.max&&(t.max=n))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,r=e.options,n=Math.min(t.right-t.left,t.bottom-t.top),a=Math.max(n/2,0),i=(a-Math.max(r.cutoutPercentage?a/100*r.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=a-i*this.index,this.innerRadius=this.outerRadius-i}updateElements(e,t,r,n){const a="reset"===n,i=this.chart,s=i.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,d=o.getIndexAngle(0)-.5*LP;let u,h=d;const p=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,n,p);for(u=t;u<t+r;u++){const t=e[u];let r=h,m=h+this._computeAngle(u,n,p),f=i.getDataVisibility(u)?o.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=m,a&&(s.animateScale&&(f=0),s.animateRotate&&(r=m=d));const g={x:l,y:c,innerRadius:0,outerRadius:f,startAngle:r,endAngle:m,options:this.resolveDataElementOptions(u,t.active?"active":n)};this.updateElement(t,u,g,n)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&t++}),t}_computeAngle(e,t,r){return this.chart.getDataVisibility(e)?JP(this.resolveDataElementOptions(e,t).angle||r):0}}Te(DT,"id","polarArea"),Te(DT,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Te(DT,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:n}}=e.legend.options;return t.labels.map((t,a)=>{const i=e.getDatasetMeta(0).controller.getStyle(a);return{text:t,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,fontColor:n,lineWidth:i.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class RT extends MT{}Te(RT,"id","pie"),Te(RT,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class IT extends _T{getLabelAndValue(e){const t=this._cachedMeta.vScale,r=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(r[t.axis])}}parseObjectData(e,t,r,n){return jM.bind(this)(e,t,r,n)}update(e){const t=this._cachedMeta,r=t.dataset,n=t.data||[],a=t.iScale.getLabels();if(r.points=n,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const i={_loop:!0,_fullLoop:a.length===n.length,options:t};this.updateElement(r,void 0,i,e)}this.updateElements(n,0,n.length,e)}updateElements(e,t,r,n){const a=this._cachedMeta.rScale,i="reset"===n;for(let s=t;s<t+r;s++){const t=e[s],r=this.resolveDataElementOptions(s,t.active?"active":n),o=a.getPointPositionForValue(s,this.getParsed(s).r),l=i?a.xCenter:o.x,c=i?a.yCenter:o.y,d={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:r};this.updateElement(t,s,d,n)}}}Te(IT,"id","radar"),Te(IT,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Te(IT,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class LT extends _T{getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:a}=t,i=this.getParsed(e),s=n.getLabelForValue(i.x),o=a.getLabelForValue(i.y);return{label:r[e]||"",value:"("+s+", "+o+")"}}update(e){const t=this._cachedMeta,{data:r=[]}=t,n=this.chart._animationsDisabled;let{start:a,count:i}=xA(t,r,n);if(this._drawStart=a,this._drawCount=i,bA(t)&&(a=0,i=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:i}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!i._decimated,a.points=r;const s=this.resolveDatasetElementOptions(e);s.segment=this.options.segment,this.updateElement(a,void 0,{animated:!n,options:s},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(r,a,i,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,r,n){const a="reset"===n,{iScale:i,vScale:s,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,n),d=this.getSharedOptions(c),u=this.includeOptions(n,d),h=i.axis,p=s.axis,{spanGaps:m,segment:f}=this.options,g=YP(m)?m:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||a||"none"===n;let b=t>0&&this.getParsed(t-1);for(let y=t;y<t+r;++y){const t=e[y],r=this.getParsed(y),c=x?t:{},m=fP(r[p]),v=c[h]=i.getPixelForValue(r[h],y),_=c[p]=a||m?s.getBasePixel():s.getPixelForValue(o?this.applyStack(s,r,o):r[p],y);c.skip=isNaN(v)||isNaN(_)||m,c.stop=y>0&&Math.abs(r[h]-b[h])>g,f&&(c.parsed=r,c.raw=l.data[y]),u&&(c.options=d||this.resolveDataElementOptions(y,t.active?"active":n)),x||this.updateElement(t,y,c,n),b=r}this.updateSharedOptions(d,n,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let r=t.length-1;r>=0;--r)e=Math.max(e,t[r].size(this.resolveDataElementOptions(r))/2);return e>0&&e}const r=e.dataset,n=r.options&&r.options.borderWidth||0;if(!t.length)return n;const a=t[0].size(this.resolveDataElementOptions(0)),i=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(n,a,i)/2}}Te(LT,"id","scatter"),Te(LT,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Te(LT,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function FT(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class zT{static override(e){Object.assign(zT.prototype,e)}constructor(e){Te(this,"options",void 0),this.options=e||{}}init(){}formats(){return FT()}parse(){return FT()}format(){return FT()}add(){return FT()}diff(){return FT()}startOf(){return FT()}endOf(){return FT()}}var UT=zT;function BT(e,t,r,n){const{controller:a,data:i,_sorted:s}=e,o=a._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&s&&i.length){const s=o._reversePixels?cA:lA;if(!n){const n=s(i,t,r);if(l){const{vScale:t}=a._cachedMeta,{_parsed:r}=e,i=r.slice(0,n.lo+1).reverse().findIndex(e=>!fP(e[t.axis]));n.lo-=Math.max(0,i);const s=r.slice(n.hi).findIndex(e=>!fP(e[t.axis]));n.hi+=Math.max(0,s)}return n}if(a._sharedOptions){const e=i[0],n="function"===typeof e.getRange&&e.getRange(t);if(n){const e=s(i,t,r-n),a=s(i,t,r+n);return{lo:e.lo,hi:a.hi}}}}return{lo:0,hi:i.length-1}}function VT(e,t,r,n,a){const i=e.getSortedVisibleDatasetMetas(),s=r[t];for(let o=0,l=i.length;o<l;++o){const{index:e,data:r}=i[o],{lo:l,hi:c}=BT(i[o],t,s,a);for(let t=l;t<=c;++t){const a=r[t];a.skip||n(a,e,t)}}}function HT(e,t,r,n,a){const i=[];if(!a&&!e.isPointInArea(t))return i;return VT(e,r,t,function(r,s,o){(a||WA(r,e.chartArea,0))&&r.inRange(t.x,t.y,n)&&i.push({element:r,datasetIndex:s,index:o})},!0),i}function WT(e,t,r,n,a,i){let s=[];const o=function(e){const t=-1!==e.indexOf("x"),r=-1!==e.indexOf("y");return function(e,n){const a=t?Math.abs(e.x-n.x):0,i=r?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(i,2))}}(r);let l=Number.POSITIVE_INFINITY;return VT(e,r,t,function(r,c,d){const u=r.inRange(t.x,t.y,a);if(n&&!u)return;const h=r.getCenterPoint(a);if(!(!!i||e.isPointInArea(h))&&!u)return;const p=o(t,h);p<l?(s=[{element:r,datasetIndex:c,index:d}],l=p):p===l&&s.push({element:r,datasetIndex:c,index:d})}),s}function $T(e,t,r,n,a,i){return i||e.isPointInArea(t)?"r"!==r||n?WT(e,t,r,n,a,i):function(e,t,r,n){let a=[];return VT(e,r,t,function(e,r,i){const{startAngle:s,endAngle:o}=e.getProps(["startAngle","endAngle"],n),{angle:l}=eA(e,{x:t.x,y:t.y});aA(l,s,o)&&a.push({element:e,datasetIndex:r,index:i})}),a}(e,t,r,a):[]}function qT(e,t,r,n,a){const i=[],s="x"===r?"inXRange":"inYRange";let o=!1;return VT(e,r,t,(e,n,l)=>{e[s]&&e[s](t[r],a)&&(i.push({element:e,datasetIndex:n,index:l}),o=o||e.inRange(t.x,t.y,a))}),n&&!o?[]:i}var GT={evaluateInteractionItems:VT,modes:{index(e,t,r,n){const a=LM(t,e),i=r.axis||"x",s=r.includeInvisible||!1,o=r.intersect?HT(e,a,i,n,s):$T(e,a,i,!1,n,s),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,r=e.data[t];r&&!r.skip&&l.push({element:r,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,r,n){const a=LM(t,e),i=r.axis||"xy",s=r.includeInvisible||!1;let o=r.intersect?HT(e,a,i,n,s):$T(e,a,i,!1,n,s);if(o.length>0){const t=o[0].datasetIndex,r=e.getDatasetMeta(t).data;o=[];for(let e=0;e<r.length;++e)o.push({element:r[e],datasetIndex:t,index:e})}return o},point:(e,t,r,n)=>HT(e,LM(t,e),r.axis||"xy",n,r.includeInvisible||!1),nearest(e,t,r,n){const a=LM(t,e),i=r.axis||"xy",s=r.includeInvisible||!1;return $T(e,a,i,r.intersect,n,s)},x:(e,t,r,n)=>qT(e,LM(t,e),"x",r.intersect,n),y:(e,t,r,n)=>qT(e,LM(t,e),"y",r.intersect,n)}};const KT=["left","top","right","bottom"];function YT(e,t){return e.filter(e=>e.pos===t)}function XT(e,t){return e.filter(e=>-1===KT.indexOf(e.pos)&&e.box.axis===t)}function JT(e,t){return e.sort((e,r)=>{const n=t?r:e,a=t?e:r;return n.weight===a.weight?n.index-a.index:n.weight-a.weight})}function QT(e,t){const r=function(e){const t={};for(const r of e){const{stack:e,pos:n,stackWeight:a}=r;if(!e||!KT.includes(n))continue;const i=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});i.count++,i.weight+=a}return t}(e),{vBoxMaxWidth:n,hBoxMaxHeight:a}=t;let i,s,o;for(i=0,s=e.length;i<s;++i){o=e[i];const{fullSize:s}=o.box,l=r[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*n:s&&t.availableWidth,o.height=a):(o.width=n,o.height=c?c*a:s&&t.availableHeight)}return r}function ZT(e,t,r,n){return Math.max(e[r],t[r])+Math.max(e[n],t[n])}function eD(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function tD(e,t,r,n){const{pos:a,box:i}=r,s=e.maxPadding;if(!xP(a)){r.size&&(e[a]-=r.size);const t=n[r.stack]||{size:0,count:1};t.size=Math.max(t.size,r.horizontal?i.height:i.width),r.size=t.size/t.count,e[a]+=r.size}i.getPadding&&eD(s,i.getPadding());const o=Math.max(0,t.outerWidth-ZT(s,e,"left","right")),l=Math.max(0,t.outerHeight-ZT(s,e,"top","bottom")),c=o!==e.w,d=l!==e.h;return e.w=o,e.h=l,r.horizontal?{same:c,other:d}:{same:d,other:c}}function rD(e,t){const r=t.maxPadding;function n(e){const n={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{n[e]=Math.max(t[e],r[e])}),n}return n(e?["left","right"]:["top","bottom"])}function nD(e,t,r,n){const a=[];let i,s,o,l,c,d;for(i=0,s=e.length,c=0;i<s;++i){o=e[i],l=o.box,l.update(o.width||t.w,o.height||t.h,rD(o.horizontal,t));const{same:s,other:u}=tD(t,r,o,n);c|=s&&a.length,d=d||u,l.fullSize||a.push(o)}return c&&nD(a,t,r,n)||d}function aD(e,t,r,n,a){e.top=r,e.left=t,e.right=t+n,e.bottom=r+a,e.width=n,e.height=a}function iD(e,t,r,n){const a=r.padding;let{x:i,y:s}=t;for(const o of e){const e=o.box,l=n[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const n=t.w*c,i=l.size||e.height;DP(l.start)&&(s=l.start),e.fullSize?aD(e,a.left,s,r.outerWidth-a.right-a.left,i):aD(e,t.left+l.placed,s,n,i),l.start=s,l.placed+=n,s=e.bottom}else{const n=t.h*c,s=l.size||e.width;DP(l.start)&&(i=l.start),e.fullSize?aD(e,i,a.top,s,r.outerHeight-a.bottom-a.top):aD(e,i,t.top+l.placed,s,n),l.start=i,l.placed+=n,i=e.right}}t.x=i,t.y=s}var sD={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const r=e.boxes?e.boxes.indexOf(t):-1;-1!==r&&e.boxes.splice(r,1)},configure(e,t,r){t.fullSize=r.fullSize,t.position=r.position,t.weight=r.weight},update(e,t,r,n){if(!e)return;const a=sM(e.options.layout.padding),i=Math.max(t-a.width,0),s=Math.max(r-a.height,0),o=function(e){const t=function(e){const t=[];let r,n,a,i,s,o;for(r=0,n=(e||[]).length;r<n;++r)a=e[r],({position:i,options:{stack:s,stackWeight:o=1}}=a),t.push({index:r,box:a,pos:i,horizontal:a.isHorizontal(),weight:a.weight,stack:s&&i+s,stackWeight:o});return t}(e),r=JT(t.filter(e=>e.box.fullSize),!0),n=JT(YT(t,"left"),!0),a=JT(YT(t,"right")),i=JT(YT(t,"top"),!0),s=JT(YT(t,"bottom")),o=XT(t,"x"),l=XT(t,"y");return{fullSize:r,leftAndTop:n.concat(i),rightAndBottom:a.concat(l).concat(s).concat(o),chartArea:YT(t,"chartArea"),vertical:n.concat(a).concat(l),horizontal:i.concat(s).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;jP(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const d=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:r,padding:a,availableWidth:i,availableHeight:s,vBoxMaxWidth:i/2/d,hBoxMaxHeight:s/2}),h=Object.assign({},a);eD(h,sM(n));const p=Object.assign({maxPadding:h,w:i,h:s,x:a.left,y:a.top},a),m=QT(l.concat(c),u);nD(o.fullSize,p,u,m),nD(l,p,u,m),nD(c,p,u,m)&&nD(l,p,u,m),function(e){const t=e.maxPadding;function r(r){const n=Math.max(t[r]-e[r],0);return e[r]+=n,n}e.y+=r("top"),e.x+=r("left"),r("right"),r("bottom")}(p),iD(o.leftAndTop,p,u,m),p.x+=p.w,p.y+=p.h,iD(o.rightAndBottom,p,u,m),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},jP(o.chartArea,t=>{const r=t.box;Object.assign(r,e.chartArea),r.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class oD{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,n){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):r)}}isAttached(e){return!0}updateConfig(e){}}class lD extends oD{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const cD="$chartjs",dD={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},uD=e=>null===e||""===e;const hD=!!BM&&{passive:!0};function pD(e,t,r){e&&e.canvas&&e.canvas.removeEventListener(t,r,hD)}function mD(e,t){for(const r of e)if(r===t||r.contains(t))return!0}function fD(e,t,r){const n=e.canvas,a=new MutationObserver(e=>{let t=!1;for(const r of e)t=t||mD(r.addedNodes,n),t=t&&!mD(r.removedNodes,n);t&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}function gD(e,t,r){const n=e.canvas,a=new MutationObserver(e=>{let t=!1;for(const r of e)t=t||mD(r.removedNodes,n),t=t&&!mD(r.addedNodes,n);t&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}const xD=new Map;let bD=0;function yD(){const e=window.devicePixelRatio;e!==bD&&(bD=e,xD.forEach((t,r)=>{r.currentDevicePixelRatio!==e&&t()}))}function vD(e,t,r){const n=e.canvas,a=n&&MM(n);if(!a)return;const i=mA((e,t)=>{const n=a.clientWidth;r(e,t),n<a.clientWidth&&r()},window),s=new ResizeObserver(e=>{const t=e[0],r=t.contentRect.width,n=t.contentRect.height;0===r&&0===n||i(r,n)});return s.observe(a),function(e,t){xD.size||window.addEventListener("resize",yD),xD.set(e,t)}(e,i),s}function _D(e,t,r){r&&r.disconnect(),"resize"===t&&function(e){xD.delete(e),xD.size||window.removeEventListener("resize",yD)}(e)}function kD(e,t,r){const n=e.canvas,a=mA(t=>{null!==e.ctx&&r(function(e,t){const r=dD[e.type]||e.type,{x:n,y:a}=LM(e,t);return{type:r,chart:t,native:e,x:void 0!==n?n:null,y:void 0!==a?a:null}}(t,e))},e);return function(e,t,r){e&&e.addEventListener(t,r,hD)}(n,t,a),a}class jD extends oD{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(function(e,t){const r=e.style,n=e.getAttribute("height"),a=e.getAttribute("width");if(e[cD]={initial:{height:n,width:a,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",uD(a)){const t=VM(e,"width");void 0!==t&&(e.width=t)}if(uD(n))if(""===e.style.height)e.height=e.width/(t||2);else{const t=VM(e,"height");void 0!==t&&(e.height=t)}}(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[cD])return!1;const r=t[cD].initial;["height","width"].forEach(e=>{const n=r[e];fP(n)?t.removeAttribute(e):t.setAttribute(e,n)});const n=r.style||{};return Object.keys(n).forEach(e=>{t.style[e]=n[e]}),t.width=t.width,delete t[cD],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),a={attach:fD,detach:gD,resize:vD}[t]||kD;n[t]=a(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),n=r[t];if(!n)return;({attach:_D,detach:_D,resize:_D}[t]||pD)(e,t,n),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,n){return zM(e,t,r,n)}isAttached(e){const t=e&&MM(e);return!(!t||!t.isConnected)}}class wD{constructor(){Te(this,"x",void 0),Te(this,"y",void 0),Te(this,"active",!1),Te(this,"options",void 0),Te(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return YP(this.x)&&YP(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const n={};return e.forEach(e=>{n[e]=r[e]&&r[e].active()?r[e]._to:this[e]}),n}}function ND(e,t){const r=e.options.ticks,n=function(e){const t=e.options.offset,r=e._tickSize(),n=e._length/r+(t?0:1),a=e._maxLength/r;return Math.floor(Math.min(n,a))}(e),a=Math.min(r.maxTicksLimit||n,n),i=r.major.enabled?function(e){const t=[];let r,n;for(r=0,n=e.length;r<n;r++)e[r].major&&t.push(r);return t}(t):[],s=i.length,o=i[0],l=i[s-1],c=[];if(s>a)return function(e,t,r,n){let a,i=0,s=r[0];for(n=Math.ceil(n),a=0;a<e.length;a++)a===s&&(t.push(e[a]),i++,s=r[i*n])}(t,c,i,s/a),c;const d=function(e,t,r){const n=function(e){const t=e.length;let r,n;if(t<2)return!1;for(n=e[0],r=1;r<t;++r)if(e[r]-e[r-1]!==n)return!1;return n}(e),a=t.length/r;if(!n)return Math.max(a,1);const i=function(e){const t=[],r=Math.sqrt(e);let n;for(n=1;n<r;n++)e%n===0&&(t.push(n),t.push(e/n));return r===(0|r)&&t.push(r),t.sort((e,t)=>e-t).pop(),t}(n);for(let s=0,o=i.length-1;s<o;s++){const e=i[s];if(e>a)return e}return Math.max(a,1)}(i,t,a);if(s>0){let e,r;const n=s>1?Math.round((l-o)/(s-1)):null;for(SD(t,c,d,fP(n)?0:o-n,o),e=0,r=s-1;e<r;e++)SD(t,c,d,i[e],i[e+1]);return SD(t,c,d,l,fP(n)?t.length:l+n),c}return SD(t,c,d),c}function SD(e,t,r,n,a){const i=vP(n,0),s=Math.min(vP(a,e.length),e.length);let o,l,c,d=0;for(r=Math.ceil(r),a&&(o=a-n,r=o/Math.floor(o/r)),c=i;c<0;)d++,c=Math.round(i+d*r);for(l=Math.max(i,0);l<s;l++)l===c&&(t.push(e[l]),d++,c=Math.round(i+d*r))}Te(wD,"defaults",{}),Te(wD,"defaultRoutes",void 0);const OD=(e,t,r)=>"top"===t||"left"===t?e[t]+r:e[t]-r,CD=(e,t)=>Math.min(t||e,e);function ED(e,t){const r=[],n=e.length/t,a=e.length;let i=0;for(;i<a;i+=n)r.push(e[Math.floor(i)]);return r}function PD(e,t,r){const n=e.ticks.length,a=Math.min(t,n-1),i=e._startPixel,s=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(a);if(!(r&&(l=1===n?Math.max(c-i,s-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(a-1))/2,c+=a<t?l:-l,c<i-o||c>s+o)))return c}function AD(e){return e.drawTicks?e.tickLength:0}function MD(e,t){if(!e.display)return 0;const r=oM(e.font,t),n=sM(e.padding);return(gP(e.text)?e.text.length:1)*r.lineHeight+n.height}function TD(e,t,r){let n=fA(e);return(r&&"right"!==t||!r&&"right"===t)&&(n=(e=>"left"===e?"right":"right"===e?"left":e)(n)),n}class DD extends wD{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:n}=this;return e=yP(e,Number.POSITIVE_INFINITY),t=yP(t,Number.NEGATIVE_INFINITY),r=yP(r,Number.POSITIVE_INFINITY),n=yP(n,Number.NEGATIVE_INFINITY),{min:yP(e,r),max:yP(t,n),minDefined:bP(e),maxDefined:bP(t)}}getMinMax(e){let t,{min:r,max:n,minDefined:a,maxDefined:i}=this.getUserBounds();if(a&&i)return{min:r,max:n};const s=this.getMatchingVisibleMetas();for(let o=0,l=s.length;o<l;++o)t=s[o].controller.getMinMax(this,e),a||(r=Math.min(r,t.min)),i||(n=Math.max(n,t.max));return r=i&&r>n?n:r,n=a&&r>n?r:n,{min:yP(r,yP(n,r)),max:yP(n,yP(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){kP(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:n,grace:a,ticks:i}=this.options,s=i.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,r){const{min:n,max:a}=e,i=_P(t,(a-n)/2),s=(e,t)=>r&&0===e?0:e+t;return{min:s(n,-Math.abs(i)),max:s(a,i)}}(this,a,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=s<this.ticks.length;this._convertTicksToLabels(o?ED(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),i.display&&(i.autoSkip||"auto"===i.source)&&(this.ticks=ND(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,r=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,r=!r),this._startPixel=e,this._endPixel=t,this._reversePixels=r,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){kP(this.options.afterUpdate,[this])}beforeSetDimensions(){kP(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){kP(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),kP(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){kP(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,n,a;for(r=0,n=e.length;r<n;r++)a=e[r],a.label=kP(t.callback,[a.value,r,e],this)}afterTickToLabelConversion(){kP(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){kP(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=CD(this.ticks.length,e.ticks.maxTicksLimit),n=t.minRotation||0,a=t.maxRotation;let i,s,o,l=n;if(!this._isVisible()||!t.display||n>=a||r<=1||!this.isHorizontal())return void(this.labelRotation=n);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=iA(this.chart.width-d,0,this.maxWidth);i=e.offset?this.maxWidth/r:h/(r-1),d+6>i&&(i=h/(r-(e.offset?.5:1)),s=this.maxHeight-AD(e.grid)-t.padding-MD(e.title,this.chart.options.font),o=Math.sqrt(d*d+u*u),l=QP(Math.min(Math.asin(iA((c.highest.height+6)/i,-1,1)),Math.asin(iA(s/o,-1,1))-Math.asin(iA(u/o,-1,1)))),l=Math.max(n,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){kP(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){kP(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:n,grid:a}}=this,i=this._isVisible(),s=this.isHorizontal();if(i){const i=MD(n,t.options.font);if(s?(e.width=this.maxWidth,e.height=AD(a)+i):(e.height=this.maxHeight,e.width=AD(a)+i),r.display&&this.ticks.length){const{first:t,last:n,widest:a,highest:i}=this._getLabelSizes(),o=2*r.padding,l=JP(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(s){const t=r.mirror?0:d*a.width+c*i.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=r.mirror?0:c*a.width+d*i.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,n,d,c)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,n){const{ticks:{align:a,padding:i},position:s}=this.options,o=0!==this.labelRotation,l="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;o?l?(d=n*e.width,u=r*t.height):(d=r*e.height,u=n*t.width):"start"===a?u=t.width:"end"===a?d=e.width:"inner"!==a&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-s+i)*this.width/(this.width-s),0),this.paddingRight=Math.max((u-c+i)*this.width/(this.width-c),0)}else{let r=t.height/2,n=e.height/2;"start"===a?(r=0,n=e.height):"end"===a&&(r=t.height,n=0),this.paddingTop=r+i,this.paddingBottom=n+i}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){kP(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,r;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,r=e.length;t<r;t++)fP(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=ED(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:n,_longestTextCache:a}=this,i=[],s=[],o=Math.floor(t/CD(t,r));let l,c,d,u,h,p,m,f,g,x,b,y=0,v=0;for(l=0;l<t;l+=o){if(u=e[l].label,h=this._resolveTickFontOptions(l),n.font=p=h.string,m=a[p]=a[p]||{data:{},gc:[]},f=h.lineHeight,g=x=0,fP(u)||gP(u)){if(gP(u))for(c=0,d=u.length;c<d;++c)b=u[c],fP(b)||gP(b)||(g=FA(n,m.data,m.gc,g,b),x+=f)}else g=FA(n,m.data,m.gc,g,u),x=f;i.push(g),s.push(x),y=Math.max(g,y),v=Math.max(x,v)}!function(e,t){jP(e,e=>{const r=e.gc,n=r.length/2;let a;if(n>t){for(a=0;a<n;++a)delete e.data[r[a]];r.splice(0,n)}})}(a,t);const _=i.indexOf(y),k=s.indexOf(v),j=e=>({width:i[e]||0,height:s[e]||0});return{first:j(0),last:j(t-1),widest:j(_),highest:j(k),widths:i,heights:s}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function(e){return iA(e,-32768,32767)}(this._alignToPixels?UA(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=function(e,t,r){return cM(e,{tick:r,index:t,type:"tick"})}(this.getContext(),e,r))}return this.$context||(this.$context=cM(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=JP(this.labelRotation),r=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),a=this._getLabelSizes(),i=e.autoSkipPadding||0,s=a?a.widest.width+i:0,o=a?a.highest.height+i:0;return this.isHorizontal()?o*r>s*n?s/r:o/n:o*n<s*r?o/r:s/n}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,n=this.options,{grid:a,position:i,border:s}=n,o=a.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),d=AD(a),u=[],h=s.setContext(this.getContext()),p=h.display?h.width:0,m=p/2,f=function(e){return UA(r,e,p)};let g,x,b,y,v,_,k,j,w,N,S,O;if("top"===i)g=f(this.bottom),_=this.bottom-d,j=g-m,N=f(e.top)+m,O=e.bottom;else if("bottom"===i)g=f(this.top),N=e.top,O=f(e.bottom)-m,_=g+m,j=this.top+d;else if("left"===i)g=f(this.right),v=this.right-d,k=g-m,w=f(e.left)+m,S=e.right;else if("right"===i)g=f(this.left),w=e.left,S=f(e.right)-m,v=g+m,k=this.left+d;else if("x"===t){if("center"===i)g=f((e.top+e.bottom)/2+.5);else if(xP(i)){const e=Object.keys(i)[0],t=i[e];g=f(this.chart.scales[e].getPixelForValue(t))}N=e.top,O=e.bottom,_=g+m,j=_+d}else if("y"===t){if("center"===i)g=f((e.left+e.right)/2);else if(xP(i)){const e=Object.keys(i)[0],t=i[e];g=f(this.chart.scales[e].getPixelForValue(t))}v=g-m,k=v-d,w=e.left,S=e.right}const C=vP(n.ticks.maxTicksLimit,c),E=Math.max(1,Math.ceil(c/C));for(x=0;x<c;x+=E){const e=this.getContext(x),t=a.setContext(e),n=s.setContext(e),i=t.lineWidth,c=t.color,d=n.dash||[],h=n.dashOffset,p=t.tickWidth,m=t.tickColor,f=t.tickBorderDash||[],g=t.tickBorderDashOffset;b=PD(this,x,o),void 0!==b&&(y=UA(r,b,i),l?v=k=w=S=y:_=j=N=O=y,u.push({tx1:v,ty1:_,tx2:k,ty2:j,x1:w,y1:N,x2:S,y2:O,width:i,color:c,borderDash:d,borderDashOffset:h,tickWidth:p,tickColor:m,tickBorderDash:f,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,u}_computeLabelItems(e){const t=this.axis,r=this.options,{position:n,ticks:a}=r,i=this.isHorizontal(),s=this.ticks,{align:o,crossAlign:l,padding:c,mirror:d}=a,u=AD(r.grid),h=u+c,p=d?-c:h,m=-JP(this.labelRotation),f=[];let g,x,b,y,v,_,k,j,w,N,S,O,C="middle";if("top"===n)_=this.bottom-p,k=this._getXAxisLabelAlignment();else if("bottom"===n)_=this.top+p,k=this._getXAxisLabelAlignment();else if("left"===n){const e=this._getYAxisLabelAlignment(u);k=e.textAlign,v=e.x}else if("right"===n){const e=this._getYAxisLabelAlignment(u);k=e.textAlign,v=e.x}else if("x"===t){if("center"===n)_=(e.top+e.bottom)/2+h;else if(xP(n)){const e=Object.keys(n)[0],t=n[e];_=this.chart.scales[e].getPixelForValue(t)+h}k=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===n)v=(e.left+e.right)/2-h;else if(xP(n)){const e=Object.keys(n)[0],t=n[e];v=this.chart.scales[e].getPixelForValue(t)}k=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===o?C="top":"end"===o&&(C="bottom"));const E=this._getLabelSizes();for(g=0,x=s.length;g<x;++g){b=s[g],y=b.label;const e=a.setContext(this.getContext(g));j=this.getPixelForTick(g)+a.labelOffset,w=this._resolveTickFontOptions(g),N=w.lineHeight,S=gP(y)?y.length:1;const t=S/2,r=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let u,h=k;if(i?(v=j,"inner"===k&&(h=g===x-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),O="top"===n?"near"===l||0!==m?-S*N+N/2:"center"===l?-E.highest.height/2-t*N+N:-E.highest.height+N/2:"near"===l||0!==m?N/2:"center"===l?E.highest.height/2-t*N:E.highest.height-S*N,d&&(O*=-1),0===m||e.showLabelBackdrop||(v+=N/2*Math.sin(m))):(_=j,O=(1-S)*N/2),e.showLabelBackdrop){const t=sM(e.backdropPadding),r=E.heights[g],n=E.widths[g];let a=O-t.top,i=0-t.left;switch(C){case"middle":a-=r/2;break;case"bottom":a-=r}switch(k){case"center":i-=n/2;break;case"right":i-=n;break;case"inner":g===x-1?i-=n:g>0&&(i-=n/2)}u={left:i,top:a,width:n+t.width,height:r+t.height,color:e.backdropColor}}f.push({label:y,font:w,textOffset:O,options:{rotation:m,color:r,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:C,translation:[v,_],backdrop:u}})}return f}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-JP(this.labelRotation))return"top"===e?"left":"right";let r="center";return"start"===t.align?r="left":"end"===t.align?r="right":"inner"===t.align&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:n,padding:a}}=this.options,i=e+a,s=this._getLabelSizes().widest.width;let o,l;return"left"===t?n?(l=this.right+a,"near"===r?o="left":"center"===r?(o="center",l+=s/2):(o="right",l+=s)):(l=this.right-i,"near"===r?o="right":"center"===r?(o="center",l-=s/2):(o="left",l=this.left)):"right"===t?n?(l=this.left+a,"near"===r?o="right":"center"===r?(o="center",l-=s/2):(o="left",l-=s)):(l=this.left+i,"near"===r?o="left":"center"===r?(o="center",l+=s/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:n,width:a,height:i}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,n,a,i),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const r=this.ticks.findIndex(t=>t.value===e);if(r>=0){return t.setContext(this.getContext(r)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,r=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,i;const s=(e,t,n)=>{n.width&&n.color&&(r.save(),r.lineWidth=n.width,r.strokeStyle=n.color,r.setLineDash(n.borderDash||[]),r.lineDashOffset=n.borderDashOffset,r.beginPath(),r.moveTo(e.x,e.y),r.lineTo(t.x,t.y),r.stroke(),r.restore())};if(t.display)for(a=0,i=n.length;a<i;++a){const e=n[a];t.drawOnChartArea&&s({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&s({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:n}}=this,a=r.setContext(this.getContext()),i=r.display?a.width:0;if(!i)return;const s=n.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=UA(e,this.left,i)-i/2,c=UA(e,this.right,s)+s/2,d=u=o):(d=UA(e,this.top,i)-i/2,u=UA(e,this.bottom,s)+s/2,l=c=o),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(l,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,r=this._computeLabelArea();r&&$A(t,r);const n=this.getLabelItems(e);for(const a of n){const e=a.options,r=a.font;JA(t,a.label,0,a.textOffset,r,e)}r&&qA(t)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:n}}=this;if(!r.display)return;const a=oM(r.font),i=sM(r.padding),s=r.align;let o=a.lineHeight/2;"bottom"===t||"center"===t||xP(t)?(o+=i.bottom,gP(r.text)&&(o+=a.lineHeight*(r.text.length-1))):o+=i.top;const{titleX:l,titleY:c,maxWidth:d,rotation:u}=function(e,t,r,n){const{top:a,left:i,bottom:s,right:o,chart:l}=e,{chartArea:c,scales:d}=l;let u,h,p,m=0;const f=s-a,g=o-i;if(e.isHorizontal()){if(h=gA(n,i,o),xP(r)){const e=Object.keys(r)[0],n=r[e];p=d[e].getPixelForValue(n)+f-t}else p="center"===r?(c.bottom+c.top)/2+f-t:OD(e,r,t);u=o-i}else{if(xP(r)){const e=Object.keys(r)[0],n=r[e];h=d[e].getPixelForValue(n)-g+t}else h="center"===r?(c.left+c.right)/2-g+t:OD(e,r,t);p=gA(n,s,a),m="left"===r?-VP:VP}return{titleX:h,titleY:p,maxWidth:u,rotation:m}}(this,o,t,s);JA(e,r.text,0,0,a,{color:r.color,maxWidth:d,rotation:u,textAlign:TD(s,t,n),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=vP(e.grid&&e.grid.z,-1),n=vP(e.border&&e.border.z,0);return this._isVisible()&&this.draw===DD.prototype.draw?[{z:r,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",n=[];let a,i;for(a=0,i=t.length;a<i;++a){const i=t[a];i[r]!==this.id||e&&i.type!==e||n.push(i)}return n}_resolveTickFontOptions(e){return oM(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class RD{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;(function(e){return"id"in e&&"defaults"in e})(t)&&(r=this.register(t));const n=this.items,a=e.id,i=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in n||(n[a]=e,function(e,t,r){const n=CP(Object.create(null),[r?LA.get(r):{},LA.get(t),e.defaults]);LA.set(t,n),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(r=>{const n=r.split("."),a=n.pop(),i=[e].concat(n).join("."),s=t[r].split("."),o=s.pop(),l=s.join(".");LA.route(i,a,l,o)})}(t,e.defaultRoutes);e.descriptors&&LA.describe(t,e.descriptors)}(e,i,r),this.override&&LA.override(e.id,e.overrides)),i}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,n=this.scope;r in t&&delete t[r],n&&r in LA[n]&&(delete LA[n][r],this.override&&delete MA[r])}}class ID{constructor(){this.controllers=new RD(_T,"datasets",!0),this.elements=new RD(wD,"elements"),this.plugins=new RD(Object,"plugins"),this.scales=new RD(DD,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._each("unregister",t,this.scales)}_each(e,t,r){[...t].forEach(t=>{const n=r||this._getRegistryForType(t);r||n.isForType(t)||n===this.plugins&&t.id?this._exec(e,n,t):jP(t,t=>{const n=r||this._getRegistryForType(t);this._exec(e,n,t)})})}_exec(e,t,r){const n=TP(e);kP(r["before"+n],[],r),t[e](r),kP(r["after"+n],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const n=t.get(e);if(void 0===n)throw new Error('"'+e+'" is not a registered '+r+".");return n}}var LD=new ID;class FD{constructor(){this._init=[]}notify(e,t,r,n){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=n?this._descriptors(e).filter(n):this._descriptors(e),i=this._notify(a,e,t,r);return"afterDestroy"===t&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),i}_notify(e,t,r,n){n=n||{};for(const a of e){const e=a.plugin;if(!1===kP(e[r],[t,n,a.options],e)&&n.cancelable)return!1}return!0}invalidate(){fP(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,n=vP(r.options&&r.options.plugins,{}),a=function(e){const t={},r=[],n=Object.keys(LD.plugins.items);for(let i=0;i<n.length;i++)r.push(LD.getPlugin(n[i]));const a=e.plugins||[];for(let i=0;i<a.length;i++){const e=a[i];-1===r.indexOf(e)&&(r.push(e),t[e.id]=!0)}return{plugins:r,localIds:t}}(r);return!1!==n||t?function(e,t,r,n){let{plugins:a,localIds:i}=t;const s=[],o=e.getContext();for(const l of a){const t=l.id,a=zD(r[t],n);null!==a&&s.push({plugin:l,options:UD(e.config,{plugin:l,local:i[t]},a,o)})}return s}(e,a,n,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,n=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(n(t,r),e,"stop"),this._notify(n(r,t),e,"start")}}function zD(e,t){return t||!1!==e?!0===e?{}:e:null}function UD(e,t,r,n){let{plugin:a,local:i}=t;const s=e.pluginScopeKeys(a),o=e.getOptionScopes(r,s);return i&&a.defaults&&o.push(a.defaults),e.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function BD(e,t){const r=LA.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||r.indexAxis||"x"}function VD(e){if("x"===e||"y"===e||"r"===e)return e}function HD(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function WD(e){if(VD(e))return e;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(const a of r){const t=a.axis||HD(a.position)||e.length>1&&VD(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function $D(e,t,r){if(r[t+"AxisID"]===e)return{axis:t}}function qD(e,t){const r=MA[e.type]||{scales:{}},n=t.scales||{},a=BD(e.type,t),i=Object.create(null);return Object.keys(n).forEach(t=>{const s=n[t];if(!xP(s))return console.error("Invalid scale configuration for scale: ".concat(t));if(s._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=WD(t,s,function(e,t){if(t.data&&t.data.datasets){const r=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(r.length)return $D(e,"x",r[0])||$D(e,"y",r[0])}return{}}(t,e),LA.scales[s.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,a),c=r.scales||{};i[t]=EP(Object.create(null),[{axis:o},s,c[o],c[l]])}),e.data.datasets.forEach(r=>{const a=r.type||e.type,s=r.indexAxis||BD(a,t),o=(MA[a]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let r=e;return"_index_"===e?r=t:"_value_"===e&&(r="x"===t?"y":"x"),r}(e,s),a=r[t+"AxisID"]||t;i[a]=i[a]||Object.create(null),EP(i[a],[{axis:t},n[a],o[e]])})}),Object.keys(i).forEach(e=>{const t=i[e];EP(t,[LA.scales[t.type],LA.scale])}),i}function GD(e){const t=e.options||(e.options={});t.plugins=vP(t.plugins,{}),t.scales=qD(e,t)}function KD(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const YD=new Map,XD=new Set;function JD(e,t){let r=YD.get(e);return r||(r=t(),YD.set(e,r),XD.add(r)),r}const QD=(e,t,r)=>{const n=MP(t,r);void 0!==n&&e.add(n)};class ZD{constructor(e){this._config=function(e){return(e=e||{}).data=KD(e.data),GD(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=KD(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),GD(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return JD(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return JD("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return JD("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return JD("".concat(r,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let n=r.get(e);return n&&!t||(n=new Map,r.set(e,n)),n}getOptionScopes(e,t,r){const{options:n,type:a}=this,i=this._cachedScopes(e,r),s=i.get(t);if(s)return s;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>QD(o,e,t))),t.forEach(e=>QD(o,n,e)),t.forEach(e=>QD(o,MA[a]||{},e)),t.forEach(e=>QD(o,LA,e)),t.forEach(e=>QD(o,TA,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),XD.has(t)&&i.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,MA[t]||{},LA.datasets[t]||{},{type:t},LA,TA]}resolveNamedOptions(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const a={$shared:!0},{resolver:i,subPrefixes:s}=eR(this._resolverCache,e,n);let o=i;if(function(e,t){const{isScriptable:r,isIndexable:n}=hM(e);for(const a of t){const t=r(a),i=n(a),s=(i||t)&&e[a];if(t&&(RP(s)||tR(s))||i&&gP(s))return!0}return!1}(i,t)){a.$shared=!1;o=uM(i,r=RP(r)?r():r,this.createResolver(e,r,s))}for(const l of t)a[l]=o[l];return a}createResolver(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],n=arguments.length>3?arguments[3]:void 0;const{resolver:a}=eR(this._resolverCache,e,r);return xP(t)?uM(a,t,void 0,n):a}}function eR(e,t,r){let n=e.get(t);n||(n=new Map,e.set(t,n));const a=r.join();let i=n.get(a);if(!i){i={resolver:dM(t,r),subPrefixes:r.filter(e=>!e.toLowerCase().includes("hover"))},n.set(a,i)}return i}const tR=e=>xP(e)&&Object.getOwnPropertyNames(e).some(t=>RP(e[t]));const rR=["top","bottom","left","right","chartArea"];function nR(e,t){return"top"===e||"bottom"===e||-1===rR.indexOf(e)&&"x"===t}function aR(e,t){return function(r,n){return r[e]===n[e]?r[t]-n[t]:r[e]-n[e]}}function iR(e){const t=e.chart,r=t.options.animation;t.notifyPlugins("afterRender"),kP(r&&r.onComplete,[e],t)}function sR(e){const t=e.chart,r=t.options.animation;kP(r&&r.onProgress,[e],t)}function oR(e){return AM()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const lR={},cR=e=>{const t=oR(e);return Object.values(lR).filter(e=>e.canvas===t).pop()};function dR(e,t,r){const n=Object.keys(e);for(const a of n){const n=+a;if(n>=t){const i=e[a];delete e[a],(r>0||n>t)&&(e[n+r]=i)}}}class uR{static register(){LD.add(...arguments),hR()}static unregister(){LD.remove(...arguments),hR()}constructor(e,t){const r=this.config=new ZD(t),n=oR(e),a=cR(n);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const i=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||function(e){return!AM()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?lD:jD}(n)),this.platform.updateConfig(r);const s=this.platform.acquireContext(n,i.aspectRatio),o=s&&s.canvas,l=o&&o.height,c=o&&o.width;this.id=mP(),this.ctx=s,this.canvas=o,this.width=c,this.height=l,this._options=i,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new FD,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let r;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t?(clearTimeout(r),r=setTimeout(e,t,a)):e.apply(this,a),t}}(e=>this.update(e),i.resizeDelay||0),this._dataChanges=[],lR[this.id]=this,s&&o?(iT.listen(this,"complete",iR),iT.listen(this,"progress",sR),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:n,_aspectRatio:a}=this;return fP(e)?t&&a?a:n?r/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return LD}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():UM(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return BA(this.canvas,this.ctx),this}stop(){return iT.stop(this),this}resize(e,t){iT.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,n=this.canvas,a=r.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(n,e,t,a),s=r.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,UM(this,s,!0)&&(this.notifyPlugins("resize",{size:i}),kP(r.onResize,[this,i],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){jP(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,n=Object.keys(r).reduce((e,t)=>(e[t]=!1,e),{});let a=[];t&&(a=a.concat(Object.keys(t).map(e=>{const r=t[e],n=WD(e,r),a="r"===n,i="x"===n;return{options:r,dposition:a?"chartArea":i?"bottom":"left",dtype:a?"radialLinear":i?"category":"linear"}}))),jP(a,t=>{const a=t.options,i=a.id,s=WD(i,a),o=vP(a.type,t.dtype);void 0!==a.position&&nR(a.position,s)===nR(t.dposition)||(a.position=t.dposition),n[i]=!0;let l=null;if(i in r&&r[i].type===o)l=r[i];else{l=new(LD.getScale(o))({id:i,type:o,ctx:this.ctx,chart:this}),r[l.id]=l}l.init(a,e)}),jP(n,(e,t)=>{e||delete r[t]}),jP(r,e=>{sD.configure(this,e,e.options),sD.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((e,t)=>e.index-t.index),r>t){for(let e=t;e<r;++e)this._destroyDatasetMeta(e);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(aR("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,r)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,n;for(this._removeUnreferencedMetasets(),r=0,n=t.length;r<n;r++){const n=t[r];let a=this.getDatasetMeta(r);const i=n.type||this.config.type;if(a.type&&a.type!==i&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=i,a.indexAxis=n.indexAxis||BD(i,this.options),a.order=n.order||0,a.index=r,a.label=""+n.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const t=LD.getController(i),{datasetElementType:n,dataElementType:s}=LA.datasets[i];Object.assign(t,{dataElementType:LD.getElement(s),datasetElementType:n&&LD.getElement(n)}),a.controller=new t(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){jP(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let i=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!n&&-1===a.indexOf(e);e.buildOrUpdateElements(t),i=Math.max(+e.getMaxOverflow(),i)}i=this._minPadding=r.layout.autoPadding?i:0,this._updateLayout(i),n||jP(a,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(aR("z","_idx"));const{_active:s,_lastEvent:o}=this;o?this._eventHandler(o,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){jP(this.scales,e=>{sD.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);IP(t,r)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:n,count:a}of t){dR(e,n,"_removeElements"===r?-a:a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),n=r(0);for(let a=1;a<t;a++)if(!IP(n,r(a)))return;return Array.from(n).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;sD.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],jP(this.boxes,e=>{r&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,RP(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),n={meta:r,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(r.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(iT.has(this)?this.attached&&!iT.running(this)&&iT.start(this):(this.draw(),iR({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let n,a;for(n=0,a=t.length;n<a;++n){const a=t[n];e&&!a.visible||r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r={meta:e,index:e.index,cancelable:!0},n=nT(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",r)&&(n&&$A(t,n),e.controller.draw(),n&&qA(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return WA(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,n){const a=GT.modes[t];return"function"===typeof a?a(this,e,r,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let n=r.filter(e=>e&&e._dataset===t).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(n)),n}getContext(){return this.$context||(this.$context=cM(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return"boolean"===typeof r.hidden?!r.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const n=r?"show":"hide",a=this.getDatasetMeta(e),i=a.controller._resolveAnimations(void 0,n);DP(t)?(a.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),i.update(a,{visible:r}),this.update(t=>t.datasetIndex===e?n:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),iT.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),BA(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete lR[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(r,n)=>{t.addEventListener(this,r,n),e[r]=n},n=(e,t,r)=>{e.offsetX=t,e.offsetY=r,this._eventHandler(e)};jP(this.options.events,e=>r(e,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(r,n)=>{t.addEventListener(this,r,n),e[r]=n},n=(r,n)=>{e[r]&&(t.removeEventListener(this,r,n),delete e[r])},a=(e,t)=>{this.canvas&&this.resize(e,t)};let i;const s=()=>{n("attach",s),this.attached=!0,this.resize(),r("resize",a),r("detach",i)};i=()=>{this.attached=!1,n("resize",a),this._stop(),this._resize(0,0),r("attach",s)},t.isAttached(this.canvas)?s():i()}unbindEvents(){jP(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},jP(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const n=r?"set":"remove";let a,i,s,o;for("dataset"===t&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+n+"DatasetHoverStyle"]()),s=0,o=e.length;s<o;++s){i=e[s];const t=i&&this.getDatasetMeta(i.datasetIndex).controller;t&&t[n+"HoverStyle"](i.element,i.datasetIndex,i.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(e=>{let{datasetIndex:t,index:r}=e;const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[r],index:r}});!wP(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,r){const n=this.options.hover,a=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),i=a(t,e),s=r?e:a(e,t);i.length&&this.updateHoverStyle(i,n.mode,!1),s.length&&n.mode&&this.updateHoverStyle(s,n.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",r,n))return;const a=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,n),(a||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:n=[],options:a}=this,i=t,s=this._getActiveElements(e,n,r,i),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,r,n){return r&&"mouseout"!==e.type?n?t:e:null}(e,this._lastEvent,r,o);r&&(this._lastEvent=null,kP(a.onHover,[e,s,this],this),o&&kP(a.onClick,[e,s,this],this));const c=!wP(s,n);return(c||t)&&(this._active=s,this._updateHoverStyles(s,n,t)),this._lastEvent=l,c}_getActiveElements(e,t,r,n){if("mouseout"===e.type)return[];if(!r)return t;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,n)}}function hR(){return jP(uR.instances,e=>e._plugins.invalidate())}function pR(e,t,r,n){const a=function(e){return nM(e,["outerStart","outerEnd","innerStart","innerEnd"])}(e.options.borderRadius),i=(r-t)/2,s=Math.min(i,n*t/2),o=e=>{const t=(r-Math.min(i,e))*n/2;return iA(e,0,Math.min(i,t))};return{outerStart:o(a.outerStart),outerEnd:o(a.outerEnd),innerStart:iA(a.innerStart,0,s),innerEnd:iA(a.innerEnd,0,s)}}function mR(e,t,r,n){return{x:r+e*Math.cos(t),y:n+e*Math.sin(t)}}function fR(e,t,r,n,a,i){const{x:s,y:o,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+n+r-c,0),h=d>0?d+n+r+c:0;let p=0;const m=a-l;if(n){const e=((d>0?d-n:0)+(u>0?u-n:0))/2;p=(m-(0!==e?m*e/(e+n):m))/2}const f=(m-Math.max(.001,m*u-r/LP)/u)/2,g=l+f+p,x=a-f-p,{outerStart:b,outerEnd:y,innerStart:v,innerEnd:_}=pR(t,h,u,x-g),k=u-b,j=u-y,w=g+b/k,N=x-y/j,S=h+v,O=h+_,C=g+v/S,E=x-_/O;if(e.beginPath(),i){const t=(w+N)/2;if(e.arc(s,o,u,w,t),e.arc(s,o,u,t,N),y>0){const t=mR(j,N,s,o);e.arc(t.x,t.y,y,N,x+VP)}const r=mR(O,x,s,o);if(e.lineTo(r.x,r.y),_>0){const t=mR(O,E,s,o);e.arc(t.x,t.y,_,x+VP,E+Math.PI)}const n=(x-_/h+(g+v/h))/2;if(e.arc(s,o,h,x-_/h,n,!0),e.arc(s,o,h,n,g+v/h,!0),v>0){const t=mR(S,C,s,o);e.arc(t.x,t.y,v,C+Math.PI,g-VP)}const a=mR(k,g,s,o);if(e.lineTo(a.x,a.y),b>0){const t=mR(k,w,s,o);e.arc(t.x,t.y,b,g-VP,w)}}else{e.moveTo(s,o);const t=Math.cos(w)*u+s,r=Math.sin(w)*u+o;e.lineTo(t,r);const n=Math.cos(N)*u+s,a=Math.sin(N)*u+o;e.lineTo(n,a)}e.closePath()}function gR(e,t,r,n,a){const{fullCircles:i,startAngle:s,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h,borderRadius:p}=l,m="inner"===l.borderAlign;if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=h,m?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let f=t.endAngle;if(i){fR(e,t,r,n,f,a);for(let t=0;t<i;++t)e.stroke();isNaN(o)||(f=s+(o%FP||FP))}m&&function(e,t,r){const{startAngle:n,pixelMargin:a,x:i,y:s,outerRadius:o,innerRadius:l}=t;let c=a/o;e.beginPath(),e.arc(i,s,o,n-c,r+c),l>a?(c=a/l,e.arc(i,s,l,r+c,n-c,!0)):e.arc(i,s,a,r+VP,n-VP),e.closePath(),e.clip()}(e,t,f),l.selfJoin&&f-s>=LP&&0===p&&"miter"!==d&&function(e,t,r){const{startAngle:n,x:a,y:i,outerRadius:s,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:d}=l,u=Math.min(c/s,nA(n-r));if(e.beginPath(),e.arc(a,i,s-c/2,n+u/2,r-u/2),o>0){const t=Math.min(c/o,nA(n-r));e.arc(a,i,o+c/2,r-t/2,n+t/2,!0)}else{const t=Math.min(c/2,s*nA(n-r));if("round"===d)e.arc(a,i,t,r-LP/2,n+LP/2,!0);else if("bevel"===d){const s=2*t*t,o=-s*Math.cos(r+LP/2)+a,l=-s*Math.sin(r+LP/2)+i,c=s*Math.cos(n+LP/2)+a,d=s*Math.sin(n+LP/2)+i;e.lineTo(o,l),e.lineTo(c,d)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,f),i||(fR(e,t,r,n,f,a),e.stroke())}Te(uR,"defaults",LA),Te(uR,"instances",lR),Te(uR,"overrides",MA),Te(uR,"registry",LD),Te(uR,"version","4.5.0"),Te(uR,"getChart",cR);class xR extends wD{constructor(e){super(),Te(this,"circumference",void 0),Te(this,"endAngle",void 0),Te(this,"fullCircles",void 0),Te(this,"innerRadius",void 0),Te(this,"outerRadius",void 0),Te(this,"pixelMargin",void 0),Te(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){const n=this.getProps(["x","y"],r),{angle:a,distance:i}=eA(n,{x:e,y:t}),{startAngle:s,endAngle:o,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),u=(this.options.spacing+this.options.borderWidth)/2,h=vP(d,o-s),p=aA(a,s,o)&&s!==o,m=h>=FP||p,f=sA(i,l+u,c+u);return m&&f}getCenterPoint(e){const{x:t,y:r,startAngle:n,endAngle:a,innerRadius:i,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(n+a)/2,d=(i+s+l+o)/2;return{x:t+Math.cos(c)*d,y:r+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:r}=this,n=(t.offset||0)/4,a=(t.spacing||0)/2,i=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=r>FP?Math.floor(r/FP):0,0===r||this.innerRadius<0||this.outerRadius<0)return;e.save();const s=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(s)*n,Math.sin(s)*n);const o=n*(1-Math.sin(Math.min(LP,r||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,r,n,a){const{fullCircles:i,startAngle:s,circumference:o}=t;let l=t.endAngle;if(i){fR(e,t,r,n,l,a);for(let t=0;t<i;++t)e.fill();isNaN(o)||(l=s+(o%FP||FP))}fR(e,t,r,n,l,a),e.fill()}(e,this,o,a,i),gR(e,this,o,a,i),e.restore()}}function bR(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=vP(r.borderCapStyle,t.borderCapStyle),e.setLineDash(vP(r.borderDash,t.borderDash)),e.lineDashOffset=vP(r.borderDashOffset,t.borderDashOffset),e.lineJoin=vP(r.borderJoinStyle,t.borderJoinStyle),e.lineWidth=vP(r.borderWidth,t.borderWidth),e.strokeStyle=vP(r.borderColor,t.borderColor)}function yR(e,t,r){e.lineTo(r.x,r.y)}function vR(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e.length,{start:a=0,end:i=n-1}=r,{start:s,end:o}=t,l=Math.max(a,s),c=Math.min(i,o),d=a<s&&i<s||a>o&&i>o;return{count:n,start:l,loop:t.loop,ilen:c<l&&!d?n+c-l:c-l}}function _R(e,t,r,n){const{points:a,options:i}=t,{count:s,start:o,loop:l,ilen:c}=vR(a,r,n),d=function(e){return e.stepped?GA:e.tension||"monotone"===e.cubicInterpolationMode?KA:yR}(i);let u,h,p,{move:m=!0,reverse:f}=n||{};for(u=0;u<=c;++u)h=a[(o+(f?c-u:u))%s],h.skip||(m?(e.moveTo(h.x,h.y),m=!1):d(e,p,h,f,i.stepped),p=h);return l&&(h=a[(o+(f?c:0))%s],d(e,p,h,f,i.stepped)),!!l}function kR(e,t,r,n){const a=t.points,{count:i,start:s,ilen:o}=vR(a,r,n),{move:l=!0,reverse:c}=n||{};let d,u,h,p,m,f,g=0,x=0;const b=e=>(s+(c?o-e:e))%i,y=()=>{p!==m&&(e.lineTo(g,m),e.lineTo(g,p),e.lineTo(g,f))};for(l&&(u=a[b(0)],e.moveTo(u.x,u.y)),d=0;d<=o;++d){if(u=a[b(d)],u.skip)continue;const t=u.x,r=u.y,n=0|t;n===h?(r<p?p=r:r>m&&(m=r),g=(x*g+t)/++x):(y(),e.lineTo(t,r),h=n,x=0,p=m=r),f=r}y()}function jR(e){const t=e.options,r=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!r?kR:_R}Te(xR,"id","arc"),Te(xR,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Te(xR,"defaultRoutes",{backgroundColor:"backgroundColor"}),Te(xR,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const wR="function"===typeof Path2D;function NR(e,t,r,n){wR&&!t.options.segment?function(e,t,r,n){let a=t._path;a||(a=t._path=new Path2D,t.path(a,r,n)&&a.closePath()),bR(e,t.options),e.stroke(a)}(e,t,r,n):function(e,t,r,n){const{segments:a,options:i}=t,s=jR(t);for(const o of a)bR(e,i,o.style),e.beginPath(),s(e,t,o,{start:r,end:r+n-1})&&e.closePath(),e.stroke()}(e,t,r,n)}class SR extends wD{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||"monotone"===r.cubicInterpolationMode)&&!r.stepped&&!this._pointsUpdated){const n=r.spanGaps?this._loop:this._fullLoop;PM(this._points,r,e,n,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const r=e.points,n=e.options.spanGaps,a=r.length;if(!a)return[];const i=!!e._loop,{start:s,end:o}=function(e,t,r,n){let a=0,i=t-1;if(r&&!n)for(;a<t&&!e[a].skip;)a++;for(;a<t&&e[a].skip;)a++;for(a%=t,r&&(i+=a);i>a&&e[i%t].skip;)i--;return i%=t,{start:a,end:i}}(r,a,i,n);return ZM(e,!0===n?[{start:s,end:o,loop:i}]:function(e,t,r,n){const a=e.length,i=[];let s,o=t,l=e[t];for(s=t+1;s<=r;++s){const r=e[s%a];r.skip||r.stop?l.skip||(n=!1,i.push({start:t%a,end:(s-1)%a,loop:n}),t=o=r.stop?s:null):(o=s,l.skip&&(t=s)),l=r}return null!==o&&i.push({start:t%a,end:o%a,loop:n}),i}(r,s,o<s?o+a:o,!!e._fullLoop&&0===s&&o===a-1),r,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,n=e[t],a=this.points,i=QM(this,{property:t,start:n,end:n});if(!i.length)return;const s=[],o=function(e){return e.stepped?WM:e.tension||"monotone"===e.cubicInterpolationMode?$M:HM}(r);let l,c;for(l=0,c=i.length;l<c;++l){const{start:c,end:d}=i[l],u=a[c],h=a[d];if(u===h){s.push(u);continue}const p=o(u,h,Math.abs((n-u[t])/(h[t]-u[t])),r.stepped);p[t]=e[t],s.push(p)}return 1===s.length?s[0]:s}pathSegment(e,t,r){return jR(this)(e,this,t,r)}path(e,t,r){const n=this.segments,a=jR(this);let i=this._loop;t=t||0,r=r||this.points.length-t;for(const s of n)i&=a(e,this,s,{start:t,end:t+r-1});return!!i}draw(e,t,r,n){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),NR(e,this,r,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function OR(e,t,r,n){const a=e.options,{[r]:i}=e.getProps([r],n);return Math.abs(t-i)<a.radius+a.hitRadius}Te(SR,"id","line"),Te(SR,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Te(SR,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Te(SR,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class CR extends wD{constructor(e){super(),Te(this,"parsed",void 0),Te(this,"skip",void 0),Te(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,r){const n=this.options,{x:a,y:i}=this.getProps(["x","y"],r);return Math.pow(e-a,2)+Math.pow(t-i,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,t){return OR(this,e,"x",t)}inYRange(e,t){return OR(this,e,"y",t)}getCenterPoint(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const r=this.options;this.skip||r.radius<.1||!WA(this,t,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,VA(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function ER(e,t){const{x:r,y:n,base:a,width:i,height:s}=e.getProps(["x","y","base","width","height"],t);let o,l,c,d,u;return e.horizontal?(u=s/2,o=Math.min(r,a),l=Math.max(r,a),c=n-u,d=n+u):(u=i/2,o=r-u,l=r+u,c=Math.min(n,a),d=Math.max(n,a)),{left:o,top:c,right:l,bottom:d}}function PR(e,t,r,n){return e?0:iA(t,r,n)}function AR(e){const t=ER(e),r=t.right-t.left,n=t.bottom-t.top,a=function(e,t,r){const n=e.options.borderWidth,a=e.borderSkipped,i=aM(n);return{t:PR(a.top,i.top,0,r),r:PR(a.right,i.right,0,t),b:PR(a.bottom,i.bottom,0,r),l:PR(a.left,i.left,0,t)}}(e,r/2,n/2),i=function(e,t,r){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),a=e.options.borderRadius,i=iM(a),s=Math.min(t,r),o=e.borderSkipped,l=n||xP(a);return{topLeft:PR(!l||o.top||o.left,i.topLeft,0,s),topRight:PR(!l||o.top||o.right,i.topRight,0,s),bottomLeft:PR(!l||o.bottom||o.left,i.bottomLeft,0,s),bottomRight:PR(!l||o.bottom||o.right,i.bottomRight,0,s)}}(e,r/2,n/2);return{outer:{x:t.left,y:t.top,w:r,h:n,radius:i},inner:{x:t.left+a.l,y:t.top+a.t,w:r-a.l-a.r,h:n-a.t-a.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,i.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(a.b,a.r))}}}}function MR(e,t,r,n){const a=null===t,i=null===r,s=e&&!(a&&i)&&ER(e,n);return s&&(a||sA(t,s.left,s.right))&&(i||sA(r,s.top,s.bottom))}function TR(e,t){e.rect(t.x,t.y,t.w,t.h)}function DR(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e.x!==r.x?-t:0,a=e.y!==r.y?-t:0,i=(e.x+e.w!==r.x+r.w?t:0)-n,s=(e.y+e.h!==r.y+r.h?t:0)-a;return{x:e.x+n,y:e.y+a,w:e.w+i,h:e.h+s,radius:e.radius}}Te(CR,"id","point"),Te(CR,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Te(CR,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class RR extends wD{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:n}}=this,{inner:a,outer:i}=AR(this),s=(o=i.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?QA:TR;var o;e.save(),i.w===a.w&&i.h===a.h||(e.beginPath(),s(e,DR(i,t,a)),e.clip(),s(e,DR(a,-t,i)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),s(e,DR(a,t)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,t,r){return MR(this,e,t,r)}inXRange(e,t){return MR(this,e,null,t)}inYRange(e,t){return MR(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:n,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+n)/2:t,y:a?r:(r+n)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}Te(RR,"id","bar"),Te(RR,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Te(RR,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const IR=(e,t)=>{let{boxHeight:r=t,boxWidth:n=t}=e;return e.usePointStyle&&(r=Math.min(r,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(t,r)}};class LR extends wD{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=kP(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,r)=>e.sort(t,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const r=e.labels,n=oM(r.font),a=n.size,i=this._computeTitleHeight(),{boxWidth:s,itemHeight:o}=IR(r,a);let l,c;t.font=n.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(i,a,s,o)+10):(c=this.maxHeight,l=this._fitCols(i,n,s,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,n){const{ctx:a,maxWidth:i,options:{labels:{padding:s}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=n+s;let d=e;a.textAlign="left",a.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach((e,p)=>{const m=r+t/2+a.measureText(e.text).width;(0===p||l[l.length-1]+m+2*s>i)&&(d+=c,l[l.length-(p>0?0:1)]=0,h+=c,u++),o[p]={left:0,top:h,row:u,width:m,height:n},l[l.length-1]+=m+s}),d}_fitCols(e,t,r,n){const{ctx:a,maxHeight:i,options:{labels:{padding:s}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=i-e;let d=s,u=0,h=0,p=0,m=0;return this.legendItems.forEach((e,i)=>{const{itemWidth:f,itemHeight:g}=function(e,t,r,n,a){const i=function(e,t,r,n){let a=e.text;a&&"string"!==typeof a&&(a=a.reduce((e,t)=>e.length>t.length?e:t));return t+r.size/2+n.measureText(a).width}(n,e,t,r),s=function(e,t,r){let n=e;"string"!==typeof t.text&&(n=FR(t,r));return n}(a,n,t.lineHeight);return{itemWidth:i,itemHeight:s}}(r,t,a,e,n);i>0&&h+g+2*s>c&&(d+=u+s,l.push({width:u,height:h}),p+=u+s,m++,u=h=0),o[i]={left:p,top:h,col:m,width:f,height:g},u=Math.max(u,f),h+=g+s}),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:n},rtl:a}}=this,i=qM(a,this.left,this.width);if(this.isHorizontal()){let a=0,s=gA(r,this.left+n,this.right-this.lineWidths[a]);for(const o of t)a!==o.row&&(a=o.row,s=gA(r,this.left+n,this.right-this.lineWidths[a])),o.top+=this.top+e+n,o.left=i.leftForLtr(i.x(s),o.width),s+=o.width+n}else{let a=0,s=gA(r,this.top+e+n,this.bottom-this.columnSizes[a].height);for(const o of t)o.col!==a&&(a=o.col,s=gA(r,this.top+e+n,this.bottom-this.columnSizes[a].height)),o.top=s,o.left+=this.left+n,o.left=i.leftForLtr(i.x(o.left),o.width),s+=o.height+n}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;$A(e,this),this._draw(),qA(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:n}=this,{align:a,labels:i}=e,s=LA.color,o=qM(e.rtl,this.left,this.width),l=oM(i.font),{padding:c}=i,d=l.size,u=d/2;let h;this.drawTitle(),n.textAlign=o.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=l.string;const{boxWidth:p,boxHeight:m,itemHeight:f}=IR(i,d),g=this.isHorizontal(),x=this._computeTitleHeight();h=g?{x:gA(a,this.left+c,this.right-r[0]),y:this.top+c+x,line:0}:{x:this.left+c,y:gA(a,this.top+x+c,this.bottom-t[0].height),line:0},GM(this.ctx,e.textDirection);const b=f+c;this.legendItems.forEach((y,v)=>{n.strokeStyle=y.fontColor,n.fillStyle=y.fontColor;const _=n.measureText(y.text).width,k=o.textAlign(y.textAlign||(y.textAlign=i.textAlign)),j=p+u+_;let w=h.x,N=h.y;o.setWidth(this.width),g?v>0&&w+j+c>this.right&&(N=h.y+=b,h.line++,w=h.x=gA(a,this.left+c,this.right-r[h.line])):v>0&&N+b>this.bottom&&(w=h.x=w+t[h.line].width+c,h.line++,N=h.y=gA(a,this.top+x+c,this.bottom-t[h.line].height));if(function(e,t,r){if(isNaN(p)||p<=0||isNaN(m)||m<0)return;n.save();const a=vP(r.lineWidth,1);if(n.fillStyle=vP(r.fillStyle,s),n.lineCap=vP(r.lineCap,"butt"),n.lineDashOffset=vP(r.lineDashOffset,0),n.lineJoin=vP(r.lineJoin,"miter"),n.lineWidth=a,n.strokeStyle=vP(r.strokeStyle,s),n.setLineDash(vP(r.lineDash,[])),i.usePointStyle){const s={radius:m*Math.SQRT2/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:a},l=o.xPlus(e,p/2);HA(n,s,l,t+u,i.pointStyleWidth&&p)}else{const i=t+Math.max((d-m)/2,0),s=o.leftForLtr(e,p),l=iM(r.borderRadius);n.beginPath(),Object.values(l).some(e=>0!==e)?QA(n,{x:s,y:i,w:p,h:m,radius:l}):n.rect(s,i,p,m),n.fill(),0!==a&&n.stroke()}n.restore()}(o.x(w),N,y),w=((e,t,r,n)=>e===(n?"left":"right")?r:"center"===e?(t+r)/2:t)(k,w+p+u,g?w+j:this.right,e.rtl),function(e,t,r){JA(n,r.text,e,t+f/2,l,{strikethrough:r.hidden,textAlign:o.textAlign(r.textAlign)})}(o.x(w),N,y),g)h.x+=j+c;else if("string"!==typeof y.text){const e=l.lineHeight;h.y+=FR(y,e)+c}else h.y+=b}),KM(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=oM(t.font),n=sM(t.padding);if(!t.display)return;const a=qM(e.rtl,this.left,this.width),i=this.ctx,s=t.position,o=r.size/2,l=n.top+o;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,d=gA(e.align,d,this.right-u);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+gA(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=gA(s,d,d+u);i.textAlign=a.textAlign(fA(s)),i.textBaseline="middle",i.strokeStyle=t.color,i.fillStyle=t.color,i.font=r.string,JA(i,t.text,h,c,r)}_computeTitleHeight(){const e=this.options.title,t=oM(e.font),r=sM(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,n,a;if(sA(e,this.left,this.right)&&sA(t,this.top,this.bottom))for(a=this.legendHitBoxes,r=0;r<a.length;++r)if(n=a[r],sA(e,n.left,n.left+n.width)&&sA(t,n.top,n.top+n.height))return this.legendItems[r];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const n=this._hoveredItem,a=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(n,r);n&&!a&&kP(t.onLeave,[e,n,this],this),this._hoveredItem=r,r&&!a&&kP(t.onHover,[e,r,this],this)}else r&&kP(t.onClick,[e,r,this],this)}}function FR(e,t){return t*(e.text?e.text.length:0)}var zR={id:"legend",_element:LR,start(e,t,r){const n=e.legend=new LR({ctx:e.ctx,options:r,chart:e});sD.configure(e,n,r),sD.addBox(e,n)},stop(e){sD.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,r){const n=e.legend;sD.configure(e,n,r),n.options=r},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,r){const n=t.datasetIndex,a=r.chart;a.isDatasetVisible(n)?(a.hide(n),t.hidden=!0):(a.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:a,color:i,useBorderRadius:s,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(r?0:void 0),c=sM(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:i,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:n||l.pointStyle,rotation:l.rotation,textAlign:a||l.textAlign,borderRadius:s&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class UR extends wD{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const n=gP(r.text)?r.text.length:1;this._padding=sM(r.padding);const a=n*oM(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:r,bottom:n,right:a,options:i}=this,s=i.align;let o,l,c,d=0;return this.isHorizontal()?(l=gA(s,r,a),c=t+e,o=a-r):("left"===i.position?(l=r+e,c=gA(s,n,t),d=-.5*LP):(l=a-e,c=gA(s,t,n),d=.5*LP),o=n-t),{titleX:l,titleY:c,maxWidth:o,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=oM(t.font),n=r.lineHeight/2+this._padding.top,{titleX:a,titleY:i,maxWidth:s,rotation:o}=this._drawArgs(n);JA(e,t.text,0,0,r,{color:t.color,maxWidth:s,rotation:o,textAlign:fA(t.align),textBaseline:"middle",translation:[a,i]})}}var BR={id:"title",_element:UR,start(e,t,r){!function(e,t){const r=new UR({ctx:e.ctx,options:t,chart:e});sD.configure(e,r,t),sD.addBox(e,r),e.titleBlock=r}(e,r)},stop(e){const t=e.titleBlock;sD.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,r){const n=e.titleBlock;sD.configure(e,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const VR={average(e){if(!e.length)return!1;let t,r,n=new Set,a=0,i=0;for(t=0,r=e.length;t<r;++t){const r=e[t].element;if(r&&r.hasValue()){const e=r.tooltipPosition();n.add(e.x),a+=e.y,++i}}if(0===i||0===n.size)return!1;const s=[...n].reduce((e,t)=>e+t)/n.size;return{x:s,y:a/i}},nearest(e,t){if(!e.length)return!1;let r,n,a,i=t.x,s=t.y,o=Number.POSITIVE_INFINITY;for(r=0,n=e.length;r<n;++r){const n=e[r].element;if(n&&n.hasValue()){const e=tA(t,n.getCenterPoint());e<o&&(o=e,a=n)}}if(a){const e=a.tooltipPosition();i=e.x,s=e.y}return{x:i,y:s}}};function HR(e,t){return t&&(gP(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function WR(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function $R(e,t){const{element:r,datasetIndex:n,index:a}=t,i=e.getDatasetMeta(n).controller,{label:s,value:o}=i.getLabelAndValue(a);return{chart:e,label:s,parsed:i.getParsed(a),raw:e.data.datasets[n].data[a],formattedValue:o,dataset:i.getDataset(),dataIndex:a,datasetIndex:n,element:r}}function qR(e,t){const r=e.chart.ctx,{body:n,footer:a,title:i}=e,{boxWidth:s,boxHeight:o}=t,l=oM(t.bodyFont),c=oM(t.titleFont),d=oM(t.footerFont),u=i.length,h=a.length,p=n.length,m=sM(t.padding);let f=m.height,g=0,x=n.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(x+=e.beforeBody.length+e.afterBody.length,u&&(f+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),x){f+=p*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(x-p)*l.lineHeight+(x-1)*t.bodySpacing}h&&(f+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let b=0;const y=function(e){g=Math.max(g,r.measureText(e).width+b)};return r.save(),r.font=c.string,jP(e.title,y),r.font=l.string,jP(e.beforeBody.concat(e.afterBody),y),b=t.displayColors?s+2+t.boxPadding:0,jP(n,e=>{jP(e.before,y),jP(e.lines,y),jP(e.after,y)}),b=0,r.font=d.string,jP(e.footer,y),r.restore(),g+=m.width,{width:g,height:f}}function GR(e,t,r,n){const{x:a,width:i}=r,{width:s,chartArea:{left:o,right:l}}=e;let c="center";return"center"===n?c=a<=(o+l)/2?"left":"right":a<=i/2?c="left":a>=s-i/2&&(c="right"),function(e,t,r,n){const{x:a,width:i}=n,s=r.caretSize+r.caretPadding;return"left"===e&&a+i+s>t.width||"right"===e&&a-i-s<0||void 0}(c,e,t,r)&&(c="center"),c}function KR(e,t,r){const n=r.yAlign||t.yAlign||function(e,t){const{y:r,height:n}=t;return r<n/2?"top":r>e.height-n/2?"bottom":"center"}(e,r);return{xAlign:r.xAlign||t.xAlign||GR(e,t,r,n),yAlign:n}}function YR(e,t,r,n){const{caretSize:a,caretPadding:i,cornerRadius:s}=e,{xAlign:o,yAlign:l}=r,c=a+i,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:p}=iM(s);let m=function(e,t){let{x:r,width:n}=e;return"right"===t?r-=n:"center"===t&&(r-=n/2),r}(t,o);const f=function(e,t,r){let{y:n,height:a}=e;return"top"===t?n+=r:n-="bottom"===t?a+r:a/2,n}(t,l,c);return"center"===l?"left"===o?m+=c:"right"===o&&(m-=c):"left"===o?m-=Math.max(d,h)+a:"right"===o&&(m+=Math.max(u,p)+a),{x:iA(m,0,n.width-t.width),y:iA(f,0,n.height-t.height)}}function XR(e,t,r){const n=sM(r.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-n.right:e.x+n.left}function JR(e){return HR([],WR(e))}function QR(e,t){const r=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return r?e.override(r):e}const ZR={beforeTitle:pP,title(e){if(e.length>0){const t=e[0],r=t.chart.data.labels,n=r?r.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return r[t.dataIndex]}return""},afterTitle:pP,beforeBody:pP,beforeLabel:pP,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const r=e.formattedValue;return fP(r)||(t+=r),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:pP,afterBody:pP,beforeFooter:pP,footer:pP,afterFooter:pP};function eI(e,t,r,n){const a=e[t].call(r,n);return"undefined"===typeof a?ZR[t].call(r,n):a}class tI extends wD{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),n=r.enabled&&t.options.animation&&r.animations,a=new cT(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,r=this._tooltipItems,cM(e,{tooltip:t,tooltipItems:r,type:"tooltip"})));var e,t,r}getTitle(e,t){const{callbacks:r}=t,n=eI(r,"beforeTitle",this,e),a=eI(r,"title",this,e),i=eI(r,"afterTitle",this,e);let s=[];return s=HR(s,WR(n)),s=HR(s,WR(a)),s=HR(s,WR(i)),s}getBeforeBody(e,t){return JR(eI(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,n=[];return jP(e,e=>{const t={before:[],lines:[],after:[]},a=QR(r,e);HR(t.before,WR(eI(a,"beforeLabel",this,e))),HR(t.lines,eI(a,"label",this,e)),HR(t.after,WR(eI(a,"afterLabel",this,e))),n.push(t)}),n}getAfterBody(e,t){return JR(eI(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,n=eI(r,"beforeFooter",this,e),a=eI(r,"footer",this,e),i=eI(r,"afterFooter",this,e);let s=[];return s=HR(s,WR(n)),s=HR(s,WR(a)),s=HR(s,WR(i)),s}_createItems(e){const t=this._active,r=this.chart.data,n=[],a=[],i=[];let s,o,l=[];for(s=0,o=t.length;s<o;++s)l.push($R(this.chart,t[s]));return e.filter&&(l=l.filter((t,n,a)=>e.filter(t,n,a,r))),e.itemSort&&(l=l.sort((t,n)=>e.itemSort(t,n,r))),jP(l,t=>{const r=QR(e.callbacks,t);n.push(eI(r,"labelColor",this,t)),a.push(eI(r,"labelPointStyle",this,t)),i.push(eI(r,"labelTextColor",this,t))}),this.labelColors=n,this.labelPointStyles=a,this.labelTextColors=i,this.dataPoints=l,l}update(e,t){const r=this.options.setContext(this.getContext()),n=this._active;let a,i=[];if(n.length){const e=VR[r.position].call(this,n,this._eventPosition);i=this._createItems(r),this.title=this.getTitle(i,r),this.beforeBody=this.getBeforeBody(i,r),this.body=this.getBody(i,r),this.afterBody=this.getAfterBody(i,r),this.footer=this.getFooter(i,r);const t=this._size=qR(this,r),s=Object.assign({},e,t),o=KR(this.chart,r,s),l=YR(r,s,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,a={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(a={opacity:0});this._tooltipItems=i,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,n){const a=this.getCaretPosition(e,r,n);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,r){const{xAlign:n,yAlign:a}=this,{caretSize:i,cornerRadius:s}=r,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:d}=iM(s),{x:u,y:h}=e,{width:p,height:m}=t;let f,g,x,b,y,v;return"center"===a?(y=h+m/2,"left"===n?(f=u,g=f-i,b=y+i,v=y-i):(f=u+p,g=f+i,b=y-i,v=y+i),x=f):(g="left"===n?u+Math.max(o,c)+i:"right"===n?u+p-Math.max(l,d)-i:this.caretX,"top"===a?(b=h,y=b-i,f=g-i,x=g+i):(b=h+m,y=b+i,f=g+i,x=g-i),v=b),{x1:f,x2:g,x3:x,y1:b,y2:y,y3:v}}drawTitle(e,t,r){const n=this.title,a=n.length;let i,s,o;if(a){const l=qM(r.rtl,this.x,this.width);for(e.x=XR(this,r.titleAlign,r),t.textAlign=l.textAlign(r.titleAlign),t.textBaseline="middle",i=oM(r.titleFont),s=r.titleSpacing,t.fillStyle=r.titleColor,t.font=i.string,o=0;o<a;++o)t.fillText(n[o],l.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+s,o+1===a&&(e.y+=r.titleMarginBottom-s)}}_drawColorBox(e,t,r,n,a){const i=this.labelColors[r],s=this.labelPointStyles[r],{boxHeight:o,boxWidth:l}=a,c=oM(a.bodyFont),d=XR(this,"left",a),u=n.x(d),h=o<c.lineHeight?(c.lineHeight-o)/2:0,p=t.y+h;if(a.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},r=n.leftForLtr(u,l)+l/2,c=p+o/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,VA(e,t,r,c),e.strokeStyle=i.borderColor,e.fillStyle=i.backgroundColor,VA(e,t,r,c)}else{e.lineWidth=xP(i.borderWidth)?Math.max(...Object.values(i.borderWidth)):i.borderWidth||1,e.strokeStyle=i.borderColor,e.setLineDash(i.borderDash||[]),e.lineDashOffset=i.borderDashOffset||0;const t=n.leftForLtr(u,l),r=n.leftForLtr(n.xPlus(u,1),l-2),s=iM(i.borderRadius);Object.values(s).some(e=>0!==e)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,QA(e,{x:t,y:p,w:l,h:o,radius:s}),e.fill(),e.stroke(),e.fillStyle=i.backgroundColor,e.beginPath(),QA(e,{x:r,y:p+1,w:l-2,h:o-2,radius:s}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(t,p,l,o),e.strokeRect(t,p,l,o),e.fillStyle=i.backgroundColor,e.fillRect(r,p+1,l-2,o-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:n}=this,{bodySpacing:a,bodyAlign:i,displayColors:s,boxHeight:o,boxWidth:l,boxPadding:c}=r,d=oM(r.bodyFont);let u=d.lineHeight,h=0;const p=qM(r.rtl,this.x,this.width),m=function(r){t.fillText(r,p.x(e.x+h),e.y+u/2),e.y+=u+a},f=p.textAlign(i);let g,x,b,y,v,_,k;for(t.textAlign=i,t.textBaseline="middle",t.font=d.string,e.x=XR(this,f,r),t.fillStyle=r.bodyColor,jP(this.beforeBody,m),h=s&&"right"!==f?"center"===i?l/2+c:l+2+c:0,y=0,_=n.length;y<_;++y){for(g=n[y],x=this.labelTextColors[y],t.fillStyle=x,jP(g.before,m),b=g.lines,s&&b.length&&(this._drawColorBox(t,e,y,p,r),u=Math.max(d.lineHeight,o)),v=0,k=b.length;v<k;++v)m(b[v]),u=d.lineHeight;jP(g.after,m)}h=0,u=d.lineHeight,jP(this.afterBody,m),e.y-=a}drawFooter(e,t,r){const n=this.footer,a=n.length;let i,s;if(a){const o=qM(r.rtl,this.x,this.width);for(e.x=XR(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=o.textAlign(r.footerAlign),t.textBaseline="middle",i=oM(r.footerFont),t.fillStyle=r.footerColor,t.font=i.string,s=0;s<a;++s)t.fillText(n[s],o.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+r.footerSpacing}}drawBackground(e,t,r,n){const{xAlign:a,yAlign:i}=this,{x:s,y:o}=e,{width:l,height:c}=r,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:p}=iM(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(s+d,o),"top"===i&&this.drawCaret(e,t,r,n),t.lineTo(s+l-u,o),t.quadraticCurveTo(s+l,o,s+l,o+u),"center"===i&&"right"===a&&this.drawCaret(e,t,r,n),t.lineTo(s+l,o+c-p),t.quadraticCurveTo(s+l,o+c,s+l-p,o+c),"bottom"===i&&this.drawCaret(e,t,r,n),t.lineTo(s+h,o+c),t.quadraticCurveTo(s,o+c,s,o+c-h),"center"===i&&"left"===a&&this.drawCaret(e,t,r,n),t.lineTo(s,o+d),t.quadraticCurveTo(s,o,s+d,o),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,n=r&&r.x,a=r&&r.y;if(n||a){const r=VR[e.position].call(this,this._active,this._eventPosition);if(!r)return;const i=this._size=qR(this,e),s=Object.assign({},r,this._size),o=KR(t,e,s),l=YR(e,s,o,t);n._to===l.x&&a._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=i.width,this.height=i.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},a={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const i=sM(t.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&s&&(e.save(),e.globalAlpha=r,this.drawBackground(a,e,n,t),GM(e,t.textDirection),a.y+=i.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),KM(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,n=e.map(e=>{let{datasetIndex:t,index:r}=e;const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[r],index:r}}),a=!wP(r,n),i=this._positionChanged(n,t);(a||i)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,a=this._active||[],i=this._getActiveElements(e,a,t,r),s=this._positionChanged(i,e),o=t||!wP(i,a)||s;return o&&(this._active=i,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,r,n){const a=this.options;if("mouseout"===e.type)return[];if(!n)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const i=this.chart.getElementsAtEventForMode(e,a.mode,a,r);return a.reverse&&i.reverse(),i}_positionChanged(e,t){const{caretX:r,caretY:n,options:a}=this,i=VR[a.position].call(this,e,t);return!1!==i&&(r!==i.x||n!==i.y)}}Te(tI,"positioners",VR);var rI={id:"tooltip",_element:tI,positioners:VR,afterInit(e,t,r){r&&(e.tooltip=new tI({chart:e,options:r}))},beforeUpdate(e,t,r){e.tooltip&&e.tooltip.initialize(r)},reset(e,t,r){e.tooltip&&e.tooltip.initialize(r)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const r={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",Re(Re({},r),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",r)}},afterEvent(e,t){if(e.tooltip){const r=t.replay;e.tooltip.handleEvent(t.event,r,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ZR},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function nI(e,t,r,n){const a=e.indexOf(t);if(-1===a)return((e,t,r,n)=>("string"===typeof t?(r=e.push(t)-1,n.unshift({index:r,label:t})):isNaN(t)&&(r=null),r))(e,t,r,n);return a!==e.lastIndexOf(t)?r:a}function aI(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class iI extends DD{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:r,label:n}of t)e[r]===n&&e.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(fP(e))return null;const r=this.getLabels();return((e,t)=>null===e?null:iA(Math.round(e),0,t))(t=isFinite(t)&&r[t]===e?t:nI(r,e,vP(t,e),this._addedLabels),r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:n}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(r=0),t||(n=this.getLabels().length-1)),this.min=r,this.max=n}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,n=[];let a=this.getLabels();a=0===e&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let i=e;i<=t;i++)n.push({value:i});return n}getLabelForValue(e){return aI.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function sI(e,t){const r=[],{bounds:n,step:a,min:i,max:s,precision:o,count:l,maxTicks:c,maxDigits:d,includeBounds:u}=e,h=a||1,p=c-1,{min:m,max:f}=t,g=!fP(i),x=!fP(s),b=!fP(l),y=(f-m)/(d+1);let v,_,k,j,w=KP((f-m)/p/h)*h;if(w<1e-14&&!g&&!x)return[{value:m},{value:f}];j=Math.ceil(f/w)-Math.floor(m/w),j>p&&(w=KP(j*w/p/h)*h),fP(o)||(v=Math.pow(10,o),w=Math.ceil(w*v)/v),"ticks"===n?(_=Math.floor(m/w)*w,k=Math.ceil(f/w)*w):(_=m,k=f),g&&x&&a&&function(e,t){const r=Math.round(e);return r-t<=e&&r+t>=e}((s-i)/a,w/1e3)?(j=Math.round(Math.min((s-i)/w,c)),w=(s-i)/j,_=i,k=s):b?(_=g?i:_,k=x?s:k,j=l-1,w=(k-_)/j):(j=(k-_)/w,j=GP(j,Math.round(j),w/1e3)?Math.round(j):Math.ceil(j));const N=Math.max(ZP(w),ZP(_));v=Math.pow(10,fP(o)?N:o),_=Math.round(_*v)/v,k=Math.round(k*v)/v;let S=0;for(g&&(u&&_!==i?(r.push({value:i}),_<i&&S++,GP(Math.round((_+S*w)*v)/v,i,oI(i,y,e))&&S++):_<i&&S++);S<j;++S){const e=Math.round((_+S*w)*v)/v;if(x&&e>s)break;r.push({value:e})}return x&&u&&k!==s?r.length&&GP(r[r.length-1].value,s,oI(s,y,e))?r[r.length-1].value=s:r.push({value:s}):x&&k!==s||r.push({value:k}),r}function oI(e,t,r){let{horizontal:n,minRotation:a}=r;const i=JP(a),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+e).length;return Math.min(t/s,o)}Te(iI,"id","category"),Te(iI,"defaults",{ticks:{callback:aI}});class lI extends DD{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return fP(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:n,max:a}=this;const i=e=>n=t?n:e,s=e=>a=r?a:e;if(e){const e=qP(n),t=qP(a);e<0&&t<0?s(0):e>0&&t>0&&i(0)}if(n===a){let t=0===a?1:Math.abs(.05*a);s(a+t),e||i(n-t)}this.min=n,this.max=a}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:r,stepSize:n}=e;return n?(t=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(n," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),r=r||11),r&&(t=Math.min(r,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const n=sI({maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&XP(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const n=(r-t)/Math.max(e.length-1,1)/2;t-=n,r+=n}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return EA(e,this.chart.options.locale,this.options.ticks.format)}}class cI extends lI{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=bP(e)?e:0,this.max=bP(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=JP(this.options.ticks.minRotation),n=(e?Math.sin(r):Math.cos(r))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/n))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Te(cI,"id","linear"),Te(cI,"defaults",{ticks:{callback:AA.formatters.numeric}});const dI=e=>Math.floor($P(e)),uI=(e,t)=>Math.pow(10,dI(e)+t);function hI(e){return 1===e/Math.pow(10,dI(e))}function pI(e,t,r){const n=Math.pow(10,r),a=Math.floor(e/n);return Math.ceil(t/n)-a}function mI(e,t){let{min:r,max:n}=t;r=yP(e.min,r);const a=[],i=dI(r);let s=function(e,t){let r=dI(t-e);for(;pI(e,t,r)>10;)r++;for(;pI(e,t,r)<10;)r--;return Math.min(r,dI(e))}(r,n),o=s<0?Math.pow(10,Math.abs(s)):1;const l=Math.pow(10,s),c=i>s?Math.pow(10,i):0,d=Math.round((r-c)*o)/o,u=Math.floor((r-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,s)),p=yP(e.min,Math.round((c+u+h*Math.pow(10,s))*o)/o);for(;p<n;)a.push({value:p,major:hI(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),p=Math.round((c+u+h*Math.pow(10,s))*o)/o;const m=yP(e.max,p);return a.push({value:m,major:hI(m),significand:h}),a}class fI extends DD{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const r=lI.prototype.parse.apply(this,[e,t]);if(0!==r)return bP(r)&&r>0?r:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=bP(e)?Math.max(0,e):null,this.max=bP(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!bP(this._userMin)&&(this.min=e===uI(this.min,0)?uI(this.min,-1):uI(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let r=this.min,n=this.max;const a=t=>r=e?r:t,i=e=>n=t?n:e;r===n&&(r<=0?(a(1),i(10)):(a(uI(r,-1)),i(uI(n,1)))),r<=0&&a(uI(n,-1)),n<=0&&i(uI(r,1)),this.min=r,this.max=n}buildTicks(){const e=this.options,t=mI({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&XP(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":EA(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=$P(e),this._valueRange=$P(this.max)-$P(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:($P(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function gI(e){const t=e.ticks;if(t.display&&e.display){const e=sM(t.backdropPadding);return vP(t.font&&t.font.size,LA.font.size)+e.height}return 0}function xI(e,t,r){return r=gP(r)?r:[r],{w:zA(e,t.string,r),h:r.length*t.lineHeight}}function bI(e,t,r,n,a){return e===n||e===a?{start:t-r/2,end:t+r/2}:e<n||e>a?{start:t-r,end:t}:{start:t,end:t+r}}function yI(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},r=Object.assign({},t),n=[],a=[],i=e._pointLabels.length,s=e.options.pointLabels,o=s.centerPointLabels?LP/i:0;for(let l=0;l<i;l++){const i=s.setContext(e.getPointLabelContext(l));a[l]=i.padding;const c=e.getPointPosition(l,e.drawingArea+a[l],o),d=oM(i.font),u=xI(e.ctx,d,e._pointLabels[l]);n[l]=u;const h=nA(e.getIndexAngle(l)+o),p=Math.round(QP(h));vI(r,t,h,bI(p,c.x,u.w,0,180),bI(p,c.y,u.h,90,270))}e.setCenterPoint(t.l-r.l,r.r-t.r,t.t-r.t,r.b-t.b),e._pointLabelItems=function(e,t,r){const n=[],a=e._pointLabels.length,i=e.options,{centerPointLabels:s,display:o}=i.pointLabels,l={extra:gI(i)/2,additionalAngle:s?LP/a:0};let c;for(let d=0;d<a;d++){l.padding=r[d],l.size=t[d];const a=_I(e,d,l);n.push(a),"auto"===o&&(a.visible=kI(a,c),a.visible&&(c=a))}return n}(e,n,a)}function vI(e,t,r,n,a){const i=Math.abs(Math.sin(r)),s=Math.abs(Math.cos(r));let o=0,l=0;n.start<t.l?(o=(t.l-n.start)/i,e.l=Math.min(e.l,t.l-o)):n.end>t.r&&(o=(n.end-t.r)/i,e.r=Math.max(e.r,t.r+o)),a.start<t.t?(l=(t.t-a.start)/s,e.t=Math.min(e.t,t.t-l)):a.end>t.b&&(l=(a.end-t.b)/s,e.b=Math.max(e.b,t.b+l))}function _I(e,t,r){const n=e.drawingArea,{extra:a,additionalAngle:i,padding:s,size:o}=r,l=e.getPointPosition(t,n+a+s,i),c=Math.round(QP(nA(l.angle+VP))),d=function(e,t,r){90===r||270===r?e-=t/2:(r>270||r<90)&&(e-=t);return e}(l.y,o.h,c),u=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,r){"right"===r?e-=t:"center"===r&&(e-=t/2);return e}(l.x,o.w,u);return{visible:!0,x:l.x,y:d,textAlign:u,left:h,top:d,right:h+o.w,bottom:d+o.h}}function kI(e,t){if(!t)return!0;const{left:r,top:n,right:a,bottom:i}=e;return!(WA({x:r,y:n},t)||WA({x:r,y:i},t)||WA({x:a,y:n},t)||WA({x:a,y:i},t))}function jI(e,t,r){const{left:n,top:a,right:i,bottom:s}=r,{backdropColor:o}=t;if(!fP(o)){const r=iM(t.borderRadius),l=sM(t.backdropPadding);e.fillStyle=o;const c=n-l.left,d=a-l.top,u=i-n+l.width,h=s-a+l.height;Object.values(r).some(e=>0!==e)?(e.beginPath(),QA(e,{x:c,y:d,w:u,h:h,radius:r}),e.fill()):e.fillRect(c,d,u,h)}}function wI(e,t,r,n){const{ctx:a}=e;if(r)a.arc(e.xCenter,e.yCenter,t,0,FP);else{let r=e.getPointPosition(0,t);a.moveTo(r.x,r.y);for(let i=1;i<n;i++)r=e.getPointPosition(i,t),a.lineTo(r.x,r.y)}}Te(fI,"id","logarithmic"),Te(fI,"defaults",{ticks:{callback:AA.formatters.logarithmic,major:{enabled:!0}}});class NI extends lI{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=sM(gI(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=bP(e)&&!isNaN(e)?e:0,this.max=bP(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/gI(this.options))}generateTickLabels(e){lI.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const r=kP(this.options.pointLabels.callback,[e,t],this);return r||0===r?r:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?yI(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,n){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,n))}getIndexAngle(e){return nA(e*(FP/(this._pointLabels.length||1))+JP(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(fP(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(fP(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const r=t[e];return function(e,t,r){return cM(e,{label:r,index:t,type:"pointLabel"})}(this.getContext(),e,r)}}getPointPosition(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=this.getIndexAngle(e)-VP+r;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter,angle:n}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:r,right:n,bottom:a}=this._pointLabelItems[e];return{left:t,top:r,right:n,bottom:a}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),wI(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:r,grid:n,border:a}=t,i=this._pointLabels.length;let s,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:r,options:{pointLabels:n}}=e;for(let a=t-1;a>=0;a--){const t=e._pointLabelItems[a];if(!t.visible)continue;const i=n.setContext(e.getPointLabelContext(a));jI(r,i,t);const s=oM(i.font),{x:o,y:l,textAlign:c}=t;JA(r,e._pointLabels[a],o,l+s.lineHeight/2,s,{color:i.color,textAlign:c,textBaseline:"middle"})}}(this,i),n.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const r=this.getContext(t),s=n.setContext(r),l=a.setContext(r);!function(e,t,r,n,a){const i=e.ctx,s=t.circular,{color:o,lineWidth:l}=t;!s&&!n||!o||!l||r<0||(i.save(),i.strokeStyle=o,i.lineWidth=l,i.setLineDash(a.dash||[]),i.lineDashOffset=a.dashOffset,i.beginPath(),wI(e,r,s,n),i.closePath(),i.stroke(),i.restore())}(this,s,o,i,l)}}),r.display){for(e.save(),s=i-1;s>=0;s--){const n=r.setContext(this.getPointLabelContext(s)),{color:a,lineWidth:i}=n;i&&a&&(e.lineWidth=i,e.strokeStyle=a,e.setLineDash(n.borderDash),e.lineDashOffset=n.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(s,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const n=this.getIndexAngle(0);let a,i;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(n),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((n,s)=>{if(0===s&&this.min>=0&&!t.reverse)return;const o=r.setContext(this.getContext(s)),l=oM(o.font);if(a=this.getDistanceFromCenterForValue(this.ticks[s].value),o.showLabelBackdrop){e.font=l.string,i=e.measureText(n.label).width,e.fillStyle=o.backdropColor;const t=sM(o.backdropPadding);e.fillRect(-i/2-t.left,-a-l.size/2-t.top,i+t.width,l.size+t.height)}JA(e,n.label,0,-a,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),e.restore()}drawTitle(){}}Te(NI,"id","radialLinear"),Te(NI,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:AA.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),Te(NI,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Te(NI,"descriptors",{angleLines:{_fallback:"grid"}});const SI={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},OI=Object.keys(SI);function CI(e,t){return e-t}function EI(e,t){if(fP(t))return null;const r=e._adapter,{parser:n,round:a,isoWeekday:i}=e._parseOpts;let s=t;return"function"===typeof n&&(s=n(s)),bP(s)||(s="string"===typeof n?r.parse(s,n):r.parse(s)),null===s?null:(a&&(s="week"!==a||!YP(i)&&!0!==i?r.startOf(s,a):r.startOf(s,"isoWeek",i)),+s)}function PI(e,t,r,n){const a=OI.length;for(let i=OI.indexOf(e);i<a-1;++i){const e=SI[OI[i]],a=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((r-t)/(a*e.size))<=n)return OI[i]}return OI[a-1]}function AI(e,t,r){if(r){if(r.length){const{lo:n,hi:a}=oA(r,t);e[r[n]>=t?r[n]:r[a]]=!0}}else e[t]=!0}function MI(e,t,r){const n=[],a={},i=t.length;let s,o;for(s=0;s<i;++s)o=t[s],a[o]=s,n.push({value:o,major:!1});return 0!==i&&r?function(e,t,r,n){const a=e._adapter,i=+a.startOf(t[0].value,n),s=t[t.length-1].value;let o,l;for(o=i;o<=s;o=+a.add(o,1,n))l=r[o],l>=0&&(t[l].major=!0);return t}(e,n,a,r):n}class TI extends DD{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e.time||(e.time={}),n=this._adapter=new UT(e.adapters.date);n.init(t),EP(r.displayFormats,n.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:EI(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:n,max:a,minDefined:i,maxDefined:s}=this.getUserBounds();function o(e){i||isNaN(e.min)||(n=Math.min(n,e.min)),s||isNaN(e.max)||(a=Math.max(a,e.max))}i&&s||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),n=bP(n)&&!isNaN(n)?n:+t.startOf(Date.now(),r),a=bP(a)&&!isNaN(a)?a:+t.endOf(Date.now(),r)+1,this.min=Math.min(n,a-1),this.max=Math.max(n+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,n="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const a=this.min,i=function(e,t,r){let n=0,a=e.length;for(;n<a&&e[n]<t;)n++;for(;a>n&&e[a-1]>r;)a--;return n>0||a<e.length?e.slice(n,a):e}(n,a,this.max);return this._unit=t.unit||(r.autoSkip?PI(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):function(e,t,r,n,a){for(let i=OI.length-1;i>=OI.indexOf(r);i--){const r=OI[i];if(SI[r].common&&e._adapter.diff(a,n,r)>=t-1)return r}return OI[r?OI.indexOf(r):0]}(this,i.length,t.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function(e){for(let t=OI.indexOf(e)+1,r=OI.length;t<r;++t)if(SI[OI[t]].common)return OI[t]}(this._unit):void 0,this.initOffsets(n),e.reverse&&i.reverse(),MI(this,i,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=0,a=0;this.options.offset&&r.length&&(e=this.getDecimalForValue(r[0]),n=1===r.length?1-e:(this.getDecimalForValue(r[1])-e)/2,t=this.getDecimalForValue(r[r.length-1]),a=1===r.length?t:(t-this.getDecimalForValue(r[r.length-2]))/2);const i=r.length<3?.5:.25;n=iA(n,0,i),a=iA(a,0,i),this._offsets={start:n,end:a,factor:1/(n+1+a)}}_generate(){const e=this._adapter,t=this.min,r=this.max,n=this.options,a=n.time,i=a.unit||PI(a.minUnit,t,r,this._getLabelCapacity(t)),s=vP(n.ticks.stepSize,1),o="week"===i&&a.isoWeekday,l=YP(o)||!0===o,c={};let d,u,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":i),e.diff(r,t,i)>1e5*s)throw new Error(t+" and "+r+" are too far apart with stepSize of "+s+" "+i);const p="data"===n.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<r;d=+e.add(d,s,i),u++)AI(c,d,p);return d!==r&&"ticks"!==n.bounds&&1!==u||AI(c,d,p),Object.keys(c).sort(CI).map(e=>+e)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const r=this.options.time.displayFormats,n=this._unit,a=t||r[n];return this._adapter.format(e,a)}_tickFormatFunction(e,t,r,n){const a=this.options,i=a.ticks.callback;if(i)return kP(i,[e,t,r],this);const s=a.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&s[o],d=l&&s[l],u=r[t],h=l&&d&&u&&u.major;return this._adapter.format(e,n||(h?d:c))}generateTickLabels(e){let t,r,n;for(t=0,r=e.length;t<r;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,n=JP(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(n),i=Math.sin(n),s=this._resolveTickFontOptions(0).size;return{w:r*a+s*i,h:r*i+s*a}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,n=r[t.unit]||r.millisecond,a=this._tickFormatFunction(e,0,MI(this,[e],this._majorUnit),n),i=this._getLabelSize(a),s=Math.floor(this.isHorizontal()?this.width/i.w:this.height/i.h)-1;return s>0?s:1}getDataTimestamps(){let e,t,r=this._cache.data||[];if(r.length)return r;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(e=0,t=n.length;e<t;++e)r=r.concat(n[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(r)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const n=this.getLabels();for(t=0,r=n.length;t<r;++t)e.push(EI(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return hA(e.sort(CI))}}function DI(e,t,r){let n,a,i,s,o=0,l=e.length-1;r?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=lA(e,"pos",t)),({pos:n,time:i}=e[o]),({pos:a,time:s}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=lA(e,"time",t)),({time:n,pos:i}=e[o]),({time:a,pos:s}=e[l]));const c=a-n;return c?i+(s-i)*(t-n)/c:i}Te(TI,"id","time"),Te(TI,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class RI extends TI{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=DI(t,this.min),this._tableRange=DI(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,n=[],a=[];let i,s,o,l,c;for(i=0,s=e.length;i<s;++i)l=e[i],l>=t&&l<=r&&n.push(l);if(n.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(i=0,s=n.length;i<s;++i)c=n[i+1],o=n[i-1],l=n[i],Math.round((c+o)/2)!==l&&a.push({time:l,pos:i/(s-1)});return a}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return r.includes(e)&&r.length||r.splice(0,0,e),r.includes(t)&&1!==r.length||r.push(t),r.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return e=t.length&&r.length?this.normalize(t.concat(r)):t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(DI(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return DI(this._table,r*this._tableRange+this._minPos,!0)}}Te(RI,"id","timeseries"),Te(RI,"defaults",TI.defaults);const II=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],LI="label";function FI(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function zI(e,t){e.labels=t}function UI(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:LI;const n=[];e.datasets=t.map(t=>{const a=e.datasets.find(e=>e[r]===t[r]);return a&&t.data&&!n.includes(a)?(n.push(a),Object.assign(a,t),a):Re({},t)})}function BI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:LI;const r={labels:[],datasets:[]};return zI(r,e.labels),UI(r,e.datasets,t),r}function VI(e,t){const{height:r=150,width:n=300,redraw:i=!1,datasetIdKey:s,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h}=e,p=Ie(e,II),m=(0,a.useRef)(null),f=(0,a.useRef)(null),g=()=>{m.current&&(f.current=new uR(m.current,{type:o,data:BI(l,s),options:c&&Re({},c),plugins:d}),FI(t,f.current))},x=()=>{FI(t,null),f.current&&(f.current.destroy(),f.current=null)};return(0,a.useEffect)(()=>{!i&&f.current&&c&&function(e,t){const r=e.options;r&&t&&Object.assign(r,t)}(f.current,c)},[i,c]),(0,a.useEffect)(()=>{!i&&f.current&&zI(f.current.config.data,l.labels)},[i,l.labels]),(0,a.useEffect)(()=>{!i&&f.current&&l.datasets&&UI(f.current.config.data,l.datasets,s)},[i,l.datasets]),(0,a.useEffect)(()=>{f.current&&(i?(x(),setTimeout(g)):f.current.update(h))},[i,c,l.labels,l.datasets,h]),(0,a.useEffect)(()=>{f.current&&(x(),setTimeout(g))},[o]),(0,a.useEffect)(()=>(g(),()=>x()),[]),a.createElement("canvas",Re({ref:m,role:"img",height:r,width:n},p),u)}const HI=(0,a.forwardRef)(VI);function WI(e,t){return uR.register(t),(0,a.forwardRef)((t,r)=>a.createElement(HI,Re(Re({},t),{},{ref:r,type:e})))}const $I=WI("line",TT);uR.register(iI,cI,CR,SR,BR,rI,zR);const qI={control:(e,t)=>Re(Re({},e),{},{background:"#FFFFFF",borderColor:t.isFocused?"#4F46E5":"#CBD5E0",boxShadow:t.isFocused?"0 0 0 1px #4F46E5":"none","&:hover":{borderColor:"#4F46E5"},padding:"2px",fontSize:"0.9rem"}),option:(e,t)=>Re(Re({},e),{},{backgroundColor:t.isSelected?"#4F46E5":t.isFocused?"#EEF2FF":"transparent",color:t.isSelected?"white":"#1A202C","&:hover":{backgroundColor:t.isSelected?"#4F46E5":"#EEF2FF"},cursor:"pointer",fontSize:"0.9rem"}),multiValue:e=>Re(Re({},e),{},{backgroundColor:"#EEF2FF",border:"1px solid #E2E8F0"}),multiValueLabel:e=>Re(Re({},e),{},{color:"#4F46E5",fontWeight:500}),multiValueRemove:e=>Re(Re({},e),{},{color:"#4F46E5","&:hover":{backgroundColor:"#4F46E5",color:"white"}}),menu:e=>Re(Re({},e),{},{zIndex:100,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",backgroundColor:"#FFFFFF"}),placeholder:e=>Re(Re({},e),{},{color:"#718096"}),input:e=>Re(Re({},e),{},{color:"#1A202C"}),singleValue:e=>Re(Re({},e),{},{color:"#1A202C"})},GI=Re(Re({},qI),{},{control:(e,t)=>Re(Re({},qI.control(e,t)),{},{background:"#1F2937",borderColor:t.isFocused?"#4F46E5":"#4B5563","&:hover":{borderColor:"#4F46E5"}}),option:(e,t)=>Re(Re({},qI.option(e,t)),{},{backgroundColor:t.isSelected?"#4F46E5":t.isFocused?"#374151":"#1F2937",color:t.isSelected?"white":"#F3F4F6"}),multiValue:e=>Re(Re({},qI.multiValue(e)),{},{backgroundColor:"#374151",border:"1px solid #4B5563"}),multiValueLabel:e=>Re(Re({},qI.multiValueLabel(e)),{},{color:"#F3F4F6"}),multiValueRemove:e=>Re(Re({},qI.multiValueRemove(e)),{},{color:"#F3F4F6","&:hover":{backgroundColor:"#4F46E5",color:"white"}}),menu:e=>Re(Re({},qI.menu(e)),{},{backgroundColor:"#1F2937",border:"1px solid #4B5563"}),placeholder:e=>Re(Re({},qI.placeholder(e)),{},{color:"#9CA3AF"}),input:e=>Re(Re({},e),{},{color:"#F3F4F6"}),singleValue:e=>Re(Re({},e),{},{color:"#F3F4F6"})}),KI={default:{bg:"bg-gray-100 dark:bg-gray-700",text:"text-gray-500 dark:text-gray-400"},trial_started:{bg:"bg-yellow-100 dark:bg-yellow-900/50",text:"text-yellow-800 dark:text-yellow-200"},trial_converted:{bg:"bg-green-100 dark:bg-green-900/50",text:"text-green-800 dark:text-green-200"},trial_cancelled:{bg:"bg-red-100 dark:bg-red-900/50",text:"text-red-800 dark:text-red-200"},conversion_cancelled:{bg:"bg-green-50 dark:bg-green-900/30",text:"text-green-600 dark:text-green-300"},refunded:{bg:"bg-red-50 dark:bg-red-900/30",text:"text-red-600 dark:text-red-300"}},YI=e=>{var t;let{filterStats:r}=e;if(!r)return null;const{filtering_steps:n,base_cohort_count:a,final_cohort_count:i}=r,s=(e,t)=>t?(e/t*100).toFixed(1):0;return(0,dt.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-white dark:bg-gray-700 shadow-sm",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,dt.jsx)(mN,{size:18,className:"text-indigo-600 dark:text-indigo-400"}),(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-700 dark:text-white",children:"Cohort Filtering Statistics"})]}),(0,dt.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between mb-4 p-3 bg-indigo-50 dark:bg-indigo-900/30 rounded-md",children:[(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Base Cohort"}),(0,dt.jsx)("div",{className:"text-xl font-bold text-indigo-600 dark:text-indigo-300",children:a}),(0,dt.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"100%"})]}),(0,dt.jsx)("div",{className:"hidden md:block text-gray-400",children:"\u2192"}),n.slice(1).map((e,t)=>(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["After ",e.step]}),(0,dt.jsx)("div",{className:"text-xl font-bold text-indigo-600 dark:text-indigo-300",children:e.users_count}),(0,dt.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s(e.users_count,a),"% of base"]})]},t)),i!==(null===(t=n[n.length-1])||void 0===t?void 0:t.users_count)&&(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)("div",{className:"hidden md:block text-gray-400",children:"\u2192"}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Final Cohort"}),(0,dt.jsx)("div",{className:"text-xl font-bold text-indigo-600 dark:text-indigo-300",children:i}),(0,dt.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s(i,a),"% of base"]})]})]})]}),(0,dt.jsx)("div",{className:"overflow-x-auto",children:(0,dt.jsxs)("table",{className:"min-w-full text-sm border dark:border-gray-600",children:[(0,dt.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white",children:"Filter Step"}),(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white",children:"Description"}),(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-center text-gray-700 dark:text-white",children:"Users Count"}),(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-center text-gray-700 dark:text-white",children:"Users Filtered"}),(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-center text-gray-700 dark:text-white",children:"% of Base"})]})}),(0,dt.jsx)("tbody",{className:"bg-white dark:bg-gray-800",children:n.map((e,t)=>(0,dt.jsxs)("tr",{className:t%2===0?"":"bg-gray-50 dark:bg-gray-700",children:[(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 font-medium text-gray-700 dark:text-gray-300",children:e.step}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:e.description}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-center text-gray-700 dark:text-gray-300",children:e.users_count}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-center text-gray-700 dark:text-gray-300",children:e.users_filtered||0}),(0,dt.jsxs)("td",{className:"p-2 border-b dark:border-gray-600 text-center text-gray-700 dark:text-gray-300",children:[s(e.users_count,a),"%"]})]},t))})]})})]})},XI=e=>{let{data:t,position:r,onClose:n}=e;return t?(0,dt.jsxs)("div",{className:"fixed z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg p-4 max-w-md",style:{left:Math.min(r.x,window.innerWidth-400),top:Math.max(r.y-100,10)},children:[(0,dt.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,dt.jsx)("h4",{className:"font-semibold text-gray-800 dark:text-white",children:"Estimated Revenue Calculation"}),(0,dt.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:"\xd7"})]}),(0,dt.jsxs)("div",{className:"space-y-3 text-sm",children:[(()=>{const e=t.breakdown||{},r=e.trial_converted||{},n=e.initial_purchase||{},a=r.actual_revenue>0,i=n.actual_revenue>0;return a||i?(0,dt.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900 p-3 rounded-lg border border-blue-200 dark:border-blue-700 mb-3",children:[(0,dt.jsx)("div",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:"\ud83c\udfaf Refund Rate Analysis"}),a&&(0,dt.jsxs)("div",{className:"mb-2",children:[(0,dt.jsx)("div",{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:"Trial Conversion Refund Rate:"}),(0,dt.jsx)("div",{className:"text-sm font-bold text-blue-900 dark:text-blue-100",children:(()=>{const e=r.actual_revenue||0,t=r.estimated_refunds||0,n=e>0?t/e*100:0;return"".concat(t.toFixed(2)," / ").concat(e.toFixed(2)," = ").concat(n.toFixed(1),"%")})()}),(0,dt.jsxs)("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:["$",(r.estimated_refunds||0).toFixed(2)," estimated refunds on $",(r.actual_revenue||0).toFixed(2)," revenue"]})]}),i&&(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:"Initial Purchase Refund Rate:"}),(0,dt.jsx)("div",{className:"text-sm font-bold text-blue-900 dark:text-blue-100",children:(()=>{const e=n.actual_revenue||0,t=n.estimated_refunds||0,r=e>0?t/e*100:0;return"".concat(t.toFixed(2)," / ").concat(e.toFixed(2)," = ").concat(r.toFixed(1),"%")})()}),(0,dt.jsxs)("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:["$",(n.estimated_refunds||0).toFixed(2)," estimated refunds on $",(n.actual_revenue||0).toFixed(2)," revenue"]})]})]}):null})(),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Formula:"}),(0,dt.jsx)("div",{className:"font-mono text-xs bg-gray-100 dark:bg-gray-700 p-2 rounded",children:t.formula})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Calculation:"}),(0,dt.jsx)("div",{className:"font-mono text-xs bg-gray-100 dark:bg-gray-700 p-2 rounded",children:t.calculation})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Components:"}),(0,dt.jsx)("div",{className:"text-xs space-y-1",children:Object.entries(t.components||{}).map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{className:"flex justify-between",children:[(0,dt.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[t,":"]}),(0,dt.jsx)("span",{className:"font-mono",children:r})]},t)})})]}),(0,dt.jsx)("div",{className:"border-t pt-2",children:(0,dt.jsxs)("div",{className:"flex justify-between font-medium",children:[(0,dt.jsx)("span",{children:"Result:"}),(0,dt.jsx)("span",{className:"text-green-600 dark:text-green-400",children:t.result})]})})]})]}):null},JI=()=>{var e,t,r,n,i,s,o,l,c,d,u,h,p,m,f,g,x,b,y,v,_,k,j,w,N,S,O,C,E,P,A,M,T;const[D,R]=(0,a.useState)({date_from_str:"",date_to_str:"",optional_filters:[]}),[I,L]=(0,a.useState)([]),[F,z]=(0,a.useState)([]),[U,B]=(0,a.useState)({}),[V,H]=(0,a.useState)(!1),[W,$]=(0,a.useState)(null),[q,G]=(0,a.useState)(null),[K,Y]=(0,a.useState)(!1),[X,J]=(0,a.useState)(!1),[Q,Z]=(0,a.useState)(""),[ee,te]=(0,a.useState)(!0),[re,ne]=(0,a.useState)(null),[ae,ie]=(0,a.useState)(!1),[se,oe]=(0,a.useState)(null),[le,ce]=(0,a.useState)(null),[de,ue]=(0,a.useState)(!1),[he,pe]=(0,a.useState)(null),[me,fe]=(0,a.useState)(""),[ge,xe]=(0,a.useState)(""),[be,ye]=(0,a.useState)([]),[ve,_e]=(0,a.useState)([]),[ke,je]=(0,a.useState)(null),[we,Ne]=(0,a.useState)(null),[Se,Oe]=(0,a.useState)({x:0,y:0}),[Ce,Ee]=a.useState({}),[Pe,Ae]=a.useState(""),[Me,Te]=a.useState(!1);(0,a.useEffect)(()=>{const e=localStorage.getItem("cohortAnalyzerFilters");if(e)try{const t=JSON.parse(e);R(e=>Re(Re(Re({},e),t),{},{optional_filters:t.optional_filters||[]}))}catch(q){console.error("Error loading saved filters:",q)}},[]),(0,a.useEffect)(()=>{const e={date_from_str:D.date_from_str,date_to_str:D.date_to_str,optional_filters:D.optional_filters};localStorage.setItem("cohortAnalyzerFilters",JSON.stringify(e))},[D.date_from_str,D.date_to_str,D.optional_filters]);const De=(0,a.useCallback)(async()=>{try{const e=await _a();if(L(e.event_properties||[]),z(e.user_properties||[]),(!e.event_properties||0===e.event_properties.length)&&(!e.user_properties||0===e.user_properties.length)&&"discovery_initiated"===e.status){Z(e.message||"Property discovery auto-triggered. Please wait..."),J(!0);const t=setInterval(async()=>{try{"completed"===(await Na()).status&&(clearInterval(t),J(!1),Z("Discovery completed! Refreshing properties..."),setTimeout(De,1e3))}catch(e){console.error("Error checking discovery status:",e)}},3e3)}}catch(e){if(console.error("Error fetching discoverable properties:",e),"tables_missing"===e.code)try{await wa(),Z("Property system initialized. Please wait while we discover properties..."),setTimeout(De,2e3)}catch(t){G("Could not initialize property system. Please try again or check server logs.")}else G("Could not load filter property lists. Try triggering discovery or check console.")}},[]),Ie=(0,a.useCallback)(async()=>{try{const e=await Na();e.active?(J(!0),Z(e.message||"Property discovery in progress...")):"completed"===e.status&&J(!1)}catch(e){console.error("Error checking discovery status:",e)}},[]);(0,a.useEffect)(()=>{(async()=>{te(!0);try{await wa(),await Ie(),await De()}catch(e){console.error("Error initializing properties:",e),G("Could not initialize property system. Please check server logs.")}finally{te(!1)}})()},[De,Ie]);const Le=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;R(n=>{const a=Re({},n);if("date_from_str"===e||"date_to_str"===e)a[e]=t;else if("optional_filter_property"===e)a.optional_filters[r].property_name=t,a.optional_filters[r].property_values=[],t&&Fe(t,"user","optional_filter_"+r);else if("optional_filter_values"===e)a.optional_filters[r].property_values=t;else if(e.startsWith("optional_filter_")){const n=e.substring(16);"property"===n?(a.optional_filters[r].property_name=t,a.optional_filters[r].property_values=[],t&&a.optional_filters[r].property_source&&Fe(t,a.optional_filters[r].property_source,"optional_filter_".concat(r))):"values"===n?a.optional_filters[r].property_values=t:"source"===n&&(a.optional_filters[r].property_source=t,a.optional_filters[r].property_name&&Fe(a.optional_filters[r].property_name,t,"optional_filter_".concat(r)))}return a})},Fe=async(e,t,r)=>{if(e&&t)try{const n=await ka(e,t);B(t=>Re(Re({},t),{},{[r+"_"+e]:n.values||[]}))}catch(n){console.error("Error fetching values for ".concat(e,":"),n),B(t=>Re(Re({},t),{},{[r+"_"+e]:[]}))}},ze=async()=>{ie(!0);try{console.log("[DEBUG] fetchUserTimeline called with filters:",D);const e=await ya(D);console.log("[DEBUG] fetchUserTimeline response:",e),e.error?(console.log("[DEBUG] fetchUserTimeline error:",e.error),oe(e.error)):(console.log("[DEBUG] Setting userTimelineData:",e),ne(e))}catch(e){console.error("Timeline fetch error:",e),oe(e.message||"Could not load user timeline data.")}ie(!1)},Ue=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;ue(!0),pe(null);try{console.log("[DEBUG] fetchEventRevenueTimeline called with filters:",D,"distinctId:",e,"productId:",t);const r=await va(D,e,t);console.log("[DEBUG] fetchEventRevenueTimeline response:",r),r.error?(console.log("[DEBUG] fetchEventRevenueTimeline error:",r.error),pe(r.error)):(console.log("[DEBUG] Setting eventRevenueTimelineData:",r),ce(r),r.available_users&&ye(r.available_users),r.available_products&&_e(r.available_products))}catch(r){console.error("Event revenue timeline fetch error:",r),pe(r.message||"Could not load event revenue timeline data.")}ue(!1)},Be=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rate_denominator_count";if(console.log('[DEBUG] renderLifecycleTable called for "'.concat(e,'"')),console.log("[DEBUG] ratesData:",t),!t)return console.log('[DEBUG] No ratesData for "'.concat(e,'"')),(0,dt.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:["Lifecycle rate data not available for ",e,"."]});const n=t.rates_by_product||t.aggregate_rates;if(console.log("[DEBUG] isNewFormat: ".concat(n,' for "').concat(e,'"')),n){const r=t.aggregate_rates,n=t.rates_by_product||{};if(console.log("[DEBUG] aggregateRates:",r),console.log("[DEBUG] productRates:",n),!r||!r.rates_by_day||0===Object.keys(r.rates_by_day).length)return console.log('[DEBUG] No valid aggregateRates for "'.concat(e,'"')),(0,dt.jsxs)("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/30 rounded-lg",children:[(0,dt.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:[e," - Debug Info"]}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Raw data structure (for debugging):"}),(0,dt.jsx)("pre",{className:"text-xs bg-gray-100 dark:bg-gray-800 p-2 rounded overflow-x-auto",children:JSON.stringify(t,null,2)})]});const a=Pe&&n[Pe]?n[Pe]:r,i=a.rates_by_day,s=Object.keys(i).map(Number).sort((e,t)=>e-t),o=[{metric:"Raw Daily Cancellation %",dataKey:"raw_daily_cancellation_rate"},{metric:"Smoothed Daily Cancellation %",dataKey:"smoothed_daily_cancellation_rate"},{metric:"Raw Cumulative Cancellation %",dataKey:"raw_cumulative_cancellation_rate"},{metric:"Smoothed Cumulative Cancellation %",dataKey:"smoothed_cumulative_cancellation_rate"},{metric:"Raw Daily Refund %",dataKey:"raw_daily_refund_rate"},{metric:"Smoothed Daily Refund %",dataKey:"smoothed_daily_refund_rate"},{metric:"Raw Cumulative Refund %",dataKey:"raw_cumulative_refund_rate"},{metric:"Smoothed Cumulative Refund %",dataKey:"smoothed_cumulative_refund_rate"}];return(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e}),(0,dt.jsxs)("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:[(0,dt.jsx)("h5",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Smoothing Method Information"}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-700 dark:text-blue-300",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Method:"})," ",a.smoothing_method||"none"]}),(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Quality:"})," ",a.smoothing_quality||"N/A"]}),(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Sample Size:"})," ",a.total_sample_size||0]})]}),a.smoothing_details&&(0,dt.jsxs)("div",{children:[(0,dt.jsx)("p",{children:(0,dt.jsx)("strong",{children:"Data Characteristics:"})}),(0,dt.jsx)("ul",{className:"ml-4 mt-1",children:a.smoothing_details.cancellation&&(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsxs)("li",{children:["Early Concentration: ",a.smoothing_details.cancellation.early_concentration]}),(0,dt.jsxs)("li",{children:["Sparsity: ",a.smoothing_details.cancellation.sparsity]}),(0,dt.jsxs)("li",{children:["Max Rate: ",a.smoothing_details.cancellation.max_rate]})]})})]})]})]}),(0,dt.jsx)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:(0,dt.jsxs)("div",{className:"flex",children:[(0,dt.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:[(0,dt.jsx)("div",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700",children:"Metric"}),o.map((e,t)=>(0,dt.jsx)("div",{className:"px-4 py-3 text-sm border-b border-gray-200 dark:border-gray-700 ".concat(t%2===0?"bg-white dark:bg-gray-900":"bg-gray-50 dark:bg-gray-800"," text-gray-900 dark:text-white font-medium"),children:e.metric},t))]}),(0,dt.jsx)("div",{className:"flex-1 overflow-x-auto",children:(0,dt.jsx)("div",{className:"flex",children:s.map(e=>{const t=e.toString(),r=i[t];return(0,dt.jsxs)("div",{className:"min-w-[100px] border-r border-gray-200 dark:border-gray-700 last:border-r-0",children:[(0,dt.jsxs)("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-800 font-medium text-gray-900 dark:text-white text-center border-b border-gray-200 dark:border-gray-700",children:["Day ",e]}),o.map((e,t)=>(0,dt.jsxs)("div",{className:"px-4 py-3 text-sm text-center border-b border-gray-200 dark:border-gray-700 ".concat(t%2===0?"bg-white dark:bg-gray-900":"bg-gray-50 dark:bg-gray-800"," text-gray-500 dark:text-gray-300"),children:[r?(r[e.dataKey]||0).toFixed(2):"0.00","%"]},t))]},t)})})})]})})]})}if(!t.rates_by_day||0===Object.keys(t.rates_by_day).length)return(0,dt.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:["No lifecycle rate data available for ",e,"."]});const a=Object.keys(t.rates_by_day).map(Number).sort((e,t)=>e-t),i=t[r]||0,s=[{metric:"Daily Cancel %",dataKey:"cancelled_daily_pct"},{metric:"Cumulative Cancel %",dataKey:"cancelled_cumulative_pct"},{metric:"Daily Convert %",dataKey:"converted_daily_pct"},{metric:"Cumulative Convert %",dataKey:"converted_cumulative_pct"}];return(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h4",{className:"text-lg font-semibold mb-2 text-gray-900 dark:text-white",children:e}),(0,dt.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:["Based on ",i," users. ",t.message]}),(0,dt.jsx)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:(0,dt.jsxs)("div",{className:"flex",children:[(0,dt.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:[(0,dt.jsx)("div",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700",children:"Metric"}),s.map((e,t)=>(0,dt.jsx)("div",{className:"px-4 py-3 text-sm border-b border-gray-200 dark:border-gray-700 ".concat(t%2===0?"bg-white dark:bg-gray-900":"bg-gray-50 dark:bg-gray-800"," text-gray-900 dark:text-white font-medium"),children:e.metric},t))]}),(0,dt.jsx)("div",{className:"flex-1 overflow-x-auto",children:(0,dt.jsx)("div",{className:"flex",children:a.map(e=>{const r=e.toString(),n=t.rates_by_day[r];return(0,dt.jsxs)("div",{className:"min-w-[100px] border-r border-gray-200 dark:border-gray-700 last:border-r-0",children:[(0,dt.jsxs)("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-800 font-medium text-gray-900 dark:text-white text-center border-b border-gray-200 dark:border-gray-700",children:["Day ",e]}),s.map((e,t)=>(0,dt.jsxs)("div",{className:"px-4 py-3 text-sm text-center border-b border-gray-200 dark:border-gray-700 ".concat(t%2===0?"bg-white dark:bg-gray-900":"bg-gray-50 dark:bg-gray-800"," text-gray-500 dark:text-gray-300"),children:[n?(n[e.dataKey]||0).toFixed(2):"0.00","%"]},t))]},r)})})})]})})]})},We=e=>null===e||void 0===e?"N/A":e.toLocaleString("en-US",{style:"currency",currency:"USD"}),$e=(null===W||void 0===W?void 0:W.daily_data.map(e=>{const t=e.cumulative_revenue_actual_net||0,r=t+(e.estimated_additional_revenue_from_pending_trials_net_refund||0)-(e.estimated_future_refunds_on_actual_revenue_amount||0),n=e.daily_trials_started||0,a=e.daily_trials_converted_actual||0,i=a+(e.daily_trials_cancelled_actual||0),s=e.daily_trials_started-i;return{date:e.date,daily_trials_started:n,daily_trials_ended:i,daily_trials_pending:s,daily_conversions:a,daily_conversions_net_refunds:a-(e.daily_refund_count_actual||0),daily_estimated_conversions_net_refunds:a-(e.daily_estimated_refunds||0),daily_refunds:e.daily_refund_count_actual||0,daily_revenue:e.daily_revenue_actual||0,daily_revenue_net:e.daily_revenue_actual_net||0,daily_estimated_revenue:e.daily_estimated_revenue||0,cumulative_trials_started:e.cumulative_trials_started||0,cumulative_trials_ended:(e.cumulative_trials_converted_actual||0)+(e.cumulative_trials_cancelled_actual||0),cumulative_trials_pending:e.cumulative_trials_started-((e.cumulative_trials_converted_actual||0)+(e.cumulative_trials_cancelled_actual||0)),cumulative_conversions:e.cumulative_trials_converted_actual||0,cumulative_conversions_net_refunds:(e.cumulative_trials_converted_actual||0)-(e.cumulative_refund_count_actual||0),cumulative_estimated_conversions_net_refunds:(e.cumulative_trials_converted_actual||0)-(e.cumulative_estimated_refunds||0),cumulative_refunds:e.cumulative_refund_count_actual||0,cumulative_revenue:e.cumulative_revenue_actual||0,cumulative_revenue_net:t,cumulative_estimated_revenue:r}}))||[],[qe,Ge]=(0,a.useState)({daily_trials_started:!0,daily_trials_ended:!1,daily_trials_pending:!1,daily_conversions:!0,daily_conversions_net_refunds:!1,daily_estimated_conversions_net_refunds:!1,daily_refunds:!1,cumulative_trials_started:!0,cumulative_trials_ended:!1,cumulative_trials_pending:!1,cumulative_conversions:!0,cumulative_conversions_net_refunds:!1,cumulative_estimated_conversions_net_refunds:!1,cumulative_refunds:!1}),[Ke,Ye]=(0,a.useState)({daily_revenue:!0,daily_revenue_net:!1,daily_estimated_revenue:!1,cumulative_revenue:!1,cumulative_revenue_net:!0,cumulative_estimated_revenue:!0}),Xe=()=>document.documentElement.classList.contains("dark")||window.matchMedia("(prefers-color-scheme: dark)").matches?GI:qI,Je=()=>{if(!Me||null===W||void 0===W||!W.lifecycle_rates)return null;const e=W.lifecycle_rates,t=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cancellation_refund";if(null===e||void 0===e||!e.rates_by_day)return null;const n=Object.keys(e.rates_by_day).map(Number).sort((e,t)=>e-t);let a=[];return"cancellation_refund"===r?a=[{label:"Raw Cumulative Cancellation %",data:n.map(t=>{var r;return(null===(r=e.rates_by_day[t.toString()])||void 0===r?void 0:r.raw_cumulative_cancellation_rate)||0}),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.1)",borderDash:[],tension:.1},{label:"Smoothed Cumulative Cancellation %",data:n.map(t=>{var r;return(null===(r=e.rates_by_day[t.toString()])||void 0===r?void 0:r.smoothed_cumulative_cancellation_rate)||0}),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.3)",borderDash:[5,5],tension:.1},{label:"Raw Cumulative Refund %",data:n.map(t=>{var r;return(null===(r=e.rates_by_day[t.toString()])||void 0===r?void 0:r.raw_cumulative_refund_rate)||0}),borderColor:"rgb(54, 162, 235)",backgroundColor:"rgba(54, 162, 235, 0.1)",borderDash:[],tension:.1},{label:"Smoothed Cumulative Refund %",data:n.map(t=>{var r;return(null===(r=e.rates_by_day[t.toString()])||void 0===r?void 0:r.smoothed_cumulative_refund_rate)||0}),borderColor:"rgb(54, 162, 235)",backgroundColor:"rgba(54, 162, 235, 0.3)",borderDash:[5,5],tension:.1}]:"conversion_cancellation"===r&&(a=[{label:"Raw Cumulative Conversion %",data:n.map(t=>{var r;return(null===(r=e.rates_by_day[t.toString()])||void 0===r?void 0:r.raw_cumulative_conversion_rate)||0}),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.1)",borderDash:[],tension:.1},{label:"Smoothed Cumulative Conversion %",data:n.map(t=>{var r;return(null===(r=e.rates_by_day[t.toString()])||void 0===r?void 0:r.smoothed_cumulative_conversion_rate)||0}),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.3)",borderDash:[5,5],tension:.1},{label:"Raw Cumulative Cancellation %",data:n.map(t=>{var r;return(null===(r=e.rates_by_day[t.toString()])||void 0===r?void 0:r.raw_cumulative_cancellation_rate)||0}),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.1)",borderDash:[],tension:.1},{label:"Smoothed Cumulative Cancellation %",data:n.map(t=>{var r;return(null===(r=e.rates_by_day[t.toString()])||void 0===r?void 0:r.smoothed_cumulative_cancellation_rate)||0}),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.3)",borderDash:[5,5],tension:.1}]),{labels:n.map(e=>"Day ".concat(e)),datasets:a}},r={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Raw vs Smoothed Cumulative Rates"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Percentage (%)"}},x:{title:{display:!0,text:"Days"}}}},n=e=>e?Pe&&e.rates_by_product&&e.rates_by_product[Pe]?e.rates_by_product[Pe]:e.aggregate_rates||e:null,a=n(e.trial_to_outcome_rates),i=n(e.trial_to_cancellation_rates||e.trial_to_refund_rates);return(0,dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:(0,dt.jsxs)("div",{className:"p-6",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,dt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Lifecycle Rate Charts"}),(0,dt.jsx)("button",{onClick:()=>Te(!1),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,dt.jsx)(fN,{size:24})})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a&&(0,dt.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Trial to Outcome (Conversion vs Cancellation)"}),(0,dt.jsx)($I,{data:t(a,"Trial to Outcome","conversion_cancellation"),options:r})]}),i&&(0,dt.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Cancellation vs Refund Rates"}),(0,dt.jsx)($I,{data:t(i,"Cancellation vs Refund","cancellation_refund"),options:r})]})]}),(0,dt.jsxs)("div",{className:"mt-6 text-sm text-gray-600 dark:text-gray-400",children:[(0,dt.jsx)("p",{children:(0,dt.jsx)("strong",{children:"Legend:"})}),(0,dt.jsxs)("ul",{className:"list-disc list-inside mt-2",children:[(0,dt.jsx)("li",{children:"Solid lines represent raw data"}),(0,dt.jsx)("li",{children:"Dashed lines represent smoothed curves"}),(0,dt.jsx)("li",{children:"The smoothing algorithm first smooths cumulative rates, then derives daily rates"})]})]})]})})})};return(0,dt.jsxs)("div",{className:"p-6 max-w-full mx-auto bg-white dark:bg-gray-800 min-h-screen",children:[(0,dt.jsx)("h1",{className:"text-3xl font-bold mb-6 text-gray-800 dark:text-white border-b pb-2 border-gray-200 dark:border-gray-600",children:"Cohort Analyzer"}),ee?(0,dt.jsxs)("div",{className:"flex items-center justify-center p-8 bg-white dark:bg-gray-700 rounded-lg shadow-md",children:[(0,dt.jsx)(gN,{className:"animate-spin mr-2 text-indigo-600 dark:text-indigo-400"}),(0,dt.jsx)("p",{className:"text-gray-700 dark:text-white",children:"Initializing cohort analyzer..."})]}):(0,dt.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),H(!0),G(null),$(null),ne(null),oe(null),ce(null),pe(null),fe(""),xe(""),je(null);try{if(!D.date_from_str||!D.date_to_str)throw new Error("Start Date and End Date are required.");if(D.optional_filters.length>0&&D.optional_filters[0].property_name&&0===D.optional_filters[0].property_values.length)throw new Error("Please select values for the optional filters or clear the property selection.");for(const r of D.optional_filters)if(!r.property_name||0===r.property_values.length)throw new Error("Optional filter is incomplete. Please select both property and values for all filters or remove unused ones.");const e=Re(Re({},D),{},{enforce_trial_started:!0,cohort_definition:{required_event:"RC Trial started",date_range:{from:D.date_from_str,to:D.date_to_str},strict_filtering:!0}}),t=await ga(e);if(t.error)G(t.error);else{if(t.cohort_event_occurrence&&t.cohort_event_occurrence.trial_started&&t.summary_stats&&t.summary_stats.total_users_in_final_cohort){const e=t.cohort_event_occurrence.trial_started.user_count,r=t.summary_stats.total_users_in_final_cohort;if(e!==r){const t="Warning: Cohort definition may not be correctly applied. "+"Cohort users (".concat(r,") should equal ")+"trial started users (".concat(e,").");console.warn(t),je(t)}}$(t),ze(),Ue()}}catch(t){console.error("Analysis error:",t),G(t.message||"Analysis failed. Please check that you have selected valid filter criteria.")}H(!1)},className:"bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md mb-8",children:[(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6 border-b border-gray-200 dark:border-gray-600 pb-6",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{htmlFor:"date_from_str",className:"block text-sm font-medium text-gray-700 dark:text-white mb-2",children:"Start Date *"}),(0,dt.jsx)("input",{type:"date",id:"date_from_str",value:D.date_from_str,onChange:e=>Le("date_from_str",e.target.value),className:"mt-1 block w-full p-2.5 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white dark:bg-gray-600 text-gray-900 dark:text-white",required:!0})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{htmlFor:"date_to_str",className:"block text-sm font-medium text-gray-700 dark:text-white mb-2",children:"End Date *"}),(0,dt.jsx)("input",{type:"date",id:"date_to_str",value:D.date_to_str,onChange:e=>Le("date_to_str",e.target.value),className:"mt-1 block w-full p-2.5 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white dark:bg-gray-600 text-gray-900 dark:text-white",required:!0})]})]}),(0,dt.jsxs)("div",{className:"mb-6 p-5 border rounded-md border-teal-200 dark:border-teal-500 bg-teal-50 dark:bg-teal-900/40",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Additional Event/User Property Filters"}),(0,dt.jsx)("button",{type:"button",onClick:()=>{R(e=>Re(Re({},e),{},{optional_filters:[...e.optional_filters,{id:Date.now().toString(),property_name:"",property_values:[],property_source:"event"}]}))},className:"p-1.5 bg-teal-100 dark:bg-teal-600 text-teal-700 dark:text-white rounded-full hover:bg-teal-200 dark:hover:bg-teal-500 transition-colors",children:(0,dt.jsx)(xN,{size:18})})]}),0===D.optional_filters.length&&(0,dt.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 italic mb-2",children:"No additional filters. Click the + button to add a filter."}),D.optional_filters.map((e,t)=>(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end mb-4 p-4 border-t dark:border-gray-600 bg-white dark:bg-gray-600 rounded-md shadow-sm",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-white mb-1",children:"Source Type"}),(0,dt.jsxs)("select",{value:e.property_source,onChange:e=>Le("optional_filter_source",e.target.value,t),className:"block w-full p-2 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,dt.jsx)("option",{value:"event",children:"Event Property"}),(0,dt.jsx)("option",{value:"user",children:"User Property"})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-white mb-1",children:"Property Name"}),(0,dt.jsxs)("select",{value:e.property_name,onChange:e=>Le("optional_filter_property",e.target.value,t),className:"block w-full p-2 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,dt.jsx)("option",{value:"",children:"-- Select Property --"}),("event"===e.property_source?I:F).map(e=>(0,dt.jsx)("option",{value:e.key,children:e.display_name||e.key},e.key))]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-white mb-1",children:"Property Value(s)"}),(0,dt.jsx)(TE,{isMulti:!0,isDisabled:!e.property_name||!e.property_source,options:(U["optional_filter_".concat(t,"_")+e.property_name]||[]).map(e=>({value:e,label:e})),value:e.property_values.map(e=>({value:e,label:e})),onChange:e=>Le("optional_filter_values",e?e.map(e=>e.value):[],t),styles:Xe(),placeholder:"Select values..."})]}),(0,dt.jsx)("div",{className:"flex justify-end",children:(0,dt.jsx)("button",{type:"button",onClick:()=>{return t=e.id,void R(e=>Re(Re({},e),{},{optional_filters:e.optional_filters.filter(e=>e.id!==t)}));var t},className:"p-1.5 bg-red-100 dark:bg-red-700 text-red-600 dark:text-white rounded-full hover:bg-red-200 dark:hover:bg-red-600 transition-colors",children:(0,dt.jsx)(fN,{size:18})})})]},e.id))]}),(0,dt.jsxs)("div",{className:"flex items-center justify-between mt-8",children:[(0,dt.jsx)("button",{type:"submit",disabled:V,className:"px-6 py-2.5 bg-indigo-600 text-white font-semibold rounded-md shadow hover:bg-indigo-700 disabled:opacity-50 flex items-center transition-colors",children:V?(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)(gN,{className:"animate-spin mr-2",size:16}),"Analyzing..."]}):"Analyze Cohort"}),(0,dt.jsx)("button",{type:"button",onClick:async()=>{J(!0),Z("Property discovery initiated...");try{const e=await ja();Z(e.message+" Refresh page after a few moments to see updated filter options."),setTimeout(()=>De(),5e3)}catch(e){Z("Error triggering discovery: "+(e.message||"Unknown error"))}},disabled:X,className:"px-5 py-2.5 bg-teal-600 text-white text-sm font-medium rounded-md hover:bg-teal-700 disabled:opacity-50 flex items-center transition-colors",children:X?(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)(gN,{className:"animate-spin mr-2",size:16}),"Discovery Running..."]}):"Discover Filter Properties"})]}),Q&&(0,dt.jsx)("div",{className:"mt-3 p-3 bg-teal-50 dark:bg-teal-900/40 border border-teal-200 dark:border-teal-600 rounded-md",children:(0,dt.jsx)("p",{className:"text-sm text-teal-700 dark:text-teal-300",children:Q})})]}),q&&(0,dt.jsx)("div",{className:"my-4 p-4 bg-red-100 dark:bg-red-800 text-red-700 dark:text-white rounded-md shadow-md border border-red-300 dark:border-red-600",children:(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)(He,{className:"mr-2 flex-shrink-0"}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium block",children:"Analysis Error:"}),(0,dt.jsx)("span",{className:"block mt-1",children:q})]})]})}),ke&&(0,dt.jsx)("div",{className:"my-4 p-4 bg-yellow-100 dark:bg-yellow-800 text-yellow-700 dark:text-white rounded-md shadow-md border border-yellow-300 dark:border-yellow-600",children:(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)(He,{className:"mr-2 flex-shrink-0"}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium block",children:"Cohort Definition Warning:"}),(0,dt.jsx)("span",{className:"block mt-1",children:ke}),(0,dt.jsx)("span",{className:"block mt-1 text-sm italic",children:"The backend may not be correctly filtering users based on trial started events."})]})]})}),W&&(0,dt.jsxs)("div",{className:"mt-8 bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md",children:[(0,dt.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800 dark:text-white",children:"Analysis Results"}),W.filter_stats&&(0,dt.jsx)(YI,{filterStats:W.filter_stats}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,dt.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-600 rounded-md",children:[(0,dt.jsx)("h3",{className:"font-semibold text-gray-700 dark:text-white",children:"Cohort Users (Trial Started)"}),(0,dt.jsx)("p",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-300",children:(null===(e=W.summary_stats)||void 0===e?void 0:e.total_users_in_final_cohort)||0}),(0,dt.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:"Unique users who had an 'RC Trial started' event in the selected date range (and match primary filter if applied)."})]}),(0,dt.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-600 rounded-md",children:[(0,dt.jsx)("h3",{className:"font-semibold text-gray-700 dark:text-white",children:"Events Analyzed (Cohort Only)"}),(0,dt.jsx)("p",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-300",children:(null===(t=W.summary_stats)||void 0===t?void 0:t.total_events_analyzed)||0}),(0,dt.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:"Events from users in the trial started cohort"})]}),(0,dt.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-600 rounded-md",children:[(0,dt.jsx)("h3",{className:"font-semibold text-gray-700 dark:text-white",children:"Cohort ARPC (Overall)"}),(0,dt.jsx)("p",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-300",children:We(null===(r=W.summary_stats)||void 0===r?void 0:r.arpc_cohort)}),(0,dt.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:["Basis: ",null===(n=W.summary_stats)||void 0===n?void 0:n.arpc_datapoints," users. ",null===(i=W.summary_stats)||void 0===i?void 0:i.arpc_calculation_basis]}),(0,dt.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-300 italic",children:"See per-product breakdown below"})]})]}),le&&le.arpc_per_product&&Object.keys(le.arpc_per_product).length>0&&(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h3",{className:"font-semibold text-gray-700 dark:text-white mb-3",children:"ARPC Per Product"}),(0,dt.jsx)("div",{className:"bg-gray-50 dark:bg-gray-600 rounded-lg p-3",children:(0,dt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:Object.entries(le.arpc_per_product).map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-md p-3 border border-gray-200 dark:border-gray-600",children:[(0,dt.jsx)("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 truncate",title:t,children:t}),(0,dt.jsx)("div",{className:"text-lg font-bold text-green-600 dark:text-green-400 leading-tight",children:We("object"===typeof r?r.arpc:r)}),"object"===typeof r&&(0,dt.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 space-y-0.5",children:[(0,dt.jsxs)("div",{children:[r.event_count," events"]}),(0,dt.jsxs)("div",{children:[r.unique_users," users"]}),(0,dt.jsx)("div",{className:"font-medium",children:We(r.total_revenue)})]})]},t)})})})]}),W.event_user_counts&&(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h3",{className:"font-semibold text-gray-700 dark:text-white mb-3",children:"Unique Users Per Event Type"}),(0,dt.jsx)("div",{className:"overflow-x-auto",children:(0,dt.jsxs)("table",{className:"min-w-full text-sm border dark:border-gray-600",children:[(0,dt.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white",children:"Event Type"}),(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white",children:"Unique Users"}),(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white",children:"Total Events"}),(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white",children:"Events Per User"})]})}),(0,dt.jsx)("tbody",{className:"bg-white dark:bg-gray-800",children:Object.entries(W.event_user_counts).map((e,t)=>{let[r,n]=e;return(0,dt.jsxs)("tr",{className:t%2===0?"":"bg-gray-50 dark:bg-gray-700",children:[(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 font-medium text-gray-700 dark:text-gray-300",children:r}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:n.unique_users||0}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:n.total_events||0}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:n.unique_users>0?(n.total_events/n.unique_users).toFixed(2):"0.00"})]},r)})})]})})]}),W.cohort_event_occurrence&&(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h3",{className:"font-semibold text-gray-700 dark:text-white mb-3",children:"Cohort Event Occurrence"}),(0,dt.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:["Number of users in the cohort who have had each event at least once.",(0,dt.jsx)("span",{className:"italic",children:' Note: Cohort is defined as users in the database who have a "Trial started" event within the selected date range. All other users are excluded.'})]}),(0,dt.jsx)("div",{className:"overflow-x-auto",children:(0,dt.jsxs)("table",{className:"min-w-full text-sm border dark:border-gray-600",children:[(0,dt.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white",children:"Event"}),(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white",children:"User Count"}),(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white",children:"% of Cohort"})]})}),(0,dt.jsxs)("tbody",{className:"bg-white dark:bg-gray-800",children:[(0,dt.jsxs)("tr",{className:"bg-indigo-50 dark:bg-indigo-900/30",children:[(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 font-medium text-gray-700 dark:text-white",children:"Trial Started"}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:(null===(s=W.cohort_event_occurrence.trial_started)||void 0===s||null===(o=s.user_count)||void 0===o?void 0:o.toLocaleString())||"0"}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:"100%"})]}),(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 font-medium text-gray-700 dark:text-gray-300",children:"Trial Ended (Total)"}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:(null===(l=W.cohort_event_occurrence.trial_ended)||void 0===l||null===(c=l.user_count)||void 0===c?void 0:c.toLocaleString())||"0"}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:null!==(d=W.cohort_event_occurrence.trial_ended)&&void 0!==d&&d.percentage?W.cohort_event_occurrence.trial_ended.percentage.toFixed(1)+"%":"0%"})]}),(0,dt.jsxs)("tr",{className:"bg-gray-50 dark:bg-gray-700 pl-4",children:[(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 pl-8 text-gray-700 dark:text-gray-300",children:"\u2192 Trial Converted"}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:(null===(u=W.cohort_event_occurrence.trial_converted)||void 0===u||null===(h=u.user_count)||void 0===h?void 0:h.toLocaleString())||"0"}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:null!==(p=W.cohort_event_occurrence.trial_converted)&&void 0!==p&&p.percentage?W.cohort_event_occurrence.trial_converted.percentage.toFixed(1)+"%":"0%"})]}),(0,dt.jsxs)("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 pl-8 text-gray-700 dark:text-gray-300",children:"\u2192 Trial Cancelled"}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:(null===(m=W.cohort_event_occurrence.trial_cancelled)||void 0===m||null===(f=m.user_count)||void 0===f?void 0:f.toLocaleString())||"0"}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:null!==(g=W.cohort_event_occurrence.trial_cancelled)&&void 0!==g&&g.percentage?W.cohort_event_occurrence.trial_cancelled.percentage.toFixed(1)+"%":"0%"})]}),(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 font-medium text-gray-700 dark:text-gray-300",children:"Initial Purchase"}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:(null===(x=W.cohort_event_occurrence.initial_purchase)||void 0===x||null===(b=x.user_count)||void 0===b?void 0:b.toLocaleString())||"0"}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:null!==(y=W.cohort_event_occurrence.initial_purchase)&&void 0!==y&&y.percentage?W.cohort_event_occurrence.initial_purchase.percentage.toFixed(1)+"%":"0%"})]}),(0,dt.jsxs)("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 font-medium text-gray-700 dark:text-gray-300",children:"Renewal"}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:(null===(v=W.cohort_event_occurrence.renewal)||void 0===v||null===(_=v.user_count)||void 0===_?void 0:_.toLocaleString())||"0"}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:null!==(k=W.cohort_event_occurrence.renewal)&&void 0!==k&&k.percentage?W.cohort_event_occurrence.renewal.percentage.toFixed(1)+"%":"0%"})]}),(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 font-medium text-gray-700 dark:text-gray-300",children:"RC Cancellation (Total)"}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:(null===(j=W.cohort_event_occurrence.rc_cancellation)||void 0===j||null===(w=j.user_count)||void 0===w?void 0:w.toLocaleString())||"0"}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:null!==(N=W.cohort_event_occurrence.rc_cancellation)&&void 0!==N&&N.percentage?W.cohort_event_occurrence.rc_cancellation.percentage.toFixed(1)+"%":"0%"})]}),(0,dt.jsxs)("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 pl-8 text-gray-700 dark:text-gray-300",children:"\u2192 Refund (revenue < 0)"}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:(null===(S=W.cohort_event_occurrence.rc_refund)||void 0===S||null===(O=S.user_count)||void 0===O?void 0:O.toLocaleString())||"0"}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:null!==(C=W.cohort_event_occurrence.rc_refund)&&void 0!==C&&C.percentage?W.cohort_event_occurrence.rc_refund.percentage.toFixed(1)+"%":"0%"})]}),(0,dt.jsxs)("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 pl-8 text-gray-700 dark:text-gray-300",children:"\u2192 Cancelled (revenue = 0)"}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:(null===(E=W.cohort_event_occurrence.rc_cancel_no_refund)||void 0===E||null===(P=E.user_count)||void 0===P?void 0:P.toLocaleString())||"0"}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:null!==(A=W.cohort_event_occurrence.rc_cancel_no_refund)&&void 0!==A&&A.percentage?W.cohort_event_occurrence.rc_cancel_no_refund.percentage.toFixed(1)+"%":"0%"})]})]})]})})]}),(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsxs)("button",{onClick:()=>Y(!K),className:"text-indigo-600 dark:text-indigo-300 hover:underline text-sm mb-2",children:[K?(0,dt.jsx)(Ve,{className:"inline mr-1",size:16}):(0,dt.jsx)(tt,{className:"inline mr-1",size:16}),"Show/Hide Lifecycle Rate Tables"]}),(console.log("[DEBUG] showLifecycleTables:",K,"lifecycle_rates exists:",!(null===W||void 0===W||!W.lifecycle_rates)),K&&null!==W&&void 0!==W&&W.lifecycle_rates&&(console.log("[DEBUG] Lifecycle tables section should render!",W.lifecycle_rates),console.log("[DEBUG] Available lifecycle rate keys:",Object.keys(W.lifecycle_rates))),null)]}),K&&(null===W||void 0===W?void 0:W.lifecycle_rates)&&(0,dt.jsxs)("div",{className:"space-y-6 mb-8 p-4 border-t dark:border-gray-600",children:[(0,dt.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-700",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-blue-800 dark:text-blue-200 mb-3",children:"Enhanced Product-Based Lifecycle Analysis System"}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-700 dark:text-blue-300",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"font-semibold mb-2",children:"Key Improvements:"}),(0,dt.jsxs)("ul",{className:"list-disc ml-5 space-y-1",children:[(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Fixed Cumulative Calculation:"})," Now shows actual percentage of cohort that performs action, not forced 100%"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Product-Level Granularity:"})," Analyze lifecycle patterns per product ID"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Intelligent Smoothing:"})," Adaptive smoothing that handles high-early, low-later patterns effectively"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Extended Lookback:"})," Automatically extends lookback 30-60 days when sample size < 100"]})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"font-semibold mb-2",children:"Metrics Displayed:"}),(0,dt.jsxs)("ul",{className:"list-disc ml-5 space-y-1",children:[(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Raw Daily Rates:"})," Actual percentage of cohort performing action on specific day"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Smoothed Daily Rates:"})," Algorithm-enhanced rates accounting for data sparsity"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Cumulative Rates:"})," Total percentage who have performed action by day X (using smoothed data)"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Separate Tracking:"})," 14 days for refunds, 400 days for cancellations"]})]})]})]})]}),(()=>{const e=new Set,t=W.lifecycle_rates||{};Object.values(t).forEach(t=>{t&&t.rates_by_product&&Object.keys(t.rates_by_product).forEach(t=>{e.add(t)})});const r=Array.from(e).sort();return r.length>0?(0,dt.jsx)("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"font-semibold text-green-800 dark:text-green-200 mb-1",children:"Product Analysis Filter"}),(0,dt.jsx)("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Select a specific product to analyze, or view aggregate data across all products."})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dt.jsx)("label",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Product:"}),(0,dt.jsxs)("select",{value:Pe,onChange:e=>Ae(e.target.value),className:"px-4 py-2 border border-green-300 dark:border-green-600 rounded-md text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[(0,dt.jsx)("option",{value:"",children:"All Products (Aggregate)"}),r.map(e=>(0,dt.jsxs)("option",{value:e,children:["Product ",e]},e))]}),(0,dt.jsxs)("button",{onClick:()=>Te(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-md transition-colors duration-200 flex items-center space-x-2",children:[(0,dt.jsx)("span",{children:"\ud83d\udcca"}),(0,dt.jsx)("span",{children:"View Charts"})]})]})]})}):null})(),(0,dt.jsxs)("div",{className:"space-y-8",children:[W.lifecycle_rates.trial_to_cancellation_rates&&Be("Trial Converted -> Cancellation Rates",W.lifecycle_rates.trial_to_cancellation_rates),W.lifecycle_rates.trial_to_refund_rates&&Be("Trial Converted -> Refund Rates",W.lifecycle_rates.trial_to_refund_rates),W.lifecycle_rates.initial_purchase_to_cancellation_rates&&Be("Initial Purchase -> Cancellation Rates",W.lifecycle_rates.initial_purchase_to_cancellation_rates),W.lifecycle_rates.initial_purchase_to_refund_rates&&Be("Initial Purchase -> Refund Rates",W.lifecycle_rates.initial_purchase_to_refund_rates),W.lifecycle_rates.renewal_to_cancellation_rates&&Be("Renewal -> Cancellation Rates",W.lifecycle_rates.renewal_to_cancellation_rates),W.lifecycle_rates.renewal_to_refund_rates&&Be("Renewal -> Refund Rates",W.lifecycle_rates.renewal_to_refund_rates),W.lifecycle_rates.trial_to_outcome_rates&&Be("Trial to Outcome Rates",W.lifecycle_rates.trial_to_outcome_rates)]})]}),(0,dt.jsx)("h3",{className:"text-xl font-semibold mb-3 text-gray-700 dark:text-white",children:"Daily Performance Charts"}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h4",{className:"font-semibold text-gray-700 dark:text-white mb-2",children:"Absolute Values"}),(0,dt.jsx)("div",{className:"mb-4 flex flex-wrap gap-2",children:Object.keys(qe).map(e=>(0,dt.jsx)("button",{onClick:()=>{return t=e,void Ge(e=>Re(Re({},e),{},{[t]:!e[t]}));var t},className:"px-3 py-1 text-xs rounded-full ".concat(qe[e]?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-white"),children:e.split("_").join(" ")},e))}),(0,dt.jsx)("div",{className:"h-80 w-full mb-8 bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:(0,dt.jsx)(Rs,{width:"100%",height:"100%",children:(0,dt.jsxs)(Yw,{data:$e,margin:{top:5,right:30,left:20,bottom:5},children:[(0,dt.jsx)(pN,{strokeDasharray:"3 3"}),(0,dt.jsx)(Lw,{dataKey:"date"}),(0,dt.jsx)(Kw,{}),(0,dt.jsx)(Fo,{formatter:e=>"number"===typeof e?e.toLocaleString():e}),(0,dt.jsx)(zR,{}),qe.daily_trials_started&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"daily_trials_started",stroke:"#8884d8",name:"Daily Trials Started"}),qe.daily_trials_ended&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"daily_trials_ended",stroke:"#82ca9d",name:"Daily Trials Ended"}),qe.daily_trials_pending&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"daily_trials_pending",stroke:"#ffc658",name:"Daily Trials Pending"}),qe.daily_conversions&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"daily_conversions",stroke:"#ff7300",name:"Daily Conversions"}),qe.daily_conversions_net_refunds&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"daily_conversions_net_refunds",stroke:"#ff0000",name:"Daily Conv. Net Refunds"}),qe.daily_estimated_conversions_net_refunds&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"daily_estimated_conversions_net_refunds",stroke:"#b967ff",name:"Daily Est. Conv. Net Refunds"}),qe.daily_refunds&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"daily_refunds",stroke:"#ff67b3",name:"Daily Refunds"}),qe.cumulative_trials_started&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"cumulative_trials_started",stroke:"#8884d8",strokeDasharray:"5 5",name:"Cum. Trials Started"}),qe.cumulative_trials_ended&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"cumulative_trials_ended",stroke:"#82ca9d",strokeDasharray:"5 5",name:"Cum. Trials Ended"}),qe.cumulative_trials_pending&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"cumulative_trials_pending",stroke:"#ffc658",strokeDasharray:"5 5",name:"Cum. Trials Pending"}),qe.cumulative_conversions&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"cumulative_conversions",stroke:"#ff7300",strokeDasharray:"5 5",name:"Cum. Conversions"}),qe.cumulative_conversions_net_refunds&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"cumulative_conversions_net_refunds",stroke:"#ff0000",strokeDasharray:"5 5",name:"Cum. Conv. Net Refunds"}),qe.cumulative_estimated_conversions_net_refunds&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"cumulative_estimated_conversions_net_refunds",stroke:"#b967ff",strokeDasharray:"5 5",name:"Cum. Est. Conv. Net Refunds"}),qe.cumulative_refunds&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"cumulative_refunds",stroke:"#ff67b3",strokeDasharray:"5 5",name:"Cum. Refunds"})]})})})]}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h4",{className:"font-semibold text-gray-700 dark:text-white mb-2",children:"Revenue Values"}),(0,dt.jsx)("div",{className:"mb-4 flex flex-wrap gap-2",children:Object.keys(Ke).map(e=>(0,dt.jsx)("button",{onClick:()=>{return t=e,void Ye(e=>Re(Re({},e),{},{[t]:!e[t]}));var t},className:"px-3 py-1 text-xs rounded-full ".concat(Ke[e]?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-white"),children:e.split("_").join(" ")},e))}),(0,dt.jsx)("div",{className:"h-80 w-full mb-8 bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:(0,dt.jsx)(Rs,{width:"100%",height:"100%",children:(0,dt.jsxs)(Yw,{data:$e,margin:{top:5,right:30,left:20,bottom:5},children:[(0,dt.jsx)(pN,{strokeDasharray:"3 3"}),(0,dt.jsx)(Lw,{dataKey:"date"}),(0,dt.jsx)(Kw,{}),(0,dt.jsx)(Fo,{formatter:e=>We(e)}),(0,dt.jsx)(zR,{}),Ke.daily_revenue&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"daily_revenue",stroke:"#00b300",name:"Daily Revenue"}),Ke.daily_revenue_net&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"daily_revenue_net",stroke:"#00e600",name:"Daily Net Revenue"}),Ke.daily_estimated_revenue&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"daily_estimated_revenue",stroke:"#4dff4d",name:"Daily Est. Revenue"}),Ke.cumulative_revenue&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"cumulative_revenue",stroke:"#009900",strokeDasharray:"5 5",name:"Cum. Revenue"}),Ke.cumulative_revenue_net&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"cumulative_revenue_net",stroke:"#00cc00",strokeDasharray:"5 5",name:"Cum. Net Revenue"}),Ke.cumulative_estimated_revenue&&(0,dt.jsx)(rw,{type:"monotone",dataKey:"cumulative_estimated_revenue",stroke:"#00e600",strokeDasharray:"5 5",name:"Cum. Est. Revenue"})]})})})]})]}),le?(0,dt.jsxs)("div",{className:"mb-8 bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,dt.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Daily Event & Revenue Timeline"}),(0,dt.jsx)("div",{className:"flex gap-2",children:(0,dt.jsx)("span",{className:"text-sm font-medium px-3 py-1 bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 rounded-full",children:me&&ge?"Detailed View":"Aggregate View"})})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 p-4 border rounded-lg bg-gray-50 dark:bg-gray-600",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{htmlFor:"user-select",className:"block text-sm font-medium text-gray-700 dark:text-white mb-2",children:"Select User (Optional)"}),(0,dt.jsx)(TE,{id:"user-select",isClearable:!0,isSearchable:!0,options:be.map(e=>({value:e,label:e})),value:me?{value:me,label:me}:null,onChange:e=>{const t=e?e.value:"";fe(t),Ue(t,ge)},styles:Xe(),placeholder:"Type to search users..."})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{htmlFor:"product-select",className:"block text-sm font-medium text-gray-700 dark:text-white mb-2",children:"Select Product (Optional)"}),(0,dt.jsx)(TE,{id:"product-select",isClearable:!0,isSearchable:!0,options:ve.map(e=>({value:e,label:e})),value:ge?{value:ge,label:ge}:null,onChange:e=>{const t=e?e.value:"";xe(t),Ue(me,t)},styles:Xe(),placeholder:"Type to search products..."})]})]}),(0,dt.jsx)("div",{className:"overflow-x-auto",children:(0,dt.jsxs)("table",{className:"min-w-full text-sm border dark:border-gray-600",children:[(0,dt.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white sticky left-0 bg-gray-50 dark:bg-gray-700 z-10 min-w-[200px]",children:"Metric"}),le.dates.map(e=>(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-center text-gray-700 dark:text-white whitespace-nowrap min-w-[80px]",children:e},e))]})}),(0,dt.jsx)("tbody",{className:"bg-white dark:bg-gray-800",children:(()=>{const e=[{key:"daily_trial_started",label:"Trial Started",category:"daily_absolute",categoryLabel:"Daily Absolute Values",getValue:(e,t)=>{var r,n;const a=$e?$e.find(t=>t.date===e):null,i=le.event_rows||{};return me||ge?(null===(r=i.trial_started)||void 0===r?void 0:r[e])||0:(null===(n=i.trial_started)||void 0===n?void 0:n[e])||(null===a||void 0===a?void 0:a.daily_trials_started)||0}},{key:"daily_trial_pending",label:"Trial Pending",category:"daily_absolute",getValue:(e,t)=>{var r;return(null===(r=(le.event_rows||{}).trial_pending)||void 0===r?void 0:r[e])||0}},{key:"daily_trial_ended",label:"Trial Ended",category:"daily_absolute",getValue:(e,t)=>{var r;return(null===(r=(le.event_rows||{}).trial_ended)||void 0===r?void 0:r[e])||0}},{key:"daily_trial_cancelled",label:"Trial Cancelled",category:"daily_absolute",getValue:(e,t)=>{var r;return(null===(r=(le.event_rows||{}).trial_canceled)||void 0===r?void 0:r[e])||0}},{key:"daily_trial_converted",label:"Trial Converted",category:"daily_absolute",getValue:(e,t)=>{var r,n;const a=$e?$e.find(t=>t.date===e):null,i=le.event_rows||{};return me||ge?(null===(r=i.trial_converted)||void 0===r?void 0:r[e])||0:(null===(n=i.trial_converted)||void 0===n?void 0:n[e])||(null===a||void 0===a?void 0:a.daily_conversions)||0}},{key:"daily_initial_purchase",label:"Initial Purchase",category:"daily_absolute",getValue:(e,t)=>{var r;return(null===(r=(le.event_rows||{}).initial_purchase)||void 0===r?void 0:r[e])||0}},{key:"daily_subscription_active",label:"Subscription Active",category:"daily_absolute",getValue:(e,t)=>{var r;return(null===(r=(le.event_rows||{}).subscription_active)||void 0===r?void 0:r[e])||0}},{key:"daily_subscription_cancelled",label:"Subscription Cancelled",category:"daily_absolute",getValue:(e,t)=>{var r;return(null===(r=(le.event_rows||{}).subscription_cancelled)||void 0===r?void 0:r[e])||0}},{key:"daily_refund",label:"Refund",category:"daily_absolute",getValue:(e,t)=>{var r,n;const a=$e?$e.find(t=>t.date===e):null,i=le.event_rows||{};return me||ge?(null===(r=i.refund)||void 0===r?void 0:r[e])||0:(null===(n=i.refund)||void 0===n?void 0:n[e])||(null===a||void 0===a?void 0:a.daily_refunds)||0}},{key:"daily_revenue",label:"Revenue (Actual)",category:"daily_revenue",categoryLabel:"Daily Revenue",getValue:(e,t)=>{var r,n;const a=$e?$e.find(t=>t.date===e):null,i=le.estimate_rows||{},s=me||ge?(null===(r=i.current_revenue)||void 0===r?void 0:r[e])||0:(null===(n=i.current_revenue)||void 0===n?void 0:n[e])||(null===a||void 0===a?void 0:a.daily_revenue)||0;return We(s)}},{key:"daily_est_revenue",label:"Est. Revenue",category:"daily_revenue",isEstimatedRevenue:!0,getValue:(e,t)=>{var r,n;const a=$e?$e.find(t=>t.date===e):null,i=le.estimate_rows||{},s=me||ge?(null===(r=i.estimated_net_revenue)||void 0===r?void 0:r[e])||0:(null===(n=i.estimated_revenue)||void 0===n?void 0:n[e])||(null===a||void 0===a?void 0:a.daily_estimated_revenue)||0;return We(s)},getTooltipData:(e,t)=>{var r,n;const a=$e?$e.find(t=>t.date===e):null,i=le.estimate_rows||{},s=me||ge?(null===(r=i.estimated_net_revenue)||void 0===r?void 0:r[e])||0:(null===(n=i.estimated_revenue)||void 0===n?void 0:n[e])||(null===a||void 0===a?void 0:a.daily_estimated_revenue)||0;return{formula:"Est_Revenue = (Active_Trials \xd7 Trial_Conv_Rate \xd7 Avg_Revenue) + (Active_Subs \xd7 (1 - Churn_Rate) \xd7 Avg_Revenue) - (Expected_Refunds \xd7 Avg_Refund)",calculation:"(".concat((null===a||void 0===a?void 0:a.daily_trials_pending)||0," \xd7 0.15 \xd7 $9.99) + (").concat((null===a||void 0===a?void 0:a.daily_trials_pending)||0," \xd7 0.95 \xd7 $9.99) - (").concat((null===a||void 0===a?void 0:a.daily_refunds)||0," \xd7 $9.99)"),components:{"Active Trials":(null===a||void 0===a?void 0:a.daily_trials_pending)||0,"Trial Conversion Rate":"15%","Active Subscriptions":"N/A","Churn Rate":"5%","Avg Revenue":"$9.99","Expected Refunds":(null===a||void 0===a?void 0:a.daily_refunds)||0,"Avg Refund":"$9.99"},result:We(s)}}},{key:"cumulative_trial_started",label:"Trial Started",category:"cumulative_absolute",categoryLabel:"Cumulative Absolute Values",getValue:(e,t)=>{const r=$e?$e.find(t=>t.date===e):null,n=le.event_rows||{};return me||ge?le.dates.slice(0,t+1).reduce((e,t)=>{var r;return e+((null===(r=n.trial_started)||void 0===r?void 0:r[t])||0)},0):(null===r||void 0===r?void 0:r.cumulative_trials_started)||0}},{key:"cumulative_trial_pending",label:"Trial Pending",category:"cumulative_absolute",getValue:(e,t)=>{var r;return(null===(r=(le.event_rows||{}).trial_pending)||void 0===r?void 0:r[e])||0}},{key:"cumulative_trial_ended",label:"Trial Ended",category:"cumulative_absolute",getValue:(e,t)=>{const r=le.event_rows||{};return le.dates.slice(0,t+1).reduce((e,t)=>{var n;return e+((null===(n=r.trial_ended)||void 0===n?void 0:n[t])||0)},0)}},{key:"cumulative_trial_cancelled",label:"Trial Cancelled",category:"cumulative_absolute",getValue:(e,t)=>{const r=le.event_rows||{};return me||ge?le.dates.slice(0,t+1).reduce((e,t)=>{var n;return e+((null===(n=r.trial_canceled)||void 0===n?void 0:n[t])||0)},0):$e?$e.slice(0,t+1).reduce((e,t)=>{var n;return e+((null===(n=r.trial_canceled)||void 0===n?void 0:n[t.date])||0)},0):0}},{key:"cumulative_trial_converted",label:"Trial Converted",category:"cumulative_absolute",getValue:(e,t)=>{const r=$e?$e.find(t=>t.date===e):null,n=le.event_rows||{};return me||ge?le.dates.slice(0,t+1).reduce((e,t)=>{var r;return e+((null===(r=n.trial_converted)||void 0===r?void 0:r[t])||0)},0):(null===r||void 0===r?void 0:r.cumulative_conversions)||0}},{key:"cumulative_initial_purchase",label:"Initial Purchase",category:"cumulative_absolute",getValue:(e,t)=>{var r;const n=le.event_rows||{};return me||ge?le.dates.slice(0,t+1).reduce((e,t)=>{var r;return e+((null===(r=n.initial_purchase)||void 0===r?void 0:r[t])||0)},0):(null===(r=n.cumulative_initial_purchase)||void 0===r?void 0:r[e])||0}},{key:"cumulative_subscription_active",label:"Subscription Active",category:"cumulative_absolute",getValue:(e,t)=>{var r;return(null===(r=(le.event_rows||{}).subscription_active)||void 0===r?void 0:r[e])||0}},{key:"cumulative_subscription_cancelled",label:"Subscription Cancelled",category:"cumulative_absolute",getValue:(e,t)=>{const r=le.event_rows||{};return le.dates.slice(0,t+1).reduce((e,t)=>{var n;return e+((null===(n=r.subscription_cancelled)||void 0===n?void 0:n[t])||0)},0)}},{key:"cumulative_refund",label:"Refund",category:"cumulative_absolute",getValue:(e,t)=>{const r=$e?$e.find(t=>t.date===e):null,n=le.event_rows||{};return me||ge?le.dates.slice(0,t+1).reduce((e,t)=>{var r;return e+((null===(r=n.refund)||void 0===r?void 0:r[t])||0)},0):(null===r||void 0===r?void 0:r.cumulative_refunds)||0}},{key:"cumulative_revenue",label:"Revenue (Actual)",category:"cumulative_revenue",categoryLabel:"Cumulative Revenue",getValue:(e,t)=>{const r=$e?$e.find(t=>t.date===e):null,n=le.estimate_rows||{},a=me||ge?le.dates.slice(0,t+1).reduce((e,t)=>{var r;return e+((null===(r=n.current_revenue)||void 0===r?void 0:r[t])||0)},0):(null===r||void 0===r?void 0:r.cumulative_revenue)||0;return We(a)}},{key:"cumulative_est_revenue",label:"Est. Revenue",category:"cumulative_revenue",isEstimatedRevenue:!0,getValue:(e,t)=>{const r=$e?$e.find(t=>t.date===e):null,n=le.estimate_rows||{},a=me||ge?le.dates.slice(0,t+1).reduce((e,t)=>{var r;return e+((null===(r=n.estimated_net_revenue)||void 0===r?void 0:r[t])||0)},0):(null===r||void 0===r?void 0:r.cumulative_estimated_revenue)||0;return We(a)},getTooltipData:(e,t)=>{const r=$e?$e.find(t=>t.date===e):null,n=le.estimate_rows||{},a=me||ge?le.dates.slice(0,t+1).reduce((e,t)=>{var r;return e+((null===(r=n.estimated_net_revenue)||void 0===r?void 0:r[t])||0)},0):(null===r||void 0===r?void 0:r.cumulative_estimated_revenue)||0;return{formula:"Cumulative_Est_Revenue = \u03a3(Daily_Est_Revenue) from start to date",calculation:"Sum of daily estimated revenue from start date to ".concat(e),components:{Period:"Start to ".concat(e),Days:t+1,"Avg Daily Est":We(a/(t+1))},result:We(a)}}}],t={daily_absolute:"bg-blue-50 dark:bg-blue-900/30",daily_revenue:"bg-green-50 dark:bg-green-900/30",cumulative_absolute:"bg-indigo-50 dark:bg-indigo-900/30",cumulative_revenue:"bg-emerald-50 dark:bg-emerald-900/30"};return e.map((r,n)=>{const i=0===n||e[n-1].category!==r.category;return(0,dt.jsxs)(a.Fragment,{children:[i&&r.categoryLabel&&(0,dt.jsx)("tr",{className:"".concat(t[r.category]," border-t-2 border-gray-300 dark:border-gray-500"),children:(0,dt.jsx)("td",{colSpan:le.dates.length+1,className:"p-2 border-b dark:border-gray-600 text-center font-semibold text-gray-700 dark:text-white",children:r.categoryLabel})}),(0,dt.jsxs)("tr",{className:n%2===0?"":"bg-gray-50 dark:bg-gray-700",children:[(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 font-medium text-gray-700 dark:text-gray-300 sticky left-0 z-10 bg-inherit",children:r.label}),le.dates.map((e,t)=>(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-center text-gray-700 dark:text-gray-300 whitespace-nowrap ".concat(r.isEstimatedRevenue?"cursor-help hover:bg-yellow-50 dark:hover:bg-yellow-900/20":""),onMouseEnter:r.isEstimatedRevenue?n=>{const a=r.getTooltipData(e,t);Ne(a),Oe({x:n.clientX,y:n.clientY})}:void 0,onMouseLeave:r.isEstimatedRevenue?()=>{Ne(null)}:void 0,children:r.getValue(e,t)},e))]})]},r.key)})})()})]})})]}):de?(0,dt.jsxs)("div",{className:"flex items-center justify-center p-8 bg-white dark:bg-gray-700 rounded-lg shadow-md my-4",children:[(0,dt.jsx)(gN,{className:"animate-spin mr-2 text-indigo-600 dark:text-indigo-400"}),(0,dt.jsx)("p",{className:"text-gray-700 dark:text-white",children:"Loading event revenue timeline..."})]}):he?(0,dt.jsx)("div",{className:"my-4 p-4 bg-yellow-100 dark:bg-yellow-800 text-yellow-700 dark:text-white rounded-md shadow-md border border-yellow-300 dark:border-yellow-600",children:(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)(He,{className:"mr-2 flex-shrink-0"}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium block",children:"Event Revenue Timeline Error:"}),(0,dt.jsx)("span",{className:"block mt-1",children:he})]})]})}):null,re?(0,dt.jsxs)("div",{className:"mb-8",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,dt.jsx)("h3",{className:"text-xl font-semibold text-gray-700 dark:text-white",children:"User Timeline"}),(0,dt.jsxs)("div",{className:"flex gap-2",children:[(0,dt.jsxs)("span",{className:"text-sm font-medium px-3 py-1 bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 rounded-full",children:[re.unique_users_count||re.total_users," Unique Users"]}),(0,dt.jsxs)("span",{className:"text-sm font-medium px-3 py-1 bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100 rounded-full",children:[re.total_user_product_combinations||(null===(M=re.users)||void 0===M?void 0:M.length)," User-Product Combinations"]}),(0,dt.jsxs)("span",{className:"text-sm font-medium px-3 py-1 bg-purple-100 text-purple-800 dark:bg-purple-800 dark:text-purple-100 rounded-full",children:[(null===(T=re.valid_product_ids)||void 0===T?void 0:T.length)||0," Unique Products"]})]})]}),re.filter_stats&&(0,dt.jsx)(YI,{filterStats:re.filter_stats}),(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsxs)("div",{className:"flex flex-wrap gap-3 mb-2",children:[(0,dt.jsx)("div",{className:"px-3 py-2 rounded ".concat(KI.default.bg," ").concat(KI.default.text),children:"No Event"}),(0,dt.jsx)("div",{className:"px-3 py-2 rounded ".concat(KI.trial_started.bg," ").concat(KI.trial_started.text),children:"Trial Started"}),(0,dt.jsx)("div",{className:"px-3 py-2 rounded ".concat(KI.trial_converted.bg," ").concat(KI.trial_converted.text),children:"Trial Converted"}),(0,dt.jsx)("div",{className:"px-3 py-2 rounded ".concat(KI.trial_cancelled.bg," ").concat(KI.trial_cancelled.text),children:"Trial Cancelled"}),(0,dt.jsx)("div",{className:"px-3 py-2 rounded ".concat(KI.conversion_cancelled.bg," ").concat(KI.conversion_cancelled.text),children:"Conversion Cancelled"}),(0,dt.jsx)("div",{className:"px-3 py-2 rounded ".concat(KI.refunded.bg," ").concat(KI.refunded.text),children:"Refunded"})]}),(0,dt.jsxs)("div",{className:"relative flex items-center bg-gray-100 dark:bg-gray-700 p-2 rounded text-sm",children:[(0,dt.jsx)("span",{className:"mr-2",children:"Multiple events on the same day:"}),(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsxs)("div",{className:"relative mr-8 px-4 py-2 rounded bg-green-100 dark:bg-green-900/50",style:{minWidth:"180px"},children:[(0,dt.jsx)("span",{className:"text-green-800 dark:text-green-200",children:"Trial Converted"}),(0,dt.jsx)("div",{className:"absolute top-0 right-0 -mt-1 -mr-1 bg-blue-500 text-white text-[8px] rounded-full w-4 h-4 flex items-center justify-center",children:"3"}),(0,dt.jsxs)("div",{className:"mt-1 flex flex-col gap-1 w-full",children:[(0,dt.jsx)("div",{className:"px-1 py-0.5 text-[9px] w-full text-center rounded bg-yellow-100 dark:bg-yellow-900/50 text-yellow-800 dark:text-yellow-200",children:"Trial started"}),(0,dt.jsx)("div",{className:"px-1 py-0.5 text-[9px] w-full text-center rounded bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-300",children:"Refunded"})]})]}),(0,dt.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:"The cell is colored by the first event, with a counter and full-text badges for each additional event"})]})]})]}),(0,dt.jsx)("div",{className:"overflow-x-auto",children:(0,dt.jsxs)("table",{className:"min-w-full text-sm border dark:border-gray-600",children:[(0,dt.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white sticky left-0 bg-gray-50 dark:bg-gray-700 z-10",children:"User ID"}),(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white sticky left-[150px] bg-gray-50 dark:bg-gray-700 z-10",children:"Product ID"}),re.dates.map(e=>(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-center text-gray-700 dark:text-white whitespace-nowrap",children:e},e))]})}),(0,dt.jsx)("tbody",{className:"bg-white dark:bg-gray-800",children:re.users.map((e,t)=>{const r=0===t||re.users[t-1].id!==e.id,n=r?t%4<2?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700":"";return(0,dt.jsxs)("tr",{className:n,children:[(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 font-medium text-gray-700 dark:text-gray-300 sticky left-0 z-10",style:{backgroundColor:"inherit"},children:r?e.id:""}),(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 font-medium text-green-700 dark:text-green-300 sticky left-[150px] z-10",style:{backgroundColor:"inherit"},children:e.product_id}),re.dates.map(t=>{const r=((e,t,r)=>{if(!r[e]||!r[e][t]){let n=null,a="default";if(r[e])for(const i in r[e])if(i<=t&&(!n||i>n)){n=i;const t=r[e][i],s=t[t.length-1];"RC Trial started"===s.type?a="trial_started":"RC Trial converted"===s.type?a="trial_converted":"RC Trial cancelled"===s.type?a="trial_cancelled":"RC Initial purchase"===s.type||"RC Renewal"===s.type?a="trial_converted":"RC Cancellation"===s.type&&(a=s.has_refund?"refunded":"conversion_cancelled")}return a}const n=r[e][t][0];return"RC Trial started"===n.type?"trial_started":"RC Trial converted"===n.type?"trial_converted":"RC Trial cancelled"===n.type?"trial_cancelled":"RC Initial purchase"===n.type||"RC Renewal"===n.type?"trial_converted":"RC Cancellation"===n.type?n.has_refund?"refunded":"conversion_cancelled":"default"})(e.user_product_key,t,re.events),n=((e,t,r)=>r[e]&&r[e][t]?r[e][t]:[])(e.user_product_key,t,re.events),a=n.length>0;return(0,dt.jsx)("td",{className:"p-2 border dark:border-gray-600 text-xs relative ".concat(KI[r].bg),children:a?(0,dt.jsxs)("div",{className:"flex flex-col items-center",children:[(0,dt.jsx)("div",{className:"text-center w-full ".concat(KI[r].text," font-medium"),children:n[0].type.replace("RC ","")}),n.length>1&&(0,dt.jsx)("div",{className:"mt-1 flex flex-col items-center w-full gap-1",children:n.slice(1).map((e,t)=>{const r=e.type.replace("RC ","");let n="default";return"RC Trial started"===e.type?n="trial_started":"RC Trial converted"===e.type?n="trial_converted":"RC Trial cancelled"===e.type?n="trial_cancelled":"RC Cancellation"===e.type?n=e.has_refund?"refunded":"conversion_cancelled":("RC Initial purchase"===e.type||"RC Renewal"===e.type)&&(n="trial_converted"),(0,dt.jsx)("div",{className:"px-1 py-0.5 text-[9px] w-full text-center rounded ".concat(KI[n].bg," ").concat(KI[n].text),title:"".concat(r," at ").concat(e.time," for ").concat(e.product_id),children:r},t)})}),n.length>1&&(0,dt.jsx)("div",{className:"absolute top-0 right-0 -mt-1 -mr-1 bg-blue-500 text-white text-[8px] rounded-full w-4 h-4 flex items-center justify-center",children:n.length})]}):""},t)})]},e.user_product_key)})})]})})]}):ae?(0,dt.jsxs)("div",{className:"flex items-center justify-center p-8 bg-white dark:bg-gray-700 rounded-lg shadow-md my-4",children:[(0,dt.jsx)(gN,{className:"animate-spin mr-2 text-indigo-600 dark:text-indigo-400"}),(0,dt.jsx)("p",{className:"text-gray-700 dark:text-white",children:"Loading user timeline data..."})]}):se?(0,dt.jsx)("div",{className:"my-4 p-4 bg-yellow-100 dark:bg-yellow-800 text-yellow-700 dark:text-white rounded-md shadow-md border border-yellow-300 dark:border-yellow-600",children:(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)(He,{className:"mr-2 flex-shrink-0"}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium block",children:"Timeline Error:"}),(0,dt.jsx)("span",{className:"block mt-1",children:se})]})]})}):null,(0,dt.jsx)(XI,{data:we,position:Se,onClose:()=>Ne(null)}),(0,dt.jsx)(Je,{})]})},QI=e=>{var t,r,n,i,s,o,l,c,d,u,h,p,m;let{config:f,analysisParams:g,onConfigChange:x}=e;const[b,y]=(0,a.useState)(!1),[v,_]=(0,a.useState)([]),[k,j]=(0,a.useState)([]),[w,N]=(0,a.useState)({}),[S,O]=(0,a.useState)(!1),[C,E]=(0,a.useState)("");(0,a.useEffect)(()=>{P()},[]);const P=async()=>{O(!0);try{const e=await _a();e.event_properties&&_(e.event_properties),e.user_properties&&j(e.user_properties)}catch(e){console.error("Failed to load properties:",e),E("Failed to load available properties. Some features may be limited.")}O(!1)},A=async(e,t,r)=>{if(e&&t)try{const n=await ka(e,t);N(t=>Re(Re({},t),{},{[r+"_"+e]:n.values||[]}))}catch(n){console.error("Error fetching values for ".concat(e,":"),n),N(t=>Re(Re({},t),{},{[r+"_"+e]:[]}))}},M=e=>{const t=Re(Re({},g),{},{config:Re(Re({},g.config),e)});x(t)},T=(e,t)=>{const r=Re(Re({},f.product_filter),{},{[e]:t});M({product_filter:r})},D=(e,t)=>{const r=Re(Re({},f.lifecycle),{},{[e]:t});M({lifecycle:r})},R=(e,t)=>{const r=Re(Re({},f.timeline),{},{[e]:t});M({timeline:r})},I=(e,t)=>{const r=Re(Re({},g),{},{[e]:t});x(r)},L=(e,t,r)=>{const n=[...g.optional_filters||[]],a=n[r];"property_source"===e?(a.property_source=t,a.property_values=[],a.property_name&&A(a.property_name,t,"optional_filter_".concat(r))):"property_name"===e?(a.property_name=t,a.property_values=[],t&&a.property_source&&A(t,a.property_source,"optional_filter_".concat(r))):"property_values"===e&&(a.property_values=t);const i=Re(Re({},g),{},{optional_filters:n});x(i)};return(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,dt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Analysis Configuration"}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("button",{onClick:async()=>{O(!0),E("Discovering available properties...");try{await P(),E("Property discovery completed successfully!"),setTimeout(()=>E(""),3e3)}catch(e){E("Property discovery failed. Please try again."),setTimeout(()=>E(""),5e3)}O(!1)},disabled:S,className:"px-3 py-1 text-sm bg-teal-200 hover:bg-teal-300 dark:bg-teal-700 dark:hover:bg-teal-600 text-teal-700 dark:text-teal-300 rounded-lg transition-colors disabled:opacity-50",title:"Refresh available properties",children:S?"Loading...":"Discover Properties"}),(0,dt.jsx)("button",{onClick:()=>y(!b),className:"px-3 py-1 text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors",children:b?"Hide Advanced":"Show Advanced"})]})]}),C&&(0,dt.jsx)("div",{className:"mb-4 p-3 bg-teal-50 dark:bg-teal-900/40 border border-teal-200 dark:border-teal-600 rounded-md",children:(0,dt.jsx)("p",{className:"text-sm text-teal-700 dark:text-teal-300",children:C})}),(0,dt.jsxs)("div",{className:"space-y-6",children:[(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date From"}),(0,dt.jsx)("input",{type:"date",value:g.date_from,onChange:e=>I("date_from",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date To"}),(0,dt.jsx)("input",{type:"date",value:g.date_to,onChange:e=>I("date_to",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]}),(0,dt.jsxs)("div",{className:"border-t pt-6",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"User & Event Property Filters"}),(0,dt.jsx)("button",{type:"button",onClick:()=>{const e=Re(Re({},g),{},{optional_filters:[...g.optional_filters||[],{id:Date.now().toString(),property_name:"",property_values:[],property_source:"event"}]});x(e)},className:"p-1.5 bg-teal-100 dark:bg-teal-600 text-teal-700 dark:text-white rounded-full hover:bg-teal-200 dark:hover:bg-teal-500 transition-colors",title:"Add optional filter",children:(0,dt.jsx)(xN,{size:18})})]}),(0,dt.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:[(0,dt.jsx)("strong",{children:"Optional:"})," Add filters to narrow down your cohort. User property filters will only include users with the specified property values. Event property filters will only include users who have events with the specified property values."]}),(0===(null===(t=g.optional_filters)||void 0===t?void 0:t.length)||!g.optional_filters)&&(0,dt.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 italic mb-4",children:"No filters applied. All users with trial/purchase events in the time frame will be included. Click the + button to add a filter."}),(g.optional_filters||[]).map((e,t)=>(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end mb-4 p-4 border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 rounded-md",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Source Type"}),(0,dt.jsxs)("select",{value:e.property_source,onChange:e=>L("property_source",e.target.value,t),className:"block w-full p-2 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-600 text-gray-900 dark:text-white",children:[(0,dt.jsx)("option",{value:"event",children:"Event Property"}),(0,dt.jsx)("option",{value:"user",children:"User Property"})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Property Name"}),(0,dt.jsxs)("select",{value:e.property_name,onChange:e=>L("property_name",e.target.value,t),className:"block w-full p-2 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-600 text-gray-900 dark:text-white",children:[(0,dt.jsx)("option",{value:"",children:"-- Select Property --"}),("event"===e.property_source?v:k).map(e=>(0,dt.jsx)("option",{value:e.key,children:e.display_name||e.key},e.key))]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Property Value(s)"}),(0,dt.jsx)(TE,{isMulti:!0,isDisabled:!e.property_name||!e.property_source,options:(w["optional_filter_".concat(t,"_").concat(e.property_name)]||[]).map(e=>({value:e,label:e})),value:e.property_values.map(e=>({value:e,label:e})),onChange:e=>L("property_values",e?e.map(e=>e.value):[],t),styles:{control:(e,t)=>Re(Re({},e),{},{backgroundColor:"var(--select-bg, white)",borderColor:t.isFocused?"#3b82f6":"#d1d5db",boxShadow:t.isFocused?"0 0 0 1px #3b82f6":"none","&:hover":{borderColor:"#3b82f6"}}),menu:e=>Re(Re({},e),{},{backgroundColor:"var(--select-menu-bg, white)",zIndex:9999}),option:(e,t)=>Re(Re({},e),{},{backgroundColor:t.isSelected?"#3b82f6":t.isFocused?"#eff6ff":"var(--select-option-bg, white)",color:t.isSelected?"white":"var(--select-option-color, black)"}),multiValue:e=>Re(Re({},e),{},{backgroundColor:"#eff6ff"}),multiValueLabel:e=>Re(Re({},e),{},{color:"#1e40af"}),multiValueRemove:e=>Re(Re({},e),{},{color:"#1e40af","&:hover":{backgroundColor:"#dbeafe",color:"#1e40af"}})},placeholder:"Select values..."})]}),(0,dt.jsx)("div",{className:"flex justify-end",children:(0,dt.jsx)("button",{type:"button",onClick:()=>(e=>{const t=Re(Re({},g),{},{optional_filters:(g.optional_filters||[]).filter(t=>t.id!==e)});x(t)})(e.id),className:"p-1.5 bg-red-100 dark:bg-red-700 text-red-600 dark:text-white rounded-full hover:bg-red-200 dark:hover:bg-red-600 transition-colors",title:"Remove this filter",children:(0,dt.jsx)(fN,{size:18})})})]},e.id))]}),(0,dt.jsxs)("div",{className:"border-t pt-6",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Product Filtering"}),(0,dt.jsxs)("div",{className:"space-y-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Include Products Containing (comma-separated)"}),(0,dt.jsx)("input",{type:"text",value:(null===(r=f.product_filter)||void 0===r||null===(n=r.include_patterns)||void 0===n?void 0:n.join(", "))||"",onChange:e=>T("include_patterns",e.target.value.split(",").map(e=>e.trim()).filter(e=>e)),placeholder:"e.g., gluten, premium, pro",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),(0,dt.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Products containing any of these patterns will be included"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Specific Product IDs (comma-separated)"}),(0,dt.jsx)("input",{type:"text",value:(null===(i=f.product_filter)||void 0===i||null===(s=i.specific_product_ids)||void 0===s?void 0:s.join(", "))||"",onChange:e=>T("specific_product_ids",e.target.value.split(",").map(e=>e.trim()).filter(e=>e)),placeholder:"e.g., prod_R7oYuL3bSUecnr, prod_ABC123",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),(0,dt.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"These exact product IDs will always be included"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Exclude Products Containing (comma-separated)"}),(0,dt.jsx)("input",{type:"text",value:(null===(o=f.product_filter)||void 0===o||null===(l=o.exclude_patterns)||void 0===l?void 0:l.join(", "))||"",onChange:e=>T("exclude_patterns",e.target.value.split(",").map(e=>e.trim()).filter(e=>e)),placeholder:"e.g., test, demo, staging",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),(0,dt.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Products containing any of these patterns will be excluded"})]})]})]}),b&&(0,dt.jsxs)("div",{className:"border-t pt-6 space-y-6",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Advanced Configuration"}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-3",children:"Lifecycle Rate Settings"}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-1",children:"Trial Window (days)"}),(0,dt.jsx)("input",{type:"number",value:(null===(c=f.lifecycle)||void 0===c?void 0:c.trial_window_days)||7,onChange:e=>D("trial_window_days",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-1",children:"Cancellation Window (days)"}),(0,dt.jsx)("input",{type:"number",value:(null===(d=f.lifecycle)||void 0===d?void 0:d.cancellation_window_days)||30,onChange:e=>D("cancellation_window_days",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,dt.jsx)("div",{className:"flex items-center",children:(0,dt.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("input",{type:"checkbox",checked:!1!==(null===(u=f.lifecycle)||void 0===u?void 0:u.smoothing_enabled),onChange:e=>D("smoothing_enabled",e.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),(0,dt.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Smoothing Enabled"})]})})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-3",children:"Timeline Settings"}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,dt.jsx)("div",{className:"flex items-center",children:(0,dt.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("input",{type:"checkbox",checked:!1!==(null===(h=f.timeline)||void 0===h?void 0:h.include_estimates),onChange:e=>R("include_estimates",e.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),(0,dt.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Include Revenue Estimates"})]})}),(0,dt.jsx)("div",{className:"flex items-center",children:(0,dt.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("input",{type:"checkbox",checked:!1!==(null===(p=f.timeline)||void 0===p?void 0:p.include_confidence_intervals),onChange:e=>R("include_confidence_intervals",e.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),(0,dt.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Include Confidence Intervals"})]})})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-3",children:"Detailed Events Analysis"}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-1",children:"Specific User ID (for detailed event analysis)"}),(0,dt.jsx)("input",{type:"text",value:(null===(m=f.detailed_events)||void 0===m?void 0:m.user_id)||"",onChange:e=>((e,t)=>{const r=Re(Re({},f.detailed_events),{},{[e]:t});M({detailed_events:r})})("user_id",e.target.value),placeholder:"e.g., user_12345 or distinct_id",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),(0,dt.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Leave empty for cohort-wide analysis, or enter a specific user ID to see detailed events for that user"})]})]})]})]})]})},ZI=e=>{var t;let{data:r,debugStage:n}=e;const[i,s]=(0,a.useState)("summary"),[o,l]=(0,a.useState)(new Set(["summary"]));if(!r)return(0,dt.jsx)("div",{className:"text-center py-8",children:(0,dt.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No debug data available. Run an analysis in debug mode to see results."})});const c=function(e){if((arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)>=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:3))return"object"===typeof e?"[Object]":String(e);try{return JSON.stringify(e,null,2)}catch(CF){return String(e)}},d=e=>{var t,a,i,s;return{summary:{title:"Analysis Summary",data:{success:r.success,message:r.message,timestamp:r.timestamp,execution_metadata:r.execution_metadata,debug_stage:n}},cohort_summary:{title:"Cohort Summary",data:null===(t=r.data)||void 0===t?void 0:t.cohort_summary},arpu_data:{title:"ARPU Data",data:null===(a=r.data)||void 0===a?void 0:a.arpu_data},lifecycle_rates:{title:"Lifecycle Rates",data:null===(i=r.data)||void 0===i?void 0:i.lifecycle_rates},timeline_data:{title:"Timeline Data",data:null===(s=r.data)||void 0===s?void 0:s.timeline_data},raw_response:{title:"Raw API Response",data:r}}[e]||{title:"Unknown",data:null}},u=["summary","cohort_summary","arpu_data","lifecycle_rates","timeline_data","raw_response"].filter(e=>{const t=d(e);return null!==t.data&&void 0!==t.data}),h=e=>{let{sectionKey:t,title:r,data:n,isExpanded:a}=e;if(!n)return null;const i=n&&("object"!==typeof n||Object.keys(n).length>0);return(0,dt.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[(0,dt.jsxs)("button",{onClick:()=>(e=>{const t=new Set(o);t.has(e)?t.delete(e):t.add(e),l(t)})(t),className:"w-full px-4 py-3 text-left bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-t-lg flex items-center justify-between",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dt.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:r}),i&&(0,dt.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded",children:"object"===typeof n&&null!==n?"".concat(Object.keys(n).length," keys"):"Data available"})]}),(0,dt.jsx)("span",{className:"text-gray-400",children:a?"\u25bc":"\u25b6"})]}),a&&(0,dt.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:i?(0,dt.jsx)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-auto max-h-96",children:(0,dt.jsx)("pre",{className:"text-sm whitespace-pre-wrap",children:c(n)})}):(0,dt.jsx)("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No data available for this section"})})]})};return(0,dt.jsxs)("div",{className:"space-y-6",children:[(0,dt.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"text-yellow-600 dark:text-yellow-400",children:"\ud83d\udc1b"}),(0,dt.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 dark:text-yellow-200",children:"Debug Mode Active"})]}),(0,dt.jsx)("div",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300",children:n?(0,dt.jsxs)(dt.Fragment,{children:["Showing debug data for stage: ",(0,dt.jsx)("strong",{children:n})]}):"Showing complete analysis debug data"})]}),(0,dt.jsx)("div",{className:"flex flex-wrap gap-2",children:u.map(e=>{const t=d(e),r=i===e;return(0,dt.jsx)("button",{onClick:()=>s(e),className:"px-3 py-2 text-sm rounded-lg transition-colors ".concat(r?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"),children:t.title},e)})}),(0,dt.jsx)("div",{className:"space-y-4",children:u.map(e=>{const t=d(e),r=o.has(e);return(0,dt.jsx)(h,{sectionKey:e,title:t.title,data:t.data,isExpanded:r},e)})}),(0,dt.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Debug Actions"}),(0,dt.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,dt.jsx)("button",{onClick:()=>l(new Set(u)),className:"px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Expand All"}),(0,dt.jsx)("button",{onClick:()=>l(new Set),className:"px-3 py-2 text-sm bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Collapse All"}),(0,dt.jsx)("button",{onClick:()=>{const e=JSON.stringify(r,null,2);navigator.clipboard.writeText(e)},className:"px-3 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Copy to Clipboard"}),(0,dt.jsx)("button",{onClick:()=>{const e=JSON.stringify(r,null,2),t=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(t),i=document.createElement("a");i.href=a,i.download="debug-data-".concat(n||"full","-").concat((new Date).toISOString(),".json"),i.click(),URL.revokeObjectURL(a)},className:"px-3 py-2 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Download JSON"})]})]}),r.execution_metadata&&(0,dt.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-200 mb-3",children:"Performance Metrics"}),(0,dt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-blue-700 dark:text-blue-300 font-medium",children:"Duration"}),(0,dt.jsxs)("div",{className:"text-blue-600 dark:text-blue-400",children:[null===(t=r.execution_metadata.duration_seconds)||void 0===t?void 0:t.toFixed(2),"s"]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-blue-700 dark:text-blue-300 font-medium",children:"Pipeline Version"}),(0,dt.jsx)("div",{className:"text-blue-600 dark:text-blue-400",children:r.execution_metadata.pipeline_version||"N/A"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-blue-700 dark:text-blue-300 font-medium",children:"Analysis Type"}),(0,dt.jsx)("div",{className:"text-blue-600 dark:text-blue-400",children:r.execution_metadata.analysis_type||"full"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-blue-700 dark:text-blue-300 font-medium",children:"Start Time"}),(0,dt.jsx)("div",{className:"text-blue-600 dark:text-blue-400",children:r.execution_metadata.start_time?new Date(r.execution_metadata.start_time).toLocaleTimeString():"N/A"})]})]})]})]})},eL=Ue("Split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]),tL=Ue("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),rL=Ue("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),nL=Ue("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),aL=e=>{var t,r,n;let{data:i}=e;if(!i)return(0,dt.jsx)("div",{className:"text-center py-8",children:(0,dt.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No cohort data available. Run an analysis to see filtering statistics."})});const s=i.legacy_format||(null===(t=i.data)||void 0===t?void 0:t.legacy_format),o=i.structured_format||(null===(r=i.data)||void 0===r?void 0:r.structured_format),l=i.summary||(null===(n=i.data)||void 0===n?void 0:n.summary);let c=[],d=0,u=0,h=0,p=0,m=0,f=0,g=60,x=0,b=0,y=0;var v;if((l&&(y=l.extended_cohort_count||0,u=l.final_cohort_count||0,p=u,m=l.base_user_count||0,f=l.lookback_user_count||0,h=l.total_event_count||0,x=l.base_event_count||0,b=l.lookback_event_count||0),s)&&(0===u&&(u=s.cohort_size||0),0===p&&(p=s.comprehensive_cohort_size||u),0===m&&(m=s.base_users||0),0===f&&(f=s.lookback_users||0),0===y&&(y=s.extended_cohort_size||0),0===h&&(h=s.total_events||s.event_count||0),0===x&&(x=s.base_events||0),0===b&&(b=s.lookback_events||0),null!==(v=s.metadata)&&void 0!==v&&v.lookback_days_used&&(g=s.metadata.lookback_days_used),s.filter_stats)){const e=s.filter_stats;c=e.filtering_steps||[],d=e.base_cohort_count||e.extended_cohort_size||0,0===u&&(u=e.final_cohort_count||e.final_cohort_size||0),0===y&&(y=e.extended_cohort_size||0)}if(null!==o&&void 0!==o&&o.unified_pipeline_data){const e=o.unified_pipeline_data;if(e.unified_cohort){const t=e.unified_cohort;if(0===u&&(u=t.size||0),0===p&&(p=u),0===m&&(m=t.base_size||0),0===f&&(f=t.lookback_size||0),0===y&&(y=t.extended_size||0),t.metadata&&(60===g&&(g=t.metadata.lookback_days_used||60),0===y&&(y=t.metadata.extended_cohort_size||0),t.metadata.filter_stats&&0===c.length)){const e=t.metadata.filter_stats;c=e.filtering_steps||[],0===d&&(d=e.base_cohort_count||e.extended_cohort_size||0),0===y&&(y=e.extended_cohort_size||0)}}if(e.unified_events){const t=e.unified_events;0===h&&(h=t.size||0),0===x&&(x=t.base_size||0),0===b&&(b=t.lookback_size||0)}if(e.categorized_data){const t=e.categorized_data;0===u&&(u=t.total_cohort_size||0),0===m&&(m=t.base_cohort_size||0),0===h&&(h=t.total_events_count||0),0===x&&(x=t.base_events_count||0)}}if(null!==o&&void 0!==o&&o.cohort_data&&(null===o||void 0===o||!o.unified_pipeline_data)){var _;const e=null===(_=o.cohort_analysis)||void 0===_?void 0:_.cohort_breakdown;e&&(0===p&&(p=e.total_users||0),0===m&&(m=e.base_users||0),0===f&&(f=e.lookback_users||0));const t=o.event_data;t&&(0===x&&(x=t.base_size||0),0===b&&(b=t.lookback_size||0),0===h&&(h=x+b))}const k={userMathCorrect:m+f===p,eventMathCorrect:x+b===h,basePriorityApplied:m>0&&f>=0,extendedToFinalFlow:y>=p},j=(e,t)=>t?(e/t*100).toFixed(1):0,w=(null===s||void 0===s?void 0:s.event_type_breakdown)||{},N=w&&0!==Object.keys(w).length?Object.entries(w).map(e=>{let[t,r]=e;return{eventType:t,count:r,percentage:j(r,u)}}):null;return(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,dt.jsx)(mN,{size:24,className:"text-blue-600 dark:text-blue-400"}),(0,dt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Unified Cohort Pipeline"}),k.userMathCorrect&&k.basePriorityApplied&&(0,dt.jsxs)("div",{className:"ml-auto flex items-center gap-1 text-green-600 dark:text-green-400 text-sm",children:[(0,dt.jsx)("span",{children:"\u2713"}),(0,dt.jsx)("span",{children:"Three-Phase Unified Approach"})]})]}),(0,dt.jsxs)("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,dt.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[(0,dt.jsx)(Ze,{size:20,className:"text-blue-600 dark:text-blue-400"}),"Unified Three-Phase Approach"]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,dt.jsxs)("div",{className:"p-3 bg-white dark:bg-gray-800 rounded border",children:[(0,dt.jsx)("div",{className:"font-medium text-blue-600 dark:text-blue-400 mb-1",children:"Phase 1: Extended Collection"}),(0,dt.jsxs)("div",{className:"text-gray-700 dark:text-gray-300",children:["Collect maximum dataset (+",g," days lookback)"]}),y>0&&(0,dt.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Extended cohort: ",y.toLocaleString()," users"]})]}),(0,dt.jsxs)("div",{className:"p-3 bg-white dark:bg-gray-800 rounded border",children:[(0,dt.jsx)("div",{className:"font-medium text-green-600 dark:text-green-400 mb-1",children:"Phase 2: Unified Filtering"}),(0,dt.jsx)("div",{className:"text-gray-700 dark:text-gray-300",children:"Apply all filters to extended dataset"}),(0,dt.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Filtered cohort: ",p.toLocaleString()," users"]})]}),(0,dt.jsxs)("div",{className:"p-3 bg-white dark:bg-gray-800 rounded border",children:[(0,dt.jsx)("div",{className:"font-medium text-purple-600 dark:text-purple-400 mb-1",children:"Phase 3: Categorization"}),(0,dt.jsx)("div",{className:"text-gray-700 dark:text-gray-300",children:"Split by timeline with base priority"}),(0,dt.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Base: ",m.toLocaleString(),", Lookback: ",f.toLocaleString()]})]})]})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,dt.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,dt.jsx)(Je,{size:20,className:"text-blue-600 dark:text-blue-400"}),(0,dt.jsx)("h3",{className:"font-semibold text-blue-900 dark:text-blue-200",children:"Final Cohort Size"})]}),(0,dt.jsx)("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-300",children:p.toLocaleString()}),(0,dt.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:"Users after unified filtering"}),(m>0||f>0)&&(0,dt.jsxs)("div",{className:"mt-3 pt-3 border-t border-blue-200 dark:border-blue-700",children:[(0,dt.jsxs)("div",{className:"text-xs font-medium text-blue-800 dark:text-blue-300 mb-2",children:[(0,dt.jsx)(eL,{size:12,className:"inline mr-1"}),"Timeline Categorization:"]}),(0,dt.jsxs)("div",{className:"space-y-1",children:[(0,dt.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,dt.jsxs)("span",{className:"text-blue-600 dark:text-blue-400",children:[(0,dt.jsx)(tL,{size:12,className:"inline mr-1"}),"Base Period:"]}),(0,dt.jsxs)("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:[m.toLocaleString()," (",j(m,p),"%)"]})]}),(0,dt.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,dt.jsxs)("span",{className:"text-blue-500 dark:text-blue-500",children:[(0,dt.jsx)(Qe,{size:12,className:"inline mr-1"}),"Lookback Only:"]}),(0,dt.jsxs)("span",{className:"text-blue-600 dark:text-blue-400",children:[f.toLocaleString()," (",j(f,p),"%)"]})]}),(0,dt.jsxs)("div",{className:"flex justify-between text-xs font-medium border-t border-blue-200 dark:border-blue-700 pt-1",children:[(0,dt.jsx)("span",{className:"text-blue-700 dark:text-blue-300",children:"Total:"}),(0,dt.jsxs)("span",{className:"text-blue-700 dark:text-blue-300",children:[(m+f).toLocaleString(),k.userMathCorrect?" \u2713":" \u26a0\ufe0f"]})]}),g>0&&(0,dt.jsxs)("div",{className:"text-xs text-blue-500 dark:text-blue-500 mt-1",children:["Extended by ",g," days"]})]})]})]}),(0,dt.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,dt.jsx)(rL,{size:20,className:"text-green-600 dark:text-green-400"}),(0,dt.jsx)("h3",{className:"font-semibold text-green-900 dark:text-green-200",children:"Events in Cohort"})]}),(0,dt.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-300",children:h>0?h.toLocaleString():"N/A"}),(0,dt.jsx)("p",{className:"text-sm text-green-700 dark:text-green-400",children:"Total events analyzed"}),(x>0||b>0)&&(0,dt.jsxs)("div",{className:"mt-3 pt-3 border-t border-green-200 dark:border-green-700",children:[(0,dt.jsxs)("div",{className:"text-xs font-medium text-green-800 dark:text-green-300 mb-2",children:[(0,dt.jsx)(eL,{size:12,className:"inline mr-1"}),"Event Timeline Categorization:"]}),(0,dt.jsxs)("div",{className:"space-y-1",children:[(0,dt.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,dt.jsxs)("span",{className:"text-green-600 dark:text-green-400",children:[(0,dt.jsx)(tL,{size:12,className:"inline mr-1"}),"Base Period:"]}),(0,dt.jsxs)("span",{className:"font-medium text-green-700 dark:text-green-300",children:[x.toLocaleString()," (",j(x,h),"%)"]})]}),(0,dt.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,dt.jsxs)("span",{className:"text-green-500 dark:text-green-500",children:[(0,dt.jsx)(Qe,{size:12,className:"inline mr-1"}),"Lookback Only:"]}),(0,dt.jsxs)("span",{className:"text-green-600 dark:text-green-400",children:[b.toLocaleString()," (",j(b,h),"%)"]})]}),(0,dt.jsxs)("div",{className:"flex justify-between text-xs font-medium border-t border-green-200 dark:border-green-700 pt-1",children:[(0,dt.jsx)("span",{className:"text-green-700 dark:text-green-300",children:"Total:"}),(0,dt.jsxs)("span",{className:"text-green-700 dark:text-green-300",children:[(x+b).toLocaleString(),k.eventMathCorrect?" \u2713":" \u26a0\ufe0f"]})]})]})]})]}),(0,dt.jsxs)("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,dt.jsx)(nL,{size:20,className:"text-purple-600 dark:text-purple-400"}),(0,dt.jsx)("h3",{className:"font-semibold text-purple-900 dark:text-purple-200",children:"Filter Efficiency"})]}),(0,dt.jsxs)("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-300",children:[y>0?j(p,y):"0","%"]}),(0,dt.jsx)("p",{className:"text-sm text-purple-700 dark:text-purple-400",children:"Users retained from extended cohort"}),y>0&&(0,dt.jsx)("div",{className:"mt-3 pt-3 border-t border-purple-200 dark:border-purple-700",children:(0,dt.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,dt.jsxs)("div",{className:"flex justify-between",children:[(0,dt.jsx)("span",{className:"text-purple-600 dark:text-purple-400",children:"Extended cohort:"}),(0,dt.jsx)("span",{className:"text-purple-700 dark:text-purple-300",children:y.toLocaleString()})]}),(0,dt.jsxs)("div",{className:"flex justify-between",children:[(0,dt.jsx)("span",{className:"text-purple-600 dark:text-purple-400",children:"Filtered out:"}),(0,dt.jsx)("span",{className:"text-purple-700 dark:text-purple-300",children:(y-p).toLocaleString()})]}),(0,dt.jsxs)("div",{className:"flex justify-between font-medium border-t border-purple-200 dark:border-purple-700 pt-1",children:[(0,dt.jsx)("span",{className:"text-purple-700 dark:text-purple-300",children:"Final:"}),(0,dt.jsx)("span",{className:"text-purple-700 dark:text-purple-300",children:p.toLocaleString()})]})]})})]})]}),c&&c.length>0&&(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Unified Pipeline Flow"}),(0,dt.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg overflow-x-auto",children:[(0,dt.jsxs)("div",{className:"text-center min-w-0 flex-shrink-0",children:[(0,dt.jsx)("div",{className:"text-sm text-blue-600 dark:text-blue-400 mb-1 font-medium",children:"Extended Collection"}),(0,dt.jsx)("div",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:y>0?y.toLocaleString():"N/A"}),(0,dt.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Base + ",g," days"]})]}),(0,dt.jsx)("div",{className:"hidden md:block text-gray-400 mx-2",children:"\u2192"}),c.slice(1).map((e,t)=>{const r=e.users_after||e.users_count||0,n=t===c.slice(1).length-1;return(0,dt.jsxs)(a.Fragment,{children:[(0,dt.jsxs)("div",{className:"text-center min-w-0 flex-shrink-0",children:[(0,dt.jsx)("div",{className:"text-sm text-green-600 dark:text-green-400 mb-1",children:e.step_name||e.step}),(0,dt.jsx)("div",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:r.toLocaleString()}),(0,dt.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[y>0?j(r,y):"0","% retained"]})]}),!n&&(0,dt.jsx)("div",{className:"hidden md:block text-gray-400 mx-2",children:"\u2192"})]},t)}),(0,dt.jsx)("div",{className:"hidden md:block text-gray-400 mx-2",children:"\u2192"}),(0,dt.jsxs)("div",{className:"text-center min-w-0 flex-shrink-0",children:[(0,dt.jsx)("div",{className:"text-sm text-purple-600 dark:text-purple-400 mb-1 font-medium",children:"Timeline Categorization"}),(0,dt.jsxs)("div",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:[m.toLocaleString()," + ",f.toLocaleString()]}),(0,dt.jsxs)("div",{className:"text-xs space-y-0.5",children:[(0,dt.jsxs)("div",{className:"text-blue-600 dark:text-blue-400",children:["Base: ",j(m,p),"%"]}),(0,dt.jsxs)("div",{className:"text-green-600 dark:text-green-400",children:["Lookback: ",j(f,p),"%"]})]})]})]}),(0,dt.jsx)("div",{className:"overflow-x-auto",children:(0,dt.jsxs)("table",{className:"min-w-full text-sm border dark:border-gray-600",children:[(0,dt.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"p-3 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white",children:"Pipeline Step"}),(0,dt.jsx)("th",{className:"p-3 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white",children:"Description"}),(0,dt.jsx)("th",{className:"p-3 border-b dark:border-gray-600 text-center text-gray-700 dark:text-white",children:"Users After Step"}),(0,dt.jsx)("th",{className:"p-3 border-b dark:border-gray-600 text-center text-gray-700 dark:text-white",children:"Users Filtered"}),(0,dt.jsx)("th",{className:"p-3 border-b dark:border-gray-600 text-center text-gray-700 dark:text-white",children:"% Retained"}),(0,dt.jsx)("th",{className:"p-3 border-b dark:border-gray-600 text-center text-gray-700 dark:text-white",children:"Phase"})]})}),(0,dt.jsxs)("tbody",{className:"bg-white dark:bg-gray-800",children:[c.map((e,t)=>{const r=e.users_after||e.users_count||0,n=e.users_filtered||0,a=e.step_name||e.step||"";let i="Filtering",s="text-green-600 dark:text-green-400";return a.includes("extended_cohort_selection")?(i="Extended Collection",s="text-blue-600 dark:text-blue-400"):("Timeline Split"===a||a.includes("timeline_split"))&&(i="Categorization",s="text-purple-600 dark:text-purple-400"),(0,dt.jsxs)("tr",{className:t%2===0?"":"bg-gray-50 dark:bg-gray-700",children:[(0,dt.jsx)("td",{className:"p-3 border-b dark:border-gray-600 font-medium text-gray-700 dark:text-gray-300",children:e.step_name||e.step}),(0,dt.jsx)("td",{className:"p-3 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:e.description}),(0,dt.jsx)("td",{className:"p-3 border-b dark:border-gray-600 text-center text-gray-700 dark:text-gray-300 font-medium",children:r.toLocaleString()}),(0,dt.jsx)("td",{className:"p-3 border-b dark:border-gray-600 text-center text-gray-700 dark:text-gray-300",children:a.includes("extended_cohort_selection")?"N/A":n.toLocaleString()}),(0,dt.jsxs)("td",{className:"p-3 border-b dark:border-gray-600 text-center text-gray-700 dark:text-gray-300",children:[y>0?j(r,y):"0","%"]}),(0,dt.jsx)("td",{className:"p-3 border-b dark:border-gray-600 text-center font-medium ".concat(s),children:i})]},t)}),(m>0||f>0)&&(0,dt.jsxs)("tr",{className:"bg-purple-50 dark:bg-purple-900/20",children:[(0,dt.jsx)("td",{className:"p-3 border-b dark:border-gray-600 font-medium text-purple-700 dark:text-purple-300",children:"Timeline Split"}),(0,dt.jsxs)("td",{className:"p-3 border-b dark:border-gray-600 text-purple-700 dark:text-purple-300",children:["Base period: ",m.toLocaleString()," users, Lookback only: ",f.toLocaleString()," users"]}),(0,dt.jsx)("td",{className:"p-3 border-b dark:border-gray-600 text-center text-purple-700 dark:text-purple-300 font-medium",children:(m+f).toLocaleString()}),(0,dt.jsx)("td",{className:"p-3 border-b dark:border-gray-600 text-center text-purple-700 dark:text-purple-300",children:"Split only"}),(0,dt.jsx)("td",{className:"p-3 border-b dark:border-gray-600 text-center text-purple-700 dark:text-purple-300",children:"100%"}),(0,dt.jsx)("td",{className:"p-3 border-b dark:border-gray-600 text-center font-medium text-purple-600 dark:text-purple-400",children:"Categorization"})]})]})]})})]}),N&&(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Unique Users by Event Type"}),(0,dt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(e=>{let{eventType:t,count:r,percentage:n}=e;return(0,dt.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,dt.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white text-sm",children:t.replace("RC ","")}),(0,dt.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n,"%"]})]}),(0,dt.jsx)("p",{className:"text-xl font-bold text-gray-700 dark:text-gray-300",children:r.toLocaleString()}),(0,dt.jsx)("div",{className:"mt-2 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:(0,dt.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(n,100),"%")}})})]},t)})})]}),(!c||0===c.length)&&!N&&(0,dt.jsxs)("div",{className:"text-center py-8 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,dt.jsx)(mN,{size:48,className:"mx-auto text-gray-400 mb-4"}),(0,dt.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"No detailed filtering statistics available"}),(0,dt.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Run a full analysis to see the complete unified pipeline breakdown"})]})]})},iL=Ue("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),sL=Ue("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),oL=Ue("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),lL=Ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),cL=Ue("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),dL=e=>{var t,r,n;let{data:a}=e,i=null;if(null!==a&&void 0!==a&&null!==(t=a.stage_results)&&void 0!==t&&t.stage2?i=a.stage_results.stage2:null!==a&&void 0!==a&&null!==(r=a.data)&&void 0!==r&&null!==(n=r.stage_results)&&void 0!==n&&n.stage2&&(i=a.data.stage_results.stage2),!i)return(0,dt.jsx)("div",{className:"text-center py-8",children:(0,dt.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No Stage 2 data available. Run analysis to see user segment matching results."})});const s=i.matching_stats||{},o=i.users_with_segments||[],l=e=>"number"!==typeof e?"0":e.toLocaleString(),c=(e,t)=>t&&"number"===typeof e?(e/t*100).toFixed(1)+"%":"0.0%";return(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,dt.jsx)(tL,{size:24,className:"text-green-600 dark:text-green-400"}),(0,dt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Stage 2: User-to-Segment Matching Results"}),(0,dt.jsxs)("div",{className:"ml-auto flex items-center gap-1 text-green-600 dark:text-green-400 text-sm",children:[(0,dt.jsx)("span",{children:"\u2713"}),(0,dt.jsx)("span",{children:"Conversion Probability Segment Matching"})]})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,dt.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,dt.jsx)(iL,{size:20,className:"text-green-600 dark:text-green-400"}),(0,dt.jsx)("h3",{className:"font-semibold text-green-900 dark:text-green-200",children:"Successful Matches"})]}),(0,dt.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-300",children:l(s.successful_matches||0)}),(0,dt.jsxs)("p",{className:"text-sm text-green-700 dark:text-green-400",children:[c(s.successful_matches,s.total_users)," success rate"]})]}),(0,dt.jsxs)("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,dt.jsx)(sL,{size:20,className:"text-red-600 dark:text-red-400"}),(0,dt.jsx)("h3",{className:"font-semibold text-red-900 dark:text-red-200",children:"Failed Matches"})]}),(0,dt.jsx)("p",{className:"text-2xl font-bold text-red-600 dark:text-red-300",children:l(s.failed_matches||0)}),(0,dt.jsx)("p",{className:"text-sm text-red-700 dark:text-red-400",children:"No viable segments found"})]}),(0,dt.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,dt.jsx)(rt,{size:20,className:"text-blue-600 dark:text-blue-400"}),(0,dt.jsx)("h3",{className:"font-semibold text-blue-900 dark:text-blue-200",children:"Rollups Applied"})]}),(0,dt.jsx)("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-300",children:l(s.rollups_applied||0)}),(0,dt.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:[c(s.rollups_applied,s.successful_matches)," rollup rate"]})]}),(0,dt.jsxs)("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,dt.jsx)(oL,{size:20,className:"text-purple-600 dark:text-purple-400"}),(0,dt.jsx)("h3",{className:"font-semibold text-purple-900 dark:text-purple-200",children:"Average Accuracy"})]}),(0,dt.jsx)("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-300",children:Object.keys(s.accuracy_distribution||{}).length>0?Object.keys(s.accuracy_distribution)[0]:"N/A"}),(0,dt.jsx)("p",{className:"text-sm text-purple-700 dark:text-purple-400",children:"Prediction quality score"})]})]}),(0,dt.jsxs)("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,dt.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[(0,dt.jsx)(Ze,{size:20,className:"text-blue-600 dark:text-blue-400"}),"Economic Tier Classification System"]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,dt.jsxs)("div",{className:"p-3 bg-white dark:bg-gray-800 rounded border",children:[(0,dt.jsx)("div",{className:"font-medium text-green-600 dark:text-green-400 mb-1",children:"Tier 1: High Income"}),(0,dt.jsx)("div",{className:"text-gray-700 dark:text-gray-300",children:"US, CA, UK, AU, DE, FR, etc."}),(0,dt.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"World Bank high-income classification"})]}),(0,dt.jsxs)("div",{className:"p-3 bg-white dark:bg-gray-800 rounded border",children:[(0,dt.jsx)("div",{className:"font-medium text-yellow-600 dark:text-yellow-400 mb-1",children:"Tier 2: Medium Income"}),(0,dt.jsx)("div",{className:"text-gray-700 dark:text-gray-300",children:"BR, MX, TR, RU, AR, etc."}),(0,dt.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"World Bank upper-middle-income"})]}),(0,dt.jsxs)("div",{className:"p-3 bg-white dark:bg-gray-800 rounded border",children:[(0,dt.jsx)("div",{className:"font-medium text-red-600 dark:text-red-400 mb-1",children:"Tier 3: Low Income"}),(0,dt.jsx)("div",{className:"text-gray-700 dark:text-gray-300",children:"IN, PH, VN, ID, EG, etc."}),(0,dt.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"World Bank lower-middle & low-income"})]})]})]}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Individual User Segment Matching Results"}),(0,dt.jsxs)("div",{className:"mb-4 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[(0,dt.jsxs)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[(0,dt.jsx)(lL,{size:16,className:"text-yellow-600 dark:text-yellow-400"}),"How to Read This Table"]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700 dark:text-gray-300",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"font-medium text-blue-600 dark:text-blue-400 mb-1",children:"\ud83d\udcca 4 Key Metrics Column:"}),(0,dt.jsxs)("ul",{className:"text-xs space-y-1 ml-4",children:[(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Trial Conv:"})," % who convert from trial to paid"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Refund:"})," % who refund after trial conversion"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Init. Refund:"})," % who refund initial purchase"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Renewal Refund:"})," % who refund renewals"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Sample:"})," Number of users in this segment"]})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"font-medium text-green-600 dark:text-green-400 mb-1",children:"\ud83c\udfaf Match Type Column:"}),(0,dt.jsxs)("ul",{className:"text-xs space-y-1 ml-4",children:[(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Direct:"})," Exact match found at user's specific level"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Applied (X steps):"})," Had to use more general segment"]}),(0,dt.jsx)("li",{children:"More steps = less specific match = lower accuracy"}),(0,dt.jsx)("li",{children:"Rollup helps when exact match has too few users"})]})]})]})]}),(0,dt.jsx)("div",{className:"overflow-x-auto",children:(0,dt.jsxs)("table",{className:"min-w-full text-sm border dark:border-gray-600",children:[(0,dt.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"p-3 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white",children:"User Distinct ID"}),(0,dt.jsx)("th",{className:"p-3 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white",children:"User Properties"}),(0,dt.jsx)("th",{className:"p-3 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white",children:"Matched Segment"}),(0,dt.jsx)("th",{className:"p-3 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white",children:"Target Segment (if rollup)"}),(0,dt.jsx)("th",{className:"p-3 border-b dark:border-gray-600 text-center text-gray-700 dark:text-white",children:"4 Key Metrics (Trial, Refunds)"}),(0,dt.jsx)("th",{className:"p-3 border-b dark:border-gray-600 text-center text-gray-700 dark:text-white",children:"Prediction Accuracy"})]})}),(0,dt.jsx)("tbody",{className:"bg-white dark:bg-gray-800",children:o.slice(0,20).map((e,t)=>{var r,n,a,i,s,o,l,c,d,u,h,p,m,f,g,x,b,y,v,_;const k=e.segment_match_result||{},j=e.user_properties||{},w=k.rollup_chain||[],N=w.length>0?w[0]:null,S=w.length>0?w[w.length-1]:null,O=k.rollup_applied&&w.length>1;return(0,dt.jsxs)("tr",{className:t%2===0?"":"bg-gray-50 dark:bg-gray-700",children:[(0,dt.jsxs)("td",{className:"p-3 border-b dark:border-gray-600 font-mono text-xs text-gray-700 dark:text-gray-300",children:[(0,dt.jsx)("div",{className:"max-w-[200px] break-all",children:e.user_id}),(0,dt.jsxs)("div",{className:"text-gray-500 dark:text-gray-400 text-xs mt-1",children:["Short: ",e.user_id.substring(0,8),"..."]})]}),(0,dt.jsx)("td",{className:"p-3 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:(0,dt.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Product:"})," ",j.product_id||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Store:"})," ",j.app_store||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Price:"})," ",j.price_bucket||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Country:"})," ",j.country||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Economic Tier:"})," ",j.economic_tier||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Region:"})," ",j.region||"N/A"]})]})}),(0,dt.jsx)("td",{className:"p-3 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:k.success&&N?(0,dt.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,dt.jsxs)("div",{className:"font-medium text-blue-600 dark:text-blue-400 mb-2",children:["ID: ",(null===(r=k.matched_segment_id)||void 0===r?void 0:r.substring(0,8))||"Unknown","..."]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Product:"})," ",(null===(n=N.properties)||void 0===n?void 0:n.product_id)||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Store:"})," ",(null===(a=N.properties)||void 0===a?void 0:a.app_store)||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Price:"})," ",(null===(i=N.properties)||void 0===i?void 0:i.price_bucket)||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Country:"})," ",(null===(s=N.properties)||void 0===s?void 0:s.country)||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Economic Tier:"})," ",(null===(o=N.properties)||void 0===o?void 0:o.economic_tier)||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Region:"})," ",(null===(l=N.properties)||void 0===l?void 0:l.region)||"N/A"]}),(0,dt.jsxs)("div",{className:"pt-1 border-t border-gray-200 dark:border-gray-600",children:[(0,dt.jsx)("strong",{children:"Users:"})," ",N.cohort_size||0]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Level:"})," ",N.level||"N/A"]})]}):k.success?(0,dt.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,dt.jsxs)("div",{className:"font-medium text-blue-600 dark:text-blue-400 mb-2",children:["ID: ",(null===(c=k.matched_segment_id)||void 0===c?void 0:c.substring(0,8))||"Unknown","..."]}),(0,dt.jsx)("div",{className:"text-gray-500",children:"Segment properties not available"}),k.conversion_metrics&&(0,dt.jsxs)("div",{className:"pt-1 border-t border-gray-200 dark:border-gray-600",children:[(0,dt.jsx)("strong",{children:"Users:"})," ",k.conversion_metrics.trial_started_count||0]})]}):(0,dt.jsx)("span",{className:"text-red-600 dark:text-red-400 text-xs",children:"No match found"})}),(0,dt.jsx)("td",{className:"p-3 border-b dark:border-gray-600 text-gray-700 dark:text-gray-300",children:O&&S?(0,dt.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,dt.jsxs)("div",{className:"font-medium text-green-600 dark:text-green-400 mb-2",children:["ID: ",(null===(d=k.final_viable_segment_id)||void 0===d?void 0:d.substring(0,8))||"Unknown","..."]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Product:"})," ",(null===(u=S.properties)||void 0===u?void 0:u.product_id)||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Store:"})," ",(null===(h=S.properties)||void 0===h?void 0:h.app_store)||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Price:"})," ",(null===(p=S.properties)||void 0===p?void 0:p.price_bucket)||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Country:"})," ",(null===(m=S.properties)||void 0===m?void 0:m.country)||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Economic Tier:"})," ",(null===(f=S.properties)||void 0===f?void 0:f.economic_tier)||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Region:"})," ",(null===(g=S.properties)||void 0===g?void 0:g.region)||"N/A"]}),(0,dt.jsxs)("div",{className:"pt-1 border-t border-gray-200 dark:border-gray-600",children:[(0,dt.jsx)("strong",{children:"Users:"})," ",S.cohort_size||0]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Level:"})," ",S.level||"N/A"]})]}):(0,dt.jsx)("div",{className:"text-xs text-gray-400",children:k.success?"Direct match - no rollup needed":""})}),(0,dt.jsx)("td",{className:"p-3 border-b dark:border-gray-600 text-center text-gray-700 dark:text-gray-300",children:k.success?(0,dt.jsx)("div",{className:"text-xs",children:(0,dt.jsxs)("div",{className:"space-y-1",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"font-bold text-blue-600 dark:text-blue-400 text-sm",children:[(100*((null===(x=k.conversion_metrics)||void 0===x?void 0:x.trial_conversion_rate)||0)).toFixed(1),"%"]}),(0,dt.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Trial Conv."})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"font-medium text-orange-600 dark:text-orange-400 text-xs",children:[(100*((null===(b=k.conversion_metrics)||void 0===b?void 0:b.trial_converted_to_refund_rate)||0)).toFixed(1),"%"]}),(0,dt.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Refund"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"font-medium text-red-600 dark:text-red-400 text-xs",children:[(100*((null===(y=k.conversion_metrics)||void 0===y?void 0:y.initial_purchase_to_refund_rate)||0)).toFixed(1),"%"]}),(0,dt.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Init. Refund"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"font-medium text-purple-600 dark:text-purple-400 text-xs",children:[(100*((null===(v=k.conversion_metrics)||void 0===v?void 0:v.renewal_to_refund_rate)||0)).toFixed(1),"%"]}),(0,dt.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Renewal Refund"})]}),(0,dt.jsx)("div",{className:"pt-1 border-t border-gray-200 dark:border-gray-600",children:(0,dt.jsxs)("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["Sample: ",(null===(_=k.conversion_metrics)||void 0===_?void 0:_.trial_started_count)||0]})})]})}):(0,dt.jsx)("span",{className:"text-gray-400 text-xs",children:"-"})}),(0,dt.jsx)("td",{className:"p-3 border-b dark:border-gray-600 text-center text-gray-700 dark:text-gray-300",children:k.success?(0,dt.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,dt.jsx)(cL,{size:12,className:"text-yellow-500"}),(0,dt.jsx)("span",{className:"text-xs font-medium px-2 py-1 rounded ".concat("very_high"===k.accuracy_score?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200":"high"===k.accuracy_score?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"medium"===k.accuracy_score?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"low"===k.accuracy_score?"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"),children:k.accuracy_score||"Unknown"})]}):(0,dt.jsx)("span",{className:"text-gray-400 text-xs",children:"-"})})]},e.user_id)})})]})}),o.length>20&&(0,dt.jsxs)("div",{className:"mt-4 text-center text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-700 p-3 rounded",children:["Showing first 20 users of ",o.length," total users"]})]}),i.error&&(0,dt.jsxs)("div",{className:"text-center py-8 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[(0,dt.jsx)(sL,{size:48,className:"mx-auto text-red-400 mb-4"}),(0,dt.jsxs)("p",{className:"text-red-600 dark:text-red-400 mb-2",children:["Stage 2 Error: ",i.error]})]}),0===o.length&&!i.error&&(0,dt.jsxs)("div",{className:"text-center py-8 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,dt.jsx)(tL,{size:48,className:"mx-auto text-gray-400 mb-4"}),(0,dt.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"No user segment matching data available"}),(0,dt.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Run Stage 2 analysis to see user-to-segment matching results"})]})]})},uL=Ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),hL=Ue("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),pL=Ue("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),mL=Ue("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),fL=e=>{var t,r,n,i,s,o,l;let{data:c,position:d,onClose:u}=e;const[h,p]=a.useState(!1),m=a.useRef(null);if(!c||!c.breakdown)return null;const{breakdown:f}=c,g=(null===(t=f.total)||void 0===t?void 0:t.final_net_revenue)||0,x=(e,t)=>{if(!t)return null;return t.users>0||t.estimated_revenue||t.actual_revenue?(0,dt.jsxs)("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[(0,dt.jsxs)("h5",{className:"font-bold text-blue-300 mb-2",children:[e," ",t.users>0?"(".concat(t.users," users)"):""]}),(0,dt.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 text-xs",children:[t.hasOwnProperty("estimated_revenue")&&(0,dt.jsx)("div",{children:"Est. Revenue:"}),t.hasOwnProperty("estimated_revenue")&&(0,dt.jsxs)("div",{className:"text-right font-mono",children:["$",t.estimated_revenue.toFixed(2)]}),t.hasOwnProperty("actual_revenue")&&(0,dt.jsx)("div",{children:"Actual Revenue:"}),t.hasOwnProperty("actual_revenue")&&(0,dt.jsxs)("div",{className:"text-right font-mono",children:["$",t.actual_revenue.toFixed(2)]}),t.hasOwnProperty("actual_refunds")&&(0,dt.jsx)("div",{children:"Actual Refunds:"}),t.hasOwnProperty("actual_refunds")&&(0,dt.jsxs)("div",{className:"text-right font-mono text-red-400",children:["-$",t.actual_refunds.toFixed(2)]}),t.hasOwnProperty("estimated_refunds")&&(0,dt.jsx)("div",{children:"Est. Refunds:"}),t.hasOwnProperty("estimated_refunds")&&(0,dt.jsxs)("div",{className:"text-right font-mono text-yellow-400",children:["-$",t.estimated_refunds.toFixed(2)]}),(0,dt.jsx)("div",{className:"border-t border-gray-600 mt-1 pt-1",children:"Net Revenue:"}),(0,dt.jsx)("div",{className:"text-right font-mono border-t border-gray-600 mt-1 pt-1",children:t.hasOwnProperty("net_estimated_revenue")?"$".concat(t.net_estimated_revenue.toFixed(2)):t.hasOwnProperty("net_revenue_after_estimated_refunds")?"$".concat(t.net_revenue_after_estimated_refunds.toFixed(2)):"$".concat((t.actual_revenue-t.actual_refunds).toFixed(2))})]})]}):null};return(0,dt.jsxs)("div",{className:"fixed z-50 bg-gray-800 border border-gray-600 text-white rounded-lg shadow-lg p-4 w-96 pointer-events-auto",style:{left:d.x,top:d.y},onMouseEnter:()=>{p(!0),clearTimeout(m.current)},onMouseLeave:()=>{p(!1),m.current=setTimeout(u,300)},children:[(0,dt.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,dt.jsxs)("h4",{className:"font-semibold",children:["Est. Net Revenue: $",g.toFixed(2)]}),(0,dt.jsx)("button",{onClick:u,className:"text-gray-400 hover:text-gray-200",children:"\xd7"})]}),(()=>{const e=f.trial_converted||{},t=f.initial_purchase||{},r=e.actual_revenue>0,n=t.actual_revenue>0;return r||n?(0,dt.jsxs)("div",{className:"bg-blue-900 p-3 rounded-lg border border-blue-600 mb-3",children:[(0,dt.jsx)("div",{className:"text-sm font-medium text-blue-200 mb-2",children:"\ud83c\udfaf Refund Rate Analysis"}),r&&(0,dt.jsxs)("div",{className:"mb-2",children:[(0,dt.jsx)("div",{className:"text-xs font-medium text-blue-300",children:"Trial Conversion Refund Rate:"}),(0,dt.jsx)("div",{className:"text-sm font-bold text-blue-100",children:(()=>{const t=e.actual_revenue||0,r=e.estimated_refunds||0,n=t>0?r/t*100:0;return"".concat(r.toFixed(2)," / ").concat(t.toFixed(2)," = ").concat(n.toFixed(1),"%")})()}),(0,dt.jsxs)("div",{className:"text-xs text-blue-400",children:["$",(e.estimated_refunds||0).toFixed(2)," estimated refunds on $",(e.actual_revenue||0).toFixed(2)," revenue"]})]}),n&&(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-xs font-medium text-blue-300",children:"Initial Purchase Refund Rate:"}),(0,dt.jsx)("div",{className:"text-sm font-bold text-blue-100",children:(()=>{const e=t.actual_revenue||0,r=t.estimated_refunds||0,n=e>0?r/e*100:0;return"".concat(r.toFixed(2)," / ").concat(e.toFixed(2)," = ").concat(n.toFixed(1),"%")})()}),(0,dt.jsxs)("div",{className:"text-xs text-blue-400",children:["$",(t.estimated_refunds||0).toFixed(2)," estimated refunds on $",(t.actual_revenue||0).toFixed(2)," revenue"]})]})]}):null})(),x("-- Pending Trial --",f.pending_trial),x("-- Trial Converted --",f.trial_converted),x("-- Initial Purchase --",f.initial_purchase),(0,dt.jsxs)("div",{className:"pt-2",children:[(0,dt.jsx)("h5",{className:"font-bold text-green-300 mb-2",children:"-- Total --"}),(0,dt.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 text-xs",children:[(0,dt.jsx)("div",{children:"Total Actual Revenue:"}),(0,dt.jsxs)("div",{className:"text-right font-mono",children:["$",((null===(r=f.total)||void 0===r?void 0:r.total_actual_revenue)||0).toFixed(2)]}),(0,dt.jsx)("div",{children:"Total Actual Refunds:"}),(0,dt.jsxs)("div",{className:"text-right font-mono text-red-400",children:["-$",((null===(n=f.total)||void 0===n?void 0:n.total_actual_refunds)||0).toFixed(2)]}),(0,dt.jsx)("div",{children:"Total Net Revenue:"}),(0,dt.jsxs)("div",{className:"text-right font-mono",children:["$",((null===(i=f.total)||void 0===i?void 0:i.total_net_revenue)||0).toFixed(2)]}),(0,dt.jsx)("div",{children:"Est. Revenue (from trials):"}),(0,dt.jsxs)("div",{className:"text-right font-mono",children:["$",((null===(s=f.total)||void 0===s?void 0:s.est_revenue_from_trials)||0).toFixed(2)]}),(0,dt.jsx)("div",{children:"Est. Refunds (from pending trials, trial converted, and initial purchase):"}),(0,dt.jsxs)("div",{className:"text-right font-mono text-yellow-400",children:["-$",((null===(o=f.total)||void 0===o?void 0:o.est_refunds_from_all_sources)||0).toFixed(2)]}),(0,dt.jsx)("div",{className:"font-bold border-t border-gray-600 mt-1 pt-1",children:"Final Net Revenue:"}),(0,dt.jsxs)("div",{className:"font-bold text-right font-mono border-t border-gray-600 mt-1 pt-1",children:["$",((null===(l=f.total)||void 0===l?void 0:l.final_net_revenue)||0).toFixed(2)]})]})]})]})},gL=e=>{let{data:t,position:r,onClose:n}=e;const[i,s]=a.useState(!1),o=a.useRef(null);if(!t)return null;const{value:l=0,sources:c={},buckets:d={}}=t;return(0,dt.jsxs)("div",{className:"fixed z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg p-4 max-w-md pointer-events-auto",style:{left:r.x,top:r.y,pointerEvents:"auto"},onMouseEnter:()=>{s(!0),o.current&&(clearTimeout(o.current),o.current=null)},onMouseLeave:()=>{s(!1),o.current=setTimeout(()=>{n()},300)},children:[(0,dt.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,dt.jsxs)("h4",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:["Actual Revenue: $",l.toFixed(2)]}),(0,dt.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 ml-2",children:"\xd7"})]}),(0,dt.jsxs)("div",{className:"space-y-3 text-xs",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h5",{className:"font-bold text-sm text-gray-700 dark:text-gray-300 mb-1",children:"By Source"}),Object.keys(c).length>0?Object.entries(c).map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{className:"flex justify-between",children:[(0,dt.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[t,":"]}),(0,dt.jsxs)("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:[r.count," txn, $",r.total.toFixed(2)]})]},t)}):(0,dt.jsx)("p",{className:"text-gray-500 italic",children:"No source data."})]}),(0,dt.jsxs)("div",{className:"border-t dark:border-gray-600 pt-2",children:[(0,dt.jsx)("h5",{className:"font-bold text-sm text-gray-700 dark:text-gray-300 mb-1",children:"By Amount ($5 Buckets)"}),Object.keys(d).length>0?Object.entries(d).sort().map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{className:"flex justify-between",children:[(0,dt.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[t,":"]}),(0,dt.jsxs)("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:[r," transactions"]})]},t)}):(0,dt.jsx)("p",{className:"text-gray-500 italic",children:"No bucket data."})]})]})]})},xL=e=>{let{data:t,position:r,onClose:n}=e;const[i,s]=a.useState(!1),o=a.useRef(null);if(!t)return null;const{value:l=0,sources:c={},buckets:d={}}=t;return(0,dt.jsxs)("div",{className:"fixed z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg p-4 max-w-md pointer-events-auto",style:{left:r.x,top:r.y,pointerEvents:"auto"},onMouseEnter:()=>{s(!0),o.current&&(clearTimeout(o.current),o.current=null)},onMouseLeave:()=>{s(!1),o.current=setTimeout(()=>{n()},300)},children:[(0,dt.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,dt.jsxs)("h4",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:["Actual Refunds: $",l.toFixed(2)]}),(0,dt.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 ml-2",children:"\xd7"})]}),(0,dt.jsxs)("div",{className:"space-y-3 text-xs",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h5",{className:"font-bold text-sm text-gray-700 dark:text-gray-300 mb-1",children:"By Source"}),Object.keys(c).length>0?Object.entries(c).map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{className:"flex justify-between",children:[(0,dt.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[t,":"]}),(0,dt.jsxs)("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:[r.count," txn, $",r.total.toFixed(2)]})]},t)}):(0,dt.jsx)("p",{className:"text-gray-500 italic",children:"No source data."})]}),(0,dt.jsxs)("div",{className:"border-t dark:border-gray-600 pt-2",children:[(0,dt.jsx)("h5",{className:"font-bold text-sm text-gray-700 dark:text-gray-300 mb-1",children:"By Amount ($5 Buckets)"}),Object.keys(d).length>0?Object.entries(d).sort().map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{className:"flex justify-between",children:[(0,dt.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[t,":"]}),(0,dt.jsxs)("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:[r," transactions"]})]},t)}):(0,dt.jsx)("p",{className:"text-gray-500 italic",children:"No bucket data."})]})]})]})},bL=e=>{var t;let{data:r,selectedUserId:n="",selectedProductId:i=""}=e;const[s,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(null),d=a.useRef(null);let u=[],h={},p={},m={},f={};if(null!==r&&void 0!==r&&r.data){if(u=r.data.dates||[],h=r.data.daily_metrics||{},p=r.data.cumulative_metrics||{},m=r.data.user_timelines||{},f=r.data.user_daily_metrics||{},console.log("\ud83d\udd0d [EventTimelineTableV3] Received data structure:"),console.log("\ud83d\udd0d   - dates count:",u.length),console.log("\ud83d\udd0d   - dailyMetrics dates:",Object.keys(h).length),console.log("\ud83d\udd0d   - userDailyMetrics users:",Object.keys(f).length),console.log("\ud83d\udd0d   - selectedUserId:",n),Object.keys(f).length>0){console.log("\ud83d\udd0d   - userDailyMetrics keys:",Object.keys(f));const e=Object.keys(f)[0],t=f[e];if(console.log("\ud83d\udd0d   - First user ID:",e),console.log("\ud83d\udd0d   - First user dates:",Object.keys(t||{})),t&&Object.keys(t).length>0){const e=Object.keys(t)[0],r=t[e];console.log("\ud83d\udd0d   - First date data sample:",e,r),console.log("\ud83d\udd0d   - Has tooltip_data:",!(null===r||void 0===r||!r.tooltip_data)),null!==r&&void 0!==r&&r.tooltip_data&&console.log("\ud83d\udd0d   - tooltip_data structure:",Object.keys(r.tooltip_data))}if(n&&n in f){console.log("\ud83d\udd0d   - selectedUserId found in userDailyMetrics!");const e=f[n];if(console.log("\ud83d\udd0d   - selectedUser dates:",Object.keys(e||{})),e&&Object.keys(e).length>0){const t=Object.keys(e)[0],r=e[t];console.log("\ud83d\udd0d   - selectedUser sample date data:",t,r),console.log("\ud83d\udd0d   - selectedUser has tooltip_data:",!(null===r||void 0===r||!r.tooltip_data))}}else n&&(console.log("\ud83d\udd0d   - selectedUserId NOT found in userDailyMetrics:",n),console.log("\ud83d\udd0d   - Available user IDs:",Object.keys(f)))}const e="2025-05-14";if(n&&n.includes("056F1F33-A295-47F1-9284"))if(console.log("\ud83d\udd25 STAGE3 SUCCESS: V3 Data Correctly Fixed"),console.log("\ud83d\udd25   - Selected User ID:",n),console.log("\ud83d\udd25   - Target Date:",e),f[n]&&f[n][e]){const t=f[n][e];console.log("\ud83d\udd25   - trial_converted:",t.trial_converted),console.log("\ud83d\udd25   - initial_purchase:",t.initial_purchase),1===t.trial_converted&&0===t.initial_purchase?console.log("\ud83d\udd25   \u2705 BUSINESS RULE COMPLIANCE: trial_converted=1, initial_purchase=0 (FIXED!)"):console.log("\ud83d\udd25   \u274c BUSINESS RULE VIOLATION: Both values still showing as 1")}else console.log("\ud83d\udd25   \u274c TARGET USER DATA NOT FOUND in userDailyMetrics")}a.useEffect(()=>()=>{d.current&&clearTimeout(d.current)},[]),console.log("[DEBUG V3] EventTimelineTable received data:",r),console.log("[DEBUG V3] Data structure check:",{hasData:!!r,hasDataData:!(null===r||void 0===r||!r.data),dataKeys:r?Object.keys(r):[],dataDataKeys:null!==r&&void 0!==r&&r.data?Object.keys(r.data):[]}),console.log("[DEBUG V3] Raw data.data structure:",null===r||void 0===r?void 0:r.data),console.log("[DEBUG V3] Available keys in data.data:",null!==r&&void 0!==r&&r.data?Object.keys(r.data):[]),null!==r&&void 0!==r&&null!==(t=r.data)&&void 0!==t&&t.daily_metrics&&(console.log("[DEBUG V3] daily_metrics type:",typeof r.data.daily_metrics),console.log("[DEBUG V3] daily_metrics sample keys:",Object.keys(r.data.daily_metrics).slice(0,3)));const{availableUsers:g,availableProducts:x}=(0,a.useMemo)(()=>{const e=new Set,t=new Set;return Object.keys(f).forEach(t=>{e.add(t)}),Object.keys(m).forEach(r=>{var n;e.add(r);const a=m[r];a.events&&a.events.forEach(e=>{e.product_id&&t.add(e.product_id)}),null!==(n=a.summary)&&void 0!==n&&n.product_summaries&&Object.keys(a.summary.product_summaries).forEach(e=>{t.add(e)})}),Object.values(h).forEach(r=>{var n;null!==(n=r.estimated_revenue_breakdown)&&void 0!==n&&n.user_breakdowns&&Object.keys(r.estimated_revenue_breakdown.user_breakdowns).forEach(n=>{e.add(n);const a=r.estimated_revenue_breakdown.user_breakdowns[n];a.product_breakdowns&&Object.keys(a.product_breakdowns).forEach(e=>{t.add(e)})})}),{availableUsers:Array.from(e).sort(),availableProducts:Array.from(t).sort()}},[f,m,h]),b=(0,a.useMemo)(()=>{if(!n&&!i)return{dailyMetrics:h,cumulativeMetrics:p};const e={},t={};if(n&&!i){const r="2025-05-14",a=n.includes("056F1F33-A295-47F1-9284");a&&(console.log("\ud83d\udd25 STAGE3 FILTERED DATA DEBUG - Processing Target User:"),console.log("\ud83d\udd25   - Selected User ID:",n),console.log("\ud83d\udd25   - Raw User Metrics:",f[n]));const i=f[n];if(i){let n={trial_started:0,trial_ended:0,trial_converted:0,trial_cancelled:0,initial_purchase:0,subscription_cancelled:0,revenue:0,refund:0,refund_count:0};u.forEach(s=>{const o=i[s];o?(e[s]=Re(Re({},o),{},{revenue_net:(o.revenue||0)-(o.refund||0)}),a&&s===r&&(console.log("\ud83d\udd25 STAGE3 FILTERED DATA DEBUG - Target Date Processing:"),console.log("\ud83d\udd25   - Date:",s),console.log("\ud83d\udd25   - Raw Backend Data:",o),console.log("\ud83d\udd25   - trial_converted (backend):",o.trial_converted),console.log("\ud83d\udd25   - initial_purchase (backend):",o.initial_purchase),console.log("\ud83d\udd25   - Filtered Daily Result:",e[s])),n.trial_started+=o.trial_started||0,n.trial_ended+=o.trial_ended||0,n.trial_converted+=o.trial_converted||0,n.trial_cancelled+=o.trial_cancelled||0,n.initial_purchase+=o.initial_purchase||0,n.subscription_cancelled+=o.subscription_cancelled||0,n.revenue+=o.revenue||0,n.refund+=o.refund||0,n.refund_count+=o.refund_count||0,t[s]={trial_pending:o.trial_pending||0,subscription_active:o.subscription_active||0,estimated_revenue:o.estimated_revenue||0,cumulative_trial_started:n.trial_started,cumulative_trial_ended:n.trial_ended,cumulative_trial_converted:n.trial_converted,cumulative_trial_cancelled:n.trial_cancelled,cumulative_initial_purchase:n.initial_purchase,cumulative_subscription_cancelled:n.subscription_cancelled,cumulative_revenue:n.revenue,cumulative_refund:n.refund,cumulative_refund_count:n.refund_count,cumulative_revenue_net:n.revenue-n.refund}):(e[s]={trial_started:0,trial_pending:0,trial_ended:0,trial_converted:0,trial_cancelled:0,initial_purchase:0,subscription_active:0,subscription_cancelled:0,revenue:0,refund:0,refund_count:0,estimated_revenue:0,revenue_net:0},t[s]={trial_pending:0,subscription_active:0,estimated_revenue:0,cumulative_trial_started:n.trial_started,cumulative_trial_ended:n.trial_ended,cumulative_trial_converted:n.trial_converted,cumulative_trial_cancelled:n.trial_cancelled,cumulative_initial_purchase:n.initial_purchase,cumulative_subscription_cancelled:n.subscription_cancelled,cumulative_revenue:n.revenue,cumulative_refund:n.refund,cumulative_refund_count:n.refund_count,cumulative_revenue_net:n.revenue-n.refund})})}else u.forEach(r=>{e[r]={trial_started:0,trial_pending:0,trial_ended:0,trial_converted:0,trial_cancelled:0,initial_purchase:0,subscription_active:0,subscription_cancelled:0,revenue:0,refund:0,refund_count:0,estimated_revenue:0,revenue_net:0},t[r]={trial_pending:0,subscription_active:0,estimated_revenue:0,cumulative_trial_started:0,cumulative_trial_ended:0,cumulative_trial_converted:0,cumulative_trial_cancelled:0,cumulative_initial_purchase:0,cumulative_subscription_cancelled:0,cumulative_revenue:0,cumulative_refund:0,cumulative_refund_count:0,cumulative_revenue_net:0}})}else if(i&&!n)u.forEach(r=>{e[r]=Re({},h[r]),p[r]&&Object.keys(p[r]).length>0?t[r]=Re({},p[r]):(console.warn("Missing cumulative metrics for date ".concat(r,", this should be handled by Stage3RevenueResultsV3")),t[r]=Re({},p[r])||{})});else if(n&&i){const r=f[n];if(r){let n={trial_started:0,trial_ended:0,trial_converted:0,trial_cancelled:0,initial_purchase:0,subscription_cancelled:0,revenue:0,refund:0,refund_count:0};u.forEach(a=>{const i=r[a];i?(e[a]=Re(Re({},i),{},{revenue_net:(i.revenue||0)-(i.refund||0)}),n.trial_started+=i.trial_started||0,n.trial_ended+=i.trial_ended||0,n.trial_converted+=i.trial_converted||0,n.trial_cancelled+=i.trial_cancelled||0,n.initial_purchase+=i.initial_purchase||0,n.subscription_cancelled+=i.subscription_cancelled||0,n.revenue+=i.revenue||0,n.refund+=i.refund||0,n.refund_count+=i.refund_count||0,t[a]={trial_pending:i.trial_pending||0,subscription_active:i.subscription_active||0,estimated_revenue:i.estimated_revenue||0,cumulative_trial_started:n.trial_started,cumulative_trial_ended:n.trial_ended,cumulative_trial_converted:n.trial_converted,cumulative_trial_cancelled:n.trial_cancelled,cumulative_initial_purchase:n.initial_purchase,cumulative_subscription_cancelled:n.subscription_cancelled,cumulative_revenue:n.revenue,cumulative_refund:n.refund,cumulative_refund_count:n.refund_count,cumulative_revenue_net:n.revenue-n.refund}):(e[a]={trial_started:0,trial_pending:0,trial_ended:0,trial_converted:0,trial_cancelled:0,initial_purchase:0,subscription_active:0,subscription_cancelled:0,revenue:0,refund:0,refund_count:0,estimated_revenue:0,revenue_net:0},t[a]={trial_pending:0,subscription_active:0,estimated_revenue:0,cumulative_trial_started:n.trial_started,cumulative_trial_ended:n.trial_ended,cumulative_trial_converted:n.trial_converted,cumulative_trial_cancelled:n.trial_cancelled,cumulative_initial_purchase:n.initial_purchase,cumulative_subscription_cancelled:n.subscription_cancelled,cumulative_revenue:n.revenue,cumulative_refund:n.refund,cumulative_refund_count:n.refund_count,cumulative_revenue_net:n.revenue-n.refund})})}else u.forEach(r=>{e[r]={trial_started:0,trial_pending:0,trial_ended:0,trial_converted:0,trial_cancelled:0,initial_purchase:0,subscription_active:0,subscription_cancelled:0,revenue:0,refund:0,refund_count:0,estimated_revenue:0,revenue_net:0},t[r]={trial_pending:0,subscription_active:0,estimated_revenue:0,cumulative_trial_started:0,cumulative_trial_ended:0,cumulative_trial_converted:0,cumulative_trial_cancelled:0,cumulative_initial_purchase:0,cumulative_subscription_cancelled:0,cumulative_revenue:0,cumulative_refund:0,cumulative_refund_count:0,cumulative_revenue_net:0}})}return{dailyMetrics:e,cumulativeMetrics:t}},[n,i,h,p,f,u]);if(!r)return(0,dt.jsx)("div",{className:"text-center py-8",children:(0,dt.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No timeline data available. Run an analysis to see results."})});const y=e=>{if(null===e||void 0===e)return"$0";const t=Math.round(Number(e));return"$".concat(t.toLocaleString())},v=e=>null===e||void 0===e?"0":Number(e).toLocaleString(),_=[{key:"daily_trial_started",label:"Trial Started",category:"daily_absolute",categoryLabel:"Daily Absolute Values",getValue:e=>{var t;return(null===(t=b.dailyMetrics[e])||void 0===t?void 0:t.trial_started)||0},getCumulativeValue:e=>{var t;return(null===(t=b.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_trial_started)||0},format:v},{key:"daily_trial_pending",label:"Trial Pending",category:"daily_absolute",getValue:e=>{var t;return(null===(t=b.dailyMetrics[e])||void 0===t?void 0:t.trial_pending)||0},getCumulativeValue:e=>{var t;return(null===(t=b.dailyMetrics[e])||void 0===t?void 0:t.trial_pending)||0},format:v},{key:"daily_trial_ended",label:"Trial Ended",category:"daily_absolute",getValue:e=>{var t;return(null===(t=b.dailyMetrics[e])||void 0===t?void 0:t.trial_ended)||0},getCumulativeValue:e=>{var t;return(null===(t=b.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_trial_ended)||0},format:v},{key:"daily_trial_cancelled",label:"Trial Cancelled",category:"daily_absolute",getValue:e=>{var t;return(null===(t=b.dailyMetrics[e])||void 0===t?void 0:t.trial_cancelled)||0},getCumulativeValue:e=>{var t;return(null===(t=b.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_trial_cancelled)||0},format:v},{key:"daily_trial_converted",label:"Trial Converted",category:"daily_absolute",getValue:e=>{var t;return(null===(t=b.dailyMetrics[e])||void 0===t?void 0:t.trial_converted)||0},getCumulativeValue:e=>{var t;return(null===(t=b.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_trial_converted)||0},format:v},{key:"daily_initial_purchase",label:"Initial Purchase",category:"daily_absolute",getValue:e=>{var t;return(null===(t=b.dailyMetrics[e])||void 0===t?void 0:t.initial_purchase)||0},getCumulativeValue:e=>{var t;return(null===(t=b.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_initial_purchase)||0},format:v},{key:"daily_subscription_active",label:"Subscription Active",category:"daily_absolute",getValue:e=>{var t;return(null===(t=b.dailyMetrics[e])||void 0===t?void 0:t.subscription_active)||0},getCumulativeValue:e=>{var t;return(null===(t=b.dailyMetrics[e])||void 0===t?void 0:t.subscription_active)||0},format:v},{key:"daily_subscription_cancelled",label:"Subscription Cancelled",category:"daily_absolute",getValue:e=>{var t;return(null===(t=b.dailyMetrics[e])||void 0===t?void 0:t.subscription_cancelled)||0},getCumulativeValue:e=>{var t;return(null===(t=b.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_subscription_cancelled)||0},format:v},{key:"daily_users",label:"Daily Users",category:"daily_absolute",getValue:e=>{var t;return(null===(t=b.dailyMetrics[e])||void 0===t?void 0:t.daily_users)||0},getCumulativeValue:e=>{var t;return(null===(t=b.dailyMetrics[e])||void 0===t?void 0:t.cumulative_users)||0},format:v},{key:"daily_refund_count",label:"Refunds",category:"daily_absolute",getValue:e=>{var t;return(null===(t=b.dailyMetrics[e])||void 0===t?void 0:t.refund_count)||0},getCumulativeValue:e=>{var t;return(null===(t=b.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_refund_count)||0},format:v},{key:"daily_revenue",label:"Revenue",category:"revenue",categoryLabel:"Revenue Values",getValue:e=>{var t;return(null===(t=b.dailyMetrics[e])||void 0===t?void 0:t.revenue)||0},getCumulativeValue:e=>{var t;return(null===(t=b.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_revenue)||0},format:y,isRevenue:!0,getTooltipData:e=>{var t,r;return((e,t)=>{var r;const n="number"===typeof t?t:0;if(0===n)return null;const a=null===(r=h[e])||void 0===r?void 0:r.revenue_tooltip_data;return a?Re({value:n},a):null})(e,s?(null===(t=b.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_revenue)||0:(null===(r=b.dailyMetrics[e])||void 0===r?void 0:r.revenue)||0)}},{key:"daily_refund",label:"Refunds",category:"revenue",getValue:e=>{var t;return(null===(t=b.dailyMetrics[e])||void 0===t?void 0:t.refund)||0},getCumulativeValue:e=>{var t;return(null===(t=b.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_refund)||0},format:y,isRefund:!0,getTooltipData:e=>{var t,r;return((e,t)=>{var r;const n="number"===typeof t?t:0;if(0===n)return null;const a=null===(r=h[e])||void 0===r?void 0:r.refund_tooltip_data;return a?Re({value:n},a):null})(e,s?(null===(t=b.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_refund)||0:(null===(r=b.dailyMetrics[e])||void 0===r?void 0:r.refund)||0)}},{key:"daily_revenue_net",label:"Net Revenue",category:"revenue",getValue:e=>{var t;return(null===(t=b.dailyMetrics[e])||void 0===t?void 0:t.revenue_net)||0},getCumulativeValue:e=>{var t;return(null===(t=b.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_revenue_net)||0},format:y},{key:"daily_estimated_revenue",label:"Estimated Revenue",category:"revenue",isEstimatedRevenue:!0,getValue:e=>{var t;return(null===(t=b.dailyMetrics[e])||void 0===t?void 0:t.estimated_revenue)||0},getCumulativeValue:e=>{var t;return(null===(t=b.dailyMetrics[e])||void 0===t?void 0:t.estimated_revenue)||0},format:y,getTooltipData:e=>{var t,r;return((e,t)=>{const r="number"===typeof t?t:0;if(0===r&&!n)return null;if(n){const t=f[n];return t&&t[e]&&t[e].tooltip_data?t[e].tooltip_data:(console.warn("[WARN] No individual tooltip data for user ".concat(n," on date ").concat(e)),{value:0,breakdown:{formula:"\u26ab Inactive: Est_Revenue = 0 (No active trial or subscription)",calculation:"No data for this user on this date.",components:{"User ID":n.substring(0,16)+"...",Date:e,"Current State":"Inactive"},components_order:["User ID","Date","Current State"]}})}{const t=h[e];if(!t||!t.estimated_revenue_breakdown)return console.warn("[WARN] No aggregate breakdown data for date ".concat(e)),null;const n=t.estimated_revenue_breakdown;return{value:r,estimated_trial_revenue_component:n.total_trial_revenue,estimated_trial_converted_revenue_component:n.total_trial_converted_revenue,estimated_initial_purchase_revenue_component:n.total_initial_purchase_revenue,estimated_trial_refund_component:n.total_trial_refunds,estimated_trial_converted_refund_component:n.total_trial_converted_refunds,estimated_initial_purchase_refund_component:n.total_initial_purchase_refunds,breakdown:n}}})(e,s?(null===(t=b.dailyMetrics[e])||void 0===t?void 0:t.estimated_revenue)||0:(null===(r=b.dailyMetrics[e])||void 0===r?void 0:r.estimated_revenue)||0)}},{key:"daily_estimated_refunds",label:"Estimated Refunds (Potential)",category:"revenue",isEstimatedRefunds:!0,getValue:e=>{const t=b.dailyMetrics[e];return((null===t||void 0===t?void 0:t.estimated_trial_refund_component)||0)+((null===t||void 0===t?void 0:t.estimated_subscription_refund_component)||0)},getCumulativeValue:e=>{const t=b.dailyMetrics[e];return((null===t||void 0===t?void 0:t.estimated_trial_refund_component)||0)+((null===t||void 0===t?void 0:t.estimated_subscription_refund_component)||0)},format:y,getTooltipData:e=>{const t=b.dailyMetrics[e],r=(null===t||void 0===t?void 0:t.estimated_trial_refund_component)||0,a=(null===t||void 0===t?void 0:t.estimated_subscription_refund_component)||0,s=r+a;return 0===s?null:((e,t,r,a)=>{if(0===a)return null;if(console.log("[DEBUG] getEstimatedRefundsTooltipData called with:",{date:e,trialRefunds:t,subscriptionRefunds:r,totalRefunds:a,selectedUserId:n,selectedProductId:i,isAggregateView:!n}),!n){console.log("[DEBUG] Creating aggregate refunds tooltip for date ".concat(e));const n=h[e];if(!n)return console.warn("[WARN] No aggregate data found for date ".concat(e)),null;let i=0,s=0,o=0;return Object.keys(f).forEach(t=>{const r=f[t][e];r&&(o++,(r.estimated_trial_refund_component||0)>0&&i++,(r.estimated_subscription_refund_component||0)>0&&s++)}),{value:a,estimated_trial_refund_component:t,estimated_subscription_refund_component:r,estimated_trial_revenue_component:t,estimated_trial_converted_revenue_component:n.estimated_trial_converted_refund_component||0,estimated_initial_purchase_revenue_component:n.estimated_initial_purchase_refund_component||0,breakdown:{formula:"\ud83d\udd04 Aggregate Estimated Potential Refunds: \u03a3(Trial_Refunds) + \u03a3(Subscription_Refunds) across all users",calculation:"Trial: $".concat(t.toFixed(2)," (").concat(i," users) + Subscription: $").concat(r.toFixed(2)," (").concat(s," users) = $").concat(a.toFixed(2)),components:{"View Type":"Aggregate (All Users)",Date:e,"Total Users":o,"Total Estimated Refunds (Potential)":"$".concat(a.toFixed(2)),"Estimated Refunds from Trials (Potential)":"$".concat(t.toFixed(2)),"Users with Trial Refunds":i,"Estimated Refunds from Subscriptions (Potential)":"$".concat(r.toFixed(2)),"Users with Subscription Refunds":s,"Trial Refunds Explanation":"Refunds expected if pending trials convert then users request refunds","Subscription Refunds Explanation":"Refunds expected from active subscriptions based on age and historical patterns"},components_order:["View Type","Date","Total Users","Total Estimated Refunds (Potential)","Estimated Refunds from Trials (Potential)","Users with Trial Refunds","Estimated Refunds from Subscriptions (Potential)","Users with Subscription Refunds","Trial Refunds Explanation","Subscription Refunds Explanation"]}}}const s=f[n];if(!s||!s[e])return console.warn("[WARN] No user metrics found for user ".concat(n," on date ").concat(e)),null;const o=s[e].tooltip_data;if(!o||!o.breakdown)return console.warn("[WARN] No tooltip breakdown data found for estimated refunds"),null;const l=o.breakdown.components||{};return{value:a,breakdown:{formula:"\ud83d\udd04 Estimated Potential Refunds: Trial_Refunds + Subscription_Refunds",calculation:"Trial: $".concat(t.toFixed(2)," + Subscription: $").concat(r.toFixed(2)," = $").concat(a.toFixed(2)),components:{"View Type":"Individual User","Product ID":l["Product ID"]||"Unknown","Current State":l["Current State"]||"Unknown","Total Estimated Refunds (Potential)":"$".concat(a.toFixed(2)),"Estimated Refunds from Trial (Potential)":"$".concat(t.toFixed(2)),"Estimated Refunds from Subscription (Potential)":"$".concat(r.toFixed(2)),"Segment Base Refund Rate":l["Segment Base Refund Rate"]||"Unknown","Current Refund Probability":l["Current Refund Probability"]||l["Refund Likelihood"]||"Unknown",Notes:t>0?"Refunds expected if trial converts then user requests refund":"Refunds expected based on subscription age and historical patterns"},components_order:["View Type","Product ID","Current State","Total Estimated Refunds (Potential)","Estimated Refunds from Trial (Potential)","Estimated Refunds from Subscription (Potential)","Segment Base Refund Rate","Current Refund Probability","Notes"]}}})(e,r,a,s)}}],k=_.reduce((e,t)=>(e[t.category]||(e[t.category]={label:t.categoryLabel||t.category,metrics:[]}),e[t.category].metrics.push(t),e),{});return(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsxs)("div",{className:"mb-8 bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,dt.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Daily Event & Revenue Timeline"}),(0,dt.jsx)("div",{className:"flex gap-2",children:(0,dt.jsx)("button",{onClick:()=>o(!s),className:"px-3 py-1 text-sm rounded-full ".concat(s?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-white"),children:s?"Show Daily":"Show Cumulative"})})]}),(0,dt.jsx)("div",{className:"overflow-x-auto",children:(0,dt.jsxs)("table",{className:"min-w-full text-sm border dark:border-gray-600",children:[(0,dt.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white sticky left-0 bg-gray-50 dark:bg-gray-700 z-10 min-w-[200px]",children:"Metric"}),u.map(e=>(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-center text-gray-700 dark:text-white whitespace-nowrap min-w-[80px]",children:e},e))]})}),(0,dt.jsx)("tbody",{className:"bg-white dark:bg-gray-800",children:Object.entries(k).map(e=>{let[t,r]=e;return(0,dt.jsxs)(a.Fragment,{children:[(0,dt.jsx)("tr",{className:"bg-gray-100 dark:bg-gray-600",children:(0,dt.jsx)("td",{colSpan:u.length+1,className:"p-2 font-semibold text-gray-800 dark:text-white border-b dark:border-gray-600",children:r.label})}),r.metrics.map(e=>(0,dt.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 font-medium text-gray-700 dark:text-white sticky left-0 bg-white dark:bg-gray-800 z-10",children:e.label}),u.map(t=>{const r=s?e.getCumulativeValue(t):e.getValue(t);return(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-center text-gray-700 dark:text-white ".concat(e.isEstimatedRevenue||e.isRevenue||e.isRefund||e.isEstimatedRefunds?"cursor-help hover:bg-yellow-50 dark:hover:bg-yellow-900/20 relative":""),onMouseEnter:e.isRevenue||e.isRefund||e.isEstimatedRevenue||e.isEstimatedRefunds?n=>{d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{const a=n.target.getBoundingClientRect(),i=e.getTooltipData(t,r);if(i){const t=400,r=480,n=window.innerWidth-a.right,s=a.left;let o,l;o=n>=t+20?a.right+10:s>=t+20?a.left-t-10:Math.max(10,(window.innerWidth-t)/2);const d=a.top+a.height/2;l=Math.max(10,d-r-200),l=Math.min(l,window.innerHeight-r-10);let u="estimated_revenue";e.isRevenue?u="revenue":e.isRefund?u="refund":e.isEstimatedRefunds&&(u="estimated_refunds"),c({type:u,data:i,position:{x:o,y:l}})}},150)}:void 0,onMouseLeave:e.isEstimatedRevenue||e.isRevenue||e.isRefund||e.isEstimatedRefunds?()=>{d.current&&(clearTimeout(d.current),d.current=null);const e=setTimeout(()=>{c(null)},100);d.current=e}:void 0,children:e.format(r)},t)})]},e.key))]},t)})})]})}),0===u.length&&(0,dt.jsx)("div",{className:"text-center py-8",children:(0,dt.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No timeline data available. Run an analysis to see results."})})]}),"estimated_revenue"===(null===l||void 0===l?void 0:l.type)&&(0,dt.jsx)(fL,{data:l.data,position:l.position,onClose:()=>c(null),selectedUserId:n,selectedProductId:i}),"revenue"===(null===l||void 0===l?void 0:l.type)&&(0,dt.jsx)(gL,{data:l.data,position:l.position,onClose:()=>c(null),selectedUserId:n,selectedProductId:i}),"refund"===(null===l||void 0===l?void 0:l.type)&&(0,dt.jsx)(xL,{data:l.data,position:l.position,onClose:()=>c(null),selectedUserId:n,selectedProductId:i}),"estimated_refunds"===(null===l||void 0===l?void 0:l.type)&&(0,dt.jsx)(fL,{data:l.data,position:l.position,onClose:()=>c(null),selectedUserId:n,selectedProductId:i})]})},yL=e=>{var t,r,n,i,s,o,l,c,d;let{data:u}=e;const[h,p]=(0,a.useState)(""),[m,f]=(0,a.useState)(""),[g,x]=(0,a.useState)("");let b=null;null!==u&&void 0!==u&&null!==(t=u.stage_results)&&void 0!==t&&t.stage3?b=u.stage_results.stage3:null!==u&&void 0!==u&&null!==(r=u.data)&&void 0!==r&&null!==(n=r.stage_results)&&void 0!==n&&n.stage3&&(b=u.data.stage_results.stage3);const y=(null===(i=b)||void 0===i?void 0:i.timeline_results)||{},v=y.aggregate_stats||{},_=y.user_timelines||{},k=y.timeline_data||{},j=y.user_daily_metrics||{},w=y.user_timelines_events||{};if(Object.keys(y).length>0){console.log("\ud83d\udd0d [FRONTEND TIMELINE DEBUG] Data received from backend:"),console.log("\ud83d\udd0d   - timeline_data dates:",k?Object.keys(k).length:0),console.log("\ud83d\udd0d   - user_daily_metrics users:",j?Object.keys(j).length:0),console.log("\ud83d\udd0d   - user_timelines_events users:",w?Object.keys(w).length:0),console.log("***** SEND THIS TO AI - DEBUG LOG #1 *****"),console.log("ISSUE 2 DEBUG - Specific User Daily Metrics Check:");const e="$device:07BDA330-D882-45B2-946E-A2E81B011718";if(console.log("Target User ID:",e),console.log("User found in backendUserDailyMetrics:",e in j),j[e]){const t=j[e];console.log("Available dates for user:",Object.keys(t));const r=t["2025-05-27"];console.log("May 27th data exists:",r?"YES":"NO"),r&&(console.log("May 27th COMPLETE data:",r),console.log("trial_started:",r.trial_started),console.log("trial_ended:",r.trial_ended,"\u2190 Should be 1"),console.log("trial_cancelled:",r.trial_cancelled,"\u2190 Should be 1"),console.log("trial_converted:",r.trial_converted),console.log("trial_pending:",r.trial_pending))}else console.log("User NOT FOUND in backendUserDailyMetrics!"),console.log("Available users (first 5):",Object.keys(j).slice(0,5));if(console.log("***** END DEBUG LOG #1 *****"),console.log("***** SEND THIS TO AI - DEBUG LOG #2 *****"),console.log("ISSUE 1 DEBUG - Product Selector Data Check:"),console.log("User found in backendUserTimelinesEvents:",e in w),w[e]){const t=w[e];console.log("User timeline events structure keys:",Object.keys(t)),console.log("Has summary:","summary"in t),t.summary?(console.log("Summary keys:",Object.keys(t.summary)),console.log("Has product_summaries:","product_summaries"in t.summary),t.summary.product_summaries?(console.log("Product summaries keys:",Object.keys(t.summary.product_summaries)),console.log("Number of products:",Object.keys(t.summary.product_summaries).length),console.log("COMPLETE product_summaries data:",t.summary.product_summaries)):console.log("ERROR: product_summaries is missing from summary!")):console.log("ERROR: summary is missing from user timeline events!")}else console.log("User NOT FOUND in backendUserTimelinesEvents!"),console.log("Available users in backendUserTimelinesEvents (first 5):",Object.keys(w).slice(0,5));if(console.log("***** END DEBUG LOG #2 *****"),console.log("***** SEND THIS TO AI - DEBUG LOG #3 *****"),console.log("GENERAL DATA STRUCTURE CHECK:"),console.log("backendTimelineData exists:",!!k),console.log("backendUserDailyMetrics exists:",!!j),console.log("backendUserTimelinesEvents exists:",!!w),console.log("Number of users in backendUserDailyMetrics:",Object.keys(j).length),console.log("Number of users in backendUserTimelinesEvents:",Object.keys(w).length),Object.keys(j).length>0){const e=Object.keys(j)[0],t=j[e],r=Object.keys(t)[0];console.log("Sample user daily metrics structure:",{userId:e,date:r,metrics:t[r]})}if(console.log("***** END DEBUG LOG #3 *****"),k&&Object.keys(k).length>0){const e=Object.keys(k)[0],t=k[e];console.log("\ud83d\udd0d   - Sample timeline_data[".concat(e,"]:")),console.log("\ud83d\udd0d     - trial_started:",t.trial_started||0),console.log("\ud83d\udd0d     - trial_converted:",t.trial_converted||0),console.log("\ud83d\udd0d     - revenue:",t.revenue||0),console.log("\ud83d\udd0d     - estimated_revenue:",t.estimated_revenue||0)}if(j&&Object.keys(j).length>0){const e=Object.keys(j)[0],t=j[e];if(console.log("\ud83d\udd0d   - Sample user_daily_metrics[".concat(e,"]:")),console.log("\ud83d\udd0d     - Dates available:",Object.keys(t).length),Object.keys(t).length>0){const e=Object.keys(t)[0],r=t[e];console.log("\ud83d\udd0d     - Sample date[".concat(e,"]:")),console.log("\ud83d\udd0d       - trial_started:",r.trial_started||0),console.log("\ud83d\udd0d       - trial_converted:",r.trial_converted||0),console.log("\ud83d\udd0d       - revenue:",r.revenue||0),console.log("\ud83d\udd0d       - estimated_revenue:",r.estimated_revenue||0)}}if(w&&Object.keys(w).length>0){const e=Object.keys(w)[0],t=w[e];console.log("\ud83d\udd0d   - Sample user_timelines_events[".concat(e,"]:")),console.log("\ud83d\udd0d     - Structure keys:",Object.keys(t)),console.log("\ud83d\udd0d     - Events count:",t.events?t.events.length:0),console.log("\ud83d\udd0d     - Products count:",t.products?Object.keys(t.products).length:0),t.summary&&(console.log("\ud83d\udd0d     - Summary total_estimated_revenue:",t.summary.total_estimated_revenue||0),console.log("\ud83d\udd0d     - Summary total_actual_revenue:",t.summary.total_actual_revenue||0))}}const N=(0,a.useMemo)(()=>{const e={};return Object.entries(w).forEach(t=>{let[r,n]=t;if(n.summary&&n.summary.product_summaries){const t=Object.keys(n.summary.product_summaries);t.length>1&&(e[r]=t)}}),e},[w]),S=(0,a.useMemo)(()=>{if(!h||!w[h])return[];const e=w[h];return e.summary&&e.summary.product_summaries?Object.keys(e.summary.product_summaries):[]},[h,w]),O=S.length>1,C=(0,a.useMemo)(()=>{const e=w&&Object.keys(w).length>0?w:_,t=Object.entries(e).map(e=>{let[t,r]=e,n="pending",a=0,i=0;r.summary?(n=r.summary.outcome_type||"pending",a=r.summary.total_estimated_revenue||0,i=r.summary.total_actual_revenue||0):void 0!==r.outcome_type&&(n=r.outcome_type||"pending",a=r.total_estimated_revenue||0,i=r.total_actual_revenue||0);const s=!!N[t],o=s?" \ud83d\udce6":"";return{userId:t,timeline:r,displayName:"".concat(t.substring(0,8),"... (").concat(n,")").concat(o),fullId:t,outcomeType:n,estimatedRevenue:a,actualRevenue:i,hasMultipleProducts:s}});return m?t.filter(e=>e.userId.toLowerCase().includes(m.toLowerCase())||e.outcomeType.toLowerCase().includes(m.toLowerCase())):t},[_,w,m,N]);if(!b)return(0,dt.jsx)("div",{className:"text-center py-8",children:(0,dt.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No Stage 3 data available. Run analysis to see revenue timeline results."})});const E=e=>"number"!==typeof e?"$0":"$"+e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});return(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,dt.jsx)($e,{size:24,className:"text-purple-600 dark:text-purple-400"}),(0,dt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Stage 3: Revenue Timeline Generation Results"}),(0,dt.jsxs)("div",{className:"ml-auto flex items-center gap-1 text-purple-600 dark:text-purple-400 text-sm",children:[(0,dt.jsx)("span",{children:"\u2713"}),(0,dt.jsx)("span",{children:"Revenue Estimation & Timeline Projection"})]})]}),(0,dt.jsxs)("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,dt.jsx)(uL,{size:20,className:"text-blue-600 dark:text-blue-400"}),(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"View Selection"})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select User (or leave empty for aggregate)"}),(0,dt.jsxs)("div",{className:"space-y-2",children:[(0,dt.jsx)("input",{type:"text",placeholder:"Search by User ID or outcome...",value:m,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"}),(0,dt.jsxs)("select",{value:h,onChange:e=>{p(e.target.value),x("")},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:[(0,dt.jsx)("option",{value:"",children:"\ud83c\udf0d Aggregate View (All Users)"}),C.map(e=>(0,dt.jsxs)("option",{value:e.userId,children:["\ud83d\udc64 ",e.displayName," - Est: ",E(e.estimatedRevenue)]},e.userId))]})]}),h&&O&&(0,dt.jsxs)("div",{className:"mt-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,dt.jsx)(hL,{size:16,className:"text-yellow-600 dark:text-yellow-400"}),(0,dt.jsx)("span",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Multiple Products Detected"})]}),(0,dt.jsxs)("select",{value:g,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-yellow-300 dark:border-yellow-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:[(0,dt.jsx)("option",{value:"",children:"\ud83d\udcca All Products (Combined)"}),S.map(e=>(0,dt.jsxs)("option",{value:e,children:["\ud83d\udce6 ",e]},e))]}),(0,dt.jsxs)("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mt-1",children:["This user has trials for ",S.length," different products. Select a specific product or view combined data."]})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current View"}),(0,dt.jsx)("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700",children:h?(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,dt.jsx)(uL,{size:16,className:"text-blue-600 dark:text-blue-400"}),(0,dt.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Individual User"})]}),(0,dt.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 break-all",children:["ID: ",h]}),(0,dt.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Status: ",(null===(s=_[h])||void 0===s?void 0:s.outcome_type)||"pending"]}),O&&(0,dt.jsxs)("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:["Products: ",S.length," (",g||"All",")"]})]}):(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,dt.jsx)(pL,{size:16,className:"text-green-600 dark:text-green-400"}),(0,dt.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Aggregate View"})]}),(0,dt.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing data for all ",Object.keys(_).length," users"]}),(0,dt.jsxs)("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:["Multi-product users: ",Object.keys(N).length]})]})})]})]})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,dt.jsxs)("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,dt.jsx)(Je,{size:20,className:"text-purple-600 dark:text-purple-400"}),(0,dt.jsx)("h3",{className:"font-semibold text-purple-900 dark:text-purple-200",children:"Users with Timelines"})]}),(0,dt.jsx)("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-300",children:h?"1":(P=b.users_with_timelines||0,"number"!==typeof P?"0":P.toLocaleString())}),(0,dt.jsx)("p",{className:"text-sm text-purple-700 dark:text-purple-400",children:h?"Individual view":"Revenue projections generated"})]}),(0,dt.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,dt.jsx)(Ye,{size:20,className:"text-green-600 dark:text-green-400"}),(0,dt.jsx)("h3",{className:"font-semibold text-green-900 dark:text-green-200",children:"Estimated Revenue"})]}),(0,dt.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-300",children:E(h?(null===(o=_[h])||void 0===o?void 0:o.total_estimated_revenue)||0:v.total_estimated_revenue||0)}),(0,dt.jsx)("p",{className:"text-sm text-green-700 dark:text-green-400",children:"Based on conversion probabilities"})]}),(0,dt.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,dt.jsx)(rL,{size:20,className:"text-blue-600 dark:text-blue-400"}),(0,dt.jsx)("h3",{className:"font-semibold text-blue-900 dark:text-blue-200",children:"Actual Revenue"})]}),(0,dt.jsx)("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-300",children:E(h?(null===(l=_[h])||void 0===l?void 0:l.total_actual_revenue)||0:v.total_actual_revenue||0)}),(0,dt.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:"From confirmed outcomes"})]}),(0,dt.jsxs)("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,dt.jsx)(Qe,{size:20,className:"text-orange-600 dark:text-orange-400"}),(0,dt.jsx)("h3",{className:"font-semibold text-orange-900 dark:text-orange-200",children:"Timeline End"})]}),(0,dt.jsx)("p",{className:"text-lg font-bold text-orange-600 dark:text-orange-300",children:b.timeline_end_date||"N/A"}),(0,dt.jsx)("p",{className:"text-sm text-orange-700 dark:text-orange-400",children:"Projection end date"})]})]}),(0,dt.jsx)("div",{className:"mb-6",children:(0,dt.jsxs)("div",{className:"p-4 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[(0,dt.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[(0,dt.jsx)(mL,{size:20,className:"text-green-600 dark:text-green-400"}),"Revenue Calculation Using Event State Tracker"]}),(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 font-mono text-sm mb-4",children:(0,dt.jsxs)("div",{className:"space-y-3",children:[(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"\ud83d\udd35 Pre-Outcome (Trial Pending)"}),(0,dt.jsx)("div",{className:"text-base text-blue-600 dark:text-blue-400",children:"estimated_revenue = conversion_probability \xd7 (1 - refund_rate) \xd7 price"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"\ud83d\udfe2 Post-Conversion (Subscription Active)"}),(0,dt.jsx)("div",{className:"text-base text-green-600 dark:text-green-400",children:"revenue = price \xd7 (1 - current_refund_rate)"}),(0,dt.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"current_refund_rate degrades linearly to 0% over 30 days"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"\ud83d\udd34 Post-Cancellation (Subscription Cancelled)"}),(0,dt.jsx)("div",{className:"text-base text-red-600 dark:text-red-400",children:"revenue = $0.00"})]})]})}),(0,dt.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,dt.jsx)("strong",{children:"\ud83d\udcc8 State Tracking:"}),"\u2022 Backend uses event_state_tracker.py for proper event state management \u2022 Trial states: started \u2192 pending \u2192 ended (converted/cancelled) \u2022 Subscription states: active \u2192 cancelled \u2022 Revenue tracking includes actual event revenue and refunds"]})]})}),(0,dt.jsxs)("div",{className:"mb-6 p-4 bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[(0,dt.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,dt.jsx)(tL,{size:20,className:"text-purple-600 dark:text-purple-400"}),"User & Segment Details"]}),h?(()=>{const e=w[h];if(!e)return(0,dt.jsxs)("div",{className:"text-red-500 text-center",children:["Error: No timeline event data found for user ",h,"."]});const t=e.segment_info||{},r=t.user_properties||{},n=t.conversion_metrics||{},a=t.matched_segment_id||t.segment_id,i=t.final_viable_segment_id||t.segment_id,s=a&&i&&a!==i;let o=r,l=r,c=n.sample_size||n.cohort_size||"Unknown",d=c;return(0,dt.jsx)("div",{className:"space-y-4",children:(0,dt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4",children:[(0,dt.jsxs)("div",{className:"bg-gray-800 text-white p-4 rounded-lg text-sm",children:[(0,dt.jsx)("div",{className:"font-mono text-xs mb-3 text-blue-300 break-all",children:h}),(0,dt.jsxs)("div",{className:"text-xs text-gray-400 mb-3",children:["Short: ",h.substring(0,8),"..."]}),(0,dt.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Product:"})," ",r.product_id||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Store:"})," ",r.app_store||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Price:"})," ",r.price_bucket||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Country:"})," ",r.country||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Economic Tier:"})," ",r.economic_tier||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Region:"})," ",r.region||"N/A"]})]})]}),(0,dt.jsxs)("div",{className:"bg-gray-800 text-white p-4 rounded-lg text-sm",children:[(0,dt.jsxs)("div",{className:"font-medium text-blue-300 mb-2 text-xs",children:["ID: ",a?a.substring(0,8)+"...":"Unknown"]}),(0,dt.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Product:"})," ",o.product_id||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Store:"})," ",o.app_store||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Price:"})," ",o.price_bucket||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Country:"})," ",o.country||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Economic Tier:"})," ",o.economic_tier||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Region:"})," ",o.region||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Level:"})," ",0]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Users:"})," ",c]})]})]}),(0,dt.jsx)("div",{className:"bg-gray-800 text-white p-4 rounded-lg text-sm",children:s?(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"font-medium text-green-300 mb-2 text-xs",children:["ID: ",i?i.substring(0,8)+"...":"Unknown"]}),(0,dt.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Product:"})," ",l.product_id||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Store:"})," ",l.app_store||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Price:"})," ",l.price_bucket||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Country:"})," ",l.country||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Economic Tier:"})," ",l.economic_tier||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Region:"})," ",l.region||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Level:"})," ",0]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Users:"})," ",d]})]})]}):(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"font-medium text-blue-300 mb-2 text-xs",children:["ID: ",i?i.substring(0,8)+"...":"Same as matched"]}),(0,dt.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Product:"})," ",l.product_id||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Store:"})," ",l.app_store||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Price:"})," ",l.price_bucket||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Country:"})," ",l.country||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Economic Tier:"})," ",l.economic_tier||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Region:"})," ",l.region||"N/A"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Level:"})," ",0]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Users:"})," ",d]})]}),(0,dt.jsx)("div",{className:"text-xs text-gray-500 mt-2 italic",children:"Direct match - no rollup applied"})]})}),(0,dt.jsx)("div",{className:"bg-gray-800 text-white p-4 rounded-lg text-sm",children:(0,dt.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Trial Conv.:"}),(0,dt.jsxs)("span",{className:"ml-1 text-green-300",children:[(100*(n.trial_conversion_rate||0)).toFixed(1),"%"]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Refund:"}),(0,dt.jsxs)("span",{className:"ml-1 text-red-300",children:[(100*(n.trial_converted_to_refund_rate||0)).toFixed(1),"%"]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Init. Refund:"}),(0,dt.jsxs)("span",{className:"ml-1 text-red-300",children:[(100*(n.initial_purchase_to_refund_rate||0)).toFixed(1),"%"]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Renewal Refund:"}),(0,dt.jsxs)("span",{className:"ml-1 text-red-300",children:[(100*(n.renewal_to_refund_rate||0)).toFixed(1),"%"]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Sample size:"}),(0,dt.jsx)("span",{className:"ml-1 text-blue-300",children:d})]})]})}),(0,dt.jsx)("div",{className:"bg-gray-800 text-white p-4 rounded-lg text-sm",children:(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"\n                                                px-3 py-2 rounded-full text-xs font-medium\n                                                ".concat("high"===t.accuracy_score?"bg-green-600 text-white":"medium"===t.accuracy_score?"bg-yellow-600 text-white":"bg-red-600 text-white","\n                                            "),children:(t.accuracy_score||"Unknown").toUpperCase()}),(0,dt.jsx)("div",{className:"text-xs text-gray-400 mt-2",children:"Prediction Accuracy"})]})})]})})})():(0,dt.jsx)("div",{className:"text-gray-600 dark:text-gray-400 italic text-center py-8",children:"Select an individual user to view segment details"})]}),b&&(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:[h?"Revenue Timeline for User ".concat(h.substring(0,16),"..."):"Aggregate Revenue Timeline",h&&g&&(0,dt.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-2",children:["(Product: ",g,")"]})]}),(0,dt.jsx)(bL,{data:(()=>{if(h&&j[h]){var e,t;const r=Object.keys(j[h]).sort(),n={},a={};r.forEach(e=>{n[e]=j[h][e]});let i={trial_started:0,trial_ended:0,trial_converted:0,trial_cancelled:0,initial_purchase:0,subscription_cancelled:0,revenue:0,refund:0,refund_count:0,estimated_revenue:0};r.forEach(e=>{const t=n[e];Object.keys(i).forEach(r=>{"trial_pending"===r||"subscription_active"===r?(a[e]=a[e]||{},a[e]["cumulative_".concat(r)]=t[r]||0):(i[r]+=t[r]||0,a[e]=a[e]||{},a[e]["cumulative_".concat(r)]=i[r])}),a[e].cumulative_revenue_net=i.revenue-i.refund});return{data:{dates:r,daily_metrics:n,cumulative_metrics:a,user_timelines:w,user_daily_metrics:{[h]:j[h]},summary_stats:{total_users:1,total_estimated_revenue:(null===(e=_[h])||void 0===e?void 0:e.total_estimated_revenue)||0,total_actual_revenue:(null===(t=_[h])||void 0===t?void 0:t.total_actual_revenue)||0}}}}const r=Object.keys(k).sort(),n={};let a={trial_started:0,trial_ended:0,trial_converted:0,trial_cancelled:0,initial_purchase:0,subscription_cancelled:0,revenue:0,refund:0,refund_count:0};r.forEach(e=>{const t=k[e]||{};Object.keys(a).forEach(e=>{e in t&&"number"===typeof t[e]&&(a[e]+=t[e])}),n[e]={trial_pending:t.trial_pending||0,subscription_active:t.subscription_active||0,estimated_revenue:t.estimated_revenue||0,cumulative_trial_started:a.trial_started,cumulative_trial_ended:a.trial_ended,cumulative_trial_converted:a.trial_converted,cumulative_trial_cancelled:a.trial_cancelled,cumulative_initial_purchase:a.initial_purchase,cumulative_subscription_cancelled:a.subscription_cancelled,cumulative_revenue:a.revenue,cumulative_refund:a.refund,cumulative_refund_count:a.refund_count,cumulative_revenue_net:a.revenue-a.refund}});return{data:{dates:r,daily_metrics:k,cumulative_metrics:n,user_timelines:w,user_daily_metrics:j,summary_stats:v}}})(),selectedUserId:h,selectedProductId:g||(h?null===(c=_[h])||void 0===c||null===(d=c.user_properties)||void 0===d?void 0:d.product_id:null)})]}),b.error&&(0,dt.jsxs)("div",{className:"text-center py-8 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[(0,dt.jsx)(sL,{size:48,className:"mx-auto text-red-400 mb-4"}),(0,dt.jsxs)("p",{className:"text-red-600 dark:text-red-400 mb-2",children:["Stage 3 Error: ",b.error]})]}),0===Object.keys(_).length&&!b.error&&(0,dt.jsxs)("div",{className:"text-center py-8 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,dt.jsx)($e,{size:48,className:"mx-auto text-gray-400 mb-4"}),(0,dt.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"No revenue timeline data available"}),(0,dt.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Run Stage 3 analysis to see revenue timeline projections"})]})]});var P},vL=()=>{const e="cohort_pipeline_v3_debug_mode",t=(()=>{try{const t=localStorage.getItem(e);if(t)return JSON.parse(t)}catch(t){console.warn("Failed to load saved debug state:",t)}return{debugMode:!1,debugStage:null,stageHistory:[]}})(),[r,n]=(0,a.useState)(t.debugMode),[i,s]=(0,a.useState)(t.debugStage),[o,l]=(0,a.useState)(t.stageHistory);(0,a.useEffect)(()=>{((t,r,n)=>{try{const a={debugMode:t,debugStage:r,stageHistory:n};localStorage.setItem(e,JSON.stringify(a))}catch(a){console.warn("Failed to save debug state:",a)}})(r,i,o)},[r,i,o]);const c=[{id:"stage1",name:"Cohort Identification",description:"Take ad set/campaign ID and return corresponding user cohort with properties",order:1},{id:"stage2",name:"User-to-Segment Matching",description:"Connect users to conversion probabilities using pre-calculated segment data",order:2},{id:"stage3",name:"Revenue Timeline Generation",description:"Generate revenue timelines using conversion rates and refund rates",order:3}],d=(0,a.useCallback)(()=>{n(e=>{const t=!e;return t||(s(null),l([])),t})},[]),u=(0,a.useCallback)(e=>{n(e),e||(s(null),l([]))},[]),h=(0,a.useCallback)(e=>{s(e),e&&!o.includes(e)&&l(t=>[...t,e])},[o]),p=(0,a.useCallback)(e=>c.find(t=>t.id===e),[]),m=(0,a.useCallback)(e=>{const t=p(e);return t?c.find(e=>e.order===t.order+1):null},[p]),f=(0,a.useCallback)(e=>{const t=p(e);return t?c.find(e=>e.order===t.order-1):null},[p]),g=(0,a.useCallback)(()=>{const e=m(i);e&&h(e.id)},[i,m,h]),x=(0,a.useCallback)(()=>{const e=f(i);e&&h(e.id)},[i,f,h]),b=(0,a.useCallback)(()=>{n(!1),s(null),l([])},[]),y=(0,a.useCallback)(e=>o.includes(e),[o]),v=(0,a.useCallback)(()=>{if(!i)return c;const e=p(i);return e?c.filter(t=>t.order<=e.order):c},[i,p]),_=(0,a.useCallback)(()=>{var e;return{enabled:r,currentStage:i,currentStageInfo:i?p(i):null,stagesExecuted:o.length,totalStages:c.length,canGoNext:!!m(i),canGoPrevious:!!f(i),progress:i?((null===(e=p(i))||void 0===e?void 0:e.order)||0)/c.length*100:0}},[r,i,o,p,m,f]);return{debugMode:r,debugStage:i,stageHistory:o,availableStages:c,setDebugMode:u,setDebugStage:h,toggleDebugMode:d,goToNextStage:g,goToPreviousStage:x,resetDebugState:b,currentStageInfo:i?p(i):null,nextStage:m(i),previousStage:f(i),executableStages:v(),debugStatus:_(),getStageInfo:p,isStageExecuted:y}},_L=Ue("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),kL=()=>{var e,t,r,n,i,s,o,l,c;const d="cohort_v3_refactored_analysis_params",u={date_from:"2025-01-01",date_to:"2025-01-31",optional_filters:[],primary_user_filter:{property_name:"",property_values:[]},secondary_filters:[],config:{product_filter:{include_patterns:["gluten"],exclude_patterns:[],specific_product_ids:["prod_R7oYuL3bSUecnr"]},lifecycle:{trial_window_days:7,cancellation_window_days:30,smoothing_enabled:!0},timeline:{include_estimates:!0,include_confidence_intervals:!1},detailed_events:{user_id:""}}},[h,p]=(0,a.useState)(()=>{try{const a=localStorage.getItem(d);if(a){var e,t,r,n;const i=JSON.parse(a);return Re(Re(Re({},u),i),{},{optional_filters:i.optional_filters||[],secondary_filters:i.secondary_filters||[],config:Re(Re(Re({},u.config),i.config),{},{product_filter:Re(Re({},u.config.product_filter),null===(e=i.config)||void 0===e?void 0:e.product_filter),lifecycle:Re(Re({},u.config.lifecycle),null===(t=i.config)||void 0===t?void 0:t.lifecycle),timeline:Re(Re({},u.config.timeline),null===(r=i.config)||void 0===r?void 0:r.timeline),detailed_events:Re(Re({},u.config.detailed_events),null===(n=i.config)||void 0===n?void 0:n.detailed_events)})})}}catch(w){console.warn("Failed to load saved analysis parameters:",w)}return u}),[m,f]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(e=>{try{localStorage.setItem(d,JSON.stringify(e))}catch(w){console.warn("Failed to save analysis parameters:",w)}})(h),f(!0);const e=setTimeout(()=>f(!1),1e3);return()=>clearTimeout(e)},[h]);const{debugMode:g,debugStage:x,setDebugMode:b,setDebugStage:y}=vL(),[v,_]=(0,a.useState)(null),[k,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)(null),S=(null===v||void 0===v?void 0:v.stage_results)||(null===v||void 0===v||null===(e=v.data)||void 0===e?void 0:e.stage_results),O={stage1:!(null===S||void 0===S||!S.stage1||S.stage1.error),stage2:!(null===S||void 0===S||!S.stage2||S.stage2.error),stage3:!(null===S||void 0===S||!S.stage3||S.stage3.error)};return(0,a.useEffect)(()=>{var e;v?(console.log("\ud83d\udd0d [DEBUG] pipelineData structure:",v),console.log("\ud83d\udd0d [DEBUG] pipelineData.stage_results (direct):",v.stage_results),console.log("\ud83d\udd0d [DEBUG] pipelineData.data.stage_results (nested):",null===(e=v.data)||void 0===e?void 0:e.stage_results),console.log("\ud83d\udd0d [DEBUG] computed stageResults:",S),console.log("\ud83d\udd0d [DEBUG] stageProgress:",O),console.log("\ud83d\udd0d [DEBUG] Keys in pipelineData:",Object.keys(v)),S&&(console.log("\ud83d\udd0d [DEBUG] Stage results keys:",Object.keys(S)),console.log("\ud83d\udd0d [DEBUG] Stage 1 data:",S.stage1),console.log("\ud83d\udd0d [DEBUG] Stage 2 data:",S.stage2),console.log("\ud83d\udd0d [DEBUG] Stage 3 data:",S.stage3)),v.data&&console.log("\ud83d\udd0d [DEBUG] Data keys:",Object.keys(v.data))):console.log("\ud83d\udd0d [DEBUG] No pipelineData available")},[v,S,O]),(0,dt.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,dt.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,dt.jsxs)("div",{className:"mb-8",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Cohort Pipeline V3 - Refactored Architecture"}),(0,dt.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"3-stage conversion probability-based cohort analysis with segment matching and revenue timeline generation"})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[m&&(0,dt.jsxs)("div",{className:"flex items-center space-x-1 text-green-600 dark:text-green-400 text-sm",children:[(0,dt.jsx)("span",{children:"\ud83d\udcbe"}),(0,dt.jsx)("span",{children:"Saved"})]}),(0,dt.jsx)("button",{onClick:()=>{p(u)},className:"px-3 py-2 text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors",title:"Reset all settings to defaults",children:"Reset to Defaults"}),(0,dt.jsx)("button",{onClick:()=>{localStorage.removeItem(d),p(u)},className:"px-3 py-2 text-sm bg-red-200 hover:bg-red-300 dark:bg-red-700 dark:hover:bg-red-600 text-red-700 dark:text-red-300 rounded-lg transition-colors",title:"Clear all saved data including debug state",children:"Clear All Data"}),(0,dt.jsx)("button",{onClick:()=>{const e=JSON.stringify(h,null,2),t="data:application/json;charset=utf-8,"+encodeURIComponent(e),r="cohort-v3-refactored-config-".concat((new Date).toISOString().split("T")[0],".json"),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download",r),n.click()},className:"px-3 py-2 text-sm bg-blue-200 hover:bg-blue-300 dark:bg-blue-700 dark:hover:bg-blue-600 text-blue-700 dark:text-blue-300 rounded-lg transition-colors",title:"Export current settings to JSON file",children:"Export Settings"}),(0,dt.jsxs)("label",{className:"px-3 py-2 text-sm bg-green-200 hover:bg-green-300 dark:bg-green-700 dark:hover:bg-green-600 text-green-700 dark:text-green-300 rounded-lg transition-colors cursor-pointer",children:["Import Settings",(0,dt.jsx)("input",{type:"file",accept:".json",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{try{const t=JSON.parse(e.target.result),r=Re(Re(Re({},u),t),{},{config:Re(Re({},u.config),t.config)});p(r)}catch(w){console.error("Failed to import settings:",w)}},e.readAsText(t)}e.target.value=""},className:"hidden"})]})]})]}),(0,dt.jsx)("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"\ud83d\udcbe Settings are automatically saved and will persist across page reloads"})]}),(0,dt.jsx)("div",{className:"mb-8",children:(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,dt.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"V3 Refactored Pipeline Controls"}),(0,dt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,dt.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("input",{type:"checkbox",checked:g,onChange:e=>b(e.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),(0,dt.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:"Debug Mode"})]}),g&&(0,dt.jsxs)("select",{value:x||"",onChange:e=>y(e.target.value||null),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[(0,dt.jsx)("option",{value:"",children:"Select stage..."}),(0,dt.jsx)("option",{value:"stage1",children:"Stage 1: User Properties Input"}),(0,dt.jsx)("option",{value:"stage2",children:"Stage 2: Segment Matching"}),(0,dt.jsx)("option",{value:"stage3",children:"Stage 3: Revenue Timeline"})]}),(0,dt.jsx)("button",{onClick:()=>{g&&x?(console.log("[V3-Refactored DEBUG] Running stage analysis:",x),(async(e,t)=>{j(!0),N(null);try{console.log("[V3-Refactored] ENTERING runV3StageAnalysis for stage: ".concat(t)),console.log("[V3-Refactored] Params being passed:",e),console.log("[V3-Refactored] About to call api.runV3RefactoredStageAnalysis...");const r=await ba(e,t),n=JSON.stringify(r).length;console.log("[V3-Refactored] Stage ".concat(t," response size: ").concat((n/1048576).toFixed(2)," MB")),console.log("[V3-Refactored] RECEIVED result from api.runV3RefactoredStageAnalysis:",r),_(r)}catch(r){console.error("[V3-Refactored] Stage ".concat(t," analysis failed:"),r),r.message&&(r.message.includes("out of memory")||r.message.includes("Maximum call stack"))?N("Stage ".concat(t," analysis failed due to large dataset size. Please reduce the date range.")):N(r.message||"V3 refactored stage ".concat(t," analysis failed"))}finally{j(!1)}})(h,x)):(console.log("[V3-Refactored DEBUG] Running full analysis"),(async e=>{j(!0),N(null);try{console.log("[V3-Refactored] Running full V3 refactored analysis with params:",e);const t=(new Date(e.date_to)-new Date(e.date_from))/864e5;t>35&&console.warn("[V3-Refactored] Large date range detected (".concat(t," days). Response may be very large."));const r=await xa(e),n=JSON.stringify(r).length;if(console.log("[V3-Refactored] Response size: ".concat((n/1048576).toFixed(2)," MB")),n>52428800)return console.warn("[V3-Refactored] Large response detected. Consider using debug mode to analyze stages individually."),void N("Response is very large (>50MB). Consider using debug mode to analyze stages individually, or reduce the date range.");console.log("[V3-Refactored] Full analysis result:",r),_(r)}catch(t){console.error("[V3-Refactored] Full analysis failed:",t),t.message&&(t.message.includes("out of memory")||t.message.includes("Maximum call stack"))?N("Analysis failed due to large dataset size. Please use debug mode to analyze stages individually or reduce the date range."):"ERR_INSUFFICIENT_RESOURCES"===t.code?N("Browser ran out of memory processing the large response. Please use debug mode or reduce the date range."):N(t.message||"V3 refactored analysis failed")}finally{j(!1)}})(h))},disabled:k,className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat(k?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),children:k?"Running...":"Run Analysis"})]})]})})}),(0,dt.jsxs)("div",{className:"mb-8",children:[(0,dt.jsx)(QI,{config:h.config,analysisParams:h,onConfigChange:e=>{p(e)}}),(()=>{const e=(new Date(h.date_to)-new Date(h.date_from))/864e5;return e>35?(0,dt.jsx)("div",{className:"mt-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:(0,dt.jsxs)("div",{className:"flex items-start gap-3",children:[(0,dt.jsx)("div",{className:"text-yellow-600 dark:text-yellow-400",children:"\u26a0\ufe0f"}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h3",{className:"text-yellow-800 dark:text-yellow-200 font-semibold mb-2",children:"Large Date Range Detected"}),(0,dt.jsxs)("p",{className:"text-yellow-700 dark:text-yellow-300 text-sm mb-2",children:["You've selected a ",Math.round(e)," day range. This may result in a very large response (",">","500MB) that could crash your browser."]}),(0,dt.jsxs)("div",{className:"text-yellow-700 dark:text-yellow-300 text-sm",children:[(0,dt.jsx)("strong",{children:"Recommendations:"}),(0,dt.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,dt.jsxs)("li",{children:["Use ",(0,dt.jsx)("strong",{children:"Debug Mode"})," to analyze stages individually"]}),(0,dt.jsx)("li",{children:"Reduce your date range to 30 days or less"}),(0,dt.jsx)("li",{children:"Consider analyzing individual months separately"})]})]})]})]})}):null})()]}),k&&(0,dt.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,dt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),(0,dt.jsxs)("div",{className:"ml-3",children:[(0,dt.jsx)("div",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Running V3 refactored analysis..."}),(new Date(h.date_to)-new Date(h.date_from))/864e5>35?(0,dt.jsx)("div",{className:"text-sm text-yellow-600 dark:text-yellow-400 mt-1",children:"\u26a0\ufe0f Large date range detected - this may take several minutes and could fail due to browser memory limits"}):null]})]}),(0,dt.jsxs)("div",{className:"space-y-6",children:[w&&(0,dt.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[(0,dt.jsx)("h3",{className:"text-red-800 dark:text-red-200 font-semibold mb-2",children:"Analysis Error"}),(0,dt.jsx)("p",{className:"text-red-700 dark:text-red-300",children:w})]}),v&&(0,dt.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,dt.jsx)("h3",{className:"text-blue-800 dark:text-blue-200 font-semibold mb-2",children:"Debug: V3 Refactored API Data Structure"}),(0,dt.jsxs)("div",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[(0,dt.jsxs)("div",{children:["Has pipelineData: ",v?"\u2705":"\u274c"]}),(0,dt.jsxs)("div",{children:["Has stage_results (direct): ",null!==v&&void 0!==v&&v.stage_results?"\u2705":"\u274c"]}),(0,dt.jsxs)("div",{children:["Has stage_results (nested): ",null!==v&&void 0!==v&&null!==(t=v.data)&&void 0!==t&&t.stage_results?"\u2705":"\u274c"]}),(0,dt.jsxs)("div",{children:["Stage 1 Complete: ",O.stage1?"\u2705":"\u274c"]}),(0,dt.jsxs)("div",{children:["Stage 2 Complete: ",O.stage2?"\u2705":"\u274c"]}),(0,dt.jsxs)("div",{children:["Stage 3 Complete: ",O.stage3?"\u2705":"\u274c"]}),(null===S||void 0===S||null===(r=S.stage1)||void 0===r?void 0:r.error)&&(0,dt.jsxs)("div",{className:"text-red-600 dark:text-red-400",children:["Stage 1 Error: ",S.stage1.error]}),(null===S||void 0===S||null===(n=S.stage2)||void 0===n?void 0:n.error)&&(0,dt.jsxs)("div",{className:"text-red-600 dark:text-red-400",children:["Stage 2 Error: ",S.stage2.error]}),(null===S||void 0===S||null===(i=S.stage3)||void 0===i?void 0:i.error)&&(0,dt.jsxs)("div",{className:"text-red-600 dark:text-red-400",children:["Stage 3 Error: ",S.stage3.error]}),(0,dt.jsxs)("div",{children:["Main data keys: ",v?Object.keys(v).join(", "):"None"]}),S&&(0,dt.jsxs)("div",{children:["Stage results keys: ",Object.keys(S).join(", ")]}),(null===S||void 0===S?void 0:S.stage1)&&(0,dt.jsxs)("div",{children:["Stage 1 users: ",S.stage1.total_users||S.stage1.cohort_size||"N/A"]}),(null===S||void 0===S?void 0:S.stage2)&&(0,dt.jsxs)("div",{children:["Stage 2 matches: ",(null===(s=S.stage2.matching_stats)||void 0===s?void 0:s.successful_matches)||0,"/",(null===(o=S.stage2.matching_stats)||void 0===o?void 0:o.total_users)||0]})]})]}),v&&(0,dt.jsxs)(dt.Fragment,{children:[O.stage1&&(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,dt.jsx)(_L,{size:24,className:"text-blue-600 dark:text-blue-400"}),(0,dt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Stage 1: User Properties Input - Complete"})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,dt.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,dt.jsx)("h3",{className:"font-semibold text-blue-900 dark:text-blue-200",children:"Total Users Found"}),(0,dt.jsx)("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-300",children:(null===(l=v.stage_results)||void 0===l||null===(c=l.stage1)||void 0===c?void 0:c.total_users)||0})]}),(0,dt.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[(0,dt.jsx)("h3",{className:"font-semibold text-green-900 dark:text-green-200",children:"Date Range"}),(0,dt.jsxs)("p",{className:"text-sm font-medium text-green-600 dark:text-green-300",children:[h.date_from," to ",h.date_to]})]}),(0,dt.jsxs)("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[(0,dt.jsx)("h3",{className:"font-semibold text-purple-900 dark:text-purple-200",children:"Stage Status"}),(0,dt.jsx)("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-300",children:"\u2705 User Cohort Extracted"})]})]})]}),O.stage2&&(0,dt.jsx)(dL,{data:v}),O.stage3&&(0,dt.jsx)(yL,{data:v})]}),g&&v&&(0,dt.jsx)(ZI,{data:v,stage:x,title:"V3 Refactored Pipeline Debug Data"})]})]})})},jL=e=>{let{debugMode:t,debugStage:r,onDebugModeChange:n,onDebugStageChange:a,onRunAnalysis:i,loading:s,error:o}=e;const l=[{id:"stage1",name:"Cohort Identification",description:"Take ad set/campaign ID and return corresponding user cohort with properties",order:1},{id:"stage2",name:"User-to-Segment Matching",description:"Connect users to conversion probabilities using pre-calculated segment data",order:2},{id:"stage3",name:"Revenue Timeline Generation",description:"Generate revenue timelines using conversion rates and refund rates",order:3}],c=r?l.find(e=>e.id===r):null;return(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"V3 Refactored Pipeline Controls"}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"3-stage conversion probability-based cohort analysis"})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,dt.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("input",{type:"checkbox",checked:t,onChange:e=>n(e.target.checked),className:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),(0,dt.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:"Debug Mode"})]}),(0,dt.jsx)("button",{onClick:i,disabled:s,className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat(s?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700 text-white"),children:s?"Running V3 Analysis...":"Run V3 Analysis"})]})]}),t&&(0,dt.jsxs)("div",{className:"space-y-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select V3 Pipeline Stage"}),(0,dt.jsxs)("select",{value:r||"",onChange:e=>a(e.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[(0,dt.jsx)("option",{value:"",children:"Run complete V3 pipeline..."}),l.map(e=>(0,dt.jsxs)("option",{value:e.id,children:[e.order,". ",e.name]},e.id))]})]}),c&&(0,dt.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:[(0,dt.jsxs)("h3",{className:"font-semibold text-purple-900 dark:text-purple-200 mb-2",children:["Stage ",c.order,": ",c.name]}),(0,dt.jsx)("p",{className:"text-purple-700 dark:text-purple-300 text-sm",children:c.description})]}),(0,dt.jsxs)("div",{className:"mt-6",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"V3 Refactored Pipeline Progress"}),(0,dt.jsx)("div",{className:"space-y-2",children:l.map((e,t)=>{var n;const a=r===e.id,i=r&&(null===(n=l.find(e=>e.id===r))||void 0===n?void 0:n.order)>e.order;return(0,dt.jsxs)("div",{className:"flex items-center p-3 rounded-lg border transition-colors ".concat(a?"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-600":i?"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-600":"bg-gray-50 border-gray-200 dark:bg-gray-700 dark:border-gray-600"),children:[(0,dt.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold mr-3 ".concat(a?"bg-purple-600 text-white":i?"bg-green-600 text-white":"bg-gray-300 text-gray-600 dark:bg-gray-600 dark:text-gray-300"),children:i?"\u2713":e.order}),(0,dt.jsxs)("div",{className:"flex-1",children:[(0,dt.jsx)("h4",{className:"font-medium ".concat(a?"text-purple-900 dark:text-purple-200":i?"text-green-900 dark:text-green-200":"text-gray-700 dark:text-gray-300"),children:e.name}),(0,dt.jsx)("p",{className:"text-sm ".concat(a?"text-purple-700 dark:text-purple-300":i?"text-green-700 dark:text-green-300":"text-gray-500 dark:text-gray-400"),children:e.description})]}),(0,dt.jsxs)("div",{className:"ml-3",children:[a&&(0,dt.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-purple-600 text-white rounded-full",children:"Current"}),i&&(0,dt.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-green-600 text-white rounded-full",children:"Complete"})]})]},e.id)})})]})]}),!t&&(0,dt.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-lg p-4 border border-purple-200 dark:border-purple-700",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,dt.jsx)("span",{className:"text-purple-600 dark:text-purple-400",children:"\ud83d\ude80"}),(0,dt.jsx)("h4",{className:"font-medium text-purple-900 dark:text-purple-200",children:"V3 Refactored Pipeline"})]}),(0,dt.jsx)("p",{className:"text-purple-700 dark:text-purple-300 text-sm",children:"Enable debug mode to run individual pipeline stages and view intermediate results. In normal mode, the complete V3 refactored analysis pipeline will be executed using conversion probability-based revenue estimation."})]}),o&&(0,dt.jsxs)("div",{className:"mt-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[(0,dt.jsx)("h4",{className:"font-medium text-red-900 dark:text-red-200 mb-2",children:"Pipeline Error"}),(0,dt.jsx)("p",{className:"text-red-700 dark:text-red-300 text-sm",children:o})]})]})},wL=Ue("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),NL=Ue("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),SL=Ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),OL=e=>{var t,r,n,i,s;let{data:o}=e;const[l,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),[m,f]=(0,a.useState)(!1),[g,x]=(0,a.useState)(null);let b=null;if(console.log("LifecycleRatesTable received data:",o),null!==o&&void 0!==o&&null!==(t=o.data)&&void 0!==t&&t.lifecycle_rates)b=o.data.lifecycle_rates,console.log("Using regular mode lifecycle_rates:",b);else if(null!==o&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&null!==(n=r.structured_format)&&void 0!==n&&n.lifecycle_analysis)b=o.data.structured_format.lifecycle_analysis,console.log("Using debug mode structured_format.lifecycle_analysis:",b);else if(null!==o&&void 0!==o&&null!==(i=o.data)&&void 0!==i&&i.legacy_format){const e=o.data.legacy_format;console.log("Using debug mode legacy_format:",e),b={aggregate:{trial_to_outcome:{rates_by_day:e.lifecycle_rates||{},smoothing_method:e.smoothing_method||"none",smoothing_quality:e.smoothing_quality||"N/A",total_sample_size:e.total_sample_size||0}},per_product:{},metadata:{calculation_method:"legacy_format",message:"Data from legacy format"}}}else if(null!==o&&void 0!==o&&null!==(s=o.structured_format)&&void 0!==s&&s.lifecycle_analysis)b=o.structured_format.lifecycle_analysis,console.log("Using direct structured_format.lifecycle_analysis:",b);else if(null!==o&&void 0!==o&&o.legacy_format){const e=o.legacy_format;console.log("Using direct legacy_format:",e),b={aggregate:{trial_to_outcome:{rates_by_day:e.lifecycle_rates||{},smoothing_method:e.smoothing_method||"none",smoothing_quality:e.smoothing_quality||"N/A",total_sample_size:e.total_sample_size||0}},per_product:{},metadata:{calculation_method:"legacy_format",message:"Data from legacy format"}}}if(console.log("Final lifecycleData:",b),!b)return(0,dt.jsx)("div",{className:"text-center py-8",children:(0,dt.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No lifecycle data available. Run an analysis to see results."})});const y=b.aggregate||{},v=b.per_product||{};console.log("Aggregate data:",y),console.log("Per product data:",v);const _=(e,t,r,n,a,i)=>{const s=e.total_sample_size||0,o=(e=>{if(!e)return null;const t=e.aggregate_rates,r=e.extension_info;if(t&&r){const e=t.extension_days_used||(null===r||void 0===r?void 0:r.extension_days_used)||0,n=t.total_sample_size||(null===r||void 0===r?void 0:r.total_sample_size)||0,a=t.extension_attempts||(null===r||void 0===r?void 0:r.attempts_made)||1,i=(null===r||void 0===r?void 0:r.per_product_info)||{};if(e>0&&Object.keys(i).length>0){let t={};return Object.values(i).forEach(e=>{const r=e.extension_days_used||0,n=e.final_sample_size||0;0===r?t[0]=(t[0]||0)+n:30===r?t[30]=(t[30]||0)+n:60===r&&(t[60]=(t[60]||0)+n)}),{extensionDays:e,totalSize:n,breakdown:t,attempts:a,perProductInfo:i}}}return null})(n);let l=0,c=!1;t&&n.rates_by_product&&n.rates_by_product[t]&&(l=n.rates_by_product[t].total_sample_size||0,c=l>0&&l<10);let d=0;return a&&t&&n.rates_by_product&&n.rates_by_product[t]?d=n.rates_by_product[t].extension_days_used||0:!a&&n.aggregate_rates&&(d=n.aggregate_rates.extension_days_used||0),(0,dt.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Based on ",(0,dt.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:s})," users",a&&(0,dt.jsxs)("span",{className:"ml-2 text-green-600 dark:text-green-400",children:["(Product: ",t,")"]}),i&&!c&&(0,dt.jsxs)("span",{className:"ml-2 text-orange-600 dark:text-orange-400",children:["(Aggregate data - ",t," has no data for this lifecycle)"]}),i&&c&&(0,dt.jsxs)("span",{className:"ml-2 text-orange-600 dark:text-orange-400",children:["(Aggregate data - ",t," has only ",l," users, minimum 10 required)"]}),!t&&(0,dt.jsx)("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:"(All Products - Aggregate)"})]}),(0,dt.jsx)("button",{onClick:()=>N(r,n),className:"ml-2 p-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",title:"View detailed breakdown by product",children:(0,dt.jsx)(wL,{size:16})})]}),d>0&&(0,dt.jsxs)("div",{className:"mt-2 p-2 bg-yellow-50 dark:bg-yellow-900/30 rounded border border-yellow-200 dark:border-yellow-700",children:[(0,dt.jsxs)("p",{className:"text-xs text-yellow-800 dark:text-yellow-200",children:[(0,dt.jsx)("strong",{children:"Lookback Applied:"})," Extended ",d," days to capture more starter events"]}),o&&o.breakdown&&(0,dt.jsx)("div",{className:"mt-1 text-xs text-yellow-700 dark:text-yellow-300",children:Object.entries(o.breakdown).map(e=>{let[t,r]=e;return(0,dt.jsxs)("span",{className:"mr-3",children:["0"===t?"Base period":"+".concat(t," days"),": ",r," users"]},t)})})]})]})},k=()=>{const e=new Set;return v&&Object.keys(v).length>0&&Object.keys(v).forEach(t=>{e.add(t)}),y&&"object"===typeof y&&Object.values(y).forEach(t=>{t&&t.rates_by_product&&Object.keys(t.rates_by_product).forEach(t=>{e.add(t)})}),Array.from(e).sort()},j=k(),w=()=>{p(null),u(!1)},N=(e,t)=>{x({title:e,rateCalculationData:t}),f(!0)},S=()=>{x(null),f(!1)},O=function(e,t){if(!t)return(0,dt.jsx)("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e}),(0,dt.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"No data available"})]})});const r=e.toLowerCase().includes("cancelled"),n=e.toLowerCase().includes("refund"),a=e.toLowerCase().includes("trial started");let i,s,o;console.log("renderLifecycleTable - title:",e,"ratesData:",t),t.aggregate_rates?(i=t.aggregate_rates,s=t.rates_by_product||{},o=t.extension_info||{}):(i=t,s={},o={});const c=e.toLowerCase().includes("trial started")?"trial_to_outcome":e.toLowerCase().includes("trial converted")&&e.toLowerCase().includes("cancelled")?"trial_converted_to_cancellation":e.toLowerCase().includes("trial converted")&&e.toLowerCase().includes("refund")?"trial_converted_to_refund":e.toLowerCase().includes("initial purchase")&&e.toLowerCase().includes("cancelled")?"initial_purchase_to_cancellation":e.toLowerCase().includes("initial purchase")&&e.toLowerCase().includes("refund")?"initial_purchase_to_refund":e.toLowerCase().includes("renewal")&&e.toLowerCase().includes("cancelled")?"renewal_to_cancellation":e.toLowerCase().includes("renewal")&&e.toLowerCase().includes("refund")?"renewal_to_refund":null;if(!t.aggregate_rates&&c&&Object.keys(v).forEach(e=>{v[e][c]&&(s[e]=v[e][c])}),!i||!i.rates_by_day||0===Object.keys(i.rates_by_day).length)return(0,dt.jsx)("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e}),(0,dt.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"No data available"})]})});let d=i,h=!1,m=!1;if(l)if(s&&s[l]){(s[l].total_sample_size||0)>=10?(d=s[l],h=!0):(d=i,m=!0)}else d=i,m=!0;const f=d.rates_by_day,g=Object.keys(f).map(Number).sort((e,t)=>e-t),x=d.total_sample_size||0;let b={extension_days_used:d.extension_days_used||0,total_sample_size:x,attempts_made:d.extension_attempts||1,per_product_info:{}};if(o&&Object.keys(o).length>0&&(b=o),l&&s[l]){const e=s[l];b.per_product_info[l]||(b.per_product_info[l]={extension_days_used:e.extension_days_used||0,final_sample_size:e.total_sample_size||0,attempts_made:e.extension_attempts||1,user_counts_by_step:e.user_counts_by_step||{}})}const y={aggregate_rates:d,rates_by_product:s,extension_info:b};let k=[];return a||r?k=[{metric:"Raw Daily Cancellation %",dataKey:"raw_daily_cancellation_rate",bgClass:"bg-red-50 dark:bg-red-900/20",textClass:"text-red-700 dark:text-red-300"},{metric:"Smoothed Daily Cancellation %",dataKey:"smoothed_daily_cancellation_rate",bgClass:"bg-red-100 dark:bg-red-900/30",textClass:"text-red-800 dark:text-red-200"},{metric:"Raw Cumulative Cancellation %",dataKey:"raw_cumulative_cancellation_rate",bgClass:"bg-red-150 dark:bg-red-900/40",textClass:"text-red-800 dark:text-red-200"},{metric:"Smoothed Cumulative Cancellation %",dataKey:"smoothed_cumulative_cancellation_rate",bgClass:"bg-red-200 dark:bg-red-900/50",textClass:"text-red-900 dark:text-red-100"}]:n&&(k=[{metric:"Raw Daily Refund %",dataKey:"raw_daily_refund_rate",bgClass:"bg-blue-50 dark:bg-blue-900/20",textClass:"text-blue-700 dark:text-blue-300"},{metric:"Smoothed Daily Refund %",dataKey:"smoothed_daily_refund_rate",bgClass:"bg-blue-100 dark:bg-blue-900/30",textClass:"text-blue-800 dark:text-blue-200"},{metric:"Raw Cumulative Refund %",dataKey:"raw_cumulative_refund_rate",bgClass:"bg-blue-150 dark:bg-blue-900/40",textClass:"text-blue-800 dark:text-blue-200"},{metric:"Smoothed Cumulative Refund %",dataKey:"smoothed_cumulative_refund_rate",bgClass:"bg-blue-200 dark:bg-blue-900/50",textClass:"text-blue-900 dark:text-blue-100"}]),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,dt.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e}),(0,dt.jsxs)("button",{onClick:()=>((e,t)=>{p({title:e,ratesData:t}),u(!0)})(e,t),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-md transition-colors duration-200 flex items-center space-x-1",children:[(0,dt.jsx)(NL,{size:16}),(0,dt.jsx)("span",{children:"Chart"})]})]}),_(d,l,e,y,h,m),(0,dt.jsxs)("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:[(0,dt.jsx)("h5",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Smoothing Method Information"}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-700 dark:text-blue-300",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Method:"})," ",d.smoothing_method||"none"]}),(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Quality:"})," ",d.smoothing_quality||"N/A"]}),(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Sample Size:"})," ",x]})]}),d.smoothing_details&&(0,dt.jsxs)("div",{children:[(0,dt.jsx)("p",{children:(0,dt.jsx)("strong",{children:"Data Characteristics:"})}),(0,dt.jsx)("ul",{className:"ml-4 mt-1",children:d.smoothing_details.cancellation&&(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsxs)("li",{children:["Early Concentration: ",d.smoothing_details.cancellation.early_concentration]}),(0,dt.jsxs)("li",{children:["Sparsity: ",d.smoothing_details.cancellation.sparsity]}),(0,dt.jsxs)("li",{children:["Max Rate: ",d.smoothing_details.cancellation.max_rate]})]})})]})]})]}),(0,dt.jsx)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:(0,dt.jsxs)("div",{className:"flex",children:[(0,dt.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:[(0,dt.jsx)("div",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700",children:"Metric"}),k.map((e,t)=>(0,dt.jsx)("div",{className:"px-4 py-3 text-sm border-b border-gray-200 dark:border-gray-700 ".concat(e.bgClass," ").concat(e.textClass," font-medium"),children:e.metric},t))]}),(0,dt.jsx)("div",{className:"flex-1 overflow-x-auto",children:(0,dt.jsx)("div",{className:"flex",children:g.map(e=>{const t=e.toString(),r=f[t];return(0,dt.jsxs)("div",{className:"min-w-[100px] border-r border-gray-200 dark:border-gray-700 last:border-r-0",children:[(0,dt.jsxs)("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-800 font-medium text-gray-900 dark:text-white text-center border-b border-gray-200 dark:border-gray-700",children:["Day ",e]}),k.map((e,t)=>(0,dt.jsxs)("div",{className:"px-4 py-3 text-sm text-center border-b border-gray-200 dark:border-gray-700 ".concat(e.bgClass," ").concat(e.textClass),children:[r?(r[e.dataKey]||0).toFixed(2):"0.00","%"]},t))]},t)})})})]})})]})},C=()=>{if(!h)return null;const{title:e,ratesData:t}=h,r=e.toLowerCase().includes("cancelled"),n=e.toLowerCase().includes("refund"),a=e.toLowerCase().includes("trial started"),i=e=>{let{active:t,payload:r,label:n}=e;return t&&r&&r.length?(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[(0,dt.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:"Day ".concat(n)}),r.map((e,t)=>(0,dt.jsx)("p",{style:{color:e.color},className:"text-sm",children:"".concat(e.name,": ").concat(e.value.toFixed(2),"%")},t))]}):null},s=(()=>{console.log("Chart ratesData:",t);let e=null;if(t.aggregate_rates){const r=t.aggregate_rates,n=t.rates_by_product||{};if(l&&n[l]){e=(n[l].total_sample_size||0)>=10?n[l]:r}else e=r}else{if(!t.rates_by_day)return console.log("No valid rates structure found in:",t),[];e=t}if(!e||!e.rates_by_day)return console.log("No rates_by_day found in displayRates:",e),[];const i=e.rates_by_day,s=Object.keys(i).map(Number).sort((e,t)=>e-t);return console.log("Chart sortedDays:",s),console.log("Chart ratesByDay sample:",i[s[0]]),s.map(e=>{const t=i[e.toString()],s={day:e};return a?(s.rawDailyCancellation=(null===t||void 0===t?void 0:t.raw_daily_cancellation_rate)||0,s.smoothedDailyCancellation=(null===t||void 0===t?void 0:t.smoothed_daily_cancellation_rate)||0,s.rawCumulativeCancellation=(null===t||void 0===t?void 0:t.raw_cumulative_cancellation_rate)||0,s.smoothedCumulativeCancellation=(null===t||void 0===t?void 0:t.smoothed_cumulative_cancellation_rate)||0,s.conversionProbabilityFromDayOnward=100*((null===t||void 0===t?void 0:t.conversion_probability_from_day_onward)||0),s.survivalProbabilityThisDay=100*((null===t||void 0===t?void 0:t.survival_probability_this_day)||0)):r?(s.rawDailyCancellation=(null===t||void 0===t?void 0:t.raw_daily_cancellation_rate)||0,s.smoothedDailyCancellation=(null===t||void 0===t?void 0:t.smoothed_daily_cancellation_rate)||0,s.rawCumulativeCancellation=(null===t||void 0===t?void 0:t.raw_cumulative_cancellation_rate)||0,s.smoothedCumulativeCancellation=(null===t||void 0===t?void 0:t.smoothed_cumulative_cancellation_rate)||0):n&&(s.rawDailyRefund=(null===t||void 0===t?void 0:t.raw_daily_refund_rate)||0,s.smoothedDailyRefund=(null===t||void 0===t?void 0:t.smoothed_daily_refund_rate)||0,s.rawCumulativeRefund=(null===t||void 0===t?void 0:t.raw_cumulative_refund_rate)||0,s.smoothedCumulativeRefund=(null===t||void 0===t?void 0:t.smoothed_cumulative_refund_rate)||0,s.totalRefundProbability=100*((null===t||void 0===t?void 0:t.total_refund_probability)||0),s.noRefundProbability=100*((null===t||void 0===t?void 0:t.no_refund_probability)||0)),s})})(),o=a||r?[{dataKey:"rawDailyCancellation",name:"Raw Daily Cancellation",stroke:"#dc2626",strokeDasharray:"0"},{dataKey:"smoothedDailyCancellation",name:"Smoothed Daily Cancellation",stroke:"#dc2626",strokeDasharray:"5 5"},{dataKey:"rawCumulativeCancellation",name:"Raw Cumulative Cancellation",stroke:"#b91c1c",strokeDasharray:"0"},{dataKey:"smoothedCumulativeCancellation",name:"Smoothed Cumulative Cancellation",stroke:"#b91c1c",strokeDasharray:"5 5"}]:n?[{dataKey:"rawDailyRefund",name:"Raw Daily Refund",stroke:"#2563eb",strokeDasharray:"0"},{dataKey:"smoothedDailyRefund",name:"Smoothed Daily Refund",stroke:"#2563eb",strokeDasharray:"5 5"},{dataKey:"rawCumulativeRefund",name:"Raw Cumulative Refund",stroke:"#1d4ed8",strokeDasharray:"0"},{dataKey:"smoothedCumulativeRefund",name:"Smoothed Cumulative Refund",stroke:"#1d4ed8",strokeDasharray:"5 5"}]:[],c=a?[{dataKey:"conversionProbabilityFromDayOnward",name:"Conversion Probability from Day Onward",stroke:"#059669",strokeDasharray:"0",strokeWidth:3},{dataKey:"survivalProbabilityThisDay",name:"Daily Survival Probability",stroke:"#10b981",strokeDasharray:"5 5",strokeWidth:2}]:[],d=n?[{dataKey:"totalRefundProbability",name:"Total Refund Probability",stroke:"#dc2626",strokeDasharray:"0",strokeWidth:3},{dataKey:"noRefundProbability",name:"No Refund Probability (Retention)",stroke:"#059669",strokeDasharray:"5 5",strokeWidth:3}]:[];return(0,dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:(0,dt.jsxs)("div",{className:"p-6",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,dt.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[e," - Lifecycle Charts"]}),(0,dt.jsx)("button",{onClick:w,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,dt.jsx)(SL,{size:24})})]}),(0,dt.jsx)("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["Current Filter: ",l||"All Products (Aggregate)"]}),(0,dt.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Use the main product toggle to change filter"})]})}),s.length>0?(0,dt.jsxs)("div",{className:"space-y-8",children:[a&&c.length>0&&(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\ud83c\udfaf Revenue Estimation: Conversion Probabilities"}),(0,dt.jsx)("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/30 rounded-lg",children:(0,dt.jsxs)("p",{className:"text-sm text-green-800 dark:text-green-200",children:[(0,dt.jsx)("strong",{children:"Conversion Probability from Day Onward:"})," Shows the likelihood that a user on day X will convert by the end of the trial. This is used in revenue estimation: ",(0,dt.jsx)("code",{children:"Expected Revenue = P_convert(x) \xd7 P_not_refunded \xd7 ARPU"})]})}),(0,dt.jsx)("div",{className:"h-80",children:(0,dt.jsx)(Rs,{width:"100%",height:"100%",children:(0,dt.jsxs)(Yw,{data:s,children:[(0,dt.jsx)(pN,{strokeDasharray:"3 3"}),(0,dt.jsx)(Lw,{dataKey:"day",label:{value:"Trial Day",position:"insideBottom",offset:-5}}),(0,dt.jsx)(Kw,{label:{value:"Probability (%)",angle:-90,position:"insideLeft"},domain:[0,100]}),(0,dt.jsx)(Fo,{content:i}),(0,dt.jsx)(pc,{}),c.map((e,t)=>(0,dt.jsx)(rw,{type:"monotone",dataKey:e.dataKey,stroke:e.stroke,strokeDasharray:e.strokeDasharray,name:e.name,strokeWidth:e.strokeWidth||2,dot:{r:4}},t))]})})})]}),n&&d.length>0&&(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\ud83d\udcb0 Revenue Estimation: Refund Probabilities"}),(0,dt.jsx)("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:(0,dt.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[(0,dt.jsx)("strong",{children:"Total Refund Probability:"})," The total likelihood of refunding within the refund window.",(0,dt.jsx)("strong",{children:" No Refund Probability:"})," Used in revenue estimation as the retention component."]})}),(0,dt.jsx)("div",{className:"h-80",children:(0,dt.jsx)(Rs,{width:"100%",height:"100%",children:(0,dt.jsxs)(Yw,{data:s,children:[(0,dt.jsx)(pN,{strokeDasharray:"3 3"}),(0,dt.jsx)(Lw,{dataKey:"day",label:{value:"Days Since Conversion",position:"insideBottom",offset:-5}}),(0,dt.jsx)(Kw,{label:{value:"Probability (%)",angle:-90,position:"insideLeft"},domain:[0,100]}),(0,dt.jsx)(Fo,{content:i}),(0,dt.jsx)(pc,{}),d.map((e,t)=>(0,dt.jsx)(rw,{type:"monotone",dataKey:e.dataKey,stroke:e.stroke,strokeDasharray:e.strokeDasharray,name:e.name,strokeWidth:e.strokeWidth||2,dot:{r:4}},t))]})})})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Daily Rates Chart"}),(0,dt.jsx)("div",{className:"h-80",children:(0,dt.jsx)(Rs,{width:"100%",height:"100%",children:(0,dt.jsxs)(Yw,{data:s,children:[(0,dt.jsx)(pN,{strokeDasharray:"3 3"}),(0,dt.jsx)(Lw,{dataKey:"day",label:{value:"Days",position:"insideBottom",offset:-5}}),(0,dt.jsx)(Kw,{label:{value:"Rate (%)",angle:-90,position:"insideLeft"}}),(0,dt.jsx)(Fo,{content:i}),(0,dt.jsx)(pc,{}),o.filter(e=>e.dataKey.includes("Daily")||e.dataKey.includes("daily")).map((e,t)=>(0,dt.jsx)(rw,{type:"monotone",dataKey:e.dataKey,stroke:e.stroke,strokeDasharray:e.strokeDasharray,name:e.name,strokeWidth:2,dot:{r:3}},t))]})})})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Cumulative Rates Chart"}),(0,dt.jsx)("div",{className:"h-80",children:(0,dt.jsx)(Rs,{width:"100%",height:"100%",children:(0,dt.jsxs)(Yw,{data:s,children:[(0,dt.jsx)(pN,{strokeDasharray:"3 3"}),(0,dt.jsx)(Lw,{dataKey:"day",label:{value:"Days",position:"insideBottom",offset:-5}}),(0,dt.jsx)(Kw,{label:{value:"Rate (%)",angle:-90,position:"insideLeft"}}),(0,dt.jsx)(Fo,{content:i}),(0,dt.jsx)(pc,{}),o.filter(e=>e.dataKey.includes("Cumulative")||e.dataKey.includes("cumulative")).map((e,t)=>(0,dt.jsx)(rw,{type:"monotone",dataKey:e.dataKey,stroke:e.stroke,strokeDasharray:e.strokeDasharray,name:e.name,strokeWidth:2,dot:{r:3}},t))]})})})]}),(0,dt.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:[(0,dt.jsx)("h5",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Chart Information"}),(0,dt.jsxs)("div",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Solid lines:"})," Raw data points"]}),(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Dashed lines:"})," Smoothed data (when available)"]}),a&&(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Red colors:"})," Cancellation metrics (Trial Started \u2192 Cancelled)"]}),(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Green colors:"})," Conversion probabilities (used for revenue estimation)"]}),(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Thick green line:"})," Pre-calculated conversion probability from each day onward"]})]}),r&&(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Red colors:"})," Cancellation metrics"]}),n&&(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Blue colors:"})," Refund metrics"]}),(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Red/Green colors:"})," Refund probabilities (used for revenue estimation)"]}),(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Thick lines:"})," Pre-calculated total refund probabilities"]})]})]})]})]}):(0,dt.jsx)("div",{className:"text-center py-8",children:(0,dt.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No chart data available for this lifecycle analysis."})})]})})})},E=()=>{if(!g)return null;const{title:e,rateCalculationData:t}=g,r=t.extension_info,n=(null===r||void 0===r?void 0:r.per_product_info)||{},a=t.aggregate_rates,i=t.rates_by_product||{},s=k();return(0,dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,dt.jsxs)("div",{className:"p-6",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,dt.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[e," - Product Breakdown"]}),(0,dt.jsx)("button",{onClick:S,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,dt.jsx)(SL,{size:24})})]}),(0,dt.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:[(0,dt.jsx)("h4",{className:"text-lg font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Aggregate Summary"}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,dt.jsx)("div",{children:(0,dt.jsxs)("p",{className:"text-blue-700 dark:text-blue-300",children:[(0,dt.jsx)("strong",{children:"Total Users:"})," ",(null===a||void 0===a?void 0:a.total_sample_size)||0]})}),(0,dt.jsx)("div",{children:(0,dt.jsxs)("p",{className:"text-blue-700 dark:text-blue-300",children:[(0,dt.jsx)("strong",{children:"Extension Used:"})," ",(null===a||void 0===a?void 0:a.extension_days_used)||0," days"]})}),(0,dt.jsx)("div",{children:(0,dt.jsxs)("p",{className:"text-blue-700 dark:text-blue-300",children:[(0,dt.jsx)("strong",{children:"Products with Data:"})," ",Object.keys(i).length]})})]})]}),(0,dt.jsxs)("div",{className:"space-y-4",children:[(0,dt.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Per-Product Details (",s.length," products)"]}),s.map(e=>{const t=n[e]||{},r=i[e]||{},a=t.final_sample_size||r.total_sample_size||0,s=t.extension_days_used||r.extension_days_used||0,o=t.attempts_made||r.extension_attempts||1;let c="No Data",d="text-gray-500",u="bg-gray-50 dark:bg-gray-700";a>=10?(c="Sufficient Data",d="text-green-600 dark:text-green-400",u="bg-green-50 dark:bg-green-900/20"):a>0&&(c="Insufficient Data (<10 users)",d="text-orange-600 dark:text-orange-400",u="bg-orange-50 dark:bg-orange-900/20");let h="No lookback data available";if(void 0!==t.final_sample_size||void 0!==r.total_sample_size){const e=t.user_counts_by_step;if(e){const t=e.base||0,r=e["30_days"]||0,n=e["60_days"]||0;0===s?h="Base: ".concat(t):30===s?h="Base: ".concat(t,", +0-30: ").concat(r):60===s&&(h="Base: ".concat(t,", +0-30: ").concat(r,", +31-60: ").concat(n))}else 0===s?h="Base: ".concat(a):30===s?h="Base: ?, +0-30: ".concat(a," (final)"):60===s&&(h="Base: ?, +0-30: ?, +31-60: ".concat(a," (final)"))}return(0,dt.jsxs)("div",{className:"p-4 rounded-lg border ".concat(u," border-gray-200 dark:border-gray-600"),children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,dt.jsx)("h5",{className:"font-medium text-gray-900 dark:text-white",children:e}),(0,dt.jsx)("span",{className:"text-sm font-medium ".concat(d),children:c})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm text-gray-600 dark:text-gray-400",children:[(0,dt.jsx)("div",{children:(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Final Users:"})," ",a]})}),(0,dt.jsx)("div",{children:(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Extension:"})," ",s," days"]})}),(0,dt.jsx)("div",{children:(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Attempts:"})," ",o]})}),(0,dt.jsx)("div",{children:(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Used in Display:"})," ",l===e?a>=10?"Yes (Product-specific)":"No (Fallback to aggregate)":"N/A"]})})]}),(0,dt.jsx)("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Lookback breakdown:"})," ",h]})})]},e)})]}),(0,dt.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,dt.jsx)("h5",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"How This Works"}),(0,dt.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Lookback Strategy:"})," Each product tries to reach 100+ users by extending lookback period (Base \u2192 +0-30 days \u2192 +31-60 days)"]}),(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Display Logic:"})," Product-specific data shown only if \u226510 users, otherwise falls back to aggregate"]}),(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Aggregate:"})," Combined data from all products that have sufficient data"]}),(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Current Filter:"})," ",l||"All Products (Aggregate)"]}),(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Note:"}),' Products with "No Data" for this lifecycle type don\'t participate in the aggregate calculation']})]})]})]})})})};if(!o)return(0,dt.jsx)("div",{className:"p-6 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:(0,dt.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No lifecycle rate data available."})});return(0,dt.jsxs)("div",{className:"space-y-6",children:[(0,dt.jsx)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-700",children:(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-blue-800 dark:text-blue-200",children:"Lifecycle Analysis - Product Filter"}),(0,dt.jsx)("p",{className:"text-sm text-blue-600 dark:text-blue-300",children:l?"Showing data for: ".concat(l):"Showing aggregate data across all products"}),(0,dt.jsx)("p",{className:"text-xs text-blue-500 dark:text-blue-400 mt-1",children:"Note: Product-specific data requires minimum 10 users per lifecycle type. Tables with fewer users will show aggregate data."})]}),(0,dt.jsxs)("select",{value:l||"",onChange:e=>c(e.target.value||null),className:"px-4 py-2 border border-blue-300 dark:border-blue-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,dt.jsx)("option",{value:"",children:"All Products (Aggregate)"}),j.map(e=>(0,dt.jsx)("option",{value:e,children:e},e))]})]})}),(0,dt.jsx)("div",{className:"space-y-8",children:[{key:"trial_to_outcome",title:"Trial Started \u2192 Cancelled",dataKey:"trial_to_outcome"},{key:"trial_converted_to_cancellation",title:"Trial Converted \u2192 Cancelled",dataKey:"trial_converted_to_cancellation"},{key:"trial_converted_to_refund",title:"Trial Converted \u2192 Refunded",dataKey:"trial_converted_to_refund"},{key:"initial_purchase_to_cancellation",title:"Initial Purchase \u2192 Cancelled",dataKey:"initial_purchase_to_cancellation"},{key:"initial_purchase_to_refund",title:"Initial Purchase \u2192 Refunded",dataKey:"initial_purchase_to_refund"},{key:"renewal_to_cancellation",title:"Renewal \u2192 Cancelled",dataKey:"renewal_to_cancellation"},{key:"renewal_to_refund",title:"Renewal \u2192 Refunded",dataKey:"renewal_to_refund"}].map(e=>{const t=y&&y[e.dataKey]?y[e.dataKey]:null;return t?O(e.title,t):(0,dt.jsx)("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.title}),(0,dt.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"No data available"})]})},e.key)})}),d&&(0,dt.jsx)(C,{}),m&&(0,dt.jsx)(E,{})]})},CL=e=>{var t,r,n,i,s,o,l,c,d,u,h,p,m,f,g,x,b;let{data:y}=e;const[v,_]=(0,a.useState)(!1);console.log("ARPUDisplay received data:",y),console.log("Data structure:",{hasData:!!y,hasDataData:!(null===y||void 0===y||!y.data),dataKeys:y?Object.keys(y):[],dataDataKeys:null!==y&&void 0!==y&&y.data?Object.keys(y.data):[]});let k=null,j=null,w=null;var N,S,O,C;if(null!==y&&void 0!==y&&null!==(t=y.data)&&void 0!==t&&null!==(r=t.structured_format)&&void 0!==r&&r.arpu_analysis)console.log("Using structured_format.arpu_analysis"),k=y.data.structured_format.arpu_analysis,w=null===(N=y.data.structured_format.cohort_analysis)||void 0===N?void 0:N.cohort_breakdown,j=null===(S=y.data.structured_format)||void 0===S||null===(O=S.cohort_data)||void 0===O||null===(C=O.cleaned_cohort)||void 0===C?void 0:C.metadata,console.log("Structured format data:",{arpuData:k,extendedCohortInfo:w,cohortSummary:j});else if(null!==y&&void 0!==y&&null!==(n=y.data)&&void 0!==n&&n.legacy_format){var E;console.log("Using legacy_format");const e=y.data.legacy_format;k={cohort_wide:{arpu:e.arpu||0,total_revenue:0,paying_users:0,net_revenue:0},per_product:{},metadata:{calculation_method:"legacy_format",message:"Data from legacy format",lookback_days:(null===(E=e.metadata)||void 0===E?void 0:E.lookback_days_used)||0}},e.arpu_per_product&&Object.entries(e.arpu_per_product).forEach(e=>{let[t,r]=e;k.per_product[t]={arpu:r,total_revenue:0,paying_users:0,event_count:0,net_revenue:0}}),w={base_users:e.base_users||0,lookback_users:e.lookback_users||0,total_users:e.comprehensive_cohort_size||0,base_percentage:0,lookback_percentage:0},w.total_users>0&&(w.base_percentage=w.base_users/w.total_users*100,w.lookback_percentage=w.lookback_users/w.total_users*100),j={user_count:e.cohort_size||0,event_count:e.total_events||0},console.log("Legacy format data:",{arpuData:k,extendedCohortInfo:w,cohortSummary:j,legacyData:e})}else if(null!==y&&void 0!==y&&null!==(i=y.structured_format)&&void 0!==i&&i.arpu_analysis){var P,A,M,T;console.log("Using direct structured_format.arpu_analysis"),k=y.structured_format.arpu_analysis,w=null===(P=y.structured_format.cohort_analysis)||void 0===P?void 0:P.cohort_breakdown,j=null===(A=y.structured_format)||void 0===A||null===(M=A.cohort_data)||void 0===M||null===(T=M.cleaned_cohort)||void 0===T?void 0:T.metadata}else if(null!==y&&void 0!==y&&y.legacy_format){var D;console.log("Using direct legacy_format");const e=y.legacy_format;k={cohort_wide:{arpu:e.arpu||0,total_revenue:0,paying_users:0,net_revenue:0},per_product:{},metadata:{calculation_method:"legacy_format",message:"Data from legacy format",lookback_days:(null===(D=e.metadata)||void 0===D?void 0:D.lookback_days_used)||0}},e.arpu_per_product&&Object.entries(e.arpu_per_product).forEach(e=>{let[t,r]=e;k.per_product[t]={arpu:r,total_revenue:0,paying_users:0,event_count:0,net_revenue:0}}),w={base_users:e.base_users||0,lookback_users:e.lookback_users||0,total_users:e.comprehensive_cohort_size||0,base_percentage:0,lookback_percentage:0},w.total_users>0&&(w.base_percentage=w.base_users/w.total_users*100,w.lookback_percentage=w.lookback_users/w.total_users*100),j={user_count:e.cohort_size||0,event_count:e.total_events||0}}else null!==y&&void 0!==y&&null!==(s=y.data)&&void 0!==s&&s.arpu_data&&(console.log("Using regular arpu_data"),k=y.data.arpu_data,j=y.data.cohort_summary);if(console.log("FINAL EXTRACTED ARPU DATA:",{arpuData:k,extendedCohortInfo:w,cohortSummary:j,hasArpuData:!!k}),!k)return(0,dt.jsxs)("div",{className:"text-center py-8",children:[(0,dt.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No ARPU data available. Run an analysis to see results."}),(0,dt.jsxs)("div",{className:"mt-4 text-xs text-gray-400",children:["Debug: ",JSON.stringify({hasData:!!y,hasDataData:!(null===y||void 0===y||!y.data),dataKeys:y?Object.keys(y):[],dataDataKeys:null!==y&&void 0!==y&&y.data?Object.keys(y.data):[]})]})]});const R=k.cohort_wide||{},I=k.per_product||{},L=k.metadata||{},F=L.base_revenue||0,z=L.lookback_revenue||0,U=F+z||R.total_revenue||0,B=L.base_contribution_pct||0,V=L.lookback_contribution_pct||0,H=L.lookback_days_used||L.lookback_days||(null===y||void 0===y||null===(o=y.data)||void 0===o||null===(l=o.structured_format)||void 0===l||null===(c=l.metadata)||void 0===c?void 0:c.lookback_days_used)||(null===y||void 0===y||null===(d=y.structured_format)||void 0===d||null===(u=d.metadata)||void 0===u?void 0:u.lookback_days_used)||0,W=e=>null===e||void 0===e||isNaN(e)?"$0.00":"$".concat(Number(e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),$=e=>null===e||void 0===e||isNaN(e)?"0":Number(e).toLocaleString(),q=e=>null===e||void 0===e||isNaN(e)?"0.0%":"".concat(Number(e).toFixed(1),"%"),G=Object.entries(I).sort((e,t)=>{let[,r]=e,[,n]=t;return(n.arpu||0)-(r.arpu||0)}),K=Object.entries(I).filter(e=>{let[,t]=e;return 0===(t.arpu||0)}),Y=K.length>0,X=(()=>{const e=L.base_non_refunded_users||0,t=L.lookback_non_refunded_users||0,r=L.base_revenue||0,n=L.lookback_revenue||0,a=r-(L.base_refunds||0),i=n-(L.lookback_refunds||0);return{baseARPU:e>0?a/e:0,lookbackARPU:t>0?i/t:0,hasData:e>0||t>0,baseNetRevenue:a,lookbackNetRevenue:i}})();return(0,dt.jsxs)("div",{className:"space-y-6",children:[(0,dt.jsxs)("div",{className:"mb-4",children:[(0,dt.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Cohort-Wide ARPU Analysis"}),(null===(h=w)||void 0===h?void 0:h.base_users)>0&&(null===(p=w)||void 0===p?void 0:p.lookback_users)>0&&(0,dt.jsx)("div",{className:"mb-4 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:(0,dt.jsxs)("div",{className:"text-sm text-amber-800 dark:text-amber-200",children:[(0,dt.jsx)("strong",{children:"Extended Timeline Analysis:"})," This ARPU calculation includes data from an extended timeline.",(0,dt.jsxs)("div",{className:"mt-1 text-xs",children:["Total Users: ",null===(m=w)||void 0===m?void 0:m.total_users.toLocaleString()," (",null===(f=w)||void 0===f?void 0:f.base_users.toLocaleString()," base period + ",null===(g=w)||void 0===g?void 0:g.lookback_users.toLocaleString()," lookback period)",H>0&&" \u2022 Lookback: ".concat(H," days")]})]})}),X.hasData&&(0,dt.jsxs)("div",{className:"mb-4 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg border border-indigo-200 dark:border-indigo-800",children:[(0,dt.jsx)("div",{className:"text-sm font-medium text-indigo-800 dark:text-indigo-200 mb-2",children:"Quick ARPU Comparison by Period (Net Revenue \xf7 Non-Refunded Users):"}),(0,dt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400",children:W(X.baseARPU)}),(0,dt.jsx)("div",{className:"text-xs text-indigo-700 dark:text-indigo-300",children:"Base Period ARPU"}),(0,dt.jsxs)("div",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:[W(X.baseNetRevenue)," \xf7 ",$(L.base_non_refunded_users||0)," users"]})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400",children:W(X.lookbackARPU)}),(0,dt.jsx)("div",{className:"text-xs text-indigo-700 dark:text-indigo-300",children:"Lookback Period ARPU"}),(0,dt.jsxs)("div",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:[W(X.lookbackNetRevenue)," \xf7 ",$(L.lookback_non_refunded_users||0)," users"]})]})]})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,dt.jsxs)("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,dt.jsx)("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:W(R.arpu)}),(0,dt.jsx)("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"ARPU (Net Revenue \xf7 Non-Refunded Users)"}),(0,dt.jsxs)("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:[$((L.base_non_refunded_users||0)+(L.lookback_non_refunded_users||0)||R.paying_users)," users, ",W(R.net_revenue||R.total_revenue)," net revenue"]}),(F>0||z>0)&&U>0&&(0,dt.jsxs)("div",{className:"mt-3 pt-3 border-t border-blue-200 dark:border-blue-700",children:[(0,dt.jsx)("div",{className:"text-xs font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Revenue Timeline Breakdown:"}),(0,dt.jsxs)("div",{className:"space-y-1",children:[(0,dt.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,dt.jsx)("span",{className:"text-blue-500 dark:text-blue-500",children:"Base Period:"}),(0,dt.jsxs)("span",{className:"text-blue-600 dark:text-blue-400",children:[W(F)," (",B.toFixed(1),"%)"]})]}),(0,dt.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,dt.jsx)("span",{className:"text-blue-500 dark:text-blue-500",children:"Lookback Period:"}),(0,dt.jsxs)("span",{className:"text-blue-600 dark:text-blue-400",children:[W(z)," (",V.toFixed(1),"%)"]})]}),(0,dt.jsxs)("div",{className:"flex justify-between text-xs font-medium border-t border-blue-200 dark:border-blue-700 pt-1",children:[(0,dt.jsx)("span",{className:"text-blue-600 dark:text-blue-400",children:"Total:"}),(0,dt.jsx)("span",{className:"text-blue-700 dark:text-blue-300",children:W(U)})]})]})]})]}),(0,dt.jsxs)("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,dt.jsx)("div",{className:"text-2xl font-semibold text-gray-700 dark:text-gray-300",children:W(R.total_revenue||U)}),(0,dt.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Revenue"}),R.total_refunds>0&&(0,dt.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[W(R.total_refunds)," refunded"]}),(F>0||z>0)&&(0,dt.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[(0,dt.jsx)("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Revenue Sources:"}),(0,dt.jsxs)("div",{className:"space-y-1",children:[(0,dt.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,dt.jsx)("span",{className:"text-gray-500 dark:text-gray-500",children:"Base Period:"}),(0,dt.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:W(F)})]}),L.base_refunds>0&&(0,dt.jsxs)("div",{className:"flex justify-between text-xs ml-2",children:[(0,dt.jsx)("span",{className:"text-red-500 dark:text-red-400",children:"Base Refunds:"}),(0,dt.jsxs)("span",{className:"text-red-600 dark:text-red-400",children:["-",W(L.base_refunds)]})]}),(0,dt.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,dt.jsx)("span",{className:"text-gray-500 dark:text-gray-500",children:"Lookback Period:"}),(0,dt.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:W(z)})]}),L.lookback_refunds>0&&(0,dt.jsxs)("div",{className:"flex justify-between text-xs ml-2",children:[(0,dt.jsx)("span",{className:"text-red-500 dark:text-red-400",children:"Lookback Refunds:"}),(0,dt.jsxs)("span",{className:"text-red-600 dark:text-red-400",children:["-",W(L.lookback_refunds)]})]}),R.total_refunds>0&&!(L.base_refunds>0)&&!(L.lookback_refunds>0)&&(0,dt.jsxs)("div",{className:"flex justify-between text-xs text-red-600 dark:text-red-400",children:[(0,dt.jsx)("span",{children:"Total Refunds:"}),(0,dt.jsxs)("span",{children:["-",W(R.total_refunds)]})]}),(0,dt.jsxs)("div",{className:"flex justify-between text-xs font-medium border-t border-gray-200 dark:border-gray-600 pt-1",children:[(0,dt.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Net Revenue:"}),(0,dt.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:W(R.net_revenue||U)})]})]})]})]}),(0,dt.jsxs)("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,dt.jsx)("div",{className:"text-2xl font-semibold text-gray-700 dark:text-gray-300",children:$(R.total_paying_users||R.paying_users)}),(0,dt.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Paying Users"}),R.refund_users>0&&(0,dt.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[$(R.refund_users)," refunded (",(R.refund_users/(R.total_paying_users||R.paying_users)*100).toFixed(1),"%)"]}),((L.base_paying_users||0)>0||(L.lookback_paying_users||0)>0)&&(0,dt.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[(0,dt.jsx)("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"User Timeline Distribution:"}),(0,dt.jsxs)("div",{className:"space-y-1",children:[(0,dt.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,dt.jsx)("span",{className:"text-gray-500 dark:text-gray-500",children:"Base Period:"}),(0,dt.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[$(L.base_paying_users||0)," paying"]})]}),(L.base_refund_users||0)>0&&(0,dt.jsxs)("div",{className:"flex justify-between text-xs ml-2",children:[(0,dt.jsx)("span",{className:"text-red-500 dark:text-red-400",children:"Base Refunds:"}),(0,dt.jsxs)("span",{className:"text-red-600 dark:text-red-400",children:[$(L.base_refund_users)," users (",(L.base_refund_users/L.base_paying_users*100).toFixed(1),"%)"]})]}),(0,dt.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,dt.jsx)("span",{className:"text-gray-500 dark:text-gray-500",children:"Lookback Period:"}),(0,dt.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[$(L.lookback_paying_users||0)," paying"]})]}),(L.lookback_refund_users||0)>0&&(0,dt.jsxs)("div",{className:"flex justify-between text-xs ml-2",children:[(0,dt.jsx)("span",{className:"text-red-500 dark:text-red-400",children:"Lookback Refunds:"}),(0,dt.jsxs)("span",{className:"text-red-600 dark:text-red-400",children:[$(L.lookback_refund_users)," users (",(L.lookback_refund_users/L.lookback_paying_users*100).toFixed(1),"%)"]})]}),(0,dt.jsxs)("div",{className:"flex justify-between text-xs font-medium border-t border-gray-200 dark:border-gray-600 pt-1",children:[(0,dt.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Non-Refunded Users:"}),(0,dt.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:$((L.base_non_refunded_users||0)+(L.lookback_non_refunded_users||0))})]}),H>0&&(0,dt.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["Lookback: ",H," days"]})]})]}),!((L.base_paying_users||0)>0||(L.lookback_paying_users||0)>0)&&(null===(x=w)||void 0===x?void 0:x.base_users)>0&&(null===(b=w)||void 0===b?void 0:b.lookback_users)>0&&(0,dt.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[(0,dt.jsx)("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"User Timeline Distribution:"}),(0,dt.jsxs)("div",{className:"space-y-1",children:[(0,dt.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,dt.jsx)("span",{className:"text-gray-500 dark:text-gray-500",children:"Base Period:"}),(0,dt.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[$(w.base_users)," (",w.base_percentage.toFixed(1),"%)"]})]}),(0,dt.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,dt.jsx)("span",{className:"text-gray-500 dark:text-gray-500",children:"Lookback Period:"}),(0,dt.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[$(w.lookback_users)," (",w.lookback_percentage.toFixed(1),"%)"]})]}),(0,dt.jsxs)("div",{className:"flex justify-between text-xs font-medium border-t border-gray-200 dark:border-gray-600 pt-1",children:[(0,dt.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Extended:"}),(0,dt.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:$(w.total_users)})]}),H>0&&(0,dt.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["Lookback: ",H," days"]})]})]})]})]}),L.calculation_method&&(0,dt.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,dt.jsx)("span",{className:"px-3 py-1 text-sm rounded-full ".concat("standard"===L.calculation_method?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"extended_lookback"===L.calculation_method?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"),children:"standard"===L.calculation_method?"Standard Calculation - No Lookback Used":"extended_lookback"===L.calculation_method?"Extended Lookback - ".concat(L.lookback_days," Days"):"Fallback Method - Insufficient Data"}),L.lookback_days>0&&"extended_lookback"===L.calculation_method&&(0,dt.jsxs)("span",{className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 rounded-full",children:["Extended by ",L.lookback_days," days for sufficient sample size"]})]})]}),G.length>0&&(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,dt.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["ARPU by Product (",G.length," products",Y?" + ".concat(K.length," with $0 ARPU"):"",")"]}),(0,dt.jsxs)("button",{onClick:()=>_(!v),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:[v?"Hide":"Show"," calculation details"]})]}),Y&&(0,dt.jsx)("div",{className:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:(0,dt.jsxs)("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[(0,dt.jsx)("strong",{children:"Note:"})," ",K.length," product",K.length>1?"s":""," with $0.00 ARPU ",K.length>1?"are":"is"," not displayed above.",(0,dt.jsx)("div",{className:"text-xs mt-1",children:K.length>5?"".concat(K.slice(0,5).map(e=>{let[t]=e;return t}).join(", ")," and ").concat(K.length-5," more..."):K.map(e=>{let[t]=e;return t}).join(", ")})]})}),(0,dt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:G.filter(e=>{let[,t]=e;return(t.arpu||0)>0}).map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-5 hover:shadow-lg transition-all duration-200",children:[(0,dt.jsx)("div",{className:"mb-4",children:(0,dt.jsx)("h5",{className:"font-semibold text-gray-900 dark:text-white text-sm leading-tight",title:t,children:t.length>45?"".concat(t.substring(0,45),"..."):t})}),(0,dt.jsxs)("div",{className:"text-center mb-4 py-3 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:W(r.arpu)}),(0,dt.jsx)("div",{className:"text-xs text-blue-700 dark:text-blue-300 font-medium",children:"ARPU"})]}),(r.base_revenue>0||r.lookback_revenue>0)&&(r.base_non_refunded_users>0||r.lookback_non_refunded_users>0)&&(0,dt.jsxs)("div",{className:"mb-4 p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded border border-indigo-200 dark:border-indigo-700",children:[(0,dt.jsx)("div",{className:"text-xs font-medium text-indigo-800 dark:text-indigo-300 mb-2",children:"Period ARPU (Net Revenue \xf7 Non-Refunded Users):"}),(0,dt.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-sm font-bold text-indigo-600 dark:text-indigo-400",children:W(r.base_non_refunded_users>0?(r.base_revenue-(r.base_refunds||0))/r.base_non_refunded_users:0)}),(0,dt.jsx)("div",{className:"text-xs text-indigo-700 dark:text-indigo-300",children:"Base"}),(0,dt.jsxs)("div",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:[W((r.base_revenue||0)-(r.base_refunds||0))," \xf7 ",$(r.base_non_refunded_users||0)]})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-sm font-bold text-indigo-600 dark:text-indigo-400",children:W(r.lookback_non_refunded_users>0?(r.lookback_revenue-(r.lookback_refunds||0))/r.lookback_non_refunded_users:0)}),(0,dt.jsx)("div",{className:"text-xs text-indigo-700 dark:text-indigo-300",children:"Lookback"}),(0,dt.jsxs)("div",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:[W((r.lookback_revenue||0)-(r.lookback_refunds||0))," \xf7 ",$(r.lookback_non_refunded_users||0)]})]})]})]}),(0,dt.jsxs)("div",{className:"space-y-3",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-gray-700 rounded",children:[(0,dt.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:r.net_revenue?"Net Revenue":"Total Revenue"}),(0,dt.jsxs)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[W(r.net_revenue||r.total_revenue),r.total_refunds>0&&(0,dt.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[W(r.total_revenue)," total - ",W(r.total_refunds)," refunded"]})]})]}),(r.base_revenue>0||r.lookback_revenue>0)&&(0,dt.jsxs)("div",{className:"py-2 px-3 bg-amber-50 dark:bg-amber-900/20 rounded border border-amber-200 dark:border-amber-700",children:[(0,dt.jsx)("div",{className:"text-xs font-medium text-amber-800 dark:text-amber-300 mb-2",children:"Revenue Timeline:"}),(0,dt.jsxs)("div",{className:"space-y-1",children:[(0,dt.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,dt.jsx)("span",{className:"text-amber-700 dark:text-amber-400",children:"Base Period:"}),(0,dt.jsx)("span",{className:"text-amber-800 dark:text-amber-300 font-medium",children:W(r.base_revenue||0)})]}),r.base_refunds>0&&(0,dt.jsxs)("div",{className:"flex justify-between text-xs ml-2",children:[(0,dt.jsx)("span",{className:"text-red-600 dark:text-red-400",children:"Base Refunds:"}),(0,dt.jsxs)("span",{className:"text-red-700 dark:text-red-400 font-medium",children:["-",W(r.base_refunds)]})]}),(0,dt.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,dt.jsx)("span",{className:"text-amber-700 dark:text-amber-400",children:"Lookback Period:"}),(0,dt.jsx)("span",{className:"text-amber-800 dark:text-amber-300 font-medium",children:W(r.lookback_revenue||0)})]}),r.lookback_refunds>0&&(0,dt.jsxs)("div",{className:"flex justify-between text-xs ml-2",children:[(0,dt.jsx)("span",{className:"text-red-600 dark:text-red-400",children:"Lookback Refunds:"}),(0,dt.jsxs)("span",{className:"text-red-700 dark:text-red-400 font-medium",children:["-",W(r.lookback_refunds)]})]}),(0,dt.jsxs)("div",{className:"flex justify-between text-xs font-medium border-t border-amber-300 dark:border-amber-600 pt-1",children:[(0,dt.jsx)("span",{className:"text-amber-800 dark:text-amber-300",children:"Net Revenue:"}),(0,dt.jsx)("span",{className:"text-amber-900 dark:text-amber-200",children:W(r.net_revenue||r.base_revenue+r.lookback_revenue-(r.base_refunds||0)-(r.lookback_refunds||0))})]}),r.base_revenue>0&&r.lookback_revenue>0&&(0,dt.jsxs)("div",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1 pt-1 border-t border-amber-300 dark:border-amber-600",children:["Base: ",(r.base_revenue/(r.base_revenue+r.lookback_revenue)*100).toFixed(1),"% \u2022 Lookback: ",(r.lookback_revenue/(r.base_revenue+r.lookback_revenue)*100).toFixed(1),"%"]})]})]}),(0,dt.jsxs)("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-gray-700 rounded",children:[(0,dt.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Paying Users"}),(0,dt.jsxs)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[$(r.paying_users),r.refund_users>0&&(0,dt.jsxs)("span",{className:"text-xs text-red-600 dark:text-red-400 ml-1",children:["(",$(r.refund_users)," refunded - ",(r.refund_users/r.paying_users*100).toFixed(1),"%)"]})]})]}),(r.base_non_refunded_users>0||r.lookback_non_refunded_users>0)&&(0,dt.jsxs)("div",{className:"py-2 px-3 bg-purple-50 dark:bg-purple-900/20 rounded border border-purple-200 dark:border-purple-700",children:[(0,dt.jsx)("div",{className:"text-xs font-medium text-purple-800 dark:text-purple-300 mb-2",children:"User Timeline (Used in ARPU):"}),(0,dt.jsxs)("div",{className:"space-y-1",children:[(0,dt.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,dt.jsx)("span",{className:"text-purple-700 dark:text-purple-400",children:"Base Period:"}),(0,dt.jsxs)("span",{className:"text-purple-800 dark:text-purple-300 font-medium",children:[$(r.base_paying_users||0)," paying"]})]}),(r.base_refund_users||0)>0&&(0,dt.jsxs)("div",{className:"flex justify-between text-xs ml-2",children:[(0,dt.jsx)("span",{className:"text-red-600 dark:text-red-400",children:"Base Refunds:"}),(0,dt.jsxs)("span",{className:"text-red-700 dark:text-red-400 font-medium",children:["-",$(r.base_refund_users)," users (",(r.base_refund_users/r.base_paying_users*100).toFixed(1),"%)"]})]}),(0,dt.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,dt.jsx)("span",{className:"text-purple-700 dark:text-purple-400",children:"Lookback Period:"}),(0,dt.jsxs)("span",{className:"text-purple-800 dark:text-purple-300 font-medium",children:[$(r.lookback_paying_users||0)," paying"]})]}),(r.lookback_refund_users||0)>0&&(0,dt.jsxs)("div",{className:"flex justify-between text-xs ml-2",children:[(0,dt.jsx)("span",{className:"text-red-600 dark:text-red-400",children:"Lookback Refunds:"}),(0,dt.jsxs)("span",{className:"text-red-700 dark:text-red-400 font-medium",children:["-",$(r.lookback_refund_users)," users (",(r.lookback_refund_users/r.lookback_paying_users*100).toFixed(1),"%)"]})]}),(0,dt.jsxs)("div",{className:"flex justify-between text-xs font-medium border-t border-purple-300 dark:border-purple-600 pt-1",children:[(0,dt.jsx)("span",{className:"text-purple-800 dark:text-purple-300",children:"Non-Refunded Users:"}),(0,dt.jsx)("span",{className:"text-purple-900 dark:text-purple-200",children:$((r.base_non_refunded_users||0)+(r.lookback_non_refunded_users||0))})]}),(r.base_paying_users||0)>0&&(r.lookback_paying_users||0)>0&&(0,dt.jsxs)("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1 pt-1 border-t border-purple-300 dark:border-purple-600",children:["Base: ",((r.base_paying_users||0)/((r.base_paying_users||0)+(r.lookback_paying_users||0))*100).toFixed(1),"% \u2022 Lookback: ",((r.lookback_paying_users||0)/((r.base_paying_users||0)+(r.lookback_paying_users||0))*100).toFixed(1),"%"]})]})]})]})]},t)})}),v&&(0,dt.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[(0,dt.jsx)("h5",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Calculation Details"}),(0,dt.jsx)("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:(0,dt.jsxs)("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[(0,dt.jsx)("strong",{children:"ARPU Calculation Method:"})," All ARPU values use ",(0,dt.jsx)("strong",{children:"Net Revenue \xf7 Non-Refunded Users"}),(0,dt.jsxs)("div",{className:"text-xs mt-1 text-blue-700 dark:text-blue-300",children:["\u2022 Base ARPU = (Base Revenue - Base Refunds) \xf7 Base Non-Refunded Users",(0,dt.jsx)("br",{}),"\u2022 Lookback ARPU = (Lookback Revenue - Lookback Refunds) \xf7 Lookback Non-Refunded Users",(0,dt.jsx)("br",{}),"\u2022 Combined ARPU = Total Net Revenue \xf7 Total Non-Refunded Users"]})]})}),(0,dt.jsx)("div",{className:"overflow-x-auto",children:(0,dt.jsxs)("table",{className:"min-w-full text-sm",children:[(0,dt.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-700",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"px-3 py-2 text-left text-gray-700 dark:text-gray-300",children:"Product ID"}),(0,dt.jsx)("th",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-300",children:"Total Revenue"}),(0,dt.jsx)("th",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-300",children:"Base Revenue"}),(0,dt.jsx)("th",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-300",children:"Lookback Revenue"}),(0,dt.jsx)("th",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-300",children:"Base Refunds"}),(0,dt.jsx)("th",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-300",children:"Lookback Refunds"}),(0,dt.jsx)("th",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-300",children:"Net Revenue"}),(0,dt.jsx)("th",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-300",children:"Total Paying Users"}),(0,dt.jsx)("th",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-300",children:"Refund %"}),(0,dt.jsx)("th",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-300",children:"Non-Refunded Users"}),(0,dt.jsx)("th",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-300",children:"Base ARPU"}),(0,dt.jsx)("th",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-300",children:"Lookback ARPU"}),(0,dt.jsx)("th",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-300",children:"Combined ARPU"}),(0,dt.jsx)("th",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-300",children:"% of Net Revenue"})]})}),(0,dt.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:G.map(e=>{let[t,r]=e;const n=r.net_revenue||r.total_revenue,a=R.net_revenue||R.total_revenue,i=a>0?n/a*100:0,s=(r.base_non_refunded_users||0)+(r.lookback_non_refunded_users||0)||r.paying_users,o=r.paying_users>0?(r.refund_users||0)/r.paying_users*100:0,l=r.base_non_refunded_users>0?(r.base_revenue-(r.base_refunds||0))/r.base_non_refunded_users:0,c=r.lookback_non_refunded_users>0?(r.lookback_revenue-(r.lookback_refunds||0))/r.lookback_non_refunded_users:0;return(0,dt.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,dt.jsx)("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:(0,dt.jsx)("div",{className:"max-w-xs truncate",title:t,children:t})}),(0,dt.jsx)("td",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-300",children:W(r.total_revenue)}),(0,dt.jsx)("td",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-300",children:W(r.base_revenue||0)}),(0,dt.jsx)("td",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-300",children:W(r.lookback_revenue||0)}),(0,dt.jsx)("td",{className:"px-3 py-2 text-right text-red-600 dark:text-red-400",children:W(r.base_refunds||0)}),(0,dt.jsx)("td",{className:"px-3 py-2 text-right text-red-600 dark:text-red-400",children:W(r.lookback_refunds||0)}),(0,dt.jsx)("td",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-300",children:W(r.net_revenue||r.total_revenue)}),(0,dt.jsx)("td",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-300",children:$(r.paying_users)}),(0,dt.jsx)("td",{className:"px-3 py-2 text-right text-red-600 dark:text-red-400",children:q(o)}),(0,dt.jsx)("td",{className:"px-3 py-2 text-right text-purple-600 dark:text-purple-400 font-medium",children:$(s)}),(0,dt.jsx)("td",{className:"px-3 py-2 text-right text-indigo-600 dark:text-indigo-400",children:W(l)}),(0,dt.jsx)("td",{className:"px-3 py-2 text-right text-indigo-600 dark:text-indigo-400",children:W(c)}),(0,dt.jsx)("td",{className:"px-3 py-2 text-right font-semibold text-green-600 dark:text-green-400",children:W(r.arpu)}),(0,dt.jsx)("td",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-300",children:q(i)})]},t)})})]})})]})]})]})},EL=e=>{let{data:t,position:r,onClose:n,selectedUserId:i,selectedProductId:s}=e;const[o,l]=a.useState(!1),c=a.useRef(null);if(!t)return null;const d=t.value||0,u=t.breakdown||{},h=u.components||{},p=u.formula||"No formula available",m=u.calculation||"No calculation available";return(0,dt.jsxs)("div",{className:"fixed z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg p-4 max-w-md pointer-events-auto",style:{left:r.x,top:r.y,pointerEvents:"auto"},onMouseEnter:()=>{l(!0),c.current&&(clearTimeout(c.current),c.current=null)},onMouseLeave:()=>{l(!1),c.current=setTimeout(()=>{n()},300)},children:[(0,dt.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,dt.jsxs)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:["Estimated Revenue: $",d.toFixed(2)]}),(0,dt.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 ml-2",children:"\xd7"})]}),(0,dt.jsxs)("div",{className:"space-y-3",children:[(()=>{const e=u.trial_converted||{},t=u.initial_purchase||{},r=e.actual_revenue>0,n=t.actual_revenue>0;return r||n?(0,dt.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[(0,dt.jsx)("div",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:"\ud83c\udfaf Refund Rate Analysis"}),r&&(0,dt.jsxs)("div",{className:"mb-2",children:[(0,dt.jsx)("div",{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:"Trial Conversion Refund Rate:"}),(0,dt.jsx)("div",{className:"text-sm font-bold text-blue-900 dark:text-blue-100",children:(()=>{const t=e.actual_revenue||0,r=e.estimated_refunds||0,n=t>0?r/t*100:0;return"".concat(r.toFixed(2)," / ").concat(t.toFixed(2)," = ").concat(n.toFixed(1),"%")})()}),(0,dt.jsxs)("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:["$",(e.estimated_refunds||0).toFixed(2)," estimated refunds on $",(e.actual_revenue||0).toFixed(2)," revenue"]})]}),n&&(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:"Initial Purchase Refund Rate:"}),(0,dt.jsx)("div",{className:"text-sm font-bold text-blue-900 dark:text-blue-100",children:(()=>{const e=t.actual_revenue||0,r=t.estimated_refunds||0,n=e>0?r/e*100:0;return"".concat(r.toFixed(2)," / ").concat(e.toFixed(2)," = ").concat(n.toFixed(1),"%")})()}),(0,dt.jsxs)("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:["$",(t.estimated_refunds||0).toFixed(2)," estimated refunds on $",(t.actual_revenue||0).toFixed(2)," revenue"]})]})]}):null})(),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Formula:"}),(0,dt.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-mono bg-gray-50 dark:bg-gray-700 p-2 rounded",children:p})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Calculation:"}),(0,dt.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-mono bg-gray-50 dark:bg-gray-700 p-2 rounded",children:m})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Components:"}),(0,dt.jsxs)("div",{className:"space-y-1",children:[(()=>{const e=u.components_order,t=h;return e&&Array.isArray(e)?e.map(e=>{const r=t[e];return void 0===r?null:(0,dt.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,dt.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[e,":"]}),(0,dt.jsx)("span",{className:"text-gray-900 dark:text-white font-medium",children:"string"===typeof r?r:"number"===typeof r?e.toLowerCase().includes("revenue")||e.toLowerCase().includes("arpu")?"$".concat(r.toFixed(2)):r.toString():r||"N/A"})]},e)}).filter(Boolean):Object.entries(t).map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,dt.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[t,":"]}),(0,dt.jsx)("span",{className:"text-gray-900 dark:text-white font-medium",children:"string"===typeof r?r:"number"===typeof r?t.toLowerCase().includes("revenue")||t.toLowerCase().includes("arpu")?"$".concat(r.toFixed(2)):r.toString():r||"N/A"})]},t)})})(),(()=>{const e=u.components_order,t=h;return e&&Array.isArray(e)&&0!==e.length||0!==Object.keys(t).length?null:(0,dt.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"No component data available"})})()]})]}),(i||s)&&(0,dt.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:(0,dt.jsxs)("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:[(0,dt.jsx)("strong",{children:"Note:"})," This calculation is specific to the filtered view",i&&" for user ".concat(i),s&&" for product ".concat(s),"."]})})]})]})},PL=e=>{var t,r,n,i,s,o,l,c,d,u;let{data:h,selectedUserId:p="",selectedProductId:m=""}=e;const[f,g]=(0,a.useState)(!1),[x,b]=(0,a.useState)(null),[y,v]=(0,a.useState)({x:0,y:0}),_=a.useRef(null);let k;a.useEffect(()=>()=>{_.current&&clearTimeout(_.current)},[]),console.log("[DEBUG] EventTimelineTable received data:",h),console.log("[DEBUG] Data structure check:",{hasData:!!h,hasDataData:!(null===h||void 0===h||!h.data),hasDailyMetrics:!(null===h||void 0===h||null===(t=h.data)||void 0===t||!t.daily_metrics),hasTimelineData:!(null===h||void 0===h||null===(r=h.data)||void 0===r||!r.timeline_data),hasStructuredFormat:!(null===h||void 0===h||null===(n=h.data)||void 0===n||!n.structured_format),hasTimelineAnalysis:!(null===h||void 0===h||null===(i=h.data)||void 0===i||null===(s=i.structured_format)||void 0===s||!s.timeline_analysis),dataKeys:h?Object.keys(h):[],dataDataKeys:null!==h&&void 0!==h&&h.data?Object.keys(h.data):[]}),console.log("[DEBUG] Raw data.data structure:",null===h||void 0===h?void 0:h.data),console.log("[DEBUG] Available keys in data.data:",null!==h&&void 0!==h&&h.data?Object.keys(h.data):[]),null!==h&&void 0!==h&&null!==(o=h.data)&&void 0!==o&&o.daily_metrics&&(console.log("[DEBUG] daily_metrics type:",typeof h.data.daily_metrics),console.log("[DEBUG] daily_metrics sample:",h.data.daily_metrics));let j=[],w={},N={},S={},O={};const C=!!(null!==h&&void 0!==h&&null!==(l=h.data)&&void 0!==l&&l.daily_metrics||null!==h&&void 0!==h&&null!==(c=h.data)&&void 0!==c&&c.timeline_data||null!==h&&void 0!==h&&null!==(d=h.data)&&void 0!==d&&null!==(u=d.structured_format)&&void 0!==u&&u.timeline_analysis||null!==h&&void 0!==h&&h.data);var E;C&&(null!==(E=h.data.structured_format)&&void 0!==E&&E.timeline_analysis?(k=h.data.structured_format.timeline_analysis,j=k.dates||[],w=k.daily_metrics||{},N=k.cumulative_metrics||{},S=k.user_timelines||{},O=k.user_daily_metrics||{},console.log("[DEBUG] Using unified pipeline format. Timeline data:",k),console.log("[DEBUG] Dates:",j),console.log("[DEBUG] Daily metrics keys:",Object.keys(w)),console.log("[DEBUG] User timelines available:",Object.keys(S).length),console.log("[DEBUG] User daily metrics available:",Object.keys(O).length)):h.data.timeline_data&&h.data.timeline_data.daily_metrics?(k=h.data.timeline_data,j=k.dates||[],w=k.daily_metrics||{},N=k.cumulative_metrics||{},S=k.user_timelines||{},O=k.user_daily_metrics||{}):h.data.daily_metrics&&"object"===typeof h.data.daily_metrics&&h.data.daily_metrics.dates?(k=h.data.daily_metrics,j=k.dates||[],k.event_rows&&j.forEach(e=>{w[e]={},Object.keys(k.event_rows).forEach(t=>{w[e][t]=k.event_rows[t][e]||0})}),O={}):h.data.daily_metrics&&(k=h.data,j=k.dates||[],w=k.daily_metrics||{},N=k.cumulative_metrics||{},S=k.user_timelines||{},O=k.user_daily_metrics||{}));const{availableUsers:P,availableProducts:A}=(0,a.useMemo)(()=>{const e=new Set,t=new Set;return Object.keys(O).forEach(t=>{e.add(t)}),Object.keys(S).forEach(r=>{var n;e.add(r);const a=S[r];a.events&&a.events.forEach(e=>{e.product_id&&t.add(e.product_id)}),null!==(n=a.summary)&&void 0!==n&&n.product_summaries&&Object.keys(a.summary.product_summaries).forEach(e=>{t.add(e)})}),Object.values(w).forEach(r=>{var n;null!==(n=r.estimated_revenue_breakdown)&&void 0!==n&&n.user_breakdowns&&Object.keys(r.estimated_revenue_breakdown.user_breakdowns).forEach(n=>{e.add(n);const a=r.estimated_revenue_breakdown.user_breakdowns[n];a.product_breakdowns&&Object.keys(a.product_breakdowns).forEach(e=>{t.add(e)})})}),{availableUsers:Array.from(e).sort(),availableProducts:Array.from(t).sort()}},[O,S,w]),M=(0,a.useMemo)(()=>{if(!p&&!m)return{dailyMetrics:w,cumulativeMetrics:N};const e={},t={};if(p&&!m){const r=O[p];if(r){let n={trial_started:0,trial_ended:0,trial_converted:0,trial_cancelled:0,initial_purchase:0,subscription_cancelled:0,revenue:0,refund:0,refund_count:0};j.forEach(a=>{const i=r[a];i?(e[a]=Re(Re({},i),{},{revenue_net:(i.revenue||0)-(i.refund||0)}),n.trial_started+=i.trial_started||0,n.trial_ended+=i.trial_ended||0,n.trial_converted+=i.trial_converted||0,n.trial_cancelled+=i.trial_cancelled||0,n.initial_purchase+=i.initial_purchase||0,n.subscription_cancelled+=i.subscription_cancelled||0,n.revenue+=i.revenue||0,n.refund+=i.refund||0,n.refund_count+=i.refund_count||0,t[a]={trial_pending:i.trial_pending||0,subscription_active:i.subscription_active||0,estimated_revenue:i.estimated_revenue||0,cumulative_trial_started:n.trial_started,cumulative_trial_ended:n.trial_ended,cumulative_trial_converted:n.trial_converted,cumulative_trial_cancelled:n.trial_cancelled,cumulative_initial_purchase:n.initial_purchase,cumulative_subscription_cancelled:n.subscription_cancelled,cumulative_revenue:n.revenue,cumulative_refund:n.refund,cumulative_refund_count:n.refund_count,cumulative_revenue_net:n.revenue-n.refund}):(e[a]={trial_started:0,trial_pending:0,trial_ended:0,trial_converted:0,trial_cancelled:0,initial_purchase:0,subscription_active:0,subscription_cancelled:0,revenue:0,refund:0,refund_count:0,estimated_revenue:0,revenue_net:0},t[a]={trial_pending:0,subscription_active:0,estimated_revenue:0,cumulative_trial_started:n.trial_started,cumulative_trial_ended:n.trial_ended,cumulative_trial_converted:n.trial_converted,cumulative_trial_cancelled:n.trial_cancelled,cumulative_initial_purchase:n.initial_purchase,cumulative_subscription_cancelled:n.subscription_cancelled,cumulative_revenue:n.revenue,cumulative_refund:n.refund,cumulative_refund_count:n.refund_count,cumulative_revenue_net:n.revenue-n.refund})})}else j.forEach(r=>{e[r]={trial_started:0,trial_pending:0,trial_ended:0,trial_converted:0,trial_cancelled:0,initial_purchase:0,subscription_active:0,subscription_cancelled:0,revenue:0,refund:0,refund_count:0,estimated_revenue:0,revenue_net:0},t[r]={trial_pending:0,subscription_active:0,estimated_revenue:0,cumulative_trial_started:0,cumulative_trial_ended:0,cumulative_trial_converted:0,cumulative_trial_cancelled:0,cumulative_initial_purchase:0,cumulative_subscription_cancelled:0,cumulative_revenue:0,cumulative_refund:0,cumulative_refund_count:0,cumulative_revenue_net:0}})}else if(m&&!p)j.forEach(r=>{e[r]=Re({},w[r]),t[r]=Re({},N[r])});else if(p&&m){const r=O[p];if(r){let n={trial_started:0,trial_ended:0,trial_converted:0,trial_cancelled:0,initial_purchase:0,subscription_cancelled:0,revenue:0,refund:0,refund_count:0};j.forEach(a=>{const i=r[a];i?(e[a]=Re(Re({},i),{},{revenue_net:(i.revenue||0)-(i.refund||0)}),n.trial_started+=i.trial_started||0,n.trial_ended+=i.trial_ended||0,n.trial_converted+=i.trial_converted||0,n.trial_cancelled+=i.trial_cancelled||0,n.initial_purchase+=i.initial_purchase||0,n.subscription_cancelled+=i.subscription_cancelled||0,n.revenue+=i.revenue||0,n.refund+=i.refund||0,n.refund_count+=i.refund_count||0,t[a]={trial_pending:i.trial_pending||0,subscription_active:i.subscription_active||0,estimated_revenue:i.estimated_revenue||0,cumulative_trial_started:n.trial_started,cumulative_trial_ended:n.trial_ended,cumulative_trial_converted:n.trial_converted,cumulative_trial_cancelled:n.trial_cancelled,cumulative_initial_purchase:n.initial_purchase,cumulative_subscription_cancelled:n.subscription_cancelled,cumulative_revenue:n.revenue,cumulative_refund:n.refund,cumulative_refund_count:n.refund_count,cumulative_revenue_net:n.revenue-n.refund}):(e[a]={trial_started:0,trial_pending:0,trial_ended:0,trial_converted:0,trial_cancelled:0,initial_purchase:0,subscription_active:0,subscription_cancelled:0,revenue:0,refund:0,refund_count:0,estimated_revenue:0,revenue_net:0},t[a]={trial_pending:0,subscription_active:0,estimated_revenue:0,cumulative_trial_started:n.trial_started,cumulative_trial_ended:n.trial_ended,cumulative_trial_converted:n.trial_converted,cumulative_trial_cancelled:n.trial_cancelled,cumulative_initial_purchase:n.initial_purchase,cumulative_subscription_cancelled:n.subscription_cancelled,cumulative_revenue:n.revenue,cumulative_refund:n.refund,cumulative_refund_count:n.refund_count,cumulative_revenue_net:n.revenue-n.refund})})}else j.forEach(r=>{e[r]={trial_started:0,trial_pending:0,trial_ended:0,trial_converted:0,trial_cancelled:0,initial_purchase:0,subscription_active:0,subscription_cancelled:0,revenue:0,refund:0,refund_count:0,estimated_revenue:0,revenue_net:0},t[r]={trial_pending:0,subscription_active:0,estimated_revenue:0,cumulative_trial_started:0,cumulative_trial_ended:0,cumulative_trial_converted:0,cumulative_trial_cancelled:0,cumulative_initial_purchase:0,cumulative_subscription_cancelled:0,cumulative_revenue:0,cumulative_refund:0,cumulative_refund_count:0,cumulative_revenue_net:0}})}return{dailyMetrics:e,cumulativeMetrics:t}},[p,m,w,N,O,j]);if(!C)return(0,dt.jsx)("div",{className:"text-center py-8",children:(0,dt.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No timeline data available. Run an analysis to see results."})});const T=e=>{if(null===e||void 0===e)return"$0";const t=Math.round(Number(e));return"$".concat(t.toLocaleString())},D=e=>null===e||void 0===e?"0":Number(e).toLocaleString(),R=(e,t)=>{if(!p)return null;const r="number"===typeof t?t:0;if(0===r)return null;console.log("[DEBUG] getEstimatedRevenueTooltipData called with:",{date:e,originalValue:t,safeValue:r,valueType:typeof t,selectedUserId:p,selectedProductId:m});const n=O[p];if(!n||!n[e])return console.warn("[WARN] No user metrics found for user ".concat(p," on date ").concat(e)),null;const a=n[e],i=a.tooltip_data;return console.log("[DEBUG] Backend tooltip data for ".concat(p," on ").concat(e,":"),{hasTooltipData:!!i,tooltipData:i,dayMetrics:a}),i?{value:r,breakdown:i.breakdown,result:"$".concat(r.toFixed(2))}:(console.warn("[WARN] No tooltip data found for user ".concat(p," on date ").concat(e)),null)},I=[{key:"daily_trial_started",label:"Trial Started",category:"daily_absolute",categoryLabel:"Daily Absolute Values",getValue:e=>{var t;return(null===(t=M.dailyMetrics[e])||void 0===t?void 0:t.trial_started)||0},getCumulativeValue:e=>{var t;return(null===(t=M.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_trial_started)||0},format:D},{key:"daily_trial_pending",label:"Trial Pending",category:"daily_absolute",getValue:e=>{var t;return(null===(t=M.dailyMetrics[e])||void 0===t?void 0:t.trial_pending)||0},getCumulativeValue:e=>{var t;return(null===(t=M.dailyMetrics[e])||void 0===t?void 0:t.trial_pending)||0},format:D},{key:"daily_trial_ended",label:"Trial Ended",category:"daily_absolute",getValue:e=>{var t;return(null===(t=M.dailyMetrics[e])||void 0===t?void 0:t.trial_ended)||0},getCumulativeValue:e=>{var t;return(null===(t=M.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_trial_ended)||0},format:D},{key:"daily_trial_cancelled",label:"Trial Cancelled",category:"daily_absolute",getValue:e=>{var t;return(null===(t=M.dailyMetrics[e])||void 0===t?void 0:t.trial_cancelled)||0},getCumulativeValue:e=>{var t;return(null===(t=M.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_trial_cancelled)||0},format:D},{key:"daily_trial_converted",label:"Trial Converted",category:"daily_absolute",getValue:e=>{var t;return(null===(t=M.dailyMetrics[e])||void 0===t?void 0:t.trial_converted)||0},getCumulativeValue:e=>{var t;return(null===(t=M.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_trial_converted)||0},format:D},{key:"daily_initial_purchase",label:"Initial Purchase",category:"daily_absolute",getValue:e=>{var t;return(null===(t=M.dailyMetrics[e])||void 0===t?void 0:t.initial_purchase)||0},getCumulativeValue:e=>{var t;return(null===(t=M.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_initial_purchase)||0},format:D},{key:"daily_subscription_active",label:"Subscription Active",category:"daily_absolute",getValue:e=>{var t;return(null===(t=M.dailyMetrics[e])||void 0===t?void 0:t.subscription_active)||0},getCumulativeValue:e=>{var t;return(null===(t=M.dailyMetrics[e])||void 0===t?void 0:t.subscription_active)||0},format:D},{key:"daily_subscription_cancelled",label:"Subscription Cancelled",category:"daily_absolute",getValue:e=>{var t;return(null===(t=M.dailyMetrics[e])||void 0===t?void 0:t.subscription_cancelled)||0},getCumulativeValue:e=>{var t;return(null===(t=M.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_subscription_cancelled)||0},format:D},{key:"daily_users",label:"Daily Users",category:"daily_absolute",getValue:e=>{var t;return(null===(t=M.dailyMetrics[e])||void 0===t?void 0:t.daily_users)||0},getCumulativeValue:e=>{var t;return(null===(t=M.dailyMetrics[e])||void 0===t?void 0:t.cumulative_users)||0},format:D},{key:"daily_refund_count",label:"Refunds",category:"daily_absolute",getValue:e=>{var t;return(null===(t=M.dailyMetrics[e])||void 0===t?void 0:t.refund_count)||0},getCumulativeValue:e=>{var t;return(null===(t=M.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_refund_count)||0},format:D},{key:"daily_revenue",label:"Revenue",category:"revenue",categoryLabel:"Revenue Values",getValue:e=>{var t;return(null===(t=M.dailyMetrics[e])||void 0===t?void 0:t.revenue)||0},getCumulativeValue:e=>{var t;return(null===(t=M.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_revenue)||0},format:T},{key:"daily_refund",label:"Refunds",category:"revenue",getValue:e=>{var t;return(null===(t=M.dailyMetrics[e])||void 0===t?void 0:t.refund)||0},getCumulativeValue:e=>{var t;return(null===(t=M.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_refund)||0},format:T},{key:"daily_revenue_net",label:"Net Revenue",category:"revenue",getValue:e=>{var t;return(null===(t=M.dailyMetrics[e])||void 0===t?void 0:t.revenue_net)||0},getCumulativeValue:e=>{var t;return(null===(t=M.cumulativeMetrics[e])||void 0===t?void 0:t.cumulative_revenue_net)||0},format:T},{key:"daily_estimated_revenue",label:"Estimated Revenue",category:"revenue",isEstimatedRevenue:!0,getValue:e=>{var t;return(null===(t=M.dailyMetrics[e])||void 0===t?void 0:t.estimated_revenue)||0},getCumulativeValue:e=>{var t;return(null===(t=M.dailyMetrics[e])||void 0===t?void 0:t.estimated_revenue)||0},format:T,getTooltipData:e=>{var t,r;const n=f?(null===(t=M.dailyMetrics[e])||void 0===t?void 0:t.estimated_revenue)||0:(null===(r=M.dailyMetrics[e])||void 0===r?void 0:r.estimated_revenue)||0;return R(e,n)}}],L=I.reduce((e,t)=>(e[t.category]||(e[t.category]={label:t.categoryLabel||t.category,metrics:[]}),e[t.category].metrics.push(t),e),{});return(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsxs)("div",{className:"mb-8 bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,dt.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Daily Event & Revenue Timeline"}),(0,dt.jsx)("div",{className:"flex gap-2",children:(0,dt.jsx)("button",{onClick:()=>g(!f),className:"px-3 py-1 text-sm rounded-full ".concat(f?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-white"),children:f?"Show Daily":"Show Cumulative"})})]}),(0,dt.jsx)("div",{className:"overflow-x-auto",children:(0,dt.jsxs)("table",{className:"min-w-full text-sm border dark:border-gray-600",children:[(0,dt.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-left text-gray-700 dark:text-white sticky left-0 bg-gray-50 dark:bg-gray-700 z-10 min-w-[200px]",children:"Metric"}),j.map(e=>(0,dt.jsx)("th",{className:"p-2 border-b dark:border-gray-600 text-center text-gray-700 dark:text-white whitespace-nowrap min-w-[80px]",children:e},e))]})}),(0,dt.jsx)("tbody",{className:"bg-white dark:bg-gray-800",children:Object.entries(L).map(e=>{let[t,r]=e;return(0,dt.jsxs)(a.Fragment,{children:[(0,dt.jsx)("tr",{className:"bg-gray-100 dark:bg-gray-600",children:(0,dt.jsx)("td",{colSpan:j.length+1,className:"p-2 font-semibold text-gray-800 dark:text-white border-b dark:border-gray-600",children:r.label})}),r.metrics.map(e=>(0,dt.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 font-medium text-gray-700 dark:text-white sticky left-0 bg-white dark:bg-gray-800 z-10",children:e.label}),j.map(t=>{const r=f?e.getCumulativeValue(t):e.getValue(t);return(0,dt.jsx)("td",{className:"p-2 border-b dark:border-gray-600 text-center text-gray-700 dark:text-white ".concat(e.isEstimatedRevenue&&p?"cursor-help hover:bg-yellow-50 dark:hover:bg-yellow-900/20 relative":""),onMouseEnter:e.isEstimatedRevenue&&p?e=>{if(!p)return;_.current&&(clearTimeout(_.current),_.current=null);const n=setTimeout(()=>{const n=e.target.getBoundingClientRect(),a=R(t,r);if(a){b(a);const e=480,t=480,r=window.innerWidth-n.right,i=n.left;let s,o;s=r>=e+20?n.right+10:i>=e+20?n.left-e-10:Math.max(10,(window.innerWidth-e)/2);const l=n.top+n.height/2;o=Math.max(10,l-t),o=Math.min(o,window.innerHeight-t-10),v({x:s,y:o})}},150);_.current=n}:void 0,onMouseLeave:e.isEstimatedRevenue&&p?()=>{if(!p)return;_.current&&(clearTimeout(_.current),_.current=null);const e=setTimeout(()=>{b(null)},100);_.current=e}:void 0,children:e.format(r)},t)})]},e.key))]},t)})})]})}),0===j.length&&(0,dt.jsx)("div",{className:"text-center py-8",children:(0,dt.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No timeline data available. Run an analysis to see results."})})]}),(0,dt.jsx)(EL,{data:x,position:y,onClose:()=>b(null),selectedUserId:p,selectedProductId:m})]})},AL=e=>{var t,r,n,i;let{data:s}=e;const[o,l]=(0,a.useState)("daily");if(null===s||void 0===s||!s.data)return(0,dt.jsx)("div",{className:"text-center py-8",children:(0,dt.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No data available for revenue charts. Run an analysis to see results."})});const c=s.data.timeline_data,d=s.data.arpu_data,u=(null===c||void 0===c||null===(t=c.dates)||void 0===t?void 0:t.map(e=>{var t,r,n,a,i,s;return{date:e,revenue:(null===(t=c.daily_metrics)||void 0===t||null===(r=t[e])||void 0===r?void 0:r.revenue)||0,trial_events:(null===(n=c.daily_metrics)||void 0===n||null===(a=n[e])||void 0===a?void 0:a.trial_events)||0,purchase_events:(null===(i=c.daily_metrics)||void 0===i||null===(s=i[e])||void 0===s?void 0:s.purchase_events)||0}}))||[],h=null!==d&&void 0!==d&&d.per_product?Object.entries(d.per_product).map(e=>{let[t,r]=e;return{productId:t.length>20?t.substring(0,20)+"...":t,fullProductId:t,arpu:r.arpu||0,totalRevenue:r.total_revenue||0,payingUsers:r.paying_users||0}}).sort((e,t)=>t.arpu-e.arpu):[],p=e=>null===e||void 0===e?"$0.00":"$".concat(Number(e).toFixed(2)),m=e=>{let{data:t,valueKey:r,labelKey:n,title:a,color:i="blue"}=e;if(!t||0===t.length)return null;const s=Math.max(...t.map(e=>e[r])),o={blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500",orange:"bg-orange-500"};return(0,dt.jsxs)("div",{className:"space-y-4",children:[(0,dt.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a}),(0,dt.jsx)("div",{className:"space-y-2",children:t.slice(0,10).map((e,t)=>{const a=s>0?e[r]/s*100:0;return(0,dt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dt.jsx)("div",{className:"w-24 text-xs text-gray-600 dark:text-gray-400 truncate",children:e[n]}),(0,dt.jsxs)("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-6 relative",children:[(0,dt.jsx)("div",{className:"".concat(o[i]," h-6 rounded-full transition-all duration-300"),style:{width:"".concat(a,"%")}}),(0,dt.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-medium text-white",children:"revenue"===r||"arpu"===r||"totalRevenue"===r?p(e[r]):e[r]})]})]},t)})})]})},f=e=>{let{data:t,valueKey:r,title:n,color:a="blue"}=e;if(!t||0===t.length)return null;const i=Math.max(...t.map(e=>e[r])),s=Math.min(...t.map(e=>e[r])),o=i-s;return(0,dt.jsxs)("div",{className:"space-y-4",children:[(0,dt.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:n}),(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,dt.jsxs)("svg",{width:"100%",height:"200",className:"overflow-visible",children:[[0,25,50,75,100].map(e=>(0,dt.jsx)("line",{x1:"0",y1:2*e,x2:"100%",y2:2*e,stroke:"#e5e7eb",strokeWidth:"1"},e)),(0,dt.jsx)("polyline",{fill:"none",stroke:"blue"===a?"#3b82f6":"green"===a?"#10b981":"purple"===a?"#8b5cf6":"#f59e0b",strokeWidth:"2",points:t.map((e,n)=>{const a=n/(t.length-1)*100,i=o>0?200-(e[r]-s)/o*180:100;return"".concat(a,"%,").concat(i)}).join(" ")}),t.map((e,n)=>{const i=n/(t.length-1)*100,l=o>0?200-(e[r]-s)/o*180:100;return(0,dt.jsx)("circle",{cx:"".concat(i,"%"),cy:l,r:"4",fill:"blue"===a?"#3b82f6":"green"===a?"#10b981":"purple"===a?"#8b5cf6":"#f59e0b",className:"hover:r-6 transition-all",children:(0,dt.jsx)("title",{children:"".concat(e.date,": ").concat("revenue"===r?p(e[r]):e[r])})},n)})]}),(0,dt.jsx)("div",{className:"flex justify-between mt-2 text-xs text-gray-500 dark:text-gray-400",children:t.filter((e,r)=>r%Math.ceil(t.length/5)===0).map((e,t)=>{return(0,dt.jsx)("span",{children:(r=e.date,new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric"}))},t);var r})})]})]})};return(0,dt.jsxs)("div",{className:"space-y-6",children:[(0,dt.jsx)("div",{className:"flex space-x-4 border-b border-gray-200 dark:border-gray-700",children:[{id:"daily",label:"Daily Revenue"},{id:"arpu",label:"ARPU by Product"},{id:"events",label:"Event Trends"}].map(e=>(0,dt.jsx)("button",{onClick:()=>l(e.id),className:"px-4 py-2 text-sm font-medium border-b-2 transition-colors ".concat(o===e.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:e.label},e.id))}),(0,dt.jsxs)("div",{className:"min-h-96",children:["daily"===o&&(0,dt.jsx)(f,{data:u,valueKey:"revenue",title:"Daily Revenue Trend",color:"green"}),"arpu"===o&&(0,dt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,dt.jsx)(m,{data:h,valueKey:"arpu",labelKey:"productId",title:"ARPU by Product",color:"purple"}),(0,dt.jsx)(m,{data:h,valueKey:"totalRevenue",labelKey:"productId",title:"Total Revenue by Product",color:"green"})]}),"events"===o&&(0,dt.jsxs)("div",{className:"space-y-6",children:[(0,dt.jsx)(f,{data:u,valueKey:"trial_events",title:"Daily Trial Events",color:"blue"}),(0,dt.jsx)(f,{data:u,valueKey:"purchase_events",title:"Daily Purchase Events",color:"orange"})]})]}),(0,dt.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Revenue Summary"}),(0,dt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Total Revenue"}),(0,dt.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:p(null===d||void 0===d||null===(r=d.cohort_wide)||void 0===r?void 0:r.total_revenue)})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Average ARPU"}),(0,dt.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:p(null===d||void 0===d||null===(n=d.cohort_wide)||void 0===n?void 0:n.arpu)})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Paying Users"}),(0,dt.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:(null===d||void 0===d||null===(i=d.cohort_wide)||void 0===i?void 0:i.paying_users)||0})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Products"}),(0,dt.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:h.length})]})]})]})]})},ML=e=>{var t,r,n,i,s,o,l,c,d,u;let{data:h}=e;const[p,m]=(0,a.useState)(""),[f,g]=(0,a.useState)("all"),[x,b]=(0,a.useState)(new Set);if(console.log("[DEBUG] UserTimelineViewer received data:",h),console.log("[DEBUG] Data structure check:",{hasData:!!h,hasDataData:!(null===h||void 0===h||!h.data),hasUserTimelines:!(null===h||void 0===h||null===(t=h.data)||void 0===t||!t.user_timelines),hasTimelineData:!(null===h||void 0===h||null===(r=h.data)||void 0===r||!r.timeline_data),hasStructuredFormat:!(null===h||void 0===h||null===(n=h.data)||void 0===n||!n.structured_format),hasTimelineAnalysis:!(null===h||void 0===h||null===(i=h.data)||void 0===i||null===(s=i.structured_format)||void 0===s||!s.timeline_analysis),dataKeys:h?Object.keys(h):[],dataDataKeys:null!==h&&void 0!==h&&h.data?Object.keys(h.data):[]}),(null===h||void 0===h||null===(o=h.data)||void 0===o||!o.user_timelines)&&(null===h||void 0===h||null===(l=h.data)||void 0===l||!l.timeline_data)&&(null===h||void 0===h||null===(c=h.data)||void 0===c||null===(d=c.structured_format)||void 0===d||!d.timeline_analysis)&&(null===h||void 0===h||!h.data))return(0,dt.jsx)("div",{className:"text-center py-8",children:(0,dt.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No timeline data available. Run an analysis to see results."})});let y,v={};if(null!==(u=h.data.structured_format)&&void 0!==u&&u.timeline_analysis)y=h.data.structured_format.timeline_analysis,v=y.user_timelines||{},console.log("[DEBUG] Using unified pipeline format. Timeline data:",y),console.log("[DEBUG] User timelines keys:",Object.keys(v)),console.log("[DEBUG] Sample user timeline:",Object.keys(v).slice(0,1).map(e=>({userId:e,data:v[e]})));else if(h.data.timeline_data&&h.data.timeline_data.user_timelines)y=h.data.timeline_data,v=y.user_timelines||{};else if(h.data.user_timelines&&"object"===typeof h.data.user_timelines&&h.data.user_timelines.users)y=h.data.user_timelines,y.users&&y.events&&y.users.forEach(e=>{v[e.id]={events:Object.values(y.events[e.user_product_key]||{}).flat()||[]}});else{if(!h.data.user_timelines)return(0,dt.jsx)("div",{className:"text-center py-8",children:(0,dt.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No timeline data available. Run an analysis to see results."})});y=h.data,v=h.data.user_timelines||{}}const _=Object.keys(v),k=p&&v[p]&&v[p].events||[],j=k.filter(e=>{var t,r;return"all"===f||("trial"===f?null===(t=e.event_name)||void 0===t?void 0:t.toLowerCase().includes("trial"):"purchase"===f?null===(r=e.event_name)||void 0===r?void 0:r.toLowerCase().includes("purchase"):"revenue"!==f||e.revenue&&e.revenue>0)}),w=e=>null===e||void 0===e?"$0.00":"$".concat(Number(e).toFixed(2)),N=e=>new Date(e).toLocaleString(),S=p&&v[p]?{totalEvents:k.length,totalRevenue:k.reduce((e,t)=>e+(t.revenue||0),0),trialEvents:k.filter(e=>{var t;return null===(t=e.event_name)||void 0===t?void 0:t.toLowerCase().includes("trial")}).length,purchaseEvents:k.filter(e=>{var t;return null===(t=e.event_name)||void 0===t?void 0:t.toLowerCase().includes("purchase")}).length,firstEvent:k.length>0?k[0].timestamp:null,lastEvent:k.length>0?k[k.length-1].timestamp:null}:null;return(0,dt.jsxs)("div",{className:"space-y-6",children:[(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select User"}),(0,dt.jsxs)("select",{value:p,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[(0,dt.jsx)("option",{value:"",children:"Choose a user..."}),_.slice(0,100).map(e=>(0,dt.jsx)("option",{value:e,children:e.length>30?e.substring(0,30)+"...":e},e))]}),(0,dt.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Showing first 100 users (",_.length," total)"]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Event Filter"}),(0,dt.jsxs)("select",{value:f,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[(0,dt.jsx)("option",{value:"all",children:"All Events"}),(0,dt.jsx)("option",{value:"trial",children:"Trial Events"}),(0,dt.jsx)("option",{value:"purchase",children:"Purchase Events"}),(0,dt.jsx)("option",{value:"revenue",children:"Revenue Events"})]})]})]}),S&&(0,dt.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-lg p-6 border border-indigo-200 dark:border-indigo-800",children:[(0,dt.jsxs)("h3",{className:"text-xl font-semibold text-indigo-900 dark:text-indigo-200 mb-4",children:["User Summary: ",p]}),(0,dt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:S.totalEvents}),(0,dt.jsx)("div",{className:"text-sm text-indigo-700 dark:text-indigo-300",children:"Total Events"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:w(S.totalRevenue)}),(0,dt.jsx)("div",{className:"text-sm text-green-700 dark:text-green-300",children:"Total Revenue"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:S.trialEvents}),(0,dt.jsx)("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Trial Events"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:S.purchaseEvents}),(0,dt.jsx)("div",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Purchase Events"})]})]}),S.firstEvent&&S.lastEvent&&(0,dt.jsxs)("div",{className:"mt-4 pt-4 border-t border-indigo-200 dark:border-indigo-700 text-sm text-indigo-700 dark:text-indigo-300",children:[(0,dt.jsx)("strong",{children:"Activity Period:"})," ",N(S.firstEvent)," \u2192 ",N(S.lastEvent)]})]}),p&&(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,dt.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Event Timeline"}),(0,dt.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",j.length," of ",k.length," events"]})]}),j.length>0?(0,dt.jsx)("div",{className:"space-y-3",children:j.map((e,t)=>{const r=x.has(t),n=(e=>{const t=(null===e||void 0===e?void 0:e.toLowerCase())||"";return t.includes("trial")?"blue":t.includes("purchase")?"green":t.includes("revenue")?"purple":"gray"})(e.event_name),a=(e=>{const t=(null===e||void 0===e?void 0:e.toLowerCase())||"";return t.includes("trial")?"\ud83d\udd04":t.includes("purchase")?"\ud83d\udcb0":t.includes("revenue")?"\ud83d\udcb5":"\ud83d\udcca"})(e.event_name);return(0,dt.jsxs)("div",{className:"border rounded-lg p-4 ".concat({blue:"border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-900/20",green:"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-900/20",purple:"border-purple-200 bg-purple-50 dark:border-purple-800 dark:bg-purple-900/20",gray:"border-gray-200 bg-gray-50 dark:border-gray-600 dark:bg-gray-700"}[n]," transition-all duration-200"),children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>(e=>{const t=new Set(x);t.has(e)?t.delete(e):t.add(e),b(t)})(t),children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dt.jsx)("span",{className:"text-lg",children:a}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.event_name||"Unknown Event"}),(0,dt.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:N(e.timestamp)})]})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-3",children:[e.revenue&&e.revenue>0&&(0,dt.jsx)("span",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:w(e.revenue)}),(0,dt.jsx)("button",{className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:r?"\u25bc":"\u25b6"})]})]}),r&&(0,dt.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.product_id&&(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Product ID:"}),(0,dt.jsx)("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:e.product_id})]}),e.revenue&&(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Revenue:"}),(0,dt.jsx)("span",{className:"ml-2 text-green-600 dark:text-green-400",children:w(e.revenue)})]}),e.properties&&Object.keys(e.properties).length>0&&(0,dt.jsxs)("div",{className:"md:col-span-2",children:[(0,dt.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Properties:"}),(0,dt.jsx)("div",{className:"mt-2 bg-gray-100 dark:bg-gray-800 rounded p-2 text-xs",children:(0,dt.jsx)("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(e.properties,null,2)})})]})]})})]},t)})}):p?(0,dt.jsx)("div",{className:"text-center py-8",children:(0,dt.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No events found for the selected filter."})}):null]}),!p&&(0,dt.jsxs)("div",{className:"text-center py-12",children:[(0,dt.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udc64"}),(0,dt.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Select a User"}),(0,dt.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Choose a user from the dropdown above to view their detailed event timeline."})]})]})},TL=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const r=await fetch("".concat("/api/v2/cohort").concat(e),Re({headers:Re({"Content-Type":"application/json"},t.headers)},t)),n=await r.json();if(!r.ok)throw new Error(n.error||"HTTP error! status: ".concat(r.status));return n}catch(r){throw console.error("API request failed for ".concat(e,":"),r),r}},DL={transformForCharts:e=>{var t;if(null===e||void 0===e||null===(t=e.data)||void 0===t||!t.timeline_data)return null;const r=e.data.timeline_data,n=r.dates||[],a=r.daily_metrics||{};return n.map(e=>Re({date:e},a[e]))},transformARPUData:e=>{var t;if(null===e||void 0===e||null===(t=e.data)||void 0===t||!t.arpu_data)return null;const r=e.data.arpu_data;return{cohortWide:r.cohort_wide||{},perProduct:r.per_product||{}}},transformLifecycleRates:e=>{var t;if(null===e||void 0===e||null===(t=e.data)||void 0===t||!t.lifecycle_rates)return null;const r=e.data.lifecycle_rates;return{aggregate:r.aggregate||{},perProduct:r.per_product||{}}},extractSummaryStats:e=>{var t;return null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.cohort_summary?e.data.cohort_summary:null}},RL={isValidationError:e=>e.message&&e.message.includes("validation"),isDatabaseError:e=>e.message&&e.message.includes("database"),getUserFriendlyMessage:e=>RL.isValidationError(e)?"Please check your input parameters and try again.":RL.isDatabaseError(e)?"Database connection issue. Please try again later.":e.message||"An unexpected error occurred."},IL=async e=>TL("/analyze",{method:"POST",body:JSON.stringify(e)}),LL=async e=>TL("/arpu-only",{method:"POST",body:JSON.stringify(e)}),FL=async e=>TL("/lifecycle-only",{method:"POST",body:JSON.stringify(e)}),zL=async e=>TL("/timeline",{method:"POST",body:JSON.stringify(e)}),UL=async e=>TL("/validate",{method:"POST",body:JSON.stringify(e)}),BL=async()=>TL("/performance",{method:"GET"}),VL=async()=>TL("/health",{method:"GET"}),HL={runToStage:async(e,t)=>TL("/analyze",{method:"POST",body:JSON.stringify(Re(Re({},e),{},{debug_mode:!0,debug_stage:t}))}),getStageResults:async(e,t)=>{const r=Re(Re({},e),{},{debug_mode:!0,debug_stage:t});return console.log("[API DEBUG] Calling /api/v2/cohort/analyze with debug payload:",r),console.log("[API DEBUG] debug_mode:",r.debug_mode),console.log("[API DEBUG] debug_stage:",r.debug_stage),TL("/analyze",{method:"POST",body:JSON.stringify(r)})}},WL=DL,$L=()=>{const e="cohort_pipeline_analysis_params",t={date_from:"2025-01-01",date_to:"2025-01-31",optional_filters:[],primary_user_filter:{property_name:"",property_values:[]},secondary_filters:[],config:{product_filter:{include_patterns:["gluten"],exclude_patterns:[],specific_product_ids:["prod_R7oYuL3bSUecnr"]},lifecycle:{trial_window_days:7,cancellation_window_days:30,smoothing_enabled:!0},timeline:{include_estimates:!0,include_confidence_intervals:!1},detailed_events:{user_id:""}}},[r,n]=(0,a.useState)(()=>{try{const s=localStorage.getItem(e);if(s){var r,n,a,i;const e=JSON.parse(s);return Re(Re(Re({},t),e),{},{optional_filters:e.optional_filters||[],secondary_filters:e.secondary_filters||[],config:Re(Re(Re({},t.config),e.config),{},{product_filter:Re(Re({},t.config.product_filter),null===(r=e.config)||void 0===r?void 0:r.product_filter),lifecycle:Re(Re({},t.config.lifecycle),null===(n=e.config)||void 0===n?void 0:n.lifecycle),timeline:Re(Re({},t.config.timeline),null===(a=e.config)||void 0===a?void 0:a.timeline),detailed_events:Re(Re({},t.config.detailed_events),null===(i=e.config)||void 0===i?void 0:i.detailed_events)})})}}catch(u){console.warn("Failed to load saved analysis parameters:",u)}return t}),[i,s]=(0,a.useState)(!1),[o,l]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(t=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(u){console.warn("Failed to save analysis parameters:",u)}})(r),s(!0);const t=setTimeout(()=>s(!1),1e3);return()=>clearTimeout(t)},[r]);const{pipelineData:c,loading:d,error:u,runAnalysis:h,runStageAnalysis:p}=(()=>{const[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(!1),[i,s]=(0,a.useState)(null),[o,l]=(0,a.useState)(null),c=(0,a.useCallback)(()=>{s(null)},[]),d=(0,a.useCallback)(async e=>{n(!0),s(null);try{console.log("Running full analysis with params:",e);const r=await IL(e);return console.log("Analysis result:",r),t(r),l(e),r}catch(r){console.error("Analysis failed:",r);const e=RL.getUserFriendlyMessage(r);throw s(e),r}finally{n(!1)}},[]),u=(0,a.useCallback)(async e=>{n(!0),s(null);try{console.log("Running ARPU analysis with params:",e);const r=await LL(e);return t(e=>{var t;return Re(Re({},e),{},{data:Re(Re({},null===e||void 0===e?void 0:e.data),{},{arpu_data:null===(t=r.data)||void 0===t?void 0:t.arpu_data})})}),r}catch(r){console.error("ARPU analysis failed:",r);const e=RL.getUserFriendlyMessage(r);throw s(e),r}finally{n(!1)}},[]),h=(0,a.useCallback)(async e=>{n(!0),s(null);try{console.log("Running lifecycle analysis with params:",e);const r=await FL(e);return t(e=>{var t;return Re(Re({},e),{},{data:Re(Re({},null===e||void 0===e?void 0:e.data),{},{lifecycle_rates:null===(t=r.data)||void 0===t?void 0:t.lifecycle_rates})})}),r}catch(r){console.error("Lifecycle analysis failed:",r);const e=RL.getUserFriendlyMessage(r);throw s(e),r}finally{n(!1)}},[]),p=(0,a.useCallback)(async e=>{n(!0),s(null);try{console.log("Generating timeline with params:",e);const r=await zL(e);return t(e=>{var t;return Re(Re({},e),{},{data:Re(Re({},null===e||void 0===e?void 0:e.data),{},{timeline_data:null===(t=r.data)||void 0===t?void 0:t.timeline_data})})}),r}catch(r){console.error("Timeline generation failed:",r);const e=RL.getUserFriendlyMessage(r);throw s(e),r}finally{n(!1)}},[]),m=(0,a.useCallback)(async(e,r)=>{n(!0),s(null);try{console.log("Running stage analysis for ".concat(r," with params:"),e);const n=await HL.getStageResults(e,r);return console.log("Stage ".concat(r," result:"),n),t(n),l(Re(Re({},e),{},{debug_stage:r})),n}catch(a){console.error("Stage ".concat(r," analysis failed:"),a);const e=RL.getUserFriendlyMessage(a);throw s(e),a}finally{n(!1)}},[]),f=(0,a.useCallback)(async e=>{try{console.log("Validating inputs:",e);const t=await UL(e);return console.log("Validation result:",t),t}catch(t){throw console.error("Input validation failed:",t),t}},[]),g=(0,a.useCallback)(async()=>{try{const e=await BL();return console.log("Performance report:",e),e}catch(e){throw console.error("Failed to get performance report:",e),e}},[]),x=(0,a.useCallback)(async()=>{try{const e=await VL();return console.log("Health check result:",e),e}catch(e){throw console.error("Health check failed:",e),e}},[]),b=(0,a.useCallback)(()=>{t(null),s(null),l(null)},[]),y=(0,a.useCallback)(()=>e?{charts:WL.transformForCharts(e),arpu:WL.transformARPUData(e),lifecycle:WL.transformLifecycleRates(e),summary:WL.extractSummaryStats(e)}:null,[e]);return{pipelineData:e,loading:r,error:i,lastAnalysisParams:o,runAnalysis:d,runARPUAnalysis:u,runLifecycleAnalysis:h,generateTimeline:p,runStageAnalysis:m,validateInputs:f,getPerformanceReport:g,healthCheck:x,resetData:b,clearError:c,transformedData:y(),isValidationError:!!i&&RL.isValidationError({message:i}),isDatabaseError:!!i&&RL.isDatabaseError({message:i})}})(),{debugMode:m,debugStage:f,setDebugMode:g,setDebugStage:x}=vL();return(0,dt.jsx)("div",{className:"cohort-pipeline-page min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,dt.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,dt.jsxs)("div",{className:"mb-8",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Cohort Pipeline Debug & Analysis"}),(0,dt.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Advanced cohort analysis with modular pipeline architecture and debug capabilities"})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[i&&(0,dt.jsxs)("div",{className:"flex items-center space-x-1 text-green-600 dark:text-green-400 text-sm",children:[(0,dt.jsx)("span",{children:"\ud83d\udcbe"}),(0,dt.jsx)("span",{children:"Saved"})]}),(0,dt.jsx)("button",{onClick:()=>{n(t),localStorage.removeItem(e)},className:"px-3 py-2 text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors",title:"Reset all settings to defaults",children:"Reset to Defaults"}),(0,dt.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to clear all saved settings and debug state? This cannot be undone.")&&(localStorage.removeItem(e),localStorage.removeItem("cohort_pipeline_debug_mode"),n(t),g(!1),x(null))},className:"px-3 py-2 text-sm bg-red-200 hover:bg-red-300 dark:bg-red-700 dark:hover:bg-red-600 text-red-700 dark:text-red-300 rounded-lg transition-colors",title:"Clear all saved data including debug state",children:"Clear All Data"}),(0,dt.jsx)("button",{onClick:()=>{const e={analysisParams:r,debugState:{debugMode:m,debugStage:f},exportedAt:(new Date).toISOString(),version:"1.0"},t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),a=URL.createObjectURL(n),i=document.createElement("a");i.href=a,i.download="cohort_analysis_settings_".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)},className:"px-3 py-2 text-sm bg-blue-200 hover:bg-blue-300 dark:bg-blue-700 dark:hover:bg-blue-600 text-blue-700 dark:text-blue-300 rounded-lg transition-colors",title:"Export current settings to JSON file",children:"Export Settings"}),(0,dt.jsxs)("label",{className:"px-3 py-2 text-sm bg-green-200 hover:bg-green-300 dark:bg-green-700 dark:hover:bg-green-600 text-green-700 dark:text-green-300 rounded-lg transition-colors cursor-pointer",children:["Import Settings",(0,dt.jsx)("input",{type:"file",accept:".json",onChange:e=>{const r=e.target.files[0];if(r){const e=new FileReader;e.onload=e=>{try{const r=JSON.parse(e.target.result);if(r.analysisParams){const e=Re(Re(Re({},t),r.analysisParams),{},{secondary_filters:r.analysisParams.secondary_filters||[],config:Re(Re({},t.config),r.analysisParams.config)});n(e),r.debugState&&(g(r.debugState.debugMode||!1),x(r.debugState.debugStage||null))}else{const e=Re(Re(Re({},t),r),{},{secondary_filters:r.secondary_filters||[],config:Re(Re({},t.config),r.config)});n(e)}alert("Settings imported successfully!")}catch(u){alert("Failed to import settings: Invalid JSON file")}},e.readAsText(r)}e.target.value=""},className:"hidden"})]})]})]}),(0,dt.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,dt.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"\ud83d\udcbe Settings are automatically saved and will persist across page reloads"}),(0,dt.jsxs)("button",{onClick:()=>l(!o),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:[o?"Hide":"Show"," saved data"]})]}),o&&(0,dt.jsxs)("div",{className:"mt-4 bg-gray-100 dark:bg-gray-800 rounded-lg p-4 border",children:[(0,dt.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Currently Saved Data"}),(0,dt.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Analysis Parameters:"}),(0,dt.jsx)("div",{className:"mt-1 bg-white dark:bg-gray-900 rounded p-2 overflow-auto max-h-32",children:(0,dt.jsx)("pre",{className:"text-gray-600 dark:text-gray-400",children:JSON.stringify(r,null,2)})})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Debug State:"}),(0,dt.jsx)("div",{className:"mt-1 bg-white dark:bg-gray-900 rounded p-2",children:(0,dt.jsx)("pre",{className:"text-gray-600 dark:text-gray-400",children:JSON.stringify({debugMode:m,debugStage:f,lastSaved:(new Date).toLocaleString()},null,2)})})]}),(0,dt.jsxs)("div",{className:"text-gray-500 dark:text-gray-400",children:["Storage keys: ",(0,dt.jsx)("code",{children:"cohort_pipeline_analysis_params"}),", ",(0,dt.jsx)("code",{children:"cohort_pipeline_debug_mode"})]})]})]})]}),(0,dt.jsx)("div",{className:"mb-8",children:(0,dt.jsx)(jL,{debugMode:m,debugStage:f,onDebugModeChange:g,onDebugStageChange:x,onRunAnalysis:()=>{m&&f?p(r,f):h(r)},loading:d,error:u})}),(0,dt.jsx)("div",{className:"mb-8",children:(0,dt.jsx)(QI,{config:r.config,analysisParams:r,onConfigChange:e=>{n(e)}})}),d&&(0,dt.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,dt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),(0,dt.jsx)("span",{className:"ml-3 text-lg text-gray-600 dark:text-gray-400",children:"Running analysis..."})]}),u&&(0,dt.jsxs)("div",{className:"mb-8 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-red-800 dark:text-red-200 mb-2",children:"Analysis Error"}),(0,dt.jsx)("p",{className:"text-red-600 dark:text-red-300",children:u})]}),c&&!d&&(0,dt.jsxs)("div",{className:"space-y-8",children:[(0,dt.jsx)(aL,{data:c}),(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,dt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"ARPU Analysis"}),(0,dt.jsx)(CL,{data:c})]}),(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,dt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Lifecycle Rates"}),(0,dt.jsx)(OL,{data:c})]}),(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,dt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Event Timeline"}),(0,dt.jsx)(PL,{data:c})]}),(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,dt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Individual User Timeline"}),(0,dt.jsx)(ML,{data:c})]}),(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,dt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Revenue Visualizations"}),(0,dt.jsx)(AL,{data:c})]}),m&&(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,dt.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Debug Data"}),(0,dt.jsx)(ZI,{data:c,debugStage:f})]})]})]})})},qL=e=>{let{error:t,success:r,onClearError:n,onClearSuccess:a}=e;return(0,dt.jsxs)(dt.Fragment,{children:[t&&(0,dt.jsx)("div",{className:"mb-6 bg-red-50 dark:bg-red-900/50 border border-red-200 dark:border-red-800 rounded-lg p-4",children:(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)(sL,{className:"h-5 w-5 text-red-400 mr-3"}),(0,dt.jsx)("div",{className:"flex-1",children:(0,dt.jsx)("p",{className:"text-red-800 dark:text-red-200",children:t})}),(0,dt.jsx)("button",{onClick:n,className:"text-red-400 hover:text-red-600",children:(0,dt.jsx)(SL,{className:"h-5 w-5"})})]})}),r&&(0,dt.jsx)("div",{className:"mb-6 bg-green-50 dark:bg-green-900/50 border border-green-200 dark:border-green-800 rounded-lg p-4",children:(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)(iL,{className:"h-5 w-5 text-green-400 mr-3"}),(0,dt.jsx)("div",{className:"flex-1",children:(0,dt.jsx)("p",{className:"text-green-800 dark:text-green-200",children:r})}),(0,dt.jsx)("button",{onClick:a,className:"text-green-400 hover:text-green-600",children:(0,dt.jsx)(SL,{className:"h-5 w-5"})})]})})]})},GL=[{value:"all",label:"All Time",description:"Analyze all historical data"},{value:"1month",label:"Last 1 Month",description:"Last 30 days"},{value:"3months",label:"Last 3 Months",description:"Last 90 days"},{value:"6months",label:"Last 6 Months",description:"Last 180 days"},{value:"1year",label:"Last 1 Year",description:"Last 365 days"}],KL=e=>{if("all"===e)return{start:null,end:null};const t=new Date;return{start:new Date("2024-01-01").toISOString().split("T")[0],end:t.toISOString().split("T")[0]}},YL=e=>"".concat((100*e).toFixed(2),"%"),XL=e=>({APP_STORE:"App Store",PLAY_STORE:"Play Store",STRIPE:"Stripe"}[e]||e),JL=e=>e?e.length<=8?e:"".concat(e.slice(0,4),"...").concat(e.slice(-4)):"No ID",QL=e=>{if(!e)return{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200",darkBg:"dark:bg-gray-900",darkText:"dark:text-gray-200",darkBorder:"dark:border-gray-700"};let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}const r=[{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200",darkBg:"dark:bg-blue-900",darkText:"dark:text-blue-200",darkBorder:"dark:border-blue-700"},{bg:"bg-green-100",text:"text-green-800",border:"border-green-200",darkBg:"dark:bg-green-900",darkText:"dark:text-green-200",darkBorder:"dark:border-green-700"},{bg:"bg-purple-100",text:"text-purple-800",border:"border-purple-200",darkBg:"dark:bg-purple-900",darkText:"dark:text-purple-200",darkBorder:"dark:border-purple-700"},{bg:"bg-red-100",text:"text-red-800",border:"border-red-200",darkBg:"dark:bg-red-900",darkText:"dark:text-red-200",darkBorder:"dark:border-red-700"},{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-200",darkBg:"dark:bg-yellow-900",darkText:"dark:text-yellow-200",darkBorder:"dark:border-yellow-700"},{bg:"bg-indigo-100",text:"text-indigo-800",border:"border-indigo-200",darkBg:"dark:bg-indigo-900",darkText:"dark:text-indigo-200",darkBorder:"dark:border-indigo-700"},{bg:"bg-pink-100",text:"text-pink-800",border:"border-pink-200",darkBg:"dark:bg-pink-900",darkText:"dark:text-pink-200",darkBorder:"dark:border-pink-700"},{bg:"bg-cyan-100",text:"text-cyan-800",border:"border-cyan-200",darkBg:"dark:bg-cyan-900",darkText:"dark:text-cyan-200",darkBorder:"dark:border-cyan-700"},{bg:"bg-emerald-100",text:"text-emerald-800",border:"border-emerald-200",darkBg:"dark:bg-emerald-900",darkText:"dark:text-emerald-200",darkBorder:"dark:border-emerald-700"},{bg:"bg-orange-100",text:"text-orange-800",border:"border-orange-200",darkBg:"dark:bg-orange-900",darkText:"dark:text-orange-200",darkBorder:"dark:border-orange-700"}];return r[Math.abs(t)%r.length]},ZL=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Segment ID";const r=QL(e);return(0,dt.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(r.bg," ").concat(r.text," ").concat(r.darkBg," ").concat(r.darkText," ").concat(r.border," ").concat(r.darkBorder," border"),children:[(0,dt.jsxs)("span",{className:"mr-1",children:[t,":"]}),(0,dt.jsx)("span",{className:"font-mono",children:JL(e)})]})},eF=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Target";const r=QL(e);return(0,dt.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(r.bg," ").concat(r.text," ").concat(r.darkBg," ").concat(r.darkText," ").concat(r.border," ").concat(r.darkBorder," border"),children:[(0,dt.jsxs)("span",{className:"mr-1",children:["\u2192 ",t,":"]}),(0,dt.jsx)("span",{className:"font-mono",children:JL(e)})]})},tF=function(e,t){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e)return(0,dt.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"\u2705 PASSES"});let n=r;if(!n&&t&&(t.rollupReasons&&t.rollupReasons.length>0?n=t.rollupReasons[0]:t.rollupTarget&&(n=t.rollupTarget)),!n||""===n.trim())return(0,dt.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"\u274c INSUFFICIENT DATA"});let a=n;a=n.includes("Country-wide")?n:n.includes("Tier 1")||n.includes("tier1")?"Tier 1":n.includes("Tier 2")||n.includes("tier2")?"Tier 2":n.includes("Tier 3")||n.includes("tier3")?"Tier 3":n.includes("Tier 4")||n.includes("tier4")?"Tier 4":n.includes("$")&&n.includes("-")?n:n||"Unknown Target";const i=t?(0,dt.jsxs)("div",{className:"text-xs",children:[(0,dt.jsx)("div",{className:"font-medium mb-1",children:"Rollup Details:"}),(0,dt.jsxs)("div",{children:["\u2022 Final destination: ",n]}),t.finalUserCount&&(0,dt.jsxs)("div",{children:["\u2022 Final user count: ",t.finalUserCount.toLocaleString()]}),t.propertiesDropped&&t.propertiesDropped.length>0&&(0,dt.jsxs)("div",{children:["\u2022 Properties dropped: ",t.propertiesDropped.join(", ")]}),t.rollupReasons&&t.rollupReasons.length>0&&(0,dt.jsxs)("div",{children:["\u2022 Reason: ",t.rollupReasons[0]]})]}):null;return(0,dt.jsxs)("div",{className:"relative group",children:[(0,dt.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200 cursor-help",children:["\u2192 ",a]}),i&&(0,dt.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 text-xs rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-10 whitespace-nowrap max-w-xs",children:[i,(0,dt.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900 dark:border-t-gray-100"})]})]})},rF=(e,t)=>{const r={tier1_high_income:["US","CA","AU","NZ","GB","IE","DE","FR","NL","BE","AT","CH","LU","DK","SE","NO","FI","IS","IL","SG","HK","QA","AE","KW","BH","OM","SA","MC","LI","AD","MT","CY","IM","JE","GG","GI","BM","SM","KY","VI","AW","TC","VG","BQ","SX","MF","PM","AX","CW","MQ","GP","RE","FO","GL"],tier2_upper_middle:["JP","KR","TW","MO","IT","ES","PT","GR","SI","CZ","SK","EE","LV","LT","HR","HU","PL","RO","BG","MT","UY","CR","PA","PR","BN","MV","SC","MU","BB","BS","TT"],tier3_emerging:["BR","MX","AR","CL","CO","PE","EC","DO","JM","PY","GT","SV","HN","NI","BZ","VE","BO","GY","SR","CN","TH","MY","RU","TR","KZ","AZ","GE","AM","BY","UZ","KG","TJ","MN","FJ","TO","VU","PG","TL","ZA","NA","BW","MU","SC","RS","ME","MK","AL","BA","MD","UA","XK","LC","GD","KN","AG","DM"],tier4_developing:["IN","PK","BD","LK","NP","BT","AF","MV","ID","PH","VN","MM","KH","LA","EG","MA","TN","DZ","LY","SD","LB","JO","PS","SY","IQ","IR","YE","NG","KE","GH","TZ","UG","ET","RW","ZM","ZW","MW","MZ","AO","CM","CI","SN","ML","BF","NE","TD","CF","CD","CG","GA","GQ","ST","CV","GM","GW","SL","LR","BJ","TG","GH","BI","DJ","SO","ER","SS","MR","MG","KM","MU","SZ","LS","HT","CU","NC","PF","AS","GU","FM","MH","PW","NR","TV","KI","SB","WS","ST","CV"]},n=e=>{const t=Object.keys(e).sort().map(t=>"".concat(t,":").concat(e[t]||"null")).join("|");let r=0;for(let a=0;a<t.length;a++){r=(r<<5)-r+t.charCodeAt(a),r&=r}const n=Math.abs(r).toString(16).padStart(8,"0");return"".concat(n.slice(0,4),"-").concat(n.slice(4,8),"-seg-").concat(Date.now().toString().slice(-4))},a={};return e.forEach(e=>{const t=e.product_id,i=e.app_store||"Unknown Store",s=e.price_bucket,o=e.country||"Unknown",l=e.region,c=e.user_count,d=e.has_sufficient_data,u=e.properties_dropped||[],h=e.rollup_description||"",p=e.rollup_target||null,m=e.final_user_count||c,f=e.accuracy_score||"very_high",g=e.segment_id||n({product_id:t,app_store:i,price_bucket:s,country:o,region:l}),x=(e=>{for(const[t,n]of Object.entries(r))if(n.includes(e))return"Tier ".concat(t.split("_")[0].replace("tier",""));return"Tier 4"})(o),b="".concat(t,"|").concat(i,"|").concat(s);if(!a[b]){const e=n({product_id:t,app_store:i,price_bucket:s});a[b]={productId:t,appStore:i,priceRange:s,segmentId:e,totalUsers:0,passesThreshold:!1,rollupInfo:{hasRollups:!1,rolledUpSegments:0,totalSegments:0,rollupReasons:new Set,propertiesDropped:new Set,finalUserCount:0,rollupTarget:null,rollupTargetSegmentId:null},economicTiers:{}}}a[b].totalUsers+=c,a[b].rollupInfo.totalSegments+=1,a[b].rollupInfo.finalUserCount+=m,(!d||u.length>0)&&(a[b].rollupInfo.hasRollups=!0,a[b].rollupInfo.rolledUpSegments+=1,h&&a[b].rollupInfo.rollupReasons.add(h),p&&(a[b].rollupInfo.rollupTarget=p),u.forEach(e=>a[b].rollupInfo.propertiesDropped.add(e)));"".concat(b,"|").concat(x);if(!a[b].economicTiers[x]){const e=n({product_id:t,app_store:i,price_bucket:s,economic_tier:x});a[b].economicTiers[x]={tierName:x,segmentId:e,totalUsers:0,passesThreshold:!1,rollupInfo:{hasRollups:!1,rolledUpSegments:0,totalSegments:0,rollupReasons:new Set,propertiesDropped:new Set,finalUserCount:0,rollupTarget:null,rollupTargetSegmentId:null},countries:{}}}if(a[b].economicTiers[x].totalUsers+=c,a[b].economicTiers[x].rollupInfo.totalSegments+=1,a[b].economicTiers[x].rollupInfo.finalUserCount+=m,(!d||u.length>0)&&(a[b].economicTiers[x].rollupInfo.hasRollups=!0,a[b].economicTiers[x].rollupInfo.rolledUpSegments+=1,h&&a[b].economicTiers[x].rollupInfo.rollupReasons.add(h),p&&(a[b].economicTiers[x].rollupInfo.rollupTarget=p),u.forEach(e=>a[b].economicTiers[x].rollupInfo.propertiesDropped.add(e))),!a[b].economicTiers[x].countries[o]){const e=n({product_id:t,app_store:i,price_bucket:s,economic_tier:x,country:o});a[b].economicTiers[x].countries[o]={countryName:o,segmentId:e,totalUsers:0,passesThreshold:!1,rollupInfo:{hasRollups:!1,rolledUpSegments:0,totalSegments:0,rollupReasons:new Set,propertiesDropped:new Set,finalUserCount:0,rollupTarget:null,rollupTargetSegmentId:null},regions:[]}}if(a[b].economicTiers[x].countries[o].totalUsers+=c,a[b].economicTiers[x].countries[o].rollupInfo.totalSegments+=1,a[b].economicTiers[x].countries[o].rollupInfo.finalUserCount+=m,(!d||u.length>0)&&(a[b].economicTiers[x].countries[o].rollupInfo.hasRollups=!0,a[b].economicTiers[x].countries[o].rollupInfo.rolledUpSegments+=1,h&&a[b].economicTiers[x].countries[o].rollupInfo.rollupReasons.add(h),p&&(a[b].economicTiers[x].countries[o].rollupInfo.rollupTarget=p),u.forEach(e=>a[b].economicTiers[x].countries[o].rollupInfo.propertiesDropped.add(e))),l){const e=g;let t=null;(!d||u.length>0)&&(t=p&&p.includes("Country-wide")?a[b].economicTiers[x].countries[o].segmentId:p&&(p.includes("Tier")||p.includes("tier"))?a[b].economicTiers[x].segmentId:a[b].segmentId),a[b].economicTiers[x].countries[o].regions.push({name:l,segmentId:e,rollupTargetSegmentId:t,users:c,passes:d&&0===u.length,rollupTarget:p,rollupReason:h,accuracyScore:f,finalUserCount:m,originalUserCount:c,propertiesDropped:u})}}),Object.keys(a).forEach(e=>{const r=a[e];r.passesThreshold=r.totalUsers>=t,r.rollupInfo.rollupReasons=Array.from(r.rollupInfo.rollupReasons),r.rollupInfo.propertiesDropped=Array.from(r.rollupInfo.propertiesDropped),r.passesThreshold||(r.rollupInfo.rollupTargetSegmentId=null),Object.keys(r.economicTiers).forEach(e=>{const n=r.economicTiers[e];n.passesThreshold=n.totalUsers>=t,n.rollupInfo.rollupReasons=Array.from(n.rollupInfo.rollupReasons),n.rollupInfo.propertiesDropped=Array.from(n.rollupInfo.propertiesDropped),n.passesThreshold||(n.rollupInfo.rollupTargetSegmentId=r.segmentId),Object.keys(n.countries).forEach(e=>{const r=n.countries[e];r.passesThreshold=r.totalUsers>=t,r.rollupInfo.rollupReasons=Array.from(r.rollupInfo.rollupReasons),r.rollupInfo.propertiesDropped=Array.from(r.rollupInfo.propertiesDropped),r.passesThreshold||(r.rollupInfo.rollupTargetSegmentId=n.segmentId)})})}),a},nF=e=>{let{config:t,onConfigChange:r,onAnalyzeProperties:n,onStartAnalysis:a,onRunNewHierarchicalAnalysis:i,isAnalyzingProperties:s,isAnalyzing:o,isRunningNewAnalysis:l,propertyAnalysis:c}=e;const d=GL.find(e=>e.value===t.timeframe)||GL[0];return(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:(0,dt.jsxs)("div",{className:"p-6",children:[(0,dt.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Step 1: Configure Analysis Parameters"}),(0,dt.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Set the time period and minimum group size for your analysis. These settings determine which data to analyze and how to group users."}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,dt.jsx)(Ot,{className:"inline h-4 w-4 mr-1"}),"Time Period"]}),(0,dt.jsx)("select",{value:t.timeframe,onChange:e=>r(Re(Re({},t),{},{timeframe:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",children:GL.map(e=>(0,dt.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,dt.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:d.description})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,dt.jsx)(Je,{className:"inline h-4 w-4 mr-1"}),"Minimum Group Size"]}),(0,dt.jsx)("input",{type:"number",min:"10",max:"1000",value:t.min_cohort_size,onChange:e=>r(Re(Re({},t),{},{min_cohort_size:parseInt(e.target.value)||50})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"}),(0,dt.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Minimum number of users required in each group for reliable statistics"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,dt.jsx)(Xe,{className:"inline h-4 w-4 mr-1"}),"Minimum Price Samples"]}),(0,dt.jsx)("input",{type:"number",min:"10",max:"1000",value:t.min_price_samples,onChange:e=>r(Re(Re({},t),{},{min_price_samples:parseInt(e.target.value)||100})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"}),(0,dt.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Minimum price samples required per product for reliable price bucketing"})]})]}),(0,dt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6 mb-6",children:(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,dt.jsx)(We,{className:"inline h-4 w-4 mr-1"}),"Force Recalculation"]}),(0,dt.jsxs)("div",{className:"flex items-center mt-2",children:[(0,dt.jsx)("input",{type:"checkbox",checked:t.force_recalculate,onChange:e=>r(Re(Re({},t),{},{force_recalculate:e.target.checked})),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,dt.jsx)("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Recalculate even if cached results exist"})]}),(0,dt.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Check this to ignore previously calculated results and run fresh analysis"})]})}),(0,dt.jsxs)("div",{className:"mb-6 p-4 border-2 border-emerald-200 dark:border-emerald-700 rounded-lg bg-emerald-50 dark:bg-emerald-900/20",children:[(0,dt.jsxs)("h3",{className:"text-lg font-semibold text-emerald-800 dark:text-emerald-200 mb-2 flex items-center",children:[(0,dt.jsx)(_L,{className:"h-5 w-5 mr-2"}),"NEW: Enhanced Hierarchical Analysis"]}),(0,dt.jsx)("p",{className:"text-sm text-emerald-700 dark:text-emerald-300 mb-4",children:"Try our new 5-stage hierarchical pipeline with improved rollup methodology, better validation, and more accurate results."}),(0,dt.jsxs)("button",{onClick:i,disabled:l||o||s,className:"inline-flex items-center px-8 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[l?(0,dt.jsx)(We,{className:"animate-spin h-5 w-5 mr-2"}):(0,dt.jsx)(_L,{className:"h-5 w-5 mr-2"}),l?"Running New Analysis...":"Run New Conversion Analysis"]}),(0,dt.jsx)("div",{className:"mt-3 text-xs text-emerald-600 dark:text-emerald-400",children:"\u2728 Features: 5-stage validation \u2022 Tree-based rollup \u2022 Levels 3-6 only \u2022 Enhanced accuracy scoring"})]}),(0,dt.jsxs)("div",{className:"mb-4 p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[(0,dt.jsx)("h3",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Legacy Analysis System"}),(0,dt.jsxs)("div",{className:"flex gap-3",children:[(0,dt.jsxs)("button",{onClick:n,disabled:s||l,className:"inline-flex items-center px-6 py-3 border border-indigo-300 dark:border-indigo-600 rounded-md shadow-sm text-sm font-medium text-indigo-700 dark:text-indigo-300 bg-indigo-50 dark:bg-indigo-900/30 hover:bg-indigo-100 dark:hover:bg-indigo-900/50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[s?(0,dt.jsx)(We,{className:"animate-spin h-5 w-5 mr-2"}):(0,dt.jsx)(Ke,{className:"h-5 w-5 mr-2"}),s?"Discovering...":"Discover Data Structure"]}),(0,dt.jsxs)("button",{onClick:a,disabled:o||s||l,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[o?(0,dt.jsx)(We,{className:"animate-spin h-5 w-5 mr-2"}):(0,dt.jsx)(Xe,{className:"h-5 w-5 mr-2"}),o?"Analyzing...":"Run Legacy Analysis"]})]})]}),!c&&(0,dt.jsx)("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md",children:(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)(He,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-2"}),(0,dt.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[(0,dt.jsx)("strong",{children:"Recommendation:"}),' Try the new hierarchical analysis above for better results, or use the legacy system below. You can optionally "Discover Data Structure" first to preview what will be analyzed.']})]})})]})})},aF=e=>{var t,r,n,i,s,o,l,c;let{propertyAnalysis:d,expandedSections:u,onToggleSection:h,config:p}=e;const[m,f]=(0,a.useState)({}),[g,x]=(0,a.useState)(!1),b=e=>{f(t=>Re(Re({},t),{},{[e]:!t[e]}))};if(!d)return null;const y=[];d.user_segments&&Object.values(d.user_segments).forEach(e=>{Array.isArray(e)&&y.push(...e)});const v=rF(y,p.min_cohort_size);return(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:[(0,dt.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,dt.jsxs)("button",{onClick:()=>h("propertyAnalysis"),className:"flex items-center justify-between w-full text-left",children:[(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Step 2: Data Structure Discovery Results"}),(0,dt.jsx)("span",{className:"ml-3 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"\u2713 Complete"})]}),u.propertyAnalysis?(0,dt.jsx)(Ve,{className:"h-5 w-5 text-gray-500"}):(0,dt.jsx)(tt,{className:"h-5 w-5 text-gray-500"})]})}),u.propertyAnalysis&&(0,dt.jsxs)("div",{className:"p-6",children:[(0,dt.jsxs)("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[(0,dt.jsxs)("h4",{className:"text-sm font-semibold text-green-900 dark:text-green-200 mb-2 flex items-center",children:[(0,dt.jsx)(iL,{className:"h-4 w-4 mr-2"}),"What This Analysis Discovered"]}),(0,dt.jsx)("p",{className:"text-sm text-green-800 dark:text-green-300 mb-3",children:"We analyzed your actual users and grouped them into meaningful segments. Here's what we found:"}),(0,dt.jsxs)("ul",{className:"text-sm text-green-800 dark:text-green-300 space-y-1 list-disc list-inside",children:[(0,dt.jsxs)("li",{children:[(0,dt.jsxs)("strong",{children:[d.products_analyzed," products"]})," with sufficient data for analysis (at least ",d.min_price_samples_used||100," price samples each)"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsxs)("strong",{children:[d.total_combinations.toLocaleString()," viable user segments"]})," based on actual user data"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsxs)("strong",{children:[(null===(t=d.user_analysis)||void 0===t||null===(r=t.total_users_analyzed)||void 0===r?void 0:r.toLocaleString())||0," total users"]})," analyzed across all segments"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Geographic coverage:"})," ",(null===(n=d.user_analysis)||void 0===n?void 0:n.total_countries_found)||0," countries and ",(null===(i=d.user_analysis)||void 0===i?void 0:i.total_regions_found)||0," regions with active users"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"App stores:"})," ",(null===(s=d.user_analysis)||void 0===s||null===(o=s.app_stores)||void 0===o?void 0:o.length)||0," different stores"]})]})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[(0,dt.jsxs)("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,dt.jsx)("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:d.products_analyzed}),(0,dt.jsx)("div",{className:"text-sm text-blue-800 dark:text-blue-300 font-medium",children:"Products Found"}),(0,dt.jsx)("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Products with enough data for reliable analysis"})]}),(0,dt.jsxs)("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[(0,dt.jsx)("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:Object.values(d.price_buckets||{}).reduce((e,t)=>e+t.length,0)}),(0,dt.jsx)("div",{className:"text-sm text-purple-800 dark:text-purple-300 font-medium",children:"Price Groups"}),(0,dt.jsx)("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:"Intelligent price ranges created for analysis"})]}),(0,dt.jsxs)("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,dt.jsx)("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:(null===(l=d.user_analysis)||void 0===l?void 0:l.total_countries_found)||0}),(0,dt.jsx)("div",{className:"text-sm text-green-800 dark:text-green-300 font-medium",children:"Countries"}),(0,dt.jsx)("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"Countries with active users"})]}),(0,dt.jsxs)("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[(0,dt.jsx)("div",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400",children:d.total_combinations.toLocaleString()}),(0,dt.jsx)("div",{className:"text-sm text-orange-800 dark:text-orange-300 font-medium",children:"User Segments"}),(0,dt.jsx)("div",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:"Viable segments found in your data"})]})]}),(null===(c=d.user_analysis)||void 0===c?void 0:c.geographic_structure)&&(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsxs)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,dt.jsx)(pL,{className:"h-5 w-5 mr-2"}),"Global Market Overview"]}),(()=>{const e=d.user_analysis.geographic_structure,t=Object.entries(e).map(e=>{let[t,r]=e;return{name:t,users:r.total_users,regions:Object.keys(r.regions).length,viableRegions:Object.values(r.regions).filter(e=>e.user_count>=50).length}}).sort((e,t)=>t.users-e.users),r=t.slice(0,10),n=t.reduce((e,t)=>e+t.users,0),a=t.reduce((e,t)=>e+t.regions,0),i=t.reduce((e,t)=>e+t.viableRegions,0);return(0,dt.jsxs)("div",{className:"space-y-4",children:[(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.length}),(0,dt.jsx)("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Countries"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:a}),(0,dt.jsx)("div",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:"Total Regions"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:i}),(0,dt.jsx)("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Viable Regions"}),(0,dt.jsx)("div",{className:"text-xs text-green-600 dark:text-green-400",children:"\u226550 users each"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsxs)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[Math.round(i/a*100),"%"]}),(0,dt.jsx)("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Data Coverage"}),(0,dt.jsx)("div",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Regions with sufficient data"})]})]}),(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[(0,dt.jsx)("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-600",children:(0,dt.jsx)("h5",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Top Markets by User Count"})}),(0,dt.jsx)("div",{className:"overflow-x-auto",children:(0,dt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,dt.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Country"}),(0,dt.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Users"}),(0,dt.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Market Share"}),(0,dt.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Regions"}),(0,dt.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Data Quality"})]})}),(0,dt.jsx)("tbody",{className:"bg-white dark:bg-gray-700 divide-y divide-gray-200 dark:divide-gray-600",children:r.map((e,t)=>(0,dt.jsxs)("tr",{className:t%2===0?"bg-white dark:bg-gray-700":"bg-gray-50 dark:bg-gray-800",children:[(0,dt.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),t<3&&(0,dt.jsxs)("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",children:["Top ",t+1]})]})}),(0,dt.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-white font-medium",children:e.users.toLocaleString()}),(0,dt.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("div",{className:"w-16 bg-gray-200 dark:bg-gray-600 rounded-full h-2 mr-2",children:(0,dt.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(e.users/n*100,"%")}})}),(0,dt.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[Math.round(e.users/n*100),"%"]})]})}),(0,dt.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:[e.regions," total"]}),(0,dt.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,dt.jsx)("div",{className:"flex items-center",children:(0,dt.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(e.viableRegions/e.regions>=.5?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":e.viableRegions/e.regions>=.25?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),children:[e.viableRegions,"/",e.regions," viable"]})})})]},e.name))})]})}),t.length>10&&(0,dt.jsxs)("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-600 text-sm text-gray-500 dark:text-gray-400",children:["Showing top 10 of ",t.length," countries. ",t.length-10," additional countries with smaller user bases."]})]})]})})()]}),d.user_segments&&(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsxs)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,dt.jsx)(hL,{className:"h-5 w-5 mr-2"}),"Product Segment Analysis - Hierarchical View"]}),(()=>{const e=Object.entries(d.user_segments),t=e.reduce((e,t)=>{let[r,n]=t;return e+n.length},0),r=e.reduce((e,t)=>{let[r,n]=t;return e+n.filter(e=>e.has_sufficient_data).length},0);return(0,dt.jsxs)("div",{className:"space-y-6",children:[d.rollup_stats&&(0,dt.jsxs)("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[(0,dt.jsxs)("h5",{className:"text-lg font-semibold text-green-900 dark:text-green-200 mb-3 flex items-center",children:[(0,dt.jsx)($e,{className:"h-5 w-5 mr-2"}),"Intelligent Rollup Efficiency"]}),(0,dt.jsxs)("div",{className:"mb-3 text-sm text-green-800 dark:text-green-300",children:[(0,dt.jsx)("strong",{children:"How it works:"})," When user segments have too few people for reliable statistics, we intelligently combine them with similar segments (same price range, similar economic regions) to reach the minimum group size of ",p.min_cohort_size," users. This ensures all analysis results are statistically meaningful."]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400",children:d.rollup_stats.total_segments}),(0,dt.jsx)("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Original Segments"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:d.rollup_stats.viable_segments}),(0,dt.jsx)("div",{className:"text-sm text-green-700 dark:text-green-300",children:"Viable Segments"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:d.rollup_stats.rolled_up_segments}),(0,dt.jsx)("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Rolled Up"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:d.rollup_stats.rolled_up_segments>0?"".concat((d.rollup_stats.rolled_up_segments/d.rollup_stats.total_segments*100).toFixed(1),"%"):"0%"}),(0,dt.jsx)("div",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Segments Optimized"}),(0,dt.jsx)("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:d.rollup_stats.rolled_up_segments>0?"".concat(d.rollup_stats.rolled_up_segments," segments combined for efficiency"):"All segments had sufficient data"})]})]}),d.rollup_stats.accuracy_distribution&&(0,dt.jsxs)("div",{className:"mt-4 pt-4 border-t border-green-200 dark:border-green-700",children:[(0,dt.jsx)("h6",{className:"text-sm font-medium text-green-800 dark:text-green-200 mb-2",children:"Accuracy Score Distribution:"}),(0,dt.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2 text-xs",children:["very_high","high","medium","low","very_low"].map(e=>{const t=d.rollup_stats.accuracy_distribution[e]||0;return(0,dt.jsxs)("div",{className:"text-center p-2 bg-white dark:bg-gray-800 rounded border",children:[(0,dt.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:t}),(0,dt.jsx)("div",{className:"text-gray-600 dark:text-gray-400 capitalize",children:e.replace("_"," ")})]},e)})})]})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:e.length}),(0,dt.jsx)("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Products Analyzed"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-pink-600 dark:text-pink-400",children:t}),(0,dt.jsx)("div",{className:"text-sm text-pink-800 dark:text-pink-300",children:"Total Segments"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:r}),(0,dt.jsx)("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Ready for Analysis"}),(0,dt.jsxs)("div",{className:"text-xs text-green-600 dark:text-green-400",children:["\u2265",p.min_cohort_size," users each"]})]})]}),(0,dt.jsxs)("div",{className:"space-y-8",children:[(0,dt.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-600",children:[(0,dt.jsx)("h5",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Understanding the Hierarchy View"}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-xs",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h6",{className:"font-medium text-gray-800 dark:text-gray-200 mb-2",children:"Status Indicators:"}),(0,dt.jsxs)("div",{className:"space-y-1",children:[(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("span",{className:"px-1 py-0.5 rounded text-xs bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300 mr-2",children:"\u2705 PASSES"}),(0,dt.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:["Has enough users (\u2265",p.min_cohort_size,") for reliable analysis"]})]}),(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("span",{className:"px-1 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300 mr-2",children:"\u26a0\ufe0f HAS ROLLUPS"}),(0,dt.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Contains segments that roll up to broader categories (hover for details)"})]}),(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("span",{className:"px-1 py-0.5 rounded text-xs bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300 mr-2",children:"\u274c COMBINES"}),(0,dt.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Entire level needs to combine with others (hover for details)"})]}),(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("span",{className:"px-1 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300 mr-2",children:"\u2192 Target"}),(0,dt.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Rollup target destination (hover for details)"})]})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h6",{className:"font-medium text-gray-800 dark:text-gray-200 mb-2",children:"4-Level Hierarchy & Rollup Strategy:"}),(0,dt.jsxs)("div",{className:"space-y-1 text-gray-600 dark:text-gray-400",children:[(0,dt.jsxs)("div",{children:["1. ",(0,dt.jsx)("strong",{children:"\ud83c\udfe2\ud83d\udcf1\ud83d\udcb0 Product+Store+Price"})," (Level 1)"]}),(0,dt.jsxs)("div",{children:["2. ",(0,dt.jsx)("strong",{children:"\ud83c\udf0d Economic Tier"})," (+ Economic grouping)"]}),(0,dt.jsxs)("div",{children:["3. ",(0,dt.jsx)("strong",{children:"\ud83c\udfc1 Country"})," (+ Specific country)"]}),(0,dt.jsxs)("div",{children:["4. ",(0,dt.jsx)("strong",{children:"\ud83d\udccd Region"})," (+ Regional detail)"]}),(0,dt.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-300 dark:border-gray-600",children:[(0,dt.jsx)("strong",{children:"Rollup ceiling:"})," Cannot roll up beyond Product+Store+Price level. Even if Level 1 fails, everything rolls up to that specific Product+Store+Price combination."]}),(0,dt.jsx)("div",{className:"mt-2 text-xs italic",children:"\ud83d\udca1 Hover over any status indicator for detailed rollup information"})]})]})]})]}),e.map(e=>{var t;let[r,n]=e;const a=rF(n,p.min_cohort_size);null===(t=d.price_buckets)||void 0===t||t[r];return(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[(0,dt.jsx)("div",{className:"px-6 py-4 bg-gradient-to-r from-indigo-50 to-blue-50 dark:from-indigo-900/20 dark:to-blue-900/20 border-b border-gray-200 dark:border-gray-600",children:(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)(hL,{className:"h-6 w-6 text-indigo-600 dark:text-indigo-400 mr-3"}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h5",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Complete rollup hierarchy showing what passes and what combines"})]})]}),(0,dt.jsxs)("div",{className:"text-right",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:n.reduce((e,t)=>e+t.user_count,0).toLocaleString()}),(0,dt.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Users"})]})]})}),(0,dt.jsx)("div",{className:"p-6",children:Object.entries(a).map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{className:"mb-8 last:mb-0",children:[(0,dt.jsxs)("div",{className:"flex items-center mb-4",children:[(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("div",{className:"w-4 h-4 bg-purple-500 rounded mr-3"}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsxs)("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["\ud83c\udfe2 ",r.productId," | \ud83d\udcf1 ",XL(r.appStore)," | \ud83d\udcb0 ",r.priceRange]}),r.segmentId&&(0,dt.jsxs)("div",{className:"flex items-center space-x-1",children:[ZL(r.segmentId,"ID"),r.rollupTargetSegmentId&&eF(r.rollupTargetSegmentId)]})]})]}),(0,dt.jsxs)("div",{className:"ml-auto flex items-center space-x-4",children:[(0,dt.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.totalUsers.toLocaleString()," users"]}),tF(r.passesThreshold,r.rollupInfo,"product_store_price",r.rollupInfo.rollupTarget)]})]}),(0,dt.jsx)("div",{className:"ml-6 space-y-4",children:Object.entries(r.economicTiers).map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"flex items-center mb-3",children:[(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("div",{className:"w-3 h-3 bg-indigo-500 rounded mr-3"}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsxs)("span",{className:"text-md font-medium text-gray-700 dark:text-gray-300",children:["\ud83c\udf0d ",t]}),r.segmentId&&(0,dt.jsxs)("div",{className:"flex items-center space-x-1",children:[ZL(r.segmentId,"ID"),r.rollupTargetSegmentId&&eF(r.rollupTargetSegmentId)]})]})]}),(0,dt.jsxs)("div",{className:"ml-auto flex items-center space-x-3",children:[(0,dt.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.totalUsers.toLocaleString()," users"]}),tF(r.passesThreshold,r.rollupInfo,"economic_tier",r.rollupInfo.rollupTarget)]})]}),(0,dt.jsx)("div",{className:"ml-6 space-y-3",children:Object.entries(r.countries).map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"flex items-center mb-2",children:[(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("div",{className:"w-2.5 h-2.5 bg-blue-500 rounded mr-3"}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsxs)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["\ud83c\udfc1 ",t]}),r.segmentId&&(0,dt.jsxs)("div",{className:"flex items-center space-x-1",children:[ZL(r.segmentId,"ID"),r.rollupTargetSegmentId&&eF(r.rollupTargetSegmentId)]})]})]}),(0,dt.jsxs)("div",{className:"ml-auto flex items-center space-x-3",children:[(0,dt.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.totalUsers.toLocaleString()," users"]}),tF(r.passesThreshold,r.rollupInfo,"country",r.rollupInfo.rollupTarget)]})]}),r.regions.length>0&&(0,dt.jsx)("div",{className:"ml-6 space-y-1",children:r.regions.map((e,t)=>(0,dt.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded mr-2"}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsxs)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["\ud83d\udccd ",e.name]}),e.segmentId&&(0,dt.jsxs)("div",{className:"flex items-center space-x-1",children:[ZL(e.segmentId,"ID"),e.rollupTargetSegmentId&&eF(e.rollupTargetSegmentId)]})]})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:[e.users.toLocaleString()," users"]}),e.passes?(0,dt.jsx)("span",{className:"px-1 py-0.5 rounded text-xs bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",children:"\u2705 PASSES"}):(0,dt.jsxs)("div",{className:"relative group",children:[(0,dt.jsxs)("span",{className:"px-1 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300 cursor-help",children:["\u2192 ",e.rollupTarget]}),(0,dt.jsxs)("div",{className:"absolute bottom-full right-0 mb-2 px-3 py-2 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 text-xs rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-10 whitespace-nowrap max-w-xs",children:[(0,dt.jsxs)("div",{className:"text-xs",children:[(0,dt.jsx)("div",{className:"font-medium mb-1",children:"Rollup Details:"}),(0,dt.jsxs)("div",{children:["\u2022 Target: ",e.rollupTarget]}),e.rollupReason&&(0,dt.jsxs)("div",{children:["\u2022 Reason: ",e.rollupReason]}),e.propertiesDropped&&e.propertiesDropped.length>0&&(0,dt.jsxs)("div",{children:["\u2022 Properties dropped: ",e.propertiesDropped.join(", ")]}),e.finalUserCount&&e.finalUserCount!==e.originalUserCount&&(0,dt.jsxs)("div",{children:["\u2022 Final user count: ",e.finalUserCount.toLocaleString()]}),e.rollupTargetSegmentId&&(0,dt.jsxs)("div",{children:["\u2022 Target Segment ID: ",JL(e.rollupTargetSegmentId)]})]}),(0,dt.jsx)("div",{className:"absolute top-full right-4 transform border-4 border-transparent border-t-gray-900 dark:border-t-gray-100"})]})]})]})]},t))})]},t)})})]},t)})})]},t)})})]},r)})]})]})})()]}),d.rollup_stats&&(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsxs)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,dt.jsx)(hL,{className:"h-5 w-5 mr-2"}),"Segment Optimization Summary"]}),(0,dt.jsx)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400",children:d.rollup_stats.total_segments}),(0,dt.jsx)("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Original Segments"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:d.rollup_stats.viable_segments}),(0,dt.jsx)("div",{className:"text-sm text-green-700 dark:text-green-300",children:"Viable Segments"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:d.rollup_stats.rolled_up_segments}),(0,dt.jsx)("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Rolled Up"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:d.rollup_stats.rolled_up_segments>0?"".concat((d.rollup_stats.rolled_up_segments/d.rollup_stats.total_segments*100).toFixed(1),"%"):"0%"}),(0,dt.jsx)("div",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Segments Optimized"})]})]})})]}),(0,dt.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[(0,dt.jsxs)("h4",{className:"text-sm font-semibold text-blue-900 dark:text-blue-200 mb-2 flex items-center",children:[(0,dt.jsx)(lL,{className:"h-4 w-4 mr-2"}),"Analysis Methodology"]}),(0,dt.jsxs)("div",{className:"text-sm text-blue-800 dark:text-blue-300 space-y-2",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"User-Centric Analysis:"})," Instead of generating theoretical combinations, we analyze your actual users and group them based on their real properties (product purchases, geographic location, app store). This ensures every segment represents real user behavior."]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Intelligent Grouping:"})," When segments have insufficient users, we use a smart rollup strategy that combines related segments while preserving meaningful distinctions."]}),d.bucketing_methodology&&(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Price Bucketing:"})," ",d.bucketing_methodology.description]})]})]}),(0,dt.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,dt.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Hierarchical Rollup Analysis"}),(0,dt.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,dt.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Shows how segments are grouped and rolled up when they don't meet the minimum threshold of ",p.min_cohort_size," users"]}),(0,dt.jsx)("button",{onClick:()=>x(!g),className:"px-3 py-1 text-xs font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:g?"Hide Details":"Show Full Details"})]}),(0,dt.jsx)("div",{className:"space-y-4",children:Object.entries(v).map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[(0,dt.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-t-lg",children:(0,dt.jsxs)("button",{onClick:()=>b(t),className:"flex items-center justify-between w-full text-left",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dt.jsx)("svg",{className:"w-4 h-4 transform transition-transform ".concat(m[t]?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white",children:[r.productId," \u2022 ",r.appStore," \u2022 ",r.priceRange]}),(0,dt.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.totalUsers.toLocaleString()," total users across ",r.rollupInfo.totalSegments," segments"]})]})]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[tF(r.passesThreshold,r.rollupInfo,"product",r.rollupInfo.rollupTarget),(0,dt.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.rollupInfo.rolledUpSegments>0&&"".concat(r.rollupInfo.rolledUpSegments," rolled up")})]})]})}),m[t]&&(0,dt.jsx)("div",{className:"p-3 space-y-3",children:Object.entries(r.economicTiers).map(e=>{let[r,n]=e;return(0,dt.jsxs)("div",{className:"border-l-2 border-gray-300 dark:border-gray-600 pl-4",children:[(0,dt.jsxs)("button",{onClick:()=>b("".concat(t,"-").concat(r)),className:"flex items-center justify-between w-full text-left mb-2",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dt.jsx)("svg",{className:"w-3 h-3 transform transition-transform ".concat(m["".concat(t,"-").concat(r)]?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"font-medium text-gray-800 dark:text-gray-200",children:r}),(0,dt.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n.totalUsers.toLocaleString()," users across ",Object.keys(n.countries).length," countries"]})]})]}),(0,dt.jsx)("div",{className:"flex items-center space-x-2",children:tF(n.passesThreshold,n.rollupInfo,"tier",n.rollupInfo.rollupTarget)})]}),m["".concat(t,"-").concat(r)]&&(0,dt.jsx)("div",{className:"space-y-2 ml-4",children:Object.entries(n.countries).map(e=>{let[n,a]=e;return(0,dt.jsxs)("div",{className:"border-l border-gray-200 dark:border-gray-600 pl-3",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300 text-sm",children:n}),(0,dt.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",a.totalUsers.toLocaleString()," users)"]})]}),(0,dt.jsx)("div",{className:"flex items-center space-x-2",children:tF(a.passesThreshold,a.rollupInfo,"country",a.rollupInfo.rollupTarget)})]}),g&&a.regions.length>0&&(0,dt.jsx)("div",{className:"ml-4 mt-1 space-y-1",children:a.regions.map((e,t)=>(0,dt.jsxs)("div",{className:"flex items-center justify-between text-xs py-1",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,dt.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:["\ud83d\udccd ",e.name]}),(0,dt.jsxs)("span",{className:"text-gray-500 dark:text-gray-500",children:["(",e.users.toLocaleString()," users)"]})]}),(0,dt.jsx)("div",{className:"flex items-center space-x-1",children:tF(e.passes,{rollupTarget:e.rollupTarget,rollupReasons:e.rollupReason?[e.rollupReason]:[],finalUserCount:e.finalUserCount,propertiesDropped:e.propertiesDropped},"region",e.rollupTarget)})]},t))})]},"".concat(t,"-").concat(r,"-").concat(n))})})]},"".concat(t,"-").concat(r))})})]},t)})}),(0,dt.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,dt.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Rollup Summary"}),(0,dt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"Total Product Combinations"}),(0,dt.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:Object.keys(v).length})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"Segments Meeting Threshold"}),(0,dt.jsx)("div",{className:"font-medium text-green-600 dark:text-green-400",children:Object.values(v).filter(e=>e.passesThreshold).length})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"Segments Requiring Rollup"}),(0,dt.jsx)("div",{className:"font-medium text-orange-600 dark:text-orange-400",children:Object.values(v).filter(e=>!e.passesThreshold).length})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"Total Users Analyzed"}),(0,dt.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:Object.values(v).reduce((e,t)=>e+t.totalUsers,0).toLocaleString()})]})]})]})]})]})]})},iF=e=>{var t,r,n,a,i,s,o;let{analysisProgress:l,isAnalyzing:c}=e;return c&&l?(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:(0,dt.jsxs)("div",{className:"p-6",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Step 3: Running Conversion Analysis"}),(0,dt.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:["Calculating conversion rates for each user segment. This process analyzes ",(null===(t=l.total_combinations)||void 0===t?void 0:t.toLocaleString())||0," different combinations of user properties."]}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2",children:[(0,dt.jsx)("span",{children:"Overall Progress"}),(0,dt.jsxs)("span",{children:[(null===(r=l.percentage_complete)||void 0===r?void 0:r.toFixed(1))||0,"% Complete"]})]}),(0,dt.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:(0,dt.jsx)("div",{className:"bg-indigo-600 h-3 rounded-full transition-all duration-300 relative",style:{width:"".concat(l.percentage_complete||0,"%")},children:(0,dt.jsx)("div",{className:"absolute inset-0 bg-indigo-400 rounded-full animate-pulse opacity-50"})})})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,dt.jsxs)("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,dt.jsx)("div",{className:"text-sm text-blue-800 dark:text-blue-300 font-medium",children:"Segments Processed"}),(0,dt.jsx)("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:(null===(n=l.completed_combinations)||void 0===n?void 0:n.toLocaleString())||0}),(0,dt.jsxs)("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:["of ",(null===(a=l.total_combinations)||void 0===a?void 0:a.toLocaleString())||0," total"]})]}),(0,dt.jsxs)("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,dt.jsx)("div",{className:"text-sm text-green-800 dark:text-green-300 font-medium",children:"Valid Groups Found"}),(0,dt.jsx)("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:(null===(i=l.valid_cohorts_found)||void 0===i?void 0:i.toLocaleString())||0}),(0,dt.jsx)("div",{className:"text-xs text-green-600 dark:text-green-400",children:"Groups with enough users for analysis"})]}),(0,dt.jsxs)("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[(0,dt.jsx)("div",{className:"text-sm text-red-800 dark:text-red-300 font-medium",children:"Skipped Groups"}),(0,dt.jsx)("div",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:(null===(s=l.invalid_cohorts_found)||void 0===s?void 0:s.toLocaleString())||0}),(0,dt.jsx)("div",{className:"text-xs text-red-600 dark:text-red-400",children:"Groups with insufficient data"})]}),(0,dt.jsxs)("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[(0,dt.jsx)("div",{className:"text-sm text-yellow-800 dark:text-yellow-300 font-medium",children:"Expanded Groups"}),(0,dt.jsx)("div",{className:"text-xl font-bold text-yellow-600 dark:text-yellow-400",children:(null===(o=l.cohorts_with_dropped_properties)||void 0===o?void 0:o.toLocaleString())||0}),(0,dt.jsx)("div",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:"Groups broadened to include more users"})]})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,dt.jsxs)("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[(0,dt.jsx)("div",{className:"text-sm text-purple-800 dark:text-purple-300 font-medium",children:"Processing Rate"}),(0,dt.jsxs)("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:[l.combinations_per_minute?l.combinations_per_minute.toFixed(1):"0"," per minute"]}),(0,dt.jsx)("div",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Current analysis speed"})]}),(0,dt.jsxs)("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg",children:[(0,dt.jsx)("div",{className:"text-sm text-indigo-800 dark:text-indigo-300 font-medium",children:"Current Step"}),(0,dt.jsx)("div",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400",children:l.current_step||"Initializing..."}),(0,dt.jsx)("div",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:"What's happening now"})]})]}),l.current_combination&&(0,dt.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,dt.jsxs)("div",{className:"text-sm text-gray-800 dark:text-gray-300 font-medium mb-2 flex items-center",children:[(0,dt.jsx)(We,{className:"h-4 w-4 mr-2 animate-spin"}),"Currently Processing"]}),(0,dt.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,dt.jsx)("span",{className:"font-medium",children:"Product:"})," ",l.current_combination.product_id||"N/A"," \u2022",(0,dt.jsx)("span",{className:"font-medium ml-2",children:"Price:"})," ",l.current_combination.price_bucket||"N/A"," \u2022",(0,dt.jsx)("span",{className:"font-medium ml-2",children:"Location:"})," ",l.current_combination.country||"Any"," / ",l.current_combination.region||"Any"," \u2022",(0,dt.jsx)("span",{className:"font-medium ml-2",children:"Store:"})," ",l.current_combination.app_store||"Any"]})]}),l.estimated_time_remaining&&(0,dt.jsx)("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:(0,dt.jsxs)("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:[(0,dt.jsx)("strong",{children:"Estimated time remaining:"})," ",Math.ceil(l.estimated_time_remaining)," minutes"]})})]})}):null},sF=e=>{var t,r,n,a,i,s,o,l,c,d,u,h,p;let{analysisResults:m}=e;return m?(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:(0,dt.jsxs)("div",{className:"p-6",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Step 3: Conversion Analysis Complete"}),(0,dt.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:["Analysis finished! We found conversion patterns across ",(null===(t=m.summary)||void 0===t||null===(r=t.valid_cohorts)||void 0===r?void 0:r.toLocaleString())||0," user segments. Use the search below to explore specific segments and their conversion rates."]}),(0,dt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,dt.jsxs)("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,dt.jsx)("div",{className:"text-sm text-green-800 dark:text-green-300 font-medium",children:"Successful Analyses"}),(0,dt.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:(null===(n=m.summary)||void 0===n||null===(a=n.valid_cohorts)||void 0===a?void 0:a.toLocaleString())||0}),(0,dt.jsx)("div",{className:"text-xs text-green-600 dark:text-green-400",children:"User segments with reliable conversion data"})]}),(0,dt.jsxs)("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[(0,dt.jsx)("div",{className:"text-sm text-red-800 dark:text-red-300 font-medium",children:"Insufficient Data"}),(0,dt.jsx)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:(null===(i=m.summary)||void 0===i||null===(s=i.invalid_cohorts)||void 0===s?void 0:s.toLocaleString())||0}),(0,dt.jsx)("div",{className:"text-xs text-red-600 dark:text-red-400",children:"Segments with too few users"})]}),(0,dt.jsxs)("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[(0,dt.jsx)("div",{className:"text-sm text-yellow-800 dark:text-yellow-300 font-medium",children:"Expanded Segments"}),(0,dt.jsx)("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:(null===(o=m.summary)||void 0===o||null===(l=o.cohorts_with_dropped_properties)||void 0===l?void 0:l.toLocaleString())||0}),(0,dt.jsx)("div",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:"Segments broadened to include more users"})]}),(0,dt.jsxs)("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,dt.jsx)("div",{className:"text-sm text-blue-800 dark:text-blue-300 font-medium",children:"Analysis Date"}),(0,dt.jsx)("div",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400",children:m.last_updated?(f=m.last_updated,new Date(f).toLocaleDateString()):"N/A"}),(0,dt.jsx)("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"When this analysis was completed"})]})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,dt.jsxs)("div",{className:"p-4 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[(0,dt.jsxs)("div",{className:"flex items-center mb-2",children:[(0,dt.jsx)(iL,{className:"h-5 w-5 text-green-600 dark:text-green-400 mr-2"}),(0,dt.jsx)("h4",{className:"text-sm font-semibold text-green-900 dark:text-green-200",children:"Analysis Quality"})]}),(0,dt.jsxs)("div",{className:"text-sm text-green-800 dark:text-green-300 space-y-1",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Success Rate:"})," ",null!==(c=m.summary)&&void 0!==c&&c.valid_cohorts&&null!==(d=m.summary)&&void 0!==d&&d.total_combinations_attempted?(m.summary.valid_cohorts/m.summary.total_combinations_attempted*100).toFixed(1):0,"% of segments produced reliable results"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Data Coverage:"})," ",(null===(u=m.summary)||void 0===u||null===(h=u.total_users_analyzed)||void 0===h?void 0:h.toLocaleString())||0," users analyzed across all segments"]})]})]}),(0,dt.jsxs)("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[(0,dt.jsxs)("div",{className:"flex items-center mb-2",children:[(0,dt.jsx)($e,{className:"h-5 w-5 text-purple-600 dark:text-purple-400 mr-2"}),(0,dt.jsx)("h4",{className:"text-sm font-semibold text-purple-900 dark:text-purple-200",children:"Statistical Reliability"})]}),(0,dt.jsxs)("div",{className:"text-sm text-purple-800 dark:text-purple-300 space-y-1",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Confidence Intervals:"})," Available for all valid segments"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("strong",{children:"Minimum Cohort Size:"})," ",(null===(p=m.analysis_parameters)||void 0===p?void 0:p.min_cohort_size)||"N/A"," users per segment"]})]})]})]}),m.warnings&&m.warnings.length>0&&(0,dt.jsxs)("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg mb-4",children:[(0,dt.jsxs)("div",{className:"flex items-center mb-2",children:[(0,dt.jsx)(He,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mr-2"}),(0,dt.jsx)("h4",{className:"text-sm font-semibold text-yellow-900 dark:text-yellow-200",children:"Analysis Warnings"})]}),(0,dt.jsxs)("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:[(0,dt.jsx)("div",{className:"mb-2",children:(0,dt.jsxs)("strong",{children:[m.warnings.length," warning",1!==m.warnings.length?"s":""," occurred during analysis:"]})}),(0,dt.jsxs)("ul",{className:"space-y-1 list-disc list-inside",children:[m.warnings.slice(0,3).map((e,t)=>(0,dt.jsx)("li",{children:e.message||e},t)),m.warnings.length>3&&(0,dt.jsxs)("li",{className:"text-yellow-600 dark:text-yellow-400",children:["... and ",m.warnings.length-3," more warnings"]})]})]})]}),(0,dt.jsxs)("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg",children:[(0,dt.jsxs)("div",{className:"flex items-center mb-2",children:[(0,dt.jsx)(Je,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-400 mr-2"}),(0,dt.jsx)("h4",{className:"text-sm font-semibold text-indigo-900 dark:text-indigo-200",children:"Next Steps"})]}),(0,dt.jsxs)("div",{className:"text-sm text-indigo-800 dark:text-indigo-300 space-y-1",children:[(0,dt.jsx)("div",{children:"\u2713 Use the search filters below to explore specific products, regions, or price ranges"}),(0,dt.jsx)("div",{children:"\u2713 Look for segments with high conversion rates and large user counts for optimization opportunities"}),(0,dt.jsx)("div",{children:"\u2713 Pay attention to confidence intervals - segments with wider intervals may need more data"}),(0,dt.jsx)("div",{children:'\u2713 Click "Rollup Details" on expanded segments to understand how they were optimized'})]})]})]})}):null;var f},oF=Ue("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),lF=e=>{let{analysisResults:t,expandedSections:r,onToggleSection:n}=e;const a=e=>{if(!e)return null;const t=(e=>{if(!e)return"#6B7280";let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);const r=Math.abs(t)%360;return"hsl(".concat(r,", 65%, 50%)")})(e),r=(e=>!e||e.length<=8?e:"".concat(e.substring(0,4),"...").concat(e.substring(e.length-4)))(e);return(0,dt.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-mono mx-1",style:{backgroundColor:"".concat(t,"20"),color:t,border:"1px solid ".concat(t,"40")},children:["ID: ",r]})};if(!t)return(0,dt.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No analysis results available"});const i={};let s=0,o=0;t.conversion_probabilities&&Object.entries(t.conversion_probabilities).forEach(e=>{let[t,r]=e;const n=r.cohort||{},a=r.metrics||{},l=n.product_id,c=n.app_store||"Unknown",d=n.price_bucket,u=n.economic_tier||"",h=n.country||"",p=n.region||"";if(!l||!d)return;const m=n.properties_dropped&&n.properties_dropped.length>0,f=!m;f&&s++,m&&o++;let g="region";p||(g="country"),h||(g="tier"),u||(g="price");"".concat(l,"|").concat(c,"|").concat(d,"|").concat(u,"|").concat(h,"|").concat(p);const x=Re(Re(Re({},n),a),{},{segment_id:n.segment_id||t,is_viable:f,trial_conversion_rate:a.trial_conversion_rate||0,trial_converted_count:a.trial_converted_count||0,trial_started_count:a.trial_started_count||0,rollup_target_segment_id:n.rollup_target_segment_id,rollup_reason:n.rollup_reason,hierarchy_level:g});i[l]||(i[l]={stores:{},totalUsers:0,viableSegments:0,rollupSegments:0}),i[l].stores[c]||(i[l].stores[c]={prices:{},totalUsers:0,viableSegments:0,rollupSegments:0}),i[l].stores[c].prices[d]||(i[l].stores[c].prices[d]={tiers:{},totalUsers:0,viableSegments:0,rollupSegments:0,segment:"price"===g?x:null}),i[l].stores[c].prices[d].tiers[u||"Unknown"]||(i[l].stores[c].prices[d].tiers[u||"Unknown"]={countries:{},totalUsers:0,viableSegments:0,rollupSegments:0,segment:"tier"===g?x:null}),i[l].stores[c].prices[d].tiers[u||"Unknown"].countries[h||"Unknown"]||(i[l].stores[c].prices[d].tiers[u||"Unknown"].countries[h||"Unknown"]={regions:{},totalUsers:0,viableSegments:0,rollupSegments:0,segment:"country"===g?x:null}),"region"===g&&(i[l].stores[c].prices[d].tiers[u||"Unknown"].countries[h||"Unknown"].regions[p||"Unknown"]=x);const b=n.cohort_size||0;i[l].totalUsers+=b,i[l].stores[c].totalUsers+=b,i[l].stores[c].prices[d].totalUsers+=b,i[l].stores[c].prices[d].tiers[u||"Unknown"].totalUsers+=b,i[l].stores[c].prices[d].tiers[u||"Unknown"].countries[h||"Unknown"].totalUsers+=b,f&&(i[l].viableSegments++,i[l].stores[c].viableSegments++,i[l].stores[c].prices[d].viableSegments++,i[l].stores[c].prices[d].tiers[u||"Unknown"].viableSegments++,i[l].stores[c].prices[d].tiers[u||"Unknown"].countries[h||"Unknown"].viableSegments++),m&&(i[l].rollupSegments++,i[l].stores[c].rollupSegments++,i[l].stores[c].prices[d].rollupSegments++,i[l].stores[c].prices[d].tiers[u||"Unknown"].rollupSegments++,i[l].stores[c].prices[d].tiers[u||"Unknown"].countries[h||"Unknown"].rollupSegments++)});const l=function(e,t,r,n,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;const l={marginLeft:"".concat(24*s,"px")};return(0,dt.jsxs)("div",{className:"flex items-center justify-between py-1 px-3 hover:bg-gray-50 dark:hover:bg-gray-700/30 ".concat(s%2===0?"bg-gray-25 dark:bg-gray-800/20":"bg-white dark:bg-gray-800"),style:l,children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[e,(0,dt.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:t}),o&&o.segment_id&&a(o.segment_id),o&&(0,dt.jsx)(dt.Fragment,{children:o.is_viable?(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsxs)("span",{className:"text-green-600 dark:text-green-400 text-sm font-medium",children:["\ud83c\udfaf ",YL(o.trial_conversion_rate)]}),(0,dt.jsxs)("span",{className:"text-blue-600 dark:text-blue-400 text-sm",children:["\u2192 ",o.trial_converted_count||0,"/",o.trial_started_count||0]})]}):(0,dt.jsxs)(dt.Fragment,{children:[o.rollup_target_segment_id&&(0,dt.jsxs)("span",{className:"text-red-600 dark:text-red-400 text-sm",children:["\u2192 ",a(o.rollup_target_segment_id)]}),o.rollup_reason&&(0,dt.jsxs)("span",{className:"text-red-500 dark:text-red-400 text-xs italic",children:["(",o.rollup_reason,")"]}),o.properties_dropped&&o.properties_dropped.length>0&&(0,dt.jsxs)("span",{className:"text-orange-500 dark:text-orange-400 text-xs",children:["Dropped: [",o.properties_dropped.join(", "),"]"]}),o.rollup_description&&(0,dt.jsx)("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:o.rollup_description})]})})]}),(0,dt.jsxs)("div",{className:"flex items-center gap-4 text-sm font-medium",children:[(0,dt.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[r.toLocaleString()," users"]}),void 0!==n&&void 0!==i&&(0,dt.jsxs)("div",{className:"flex items-center gap-2",children:[n>0&&(0,dt.jsxs)("span",{className:"text-green-600 dark:text-green-400",children:[n," viable"]}),i>0&&(0,dt.jsxs)("span",{className:"text-orange-600 dark:text-orange-400",children:[i," rollup"]})]}),o&&(0,dt.jsx)("div",{children:o.is_viable?(0,dt.jsx)("span",{className:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 px-2 py-1 rounded-full text-xs font-medium",children:"\u2705 VIABLE"}):(0,dt.jsx)("span",{className:"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200 px-2 py-1 rounded-full text-xs font-medium",children:"\u274c ROLLUP"})})]})]})};return(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:[(0,dt.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,dt.jsx)(Xe,{className:"h-6 w-6"}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h2",{className:"text-xl font-bold",children:"Hierarchical Analysis Results"}),(0,dt.jsx)("p",{className:"text-blue-100 text-sm mt-1",children:"Tree-based segment hierarchy with conversion metrics and rollup information"})]})]}),(0,dt.jsxs)("div",{className:"flex items-center gap-6 text-sm",children:[(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold",children:s}),(0,dt.jsx)("div",{className:"text-blue-100",children:"Viable Segments"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold",children:o}),(0,dt.jsx)("div",{className:"text-blue-100",children:"Rollup Segments"})]}),(0,dt.jsxs)("div",{className:"text-center",children:[(0,dt.jsxs)("div",{className:"text-2xl font-bold",children:[s+o>0?Math.round(s/(s+o)*100):0,"%"]}),(0,dt.jsx)("div",{className:"text-blue-100",children:"Coverage"})]})]})]})}),(0,dt.jsx)("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:Object.entries(i).map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{children:[l((0,dt.jsx)(hL,{className:"h-5 w-5 text-purple-600"}),"\ud83c\udfe2 ".concat(t),r.totalUsers,r.viableSegments,r.rollupSegments,0),Object.entries(r.stores).map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{children:[l((0,dt.jsx)(oF,{className:"h-4 w-4 text-blue-600"}),"\ud83d\udcf1 ".concat(XL(t)),r.totalUsers,r.viableSegments,r.rollupSegments,1),Object.entries(r.prices).map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{children:[l((0,dt.jsx)(Ye,{className:"h-4 w-4 text-green-600"}),"\ud83d\udcb0 ".concat(t),r.totalUsers,r.viableSegments,r.rollupSegments,2,r.segment),Object.entries(r.tiers).map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{children:[l((0,dt.jsx)($e,{className:"h-4 w-4 text-yellow-600"}),"\ud83c\udf0d ".concat(t),r.totalUsers,r.viableSegments,r.rollupSegments,3,r.segment),Object.entries(r.countries).map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{children:[l((0,dt.jsx)(pL,{className:"h-4 w-4 text-orange-600"}),"\ud83c\udfc1 ".concat(t),r.totalUsers,r.viableSegments,r.rollupSegments,4,r.segment),Object.entries(r.regions).map(e=>{let[t,r]=e;return r?l(r.is_viable?(0,dt.jsx)(iL,{className:"h-4 w-4 text-green-500"}):(0,dt.jsx)(He,{className:"h-4 w-4 text-red-500"}),"\ud83d\udccd ".concat(t),r.cohort_size||0,void 0,void 0,5,r):null})]},t)})]},t)})]},t)})]},t)})]},t)})})]})},cF=()=>{const e=(()=>{try{const e=localStorage.getItem("conversionProbability_config"),t=localStorage.getItem("conversionProbability_expandedSections");return{config:e?JSON.parse(e):{timeframe:"all",min_cohort_size:50,force_recalculate:!1,min_price_samples:100},expandedSections:t?JSON.parse(t):{propertyAnalysis:!1,analysisHierarchy:!0}}}catch(e){return console.error("Error loading saved state:",e),{config:{timeframe:"all",min_cohort_size:50,force_recalculate:!1,min_price_samples:100},expandedSections:{propertyAnalysis:!1,analysisHierarchy:!0}}}})(),[t,r]=(0,a.useState)(Re(Re({},e.config),{},{min_price_samples:e.config.min_price_samples||100})),[n,i]=(0,a.useState)(null),[s,o]=(0,a.useState)(null),[l,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),[m,f]=(0,a.useState)(null),[g,x]=(0,a.useState)(!1),[b,y]=(0,a.useState)(null),[v,_]=(0,a.useState)(null),[k,j]=(0,a.useState)(Re(Re({},e.expandedSections),{},{analysisHierarchy:!0})),[w,N]=(0,a.useState)([]);(0,a.useEffect)(()=>{localStorage.setItem("conversionProbability_config",JSON.stringify(t))},[t]),(0,a.useEffect)(()=>{localStorage.setItem("conversionProbability_expandedSections",JSON.stringify(k))},[k]);const S=async e=>{try{const t=await fetch("/api/conversion-probability/results/".concat(e)),r=await t.json();r.success?(c(r.data),j(e=>Re(Re({},e),{},{analysisHierarchy:!0})),O()):y(r.error||"Failed to load analysis results")}catch(t){y("Error loading analysis results: "+t.message)}},O=async()=>{try{const e=await fetch("/api/conversion-probability/analyses"),t=await e.json();t.success&&N(t.data.files)}catch(e){console.error("Error loading available analyses:",e)}};(0,a.useEffect)(()=>{let e;return n&&d&&(e=setInterval(async()=>{try{const e=await fetch("/api/conversion-probability/progress/".concat(n)),t=await e.json();t.success&&(o(t.data.progress),"completed"!==t.data.status&&"failed"!==t.data.status||(u(!1),"completed"===t.data.status?(_("Analysis completed successfully!"),S(n)):y("Analysis failed. Please try again.")))}catch(e){console.error("Error polling progress:",e)}},2e3)),()=>{e&&clearInterval(e)}},[n,d]),(0,a.useEffect)(()=>{O()},[]);const C=async()=>{try{const e=await fetch("/api/conversion-probability/results/latest");let t=await e.json();if(!t.success){const e=await fetch("/api/conversion-probability/analyses"),r=await e.json();if(r.success&&r.data.files.length>0){const e=r.data.files[0];t=await(await fetch("/api/conversion-probability/results/".concat(e.analysis_id))).json()}}t.success&&(c(t.data),O())}catch(e){console.error("Error loading latest analysis results:",e),setTimeout(()=>{window.location.reload()},1e3)}};return{config:t,currentAnalysis:n,analysisProgress:s,analysisResults:l,isAnalyzing:d,isRunningNewAnalysis:h,propertyAnalysis:m,isAnalyzingProperties:g,error:b,success:v,expandedSections:k,availableAnalyses:w,setConfig:r,setError:y,setSuccess:_,analyzeProperties:async()=>{x(!0),y(null);try{const e=KL(t.timeframe),r=await fetch("/api/conversion-probability/analyze-properties",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timeframe_start:e.start,timeframe_end:e.end,sample_limit:1e4,min_price_samples:t.min_price_samples,min_cohort_size:t.min_cohort_size})}),n=await r.json();n.success?(f(n.data),_("Property analysis completed successfully!"),j(e=>Re(Re({},e),{},{propertyAnalysis:!1}))):y(n.error||"Property analysis failed")}catch(e){y("Error analyzing properties: "+e.message)}finally{x(!1)}},startAnalysis:async()=>{u(!0),y(null),o(null);try{const e=KL(t.timeframe),r={timeframe_start:e.start,timeframe_end:e.end,min_cohort_size:t.min_cohort_size,force_recalculate:t.force_recalculate};m&&(r.existing_property_analysis=m);const n=await fetch("/api/conversion-probability/start-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),a=await n.json();a.success?(i(a.data.analysis_id),a.data.cached?(u(!1),_("Using cached analysis results!"),S(a.data.analysis_id)):_("Analysis started! Estimated duration: ".concat(a.data.estimated_duration_minutes," minutes"))):(y(a.error||"Failed to start analysis"),u(!1))}catch(e){y("Error starting analysis: "+e.message),u(!1)}},runNewHierarchicalAnalysis:async()=>{p(!0),y(null),c(null);try{const e={},t=await fetch("/api/conversion-probability/run-new-hierarchical-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();r.success?(_("\u2728 New hierarchical analysis completed! ".concat(r.data.timeframe_description," - Processed ").concat(r.data.total_combinations," segments with ").concat(r.data.rollup_percentage.toFixed(1),"% rollup rate.")),await C(),j(e=>Re(Re({},e),{},{analysisHierarchy:!0}))):y(r.error||"New hierarchical analysis failed")}catch(e){y("Error running new hierarchical analysis: "+e.message)}finally{p(!1)}},toggleSection:e=>{j(t=>Re(Re({},t),{},{[e]:!t[e]}))}}},dF=()=>{const{config:e,analysisProgress:t,analysisResults:r,isAnalyzing:n,isRunningNewAnalysis:a,propertyAnalysis:i,isAnalyzingProperties:s,error:o,success:l,expandedSections:c,setConfig:d,setError:u,setSuccess:h,analyzeProperties:p,startAnalysis:m,runNewHierarchicalAnalysis:f,toggleSection:g}=cF();return(0,dt.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,dt.jsxs)("div",{className:"mb-8",children:[(0,dt.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Conversion Probability Analysis"}),(0,dt.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Analyze conversion probabilities for different user cohorts based on product, price, region, country, and app store properties."}),(0,dt.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,dt.jsxs)("h3",{className:"text-sm font-semibold text-blue-900 dark:text-blue-200 mb-2 flex items-center",children:[(0,dt.jsx)(lL,{className:"h-4 w-4 mr-2"}),"How This Analysis Works"]}),(0,dt.jsxs)("div",{className:"text-sm text-blue-800 dark:text-blue-300 space-y-1",children:[(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"NEW:"}),' Try "Run New Conversion Analysis" for enhanced 5-stage hierarchical analysis']}),(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Legacy:"}),' Use "Discover Data Structure" to preview segments, then "Run Legacy Analysis"']}),(0,dt.jsxs)("p",{children:[(0,dt.jsx)("strong",{children:"Results:"})," Review conversion rates in the hierarchical view with rollup information"]})]})]})]}),(0,dt.jsx)(qL,{error:o,success:l,onClearError:()=>u(null),onClearSuccess:()=>h(null)}),!i&&!r&&!a&&(0,dt.jsx)("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 dark:from-indigo-900/20 dark:to-blue-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg p-6 mb-6",children:(0,dt.jsxs)("div",{className:"flex items-start",children:[(0,dt.jsx)("div",{className:"flex-shrink-0",children:(0,dt.jsx)("div",{className:"flex items-center justify-center h-12 w-12 rounded-md bg-indigo-500 text-white",children:(0,dt.jsx)(Xe,{className:"h-6 w-6"})})}),(0,dt.jsxs)("div",{className:"ml-4 flex-1",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-indigo-900 dark:text-indigo-200 mb-2",children:"Welcome to Conversion Probability Analysis"}),(0,dt.jsx)("p",{className:"text-indigo-800 dark:text-indigo-300 mb-4",children:"This powerful tool analyzes your user data to identify conversion patterns across different user segments. You'll discover how conversion rates vary by product, price range, geographic location, and app store."}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,dt.jsxs)("div",{className:"p-3 bg-white dark:bg-indigo-900/30 rounded-lg border border-indigo-200 dark:border-indigo-700",children:[(0,dt.jsx)("h4",{className:"font-medium text-indigo-900 dark:text-indigo-200 mb-2",children:"New Enhanced Analysis:"}),(0,dt.jsxs)("ul",{className:"text-sm text-indigo-800 dark:text-indigo-300 space-y-1",children:[(0,dt.jsx)("li",{children:"\u2022 5-stage validation pipeline"}),(0,dt.jsx)("li",{children:"\u2022 Tree-based rollup methodology"}),(0,dt.jsx)("li",{children:"\u2022 Levels 3-6 only (Price \u2192 Region)"}),(0,dt.jsx)("li",{children:"\u2022 Enhanced accuracy scoring"})]})]}),(0,dt.jsxs)("div",{className:"p-3 bg-white dark:bg-indigo-900/30 rounded-lg border border-indigo-200 dark:border-indigo-700",children:[(0,dt.jsx)("h4",{className:"font-medium text-indigo-900 dark:text-indigo-200 mb-2",children:"What You'll Discover:"}),(0,dt.jsxs)("ul",{className:"text-sm text-indigo-800 dark:text-indigo-300 space-y-1",children:[(0,dt.jsx)("li",{children:"\u2022 Trial-to-paid conversion rates by segment"}),(0,dt.jsx)("li",{children:"\u2022 Refund patterns across different user groups"}),(0,dt.jsx)("li",{children:"\u2022 Geographic and pricing insights"}),(0,dt.jsx)("li",{children:"\u2022 Statistical confidence for all metrics"})]})]})]}),(0,dt.jsxs)("div",{className:"flex items-center p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[(0,dt.jsx)(He,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mr-2 flex-shrink-0"}),(0,dt.jsxs)("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[(0,dt.jsx)("strong",{children:"Ready to start?"}),' Configure your analysis parameters below, then click "Run New Conversion Analysis" for the best results, or try the legacy system if you need the old methodology.']})]})]})]})}),(0,dt.jsx)(nF,{config:e,onConfigChange:d,onAnalyzeProperties:p,onStartAnalysis:m,onRunNewHierarchicalAnalysis:f,isAnalyzingProperties:s,isAnalyzing:n,isRunningNewAnalysis:a,propertyAnalysis:i}),(0,dt.jsx)(aF,{propertyAnalysis:i,expandedSections:c,onToggleSection:g,config:e}),(0,dt.jsx)(iF,{analysisProgress:t,isAnalyzing:n}),(0,dt.jsx)(sF,{analysisResults:r}),(0,dt.jsx)(lF,{analysisResults:r,expandedSections:c,onToggleSection:g})]})},uF=()=>{var e,t,r,n,i,s,o;const[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)([]),[h,p]=(0,a.useState)("1.0.0"),[m,f]=(0,a.useState)({}),[g,x]=(0,a.useState)({}),[b,y]=(0,a.useState)(!0),[v,_]=(0,a.useState)(null),[k,j]=(0,a.useState)(""),[w,N]=(0,a.useState)(new Set),[S,O]=(0,a.useState)(new Set),[C,E]=(0,a.useState)(!1),[P,A]=(0,a.useState)(null),[M,T]=(0,a.useState)(null),[D,R]=(0,a.useState)([]),[I,L]=(0,a.useState)([]),[F,z]=(0,a.useState)(null),[U,B]=(0,a.useState)(null),[V,H]=(0,a.useState)({}),[W,$]=(0,a.useState)(!1),[q,G]=(0,a.useState)({rule_id:"",product_id:"",price_usd:"",start_date:"",countries:[]}),[K,Y]=(0,a.useState)({product_id:"",price_usd:"",start_date:"",countries:[]}),[X,J]=(0,a.useState)(null),[Q,Z]=(0,a.useState)(!1),[ee,te]=(0,a.useState)(!1),[re,ne]=(0,a.useState)({}),[ae,ie]=(0,a.useState)(null);(0,a.useEffect)(()=>{se(),oe()},[]),(0,a.useEffect)(()=>{(l.length>0||d.length>0)&&ce()},[l,d]),(0,a.useEffect)(()=>{if(Object.keys(m).length>0){if(k){const e=Object.keys(m).filter(e=>e.toLowerCase().includes(k.toLowerCase()));N(new Set(e))}else N(new Set);O(new Set)}},[m,k]),(0,a.useEffect)(()=>{I.length>0&&te(K.countries.length===I.length&&K.countries.length>0)},[K.countries,I]);const se=async()=>{try{y(!0);const e=await fetch("/api/pricing/rules"),t=await e.json();t.success?(c(t.data.rules||[]),t.data.missing_products&&u(t.data.missing_products),t.data.schema_version&&p(t.data.schema_version),t.data.products&&x(t.data.products),t.data.trial_activity_data&&ne(t.data.trial_activity_data),t.data.auto_repair_count&&t.data.auto_repair_count>0&&(ie({type:"success",message:"\u2705 Auto-repaired ".concat(t.data.auto_repair_count," pricing rules with missing end dates"),timestamp:Date.now()}),setTimeout(()=>{ie(null)},8e3))):_(t.error||"Failed to load pricing rules")}catch(e){_("Network error loading pricing rules"),console.error("Error loading pricing rules:",e)}finally{y(!1)}},oe=async()=>{try{const[e,t]=await Promise.all([fetch("/api/pricing/products"),fetch("/api/pricing/countries")]),[r,n]=await Promise.all([e.json(),t.json()]);if(r.success&&r.data&&r.data.products){const e=r.data.products.map(e=>e.product_id);R(e)}if(n.success&&n.data&&n.data.countries){const e=n.data.countries.map(e=>e.country_code);L(e)}}catch(e){console.error("Error loading dropdown data:",e),R([]),L([])}},le=async e=>{try{const t=await fetch("/api/pricing/rules/".concat(e,"/provenance")),r=await t.json();r.success?z({ruleId:e,data:r.data}):console.error("Failed to load data provenance:",r.error)}catch(t){console.error("Error loading data provenance:",t)}},ce=()=>{const e={};l.forEach(t=>{const r=t.product_id;e[r]||(e[r]={totalRules:0,countries:{},allCountries:[],mostRecentPricingUpdate:null,hasMissingRules:!1}),e[r].totalRules++;const n=new Date(t.start_date);(!e[r].mostRecentPricingUpdate||n>e[r].mostRecentPricingUpdate)&&(e[r].mostRecentPricingUpdate=n),t.countries.forEach(n=>{e[r].countries[n]||(e[r].countries[n]={rules:[],priceRange:{min:1/0,max:-1/0},hasActive:!1,hasFuture:!1,hasHistorical:!1},e[r].allCountries.push(n));const a=e[r].countries[n];a.rules.push(t),a.priceRange.min=Math.min(a.priceRange.min,t.price_usd),a.priceRange.max=Math.max(a.priceRange.max,t.price_usd);const i=new Date,s=new Date(t.start_date),o=t.end_date?new Date(t.end_date):null;o&&i>o?a.hasHistorical=!0:i>=s&&(!o||i<=o)?a.hasActive=!0:a.hasFuture=!0})}),d.forEach(t=>{const r=t.product_id,n=new Date(t.last_trial||t.last_conversion);e[r]?(e[r].hasMissingRules=!0,e[r].missingProductInfo=t,(!e[r].mostRecentTrialActivity||n>e[r].mostRecentTrialActivity)&&(e[r].mostRecentTrialActivity=n),(!e[r].mostRecentPricingUpdate||n>e[r].mostRecentPricingUpdate)&&(e[r].mostRecentPricingUpdate=n)):e[r]={totalRules:0,countries:{},allCountries:[],mostRecentPricingUpdate:n,mostRecentTrialActivity:n,hasMissingRules:!0,missingProductInfo:t}}),Object.keys(e).forEach(t=>{if(re[t]){const r=re[t],n=new Date(r.most_recent_activity);e[t].mostRecentTrialActivity=n,e[t].totalTrialEvents=r.total_events,0===e[t].totalRules&&(e[t].mostRecentPricingUpdate=n)}}),Object.values(e).forEach(e=>{!e.mostRecentTrialActivity&&e.mostRecentPricingUpdate&&(e.mostRecentTrialActivity=e.mostRecentPricingUpdate)}),Object.values(e).forEach(e=>{Object.values(e.countries).forEach(e=>{e.priceRange.min===1/0&&(e.priceRange.min=0),e.priceRange.max===-1/0&&(e.priceRange.max=0)})}),f(e)},de=async e=>{if(e){Z(!0);try{const t=await fetch("/api/pricing/products/".concat(e,"/most-recent-conversion-price")),r=await t.json();if(r.success){const e=(e=>{const t=5*Math.round(e/5)-.01;return Math.max(4.99,t)})(r.data.suggested_price);J(Re(Re({},r.data),{},{suggested_price:e,original_price:r.data.suggested_price,note:"Rounded from $".concat(r.data.suggested_price," to $").concat(e," (").concat(r.data.note,")")})),Y(t=>Re(Re({},t),{},{price_usd:e.toString()}))}else J(null)}catch(t){console.error("Error fetching suggested price:",t),J(null)}finally{Z(!1)}}},ue=e=>0===l.filter(t=>t.product_id===e).length?"2024-01-01":"",he=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=e?ue(e):"";Y({product_id:e,price_usd:"",start_date:t,countries:[...I]}),J(null),te(!0),e&&de(e),E(!0)},pe=e=>e?new Date(e).toLocaleDateString():"Ongoing",me=e=>e.priceRange.min===e.priceRange.max?"$".concat(e.priceRange.min):"$".concat(e.priceRange.min," - $").concat(e.priceRange.max),fe=(e,t)=>{console.log("\ud83d\udd0d sortCountriesByRecentActivity called with:",{countriesCount:e.length,firstFewCountries:e.slice(0,5),hasProductCountries:!!t,productCountriesKeys:Object.keys(t||{}).slice(0,5)});const r=e.sort((e,r)=>{const n=t[e],a=t[r],i=e=>e&&e.rules&&0!==e.rules.length?new Date(e.rules[0].start_date):null,s=i(n),o=i(a);if(s&&o){const e=o-s;if(0!==e)return e}return s&&!o?-1:!s&&o?1:e.localeCompare(r)});if(e.includes("US")){console.log("\ud83c\udfaf Final sorted countries (first 10):",r.slice(0,10));const e=r.indexOf("US"),n=r.indexOf("AD"),a=r.indexOf("AE");console.log("\ud83d\udccd Positions - US: ".concat(e+1,", AD: ").concat(n+1,", AE: ").concat(a+1)),t.US&&t.US.rules&&t.US.rules[0]&&console.log("\ud83c\uddfa\ud83c\uddf8 US most recent rule:",t.US.rules[0].start_date,"$".concat(t.US.rules[0].price_usd)),t.AD&&t.AD.rules&&t.AD.rules[0]&&console.log("\ud83c\udde6\ud83c\udde9 AD most recent rule:",t.AD.rules[0].start_date,"$".concat(t.AD.rules[0].price_usd))}return r},ge=Object.keys(m).filter(e=>e.toLowerCase().includes(k.toLowerCase())).sort((e,t)=>{const r=m[e],n=m[t],a=(null===r||void 0===r?void 0:r.hasMissingRules)||!1,i=(null===n||void 0===n?void 0:n.hasMissingRules)||!1;if(a&&!i)return 1;if(!a&&i)return-1;const s=null===r||void 0===r?void 0:r.mostRecentTrialActivity,o=null===n||void 0===n?void 0:n.mostRecentTrialActivity;return s||o?s?o?o-s:-1:1:e.localeCompare(t)});return b?(0,dt.jsx)("div",{className:"container mx-auto p-6",children:(0,dt.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,dt.jsx)("div",{className:"text-lg",children:"Loading pricing rules..."})})}):(0,dt.jsxs)("div",{className:"container mx-auto p-6",children:[(0,dt.jsx)("div",{className:"mb-6",children:(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Pricing Management"}),(0,dt.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage product pricing across different countries and time periods"})]}),(0,dt.jsxs)("div",{className:"text-right",children:[(0,dt.jsxs)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat("2.0.0"===h?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200":"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-200"),children:["Schema v",h]}),"2.0.0"===h&&d.length>0&&(0,dt.jsx)("div",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:"Enhanced with missing product detection"})]})]})}),ae&&(0,dt.jsx)("div",{className:"bg-emerald-50 border border-emerald-200 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200 px-4 py-3 rounded-xl mb-4 shadow-sm",children:(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,dt.jsx)("div",{className:"w-8 h-8 rounded-full bg-emerald-500 flex items-center justify-center",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("p",{className:"font-semibold",children:ae.message}),(0,dt.jsx)("p",{className:"text-sm opacity-80",children:"End dates have been automatically calculated based on newer rules"})]})]}),(0,dt.jsx)("button",{onClick:()=>ie(null),className:"text-emerald-600 hover:text-emerald-800 dark:text-emerald-400 dark:hover:text-emerald-300 transition-colors",children:(0,dt.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}),v&&(0,dt.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:[v,(0,dt.jsx)("button",{onClick:()=>_(null),className:"float-right text-red-700 hover:text-red-900",children:"\xd7"})]}),(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 mb-6",children:(0,dt.jsxs)("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[(0,dt.jsx)("div",{className:"flex-1 min-w-64",children:(0,dt.jsx)("input",{type:"text",placeholder:"Search by product ID...",value:k,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700"})}),(0,dt.jsxs)("div",{className:"flex gap-2",children:[(0,dt.jsx)("button",{onClick:()=>he(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md",children:"Create Rule"}),(0,dt.jsx)("button",{onClick:async()=>{try{y(!0);const e=await fetch("/api/pricing/repair-rules",{method:"POST"}),t=await e.json();t.success?(ie({type:"success",message:"\ud83d\udd27 ".concat(t.message),timestamp:Date.now()}),setTimeout(()=>{se()},1e3)):_(t.error||"Failed to repair rules")}catch(e){_("Network error during rule repair"),console.error("Error repairing rules:",e)}finally{y(!1)}},className:"bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-md",disabled:b,children:'\ud83d\udd27 Fix "Ongoing" Rules'}),(0,dt.jsx)("button",{onClick:se,className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md",children:"Refresh"})]})]})}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-6",children:[(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:ge.length}),(0,dt.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Products"})]}),(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-green-600",children:ge.reduce((e,t)=>{var r;return e+((null===(r=m[t])||void 0===r?void 0:r.totalRules)||0)},0)}),(0,dt.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Rules"})]}),(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold ".concat(ge.filter(e=>{var t;return null===(t=m[e])||void 0===t?void 0:t.hasMissingRules}).length>0?"text-red-600":"text-gray-400"),children:ge.filter(e=>{var t;return null===(t=m[e])||void 0===t?void 0:t.hasMissingRules}).length}),(0,dt.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Missing Rules"})]}),(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:[...new Set(ge.flatMap(e=>{var t;return(null===(t=m[e])||void 0===t?void 0:t.allCountries)||[]}))].length}),(0,dt.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Countries"})]}),(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:(()=>{const e=new Date;return e.setDate(e.getDate()-30),ge.filter(t=>{var r;const n=null===(r=m[t])||void 0===r?void 0:r.mostRecentPricingUpdate;return n&&n>e}).length})()}),(0,dt.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Recent Updates"})]}),(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-indigo-600",children:ge.filter(e=>w.has(e)).length}),(0,dt.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Expanded"})]})]}),(0,dt.jsx)("div",{className:"space-y-4",children:0===ge.length?(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center text-gray-500 dark:text-gray-400",children:0===Object.keys(m).length?"No pricing rules found":"No products match your search criteria"}):ge.map(e=>{var t;const r=m[e],n=w.has(e);return(0,dt.jsxs)("div",{className:"group relative overflow-hidden transition-all duration-300 ease-out ".concat(r.hasMissingRules?"bg-gradient-to-br from-rose-50 to-red-50 dark:from-red-950/30 dark:to-red-900/20 border-2 border-rose-200 dark:border-red-800/50 shadow-lg shadow-red-100/50 dark:shadow-red-900/20":"bg-white dark:bg-slate-900 border border-slate-200/60 dark:border-slate-700/50 shadow-sm hover:shadow-xl hover:shadow-slate-200/30 dark:hover:shadow-slate-900/30"," rounded-2xl backdrop-blur-sm"),children:[(0,dt.jsxs)("div",{className:"relative p-6 border-b cursor-pointer transition-all duration-200 ".concat(r.hasMissingRules?"border-rose-200/70 dark:border-red-800/40 hover:bg-gradient-to-br hover:from-rose-100 hover:to-red-100 dark:hover:from-red-950/40 dark:hover:to-red-900/30":"border-slate-200/60 dark:border-slate-700/50 hover:bg-slate-50/70 dark:hover:bg-slate-800/50"),onClick:()=>(e=>{const t=new Set(w);t.has(e)?t.delete(e):t.add(e),N(t)})(e),children:[r.hasMissingRules&&(0,dt.jsxs)("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-rose-500 to-red-500 text-white text-xs font-semibold px-4 py-2 flex items-center gap-2",children:[(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,dt.jsx)("span",{children:"MISSING PRICING RULES \u2014 URGENT ACTION REQUIRED"})]}),(0,dt.jsxs)("div",{className:"".concat(r.hasMissingRules?"mt-8":""," flex items-center justify-between"),children:[(0,dt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,dt.jsx)("h3",{className:"text-2xl font-bold tracking-tight ".concat(r.hasMissingRules?"text-red-900 dark:text-red-100":"text-slate-900 dark:text-slate-100"),children:e}),(0,dt.jsx)("div",{className:"flex items-center gap-2",children:(0,dt.jsx)("div",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-semibold transition-all ".concat(r.hasMissingRules?"bg-red-500 text-white shadow-md":"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-300"),children:r.hasMissingRules?(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Missing Rules"]}):(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Active Rules"]})})})]}),r.hasMissingRules&&r.missingProductInfo?(0,dt.jsx)("div",{className:"mb-4 p-4 bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm border border-red-200/50 dark:border-red-800/50 rounded-xl shadow-sm",children:(0,dt.jsx)("div",{className:"space-y-2",children:(0,dt.jsxs)("div",{className:"flex items-start gap-3",children:[(0,dt.jsx)("svg",{className:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("p",{className:"text-sm font-semibold text-red-900 dark:text-red-100 mb-1",children:"Active trials without pricing rules detected"}),(0,dt.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs text-red-800 dark:text-red-200",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium",children:r.missingProductInfo.trial_count})," trial events"]}),(0,dt.jsxs)("div",{children:["First: ",(0,dt.jsx)("span",{className:"font-medium",children:pe(r.missingProductInfo.first_trial)})]}),(0,dt.jsxs)("div",{children:["Latest: ",(0,dt.jsx)("span",{className:"font-medium",children:pe(r.missingProductInfo.last_trial)})]}),(0,dt.jsx)("div",{className:"col-span-2 mt-1 text-red-700 dark:text-red-300 font-medium",children:"\u26a0\ufe0f Revenue analysis incomplete without pricing rules"})]})]})]})})}):(0,dt.jsxs)("div",{className:"flex items-center gap-6 mb-4",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,dt.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),(0,dt.jsxs)("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:[(0,dt.jsx)("span",{className:"font-bold text-slate-900 dark:text-slate-100",children:r.totalRules})," rules"]})]}),(0,dt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,dt.jsx)("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),(0,dt.jsxs)("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:[(0,dt.jsx)("span",{className:"font-bold text-slate-900 dark:text-slate-100",children:r.allCountries.length})," countries"]})]}),(0,dt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,dt.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),(0,dt.jsxs)("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:["Last activity: ",(0,dt.jsx)("span",{className:"font-bold text-slate-900 dark:text-slate-100",children:pe(null===(t=r.mostRecentTrialActivity)||void 0===t?void 0:t.toISOString().split("T")[0])})]})]})]}),!r.hasMissingRules&&r.allCountries.length>0&&(0,dt.jsxs)("div",{className:"flex flex-wrap gap-1.5 mb-4",children:[fe([...r.allCountries],r.countries).slice(0,12).map(e=>(0,dt.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium bg-blue-50 text-blue-700 border border-blue-200/50 dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-800/50 transition-colors hover:bg-blue-100 dark:hover:bg-blue-900/50",children:e},e)),r.allCountries.length>12&&(0,dt.jsxs)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium bg-slate-100 text-slate-600 border border-slate-200/50 dark:bg-slate-800 dark:text-slate-400 dark:border-slate-700",children:["+",r.allCountries.length-12," more"]})]}),!r.hasMissingRules&&(()=>{const e=(e=>{if(!e||!e.countries||0===Object.keys(e.countries).length)return[];const t=[];Object.values(e.countries).forEach(e=>{t.push(...e.rules)});const r=t.filter((e,t,r)=>t===r.findIndex(t=>t.rule_id===e.rule_id)),n=r.sort((e,t)=>new Date(e.start_date)-new Date(t.start_date)),a=[];let i=null;return n.forEach(e=>{e.price_usd!==i&&(a.push({price:e.price_usd,date:e.start_date,ruleId:e.rule_id}),i=e.price_usd)}),a})(r);return e.length>0&&(0,dt.jsxs)("div",{className:"p-4 bg-gradient-to-br from-slate-50 to-slate-100/50 dark:from-slate-800/50 dark:to-slate-900/50 rounded-xl border border-slate-200/50 dark:border-slate-700/50 backdrop-blur-sm",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,dt.jsx)("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-emerald-500 to-green-600 flex items-center justify-center",children:(0,dt.jsx)("svg",{className:"w-3.5 h-3.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,dt.jsx)("h4",{className:"text-sm font-bold text-slate-800 dark:text-slate-200",children:"Price Evolution"})]}),(0,dt.jsx)("div",{className:"flex-1"}),(0,dt.jsxs)("span",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 bg-white/70 dark:bg-slate-800/70 px-2 py-1 rounded-md",children:[e.length," changes"]})]}),(0,dt.jsx)("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",style:{scrollbarWidth:"thin"},children:e.map((t,r)=>(0,dt.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[(0,dt.jsx)("div",{className:"text-center group",children:(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsxs)("div",{className:"text-xl font-black text-emerald-700 dark:text-emerald-400 mb-0.5 group-hover:scale-105 transition-transform",children:["$",t.price]}),(0,dt.jsx)("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 bg-white/80 dark:bg-slate-800/80 px-2 py-0.5 rounded-md shadow-sm",children:pe(t.date)})]})}),r<e.length-1&&(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("div",{className:"w-8 h-0.5 bg-gradient-to-r from-slate-300 to-slate-400 dark:from-slate-600 dark:to-slate-500 rounded-full"}),(0,dt.jsx)("svg",{className:"w-3 h-3 text-slate-400 dark:text-slate-500 -ml-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]},t.ruleId))})]})})()]}),(0,dt.jsxs)("div",{className:"flex items-center gap-3 ml-6",children:[(0,dt.jsx)("button",{onClick:t=>{t.stopPropagation(),he(e)},className:"group relative overflow-hidden px-5 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-lg ".concat(r.hasMissingRules?"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white shadow-red-200 dark:shadow-red-900/30":"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white shadow-blue-200 dark:shadow-blue-900/30"),children:(0,dt.jsxs)("div",{className:"relative z-10 flex items-center gap-2",children:[(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),r.hasMissingRules?"Create First Rule":"Add Rule"]})}),!r.hasMissingRules&&(0,dt.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{const t=await fetch("/api/pricing/rules/".concat(e,"/history")),r=await t.json();r.success?B({productId:e,data:r.data}):console.error("Failed to load rule history:",r.error)}catch(t){console.error("Error loading rule history:",t)}})(e)},className:"group relative overflow-hidden px-5 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200 transform hover:scale-105 active:scale-95 bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 text-white shadow-lg shadow-slate-200 dark:shadow-slate-900/30",children:(0,dt.jsxs)("div",{className:"relative z-10 flex items-center gap-2",children:[(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"History"]})}),(0,dt.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-xl bg-slate-100 dark:bg-slate-800 group-hover:bg-slate-200 dark:group-hover:bg-slate-700 transition-colors",children:(0,dt.jsx)("svg",{className:"w-5 h-5 text-slate-600 dark:text-slate-400 transform transition-transform duration-200 ".concat(n?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]}),n&&(0,dt.jsx)("div",{className:"p-6 bg-gradient-to-br from-slate-50/50 to-white dark:from-slate-800/50 dark:to-slate-900/50",children:(0,dt.jsx)("div",{className:"space-y-6",children:fe([...r.allCountries],r.countries).map(e=>{const t=r.countries[e];return(0,dt.jsxs)("div",{className:"group relative overflow-hidden bg-white dark:bg-slate-800/90 border border-slate-200/60 dark:border-slate-700/50 rounded-2xl shadow-sm hover:shadow-lg transition-all duration-300 backdrop-blur-sm",children:[(0,dt.jsx)("div",{className:"relative p-6 bg-gradient-to-r from-slate-50 via-white to-slate-50 dark:from-slate-800/80 dark:via-slate-800/60 dark:to-slate-800/80 border-b border-slate-200/60 dark:border-slate-700/50",children:(0,dt.jsx)("div",{className:"flex items-center justify-between",children:(0,dt.jsxs)("div",{className:"flex items-center gap-6",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,dt.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-blue-200/50 dark:shadow-blue-900/30",children:(0,dt.jsx)("span",{className:"text-white font-bold text-lg",children:e.slice(0,2).toUpperCase()})}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:e}),(0,dt.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Pricing timeline"})]})]}),(0,dt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2 bg-white/70 dark:bg-slate-800/70 backdrop-blur-sm rounded-xl border border-slate-200/50 dark:border-slate-700/50 shadow-sm",children:[(0,dt.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),(0,dt.jsxs)("span",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:[t.rules.length," rules"]})]}),(0,dt.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2 bg-gradient-to-r from-emerald-50 to-green-50 dark:from-emerald-900/30 dark:to-green-900/30 backdrop-blur-sm rounded-xl border border-emerald-200/50 dark:border-emerald-800/50 shadow-sm",children:[(0,dt.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),(0,dt.jsx)("span",{className:"text-lg font-black text-emerald-700 dark:text-emerald-400",children:me(t)})]})]})]})})}),(0,dt.jsxs)("div",{className:"p-6",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,dt.jsx)("div",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-slate-600 to-slate-700 flex items-center justify-center shadow-md",children:(0,dt.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,dt.jsx)("h5",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Chronological Pricing History"}),(0,dt.jsx)("div",{className:"flex-1 h-px bg-gradient-to-r from-slate-200 to-transparent dark:from-slate-700"})]}),(0,dt.jsx)("div",{className:"relative",children:(0,dt.jsx)("div",{className:"flex gap-6 overflow-x-auto pb-4 scrollbar-hide",style:{scrollbarWidth:"none"},children:t.rules.map((e,r)=>{const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=new Date,n=new Date(e.start_date);let a=e.end_date?new Date(e.end_date):null;if(!a&&t&&Array.isArray(t)){const r=t.filter(t=>t.rule_id!==e.rule_id).sort((e,t)=>new Date(e.start_date)-new Date(t.start_date)),i=r.find(e=>new Date(e.start_date)>n);if(i){const e=new Date(i.start_date);a=new Date(e.getTime()-864e5)}}return a&&r>a?"Historical":r>=n&&(!a||r<=a)?"Active":"Future"}(e,t.rules),a="Active"===n,i="Future"===n,s="Historical"===n;return(0,dt.jsxs)("div",{className:"relative flex-shrink-0 w-80 group/card transition-all duration-300 hover:scale-105",children:[r<t.rules.length-1&&(0,dt.jsx)("div",{className:"absolute top-1/2 -right-3 z-10 w-6 h-px bg-gradient-to-r from-slate-300 via-slate-400 to-slate-300 dark:from-slate-600 dark:via-slate-500 dark:to-slate-600"}),(0,dt.jsxs)("div",{className:"relative overflow-hidden rounded-2xl shadow-lg transition-all duration-300 group-hover/card:shadow-xl ".concat(a?"bg-gradient-to-br from-emerald-50 via-green-50 to-emerald-100 dark:from-emerald-950/50 dark:via-emerald-900/30 dark:to-green-900/40 border-2 border-emerald-300/60 dark:border-emerald-700/50 shadow-emerald-200/50 dark:shadow-emerald-900/30":i?"bg-gradient-to-br from-blue-50 via-sky-50 to-blue-100 dark:from-blue-950/50 dark:via-blue-900/30 dark:to-sky-900/40 border-2 border-blue-300/60 dark:border-blue-700/50 shadow-blue-200/50 dark:shadow-blue-900/30":"bg-gradient-to-br from-slate-50 via-gray-50 to-slate-100 dark:from-slate-800/50 dark:via-slate-900/30 dark:to-slate-800/40 border-2 border-slate-300/60 dark:border-slate-700/50 shadow-slate-200/50 dark:shadow-slate-900/30"),children:[(0,dt.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-current to-transparent opacity-60"}),(0,dt.jsxs)("div",{className:"p-6",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,dt.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-xl text-xs font-bold shadow-sm ".concat(a?"bg-emerald-500 text-white":i?"bg-blue-500 text-white":"bg-slate-500 text-white"),children:[a&&(0,dt.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),i&&(0,dt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),s&&(0,dt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),n.toUpperCase()]}),(0,dt.jsx)("div",{className:"text-xs font-mono text-slate-500 dark:text-slate-400 bg-white/80 dark:bg-slate-800/80 px-2 py-1 rounded-lg",children:e.rule_id.slice(-8)})]}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsxs)("div",{className:"text-4xl font-black text-slate-900 dark:text-slate-100 mb-2 tracking-tight",children:["$",e.price_usd]}),(0,dt.jsxs)("div",{className:"text-sm font-semibold ".concat(a?"text-emerald-700 dark:text-emerald-300":i?"text-blue-700 dark:text-blue-300":"text-slate-600 dark:text-slate-400"),children:[pe(e.start_date),(0,dt.jsx)("span",{className:"mx-2 opacity-60",children:"\u2192"}),pe(e.end_date)||(0,dt.jsxs)("span",{className:"inline-flex items-center gap-1 ".concat(a?"text-emerald-600":"text-slate-500"),children:[a&&(0,dt.jsx)("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"}),"Ongoing"]})]})]}),(0,dt.jsx)("button",{onClick:t=>{t.stopPropagation(),le(e.rule_id)},className:"w-full group/btn relative overflow-hidden px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg ".concat(a?"bg-emerald-600 hover:bg-emerald-700 text-white shadow-emerald-200 dark:shadow-emerald-900/50":i?"bg-blue-600 hover:bg-blue-700 text-white shadow-blue-200 dark:shadow-blue-900/50":"bg-slate-600 hover:bg-slate-700 text-white shadow-slate-200 dark:shadow-slate-900/50"),children:(0,dt.jsxs)("div",{className:"relative z-10 flex items-center justify-center gap-2",children:[(0,dt.jsx)("svg",{className:"w-4 h-4 transition-transform group-hover/btn:scale-110",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"View Data Source"]})})]})]})]},e.rule_id)})})})]})]},e)})})})]},e)})}),(0,dt.jsxs)("div",{className:"mt-6 text-sm text-gray-500 dark:text-gray-400 text-center",children:["Pricing rules are organized by product and country for easy market management.",(0,dt.jsx)("br",{}),(0,dt.jsxs)("span",{className:"inline-flex items-center gap-4 mt-2",children:[(0,dt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,dt.jsx)("div",{className:"w-3 h-3 bg-green-100 border border-green-300 rounded"}),"Active"]}),(0,dt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,dt.jsx)("div",{className:"w-3 h-3 bg-blue-100 border border-blue-300 rounded"}),"Future"]}),(0,dt.jsxs)("span",{className:"flex items-center gap-1",children:[(0,dt.jsx)("div",{className:"w-3 h-3 bg-gray-100 border border-gray-300 rounded"}),"Historical"]})]})]}),C&&(0,dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[(0,dt.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"\u2795 Create New Pricing Rule"}),(0,dt.jsx)("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,dt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Create a new pricing rule for a product and countries"})]}),(0,dt.jsx)("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:(0,dt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await fetch("/api/pricing/rules",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:K.product_id,price_usd:parseFloat(K.price_usd),start_date:K.start_date,countries:K.countries})}),t=await e.json();t.success?(E(!1),Y({product_id:"",price_usd:"",start_date:"",countries:[]}),se()):_(t.error||"Failed to create rule")}catch(t){_("Network error creating rule"),console.error("Error creating rule:",t)}},className:"space-y-6",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Product ID *"}),(0,dt.jsxs)("select",{value:K.product_id,onChange:e=>{const t=e.target.value;Y(Re(Re({},K),{},{product_id:t,start_date:ue(t)})),t?de(t):J(null)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,dt.jsx)("option",{value:"",children:"Select a product..."}),D.map(e=>(0,dt.jsx)("option",{value:e,children:e},e))]}),K.product_id&&(null===(e=m[K.product_id])||void 0===e?void 0:e.hasMissingRules)&&(0,dt.jsxs)("div",{className:"mt-2 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 text-amber-800 dark:text-amber-200 text-sm",children:[(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,dt.jsx)("span",{className:"font-medium",children:"First pricing rule for this product!"})]}),(null===(t=m[K.product_id])||void 0===t?void 0:t.missingProductInfo)&&(0,dt.jsxs)("div",{className:"mt-1 text-xs text-amber-700 dark:text-amber-300",children:["This product has ",m[K.product_id].missingProductInfo.trial_count," trial events but no pricing rules yet."]})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Price (USD) *"}),(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,dt.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"$"})}),(0,dt.jsx)("input",{type:"number",step:"0.01",min:"0",value:K.price_usd,onChange:e=>Y(Re(Re({},K),{},{price_usd:e.target.value})),className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"29.99",required:!0}),Q&&(0,dt.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,dt.jsxs)("svg",{className:"animate-spin h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",children:[(0,dt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,dt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]}),X&&(0,dt.jsxs)("div",{className:"mt-2 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-2 text-green-800 dark:text-green-200 text-sm",children:[(0,dt.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,dt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,dt.jsxs)("span",{className:"font-medium",children:["Suggested: $",X.suggested_price," from most recent conversion"]})]}),(0,dt.jsx)("button",{type:"button",onClick:()=>Y(Re(Re({},K),{},{price_usd:X.suggested_price.toString()})),className:"text-xs bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded",children:"Use This"})]}),(0,dt.jsx)("div",{className:"mt-1 text-xs text-green-700 dark:text-green-300",children:X.note})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Start Date *"}),(0,dt.jsx)("input",{type:"date",value:K.start_date,onChange:e=>Y(Re(Re({},K),{},{start_date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),K.product_id&&(0,dt.jsx)("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:0===l.filter(e=>e.product_id===K.product_id).length?"\ud83d\udca1 First rule for this product - defaulted to Jan 1, 2024":"\ud83d\udcc5 Additional rule - choose when this pricing takes effect"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Countries *"}),(0,dt.jsxs)("button",{type:"button",onClick:()=>{ee?(Y(Re(Re({},K),{},{countries:[]})),te(!1)):(Y(Re(Re({},K),{},{countries:[...I]})),te(!0))},className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:[ee?"Deselect All":"Select All"," (",I.length,")"]})]}),(0,dt.jsx)("div",{className:"max-h-40 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-md p-3 bg-white dark:bg-gray-700 space-y-2",children:I.map(e=>(0,dt.jsxs)("label",{className:"flex items-center space-x-3 text-sm hover:bg-gray-50 dark:hover:bg-gray-600 p-1 rounded cursor-pointer",children:[(0,dt.jsx)("input",{type:"checkbox",checked:K.countries.includes(e),onChange:t=>{if(t.target.checked){const t=[...K.countries,e];Y(Re(Re({},K),{},{countries:t})),te(t.length===I.length)}else{const t=K.countries.filter(t=>t!==e);Y(Re(Re({},K),{},{countries:t})),te(!1)}},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-700 dark:focus:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500"}),(0,dt.jsx)("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:e})]},e))}),(0,dt.jsxs)("div",{className:"mt-2 flex items-center justify-between text-xs",children:[(0,dt.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:[K.countries.length," of ",I.length," countries selected"]}),K.countries.length>0&&(0,dt.jsx)("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"\u2713 Ready to create rule"})]})]}),(0,dt.jsxs)("div",{className:"flex gap-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,dt.jsx)("button",{type:"submit",disabled:!K.product_id||!K.price_usd||!K.start_date||0===K.countries.length,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-medium transition-colors shadow-lg hover:shadow-xl",children:"Create Pricing Rule"}),(0,dt.jsx)("button",{type:"button",onClick:()=>E(!1),className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Cancel"})]})]})})]})}),W&&P&&(0,dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[(0,dt.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"\u270f\ufe0f Edit Pricing Rule"}),(0,dt.jsx)("button",{onClick:()=>{$(!1),A(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,dt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,dt.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Modify pricing rule for ",q.product_id," \u2022 Rule ID: ",q.rule_id]})]}),(0,dt.jsx)("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:(0,dt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await fetch("/api/pricing/rules/".concat(q.rule_id,"?simple_edit=true"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:q.product_id,price_usd:parseFloat(q.price_usd),start_date:q.start_date,countries:q.countries})}),t=await e.json();t.success?($(!1),A(null),G({rule_id:"",product_id:"",price_usd:"",start_date:"",countries:[]}),se(),_(null)):_(t.error||"Failed to update rule")}catch(t){_("Network error updating rule"),console.error("Error updating rule:",t)}},className:"space-y-6",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rule ID (Read-only)"}),(0,dt.jsx)("input",{type:"text",value:q.rule_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-100 dark:bg-gray-600 text-gray-500 dark:text-gray-400"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Product ID (Read-only)"}),(0,dt.jsx)("input",{type:"text",value:q.product_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-100 dark:bg-gray-600 text-gray-500 dark:text-gray-400"}),(0,dt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Product ID cannot be changed to maintain data integrity"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Price (USD) *"}),(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,dt.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"$"})}),(0,dt.jsx)("input",{type:"number",step:"0.01",min:"0",value:q.price_usd,onChange:e=>G(Re(Re({},q),{},{price_usd:e.target.value})),className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),P&&q.price_usd!==P.price_usd.toString()&&(0,dt.jsxs)("div",{className:"mt-2 text-sm text-amber-600 dark:text-amber-400",children:["\u26a0\ufe0f Changing from $",P.price_usd," to $",q.price_usd]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Start Date *"}),(0,dt.jsx)("input",{type:"date",value:q.start_date,onChange:e=>G(Re(Re({},q),{},{start_date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),P&&q.start_date!==P.start_date&&(0,dt.jsxs)("div",{className:"mt-2 text-sm text-amber-600 dark:text-amber-400",children:["\u26a0\ufe0f Changing from ",pe(P.start_date)," to ",pe(q.start_date)]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Countries *"}),(0,dt.jsxs)("button",{type:"button",onClick:()=>{q.countries.length===I.length?G(Re(Re({},q),{},{countries:[]})):G(Re(Re({},q),{},{countries:[...I]}))},className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:[q.countries.length===I.length?"Deselect All":"Select All"," (",I.length,")"]})]}),(0,dt.jsx)("div",{className:"max-h-40 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-md p-3 bg-white dark:bg-gray-700 space-y-2",children:I.map(e=>(0,dt.jsxs)("label",{className:"flex items-center space-x-3 text-sm hover:bg-gray-50 dark:hover:bg-gray-600 p-1 rounded cursor-pointer",children:[(0,dt.jsx)("input",{type:"checkbox",checked:q.countries.includes(e),onChange:t=>{t.target.checked?G(Re(Re({},q),{},{countries:[...q.countries,e]})):G(Re(Re({},q),{},{countries:q.countries.filter(t=>t!==e)}))},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),(0,dt.jsx)("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:e})]},e))}),(0,dt.jsxs)("div",{className:"mt-2 flex items-center justify-between text-xs",children:[(0,dt.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:[q.countries.length," of ",I.length," countries selected"]}),P&&JSON.stringify(q.countries.sort())!==JSON.stringify(P.countries.sort())&&(0,dt.jsx)("span",{className:"text-amber-600 dark:text-amber-400 font-medium",children:"\u26a0\ufe0f Countries modified"})]})]}),P&&(q.price_usd!==P.price_usd.toString()||q.start_date!==P.start_date||JSON.stringify(q.countries.sort())!==JSON.stringify(P.countries.sort()))&&(0,dt.jsxs)("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[(0,dt.jsx)("h4",{className:"font-medium text-amber-800 dark:text-amber-200 mb-2",children:"\ud83d\udcdd Changes Summary"}),(0,dt.jsxs)("div",{className:"text-sm text-amber-700 dark:text-amber-300 space-y-1",children:[q.price_usd!==P.price_usd.toString()&&(0,dt.jsxs)("div",{children:["\u2022 Price: $",P.price_usd," \u2192 $",q.price_usd]}),q.start_date!==P.start_date&&(0,dt.jsxs)("div",{children:["\u2022 Start Date: ",pe(P.start_date)," \u2192 ",pe(q.start_date)]}),JSON.stringify(q.countries.sort())!==JSON.stringify(P.countries.sort())&&(0,dt.jsxs)("div",{children:["\u2022 Countries: ",P.countries.length," \u2192 ",q.countries.length," selected"]})]})]}),(0,dt.jsxs)("div",{className:"flex gap-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,dt.jsx)("button",{type:"submit",disabled:!q.price_usd||!q.start_date||0===q.countries.length,className:"flex-1 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-medium transition-colors shadow-lg hover:shadow-xl",children:"\ud83d\udcbe Save Changes"}),(0,dt.jsx)("button",{type:"button",onClick:()=>{$(!1),A(null)},className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Cancel"})]})]})})]})}),F&&(0,dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl max-h-[80vh] overflow-hidden",children:[(0,dt.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:["\ud83d\udcca Data Provenance: Rule ",F.ruleId]}),(0,dt.jsx)("button",{onClick:()=>z(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,dt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"This shows the underlying data that led to the creation of this pricing rule"})]}),(0,dt.jsx)("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:F.data?(0,dt.jsxs)("div",{className:"space-y-6",children:[(0,dt.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[(0,dt.jsx)("h4",{className:"font-semibold text-blue-900 dark:text-blue-200 mb-2",children:"Rule Summary"}),(0,dt.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium",children:"Product:"})," ",F.data.product_id]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium",children:"Countries:"})," ",null===(r=F.data.countries)||void 0===r?void 0:r.join(", ")]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium",children:"USD Price:"})," $",F.data.price_usd]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium",children:"Date Range:"})," ",F.data.start_date," \u2192 ",F.data.end_date||"ongoing"]})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsxs)("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-3",children:["\ud83d\udd0d Underlying Events (",F.data.events_analyzed||0," events)"]}),(0,dt.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[(0,dt.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"These are the actual pricing events from your database that led to this rule:"}),(0,dt.jsx)("div",{className:"overflow-x-auto",children:(0,dt.jsxs)("table",{className:"w-full text-xs",children:[(0,dt.jsx)("thead",{children:(0,dt.jsxs)("tr",{className:"bg-gray-200 dark:bg-gray-700",children:[(0,dt.jsx)("th",{className:"p-2 text-left",children:"Trial Start"}),(0,dt.jsx)("th",{className:"p-2 text-left",children:"Conversion"}),(0,dt.jsx)("th",{className:"p-2 text-left",children:"Actual Price"}),(0,dt.jsx)("th",{className:"p-2 text-left",children:"Country"}),(0,dt.jsx)("th",{className:"p-2 text-left",children:"User ID"})]})}),(0,dt.jsx)("tbody",{children:(F.data.sample_events||[]).map((e,t)=>{var r;return(0,dt.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-600",children:[(0,dt.jsx)("td",{className:"p-2",children:e.trial_start_date}),(0,dt.jsx)("td",{className:"p-2",children:e.conversion_date}),(0,dt.jsxs)("td",{className:"p-2 font-mono",children:["$",e.actual_price]}),(0,dt.jsx)("td",{className:"p-2",children:e.country}),(0,dt.jsxs)("td",{className:"p-2 font-mono text-xs",children:[null===(r=e.user_id)||void 0===r?void 0:r.substring(0,8),"..."]})]},t)})})]})})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"\ud83d\udcb0 Price Analysis"}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,dt.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[(0,dt.jsx)("h5",{className:"font-medium text-green-900 dark:text-green-200 mb-2",children:"Actual Prices Charged"}),(0,dt.jsx)("div",{className:"text-sm space-y-1",children:(F.data.actual_prices||[]).map((e,t)=>{var r;return(0,dt.jsxs)("div",{className:"flex justify-between",children:[(0,dt.jsxs)("span",{className:"font-mono",children:["$",e]}),(0,dt.jsxs)("span",{className:"text-xs text-gray-500",children:[(null===(r=F.data.price_counts)||void 0===r?void 0:r[e])||0," events"]})]},t)})})]}),(0,dt.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4",children:[(0,dt.jsx)("h5",{className:"font-medium text-yellow-900 dark:text-yellow-200 mb-2",children:"USD Clustering"}),(0,dt.jsxs)("div",{className:"text-sm space-y-2",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium",children:"Target USD:"})," $",F.data.price_usd]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium",children:"Price Range:"})," $",(null===(n=F.data.price_range)||void 0===n?void 0:n.min)||0," - $",(null===(i=F.data.price_range)||void 0===i?void 0:i.max)||0]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium",children:"Variance:"})," ",F.data.price_variance||0,"%"]}),(0,dt.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Prices were clustered within 15% tolerance to account for FX fluctuations and rounding"})]})]})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"\ud83d\udd2c Detection Logic"}),(0,dt.jsx)("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4",children:(0,dt.jsxs)("div",{className:"text-sm space-y-2",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium",children:"Method:"})," ",F.data.detection_method||"USD price clustering"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium",children:"Confidence:"})," ",F.data.confidence_score||"High"]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"font-medium",children:"Notes:"})," ",F.data.notes||"Auto-generated from conversion events"]})]})})]})]}):(0,dt.jsx)("div",{className:"text-center py-8",children:(0,dt.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading data provenance information..."})})}),(0,dt.jsx)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:(0,dt.jsx)("div",{className:"flex justify-end",children:(0,dt.jsx)("button",{onClick:()=>z(null),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-md",children:"Close"})})})]})}),U&&(0,dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full mx-4 max-h-[80vh] overflow-hidden",children:[(0,dt.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:["\ud83d\udcdc Rule History: ",U.productId]}),(0,dt.jsx)("button",{onClick:()=>B(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,dt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Complete chronological history of pricing rule changes (newest first)"})]}),(0,dt.jsx)("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:null!==(s=U.data)&&void 0!==s&&s.history&&U.data.history.length>0?(0,dt.jsxs)("div",{className:"space-y-6",children:[(0,dt.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,dt.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:U.data.history.filter(e=>"created"===e.action).length}),(0,dt.jsx)("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Rules Created"})]}),(0,dt.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:U.data.history.filter(e=>"updated"===e.action).length}),(0,dt.jsx)("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Rules Updated"})]}),(0,dt.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 text-center",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:U.data.history.filter(e=>"deleted"===e.action).length}),(0,dt.jsx)("div",{className:"text-sm text-red-800 dark:text-red-300",children:"Rules Deleted"})]})]}),(0,dt.jsxs)("div",{className:"space-y-4",children:[(0,dt.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"\ud83d\udcc5 Chronological History (Newest First)"}),U.data.history.map((e,t)=>{var r,n,a;const i=l.find(t=>t.rule_id===e.rule_data.rule_id),s="deleted"!==e.action&&i;return(0,dt.jsxs)("div",{className:"relative p-6 rounded-xl border-l-4 shadow-lg ".concat("created"===e.action?"bg-green-50 border-green-400 dark:bg-green-900/20":"updated"===e.action?"bg-blue-50 border-blue-400 dark:bg-blue-900/20":"bg-red-50 border-red-400 dark:bg-red-900/20"),children:[t<U.data.history.length-1&&(0,dt.jsx)("div",{className:"absolute left-0 bottom-0 w-1 h-6 bg-gray-300 transform translate-y-full"}),(0,dt.jsxs)("div",{className:"flex items-start justify-between",children:[(0,dt.jsxs)("div",{className:"flex-1",children:[(0,dt.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,dt.jsx)("span",{className:"px-3 py-1 text-sm font-bold rounded-full ".concat("created"===e.action?"bg-green-100 text-green-800":"updated"===e.action?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:"created"===e.action?"\u2705 CREATED":"updated"===e.action?"\ud83d\udcdd UPDATED":"\ud83d\uddd1\ufe0f DELETED"}),(0,dt.jsxs)("div",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:["$",e.rule_data.price_usd]}),(0,dt.jsxs)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-full",children:[null===(r=e.rule_data.countries)||void 0===r?void 0:r.length," countries"]}),(0,dt.jsx)("div",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded font-mono",children:e.rule_data.rule_id})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Date Range"}),(0,dt.jsxs)("div",{className:"text-base text-gray-900 dark:text-gray-100",children:[pe(e.rule_data.start_date)," \u2192 ",pe(e.rule_data.end_date)||"Ongoing"]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Countries Applied"}),(0,dt.jsxs)("div",{className:"text-sm text-gray-900 dark:text-gray-100",children:[null===(n=e.rule_data.countries)||void 0===n?void 0:n.slice(0,3).join(", "),(null===(a=e.rule_data.countries)||void 0===a?void 0:a.length)>3&&" +".concat(e.rule_data.countries.length-3," more")]})]})]}),e.user_notes&&(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-gray-200 dark:border-gray-600 mb-4",children:[(0,dt.jsx)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),(0,dt.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.user_notes})]}),(0,dt.jsxs)("div",{className:"flex gap-3",children:[s&&(0,dt.jsx)("button",{onClick:()=>{var e;B(null),G({rule_id:(e=i).rule_id,product_id:e.product_id,price_usd:e.price_usd.toString(),start_date:e.start_date,countries:[...e.countries]}),A(e),$(!0)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors shadow-sm",children:"\u270f\ufe0f Edit This Rule"}),(0,dt.jsx)("button",{onClick:()=>{B(null),le(e.rule_data.rule_id)},className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg transition-colors shadow-sm",children:"\ud83d\udcca View Data Source"}),s&&(0,dt.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to delete rule ".concat(e.rule_data.rule_id,"?"))&&((async e=>{if(window.confirm("Are you sure you want to delete this pricing rule?"))try{const t=await fetch("/api/pricing/rules/".concat(e,"?hard_delete=true"),{method:"DELETE"}),r=await t.json();r.success?(c(l.filter(t=>t.rule_id!==e)),se()):_(r.error||"Failed to delete rule")}catch(t){_("Network error deleting rule"),console.error("Error deleting rule:",t)}})(e.rule_data.rule_id),B(null))},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors shadow-sm",children:"\ud83d\uddd1\ufe0f Delete Rule"})]})]}),(0,dt.jsxs)("div",{className:"text-right text-sm text-gray-500 dark:text-gray-400 ml-6",children:[(0,dt.jsx)("div",{className:"font-medium",children:new Date(e.timestamp).toLocaleDateString()}),(0,dt.jsx)("div",{children:new Date(e.timestamp).toLocaleTimeString()}),!s&&"deleted"!==e.action&&(0,dt.jsx)("div",{className:"text-xs text-red-500 mt-1",children:"Rule no longer exists"})]})]})]},e.entry_id)})]})]}):(0,dt.jsxs)("div",{className:"text-center py-12",children:[(0,dt.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcdc"}),(0,dt.jsx)("div",{className:"text-xl font-medium text-gray-600 dark:text-gray-400 mb-2",children:"No Rule History Yet"}),(0,dt.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Create your first pricing rule to start tracking changes"})]})}),(0,dt.jsx)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:(0,dt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,dt.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(null===(o=U.data)||void 0===o?void 0:o.total_count)||0," total changes tracked"]}),(0,dt.jsx)("button",{onClick:()=>B(null),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium",children:"Close History"})]})})]})})]})},hF=()=>(0,dt.jsx)("div",{className:"p-6 max-w-7xl mx-auto",children:(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,dt.jsxs)("div",{className:"mb-8",children:[(0,dt.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Pipeline Debug Tools"}),(0,dt.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Debug and analyze different stages of the processing pipeline."})]}),(0,dt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{id:"conversion-rates",title:"Conversion Rates Debug",description:"Debug and analyze conversion rate calculations from the pipeline",icon:"\ud83d\udd0d",path:"/debug/conversion-rates",status:"ready"},{id:"price-bucket",title:"Price Bucket Debug",description:"Debug and analyze price bucket assignments from the pipeline",icon:"\ud83d\udcb0",path:"/debug/price-bucket",status:"ready"},{id:"value-estimation",title:"Value Estimation Debug",description:"Debug and analyze value estimation calculations from the pipeline",icon:"\ud83d\udcca",path:"/debug/value-estimation",status:"ready"}].map(e=>(0,dt.jsxs)(Ce,{to:e.path,className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200 group",children:[(0,dt.jsxs)("div",{className:"flex items-center mb-4",children:[(0,dt.jsx)("div",{className:"text-3xl mr-3",children:e.icon}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400",children:e.title}),(0,dt.jsx)("span",{className:"inline-block px-2 py-1 text-xs rounded-full ".concat("ready"===e.status?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"),children:"ready"===e.status?"Ready":"In Development"})]})]}),(0,dt.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:e.description}),(0,dt.jsxs)("div",{className:"mt-4 flex items-center text-blue-600 dark:text-blue-400 text-sm",children:[(0,dt.jsx)("span",{children:"Open Debug Tool"}),(0,dt.jsx)("svg",{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},e.id))}),(0,dt.jsxs)("div",{className:"mt-8 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,dt.jsx)("h3",{className:"text-blue-800 dark:text-blue-200 font-medium mb-2",children:"\ud83d\udcdd Debug Tools Overview"}),(0,dt.jsxs)("ul",{className:"text-blue-600 dark:text-blue-300 text-sm space-y-1",children:[(0,dt.jsxs)("li",{children:["\u2022 ",(0,dt.jsx)("strong",{children:"Conversion Rates:"})," Analyze how conversion rates are calculated and assigned to user cohorts"]}),(0,dt.jsxs)("li",{children:["\u2022 ",(0,dt.jsx)("strong",{children:"Price Bucket:"})," Debug price bucket assignments and validate data integrity"]}),(0,dt.jsxs)("li",{children:["\u2022 ",(0,dt.jsx)("strong",{children:"Value Estimation:"})," Examine value estimation calculations and timeline data"]})]})]})]})}),pF=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const r=await fetch("".concat("/api/debug").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("HTTP error! status: ".concat(r.status));return await r.json()}catch(r){throw console.error("API call failed:",r),r}},mF={loadOverview:()=>pF("/conversion-rates/overview"),loadCohortTree:()=>pF("/conversion-rates/cohort-tree"),validateData:()=>pF("/conversion-rates/validate"),searchCohorts:e=>pF("/conversion-rates/search",e)},fF={loadOverview:()=>pF("/price-bucket/overview"),searchData:e=>pF("/price-bucket/search",e)},gF={loadOverview:()=>pF("/value-estimation/overview"),loadExamples:()=>pF("/value-estimation/examples"),refreshStatus:(e,t)=>pF("/value-estimation/examples/refresh",{status_type:e,status_value:t}),validateCalculations:()=>pF("/value-estimation/validate")},xF=e=>{let{title:t,value:r,icon:n,color:a="blue",subtitle:i=null}=e;return(0,dt.jsx)("div",{className:"border rounded-lg p-4 ".concat({blue:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200",green:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200",yellow:"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 text-yellow-800 dark:text-yellow-200",red:"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200",purple:"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800 text-purple-800 dark:text-purple-200",orange:"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800 text-orange-800 dark:text-orange-200"}[a]),children:(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("p",{className:"text-sm font-medium opacity-75",children:t}),(0,dt.jsx)("p",{className:"text-2xl font-bold",children:(null===r||void 0===r?void 0:r.toLocaleString())||0}),i&&(0,dt.jsx)("p",{className:"text-xs opacity-60 mt-1",children:i})]}),(0,dt.jsx)("div",{className:"text-3xl opacity-75",children:n})]})})},bF=e=>{let{filters:t,onFilterChange:r,onApplyFilters:n,onReset:a,loading:i}=e;return(0,dt.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-4",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Filter Controls"}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Product ID"}),(0,dt.jsx)("input",{type:"text",value:t.product_id,onChange:e=>r("product_id",e.target.value),placeholder:"Filter by product ID...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Min Users"}),(0,dt.jsx)("input",{type:"number",value:t.min_users,onChange:e=>r("min_users",e.target.value),placeholder:"Min user count...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Max Users"}),(0,dt.jsx)("input",{type:"number",value:t.max_users,onChange:e=>r("max_users",e.target.value),placeholder:"Max user count...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("input",{type:"checkbox",id:"show_errors_only",checked:t.show_errors_only,onChange:e=>r("show_errors_only",e.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),(0,dt.jsx)("label",{htmlFor:"show_errors_only",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Show validation errors only"})]}),(0,dt.jsxs)("div",{className:"flex items-center",children:[(0,dt.jsx)("input",{type:"checkbox",id:"show_viable_only",checked:t.show_viable_only,onChange:e=>r("show_viable_only",e.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),(0,dt.jsx)("label",{htmlFor:"show_viable_only",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Show viable segments only (\u226512 users)"})]})]}),(0,dt.jsxs)("div",{className:"flex gap-2",children:[(0,dt.jsx)("button",{onClick:n,disabled:i,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-4 py-2 rounded-md font-medium",children:i?"Applying...":"Apply Filters"}),(0,dt.jsx)("button",{onClick:a,disabled:i,className:"bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-md font-medium",children:"Reset"})]})]})},yF=e=>{let{hierarchyTree:t=[],expandedNodes:r,onToggleNode:n}=e;const a=e=>null===e||void 0===e?"N/A":(100*e).toFixed(2)+"%";return t&&0!==t.length?(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-x-auto",children:[(0,dt.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 px-2 py-3 border-b border-gray-200 dark:border-gray-600",children:(0,dt.jsxs)("div",{className:"flex items-center font-semibold text-xs text-gray-700 dark:text-gray-300",children:[(0,dt.jsx)("div",{style:{minWidth:"400px"},children:"Property Hierarchy"}),(0,dt.jsx)("div",{className:"w-20 text-center",children:"Level"}),(0,dt.jsx)("div",{className:"w-24 text-center",children:"Status"}),(0,dt.jsx)("div",{className:"w-24 text-center",children:"Total Users"}),(0,dt.jsx)("div",{className:"w-24 text-center",children:"Cohort Users"}),(0,dt.jsx)("div",{className:"w-20 text-center",children:"Trial Conv"}),(0,dt.jsx)("div",{className:"w-20 text-center",children:"Trial Ref"}),(0,dt.jsx)("div",{className:"w-20 text-center",children:"Purch Ref"}),(0,dt.jsx)("div",{className:"w-16 text-center",children:"Viable"}),(0,dt.jsx)("div",{className:"w-12 text-center",children:"Error"})]})}),(0,dt.jsx)("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:t.map((e,t)=>((e,t)=>{var i;const s="".concat(e.level,"_").concat(e.value,"_").concat(t),o=r.has(s);let l="text-gray-600 dark:text-gray-400",c="default";return e.rates&&e.is_leaf&&(e.rates_consistent?(e.cohort_user_count||0)<12?(l="text-yellow-600 dark:text-yellow-400",c="small cohort"):e.uses_default?(l="text-orange-600 dark:text-orange-400",c="default"):e.is_viable?(l="text-green-600 dark:text-green-400",c=a(e.rates.trial_conversion_rate)):(l="text-yellow-600 dark:text-yellow-400",c="small cohort"):(l="text-red-600 dark:text-red-400 font-bold",c="ERROR")),(0,dt.jsxs)("div",{className:"font-mono text-sm",children:[(0,dt.jsxs)("div",{className:"flex items-center py-1 px-2 hover:bg-gray-50 dark:hover:bg-gray-700/30 cursor-pointer ".concat(e.rates_consistent?"":"bg-red-50 dark:bg-red-900/20"),onClick:()=>n(s),children:[(0,dt.jsxs)("div",{className:"flex items-center min-w-0",style:{minWidth:"400px"},children:[(0,dt.jsx)("span",{className:"text-gray-400 dark:text-gray-500",children:(d=e.level,["","\u251c\u2500\u2500 ","\u2502   \u251c\u2500\u2500 ","\u2502   \u2502   \u251c\u2500\u2500 ","\u2502   \u2502   \u2502   \u251c\u2500\u2500 ","\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 "][d]||"\u2502   ".repeat(d)+"\u251c\u2500\u2500 ")}),(0,dt.jsx)("span",{className:"text-gray-900 dark:text-white font-medium truncate",children:e.value}),e.has_children&&(0,dt.jsx)("span",{className:"ml-2 text-gray-400",children:o?"\u25bc":"\u25b6"})]}),(0,dt.jsxs)("div",{className:"w-20 text-center text-gray-500 dark:text-gray-400 text-xs",children:["level ",e.level]}),(0,dt.jsx)("div",{className:"w-24 text-center ".concat(l," font-medium text-xs"),children:c}),(0,dt.jsx)("div",{className:"w-24 text-center text-gray-700 dark:text-gray-300 font-medium",children:e.user_count.toLocaleString()}),(0,dt.jsx)("div",{className:"w-24 text-center font-medium ".concat(e.cohort_user_count>=12?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:(null===(i=e.cohort_user_count)||void 0===i?void 0:i.toLocaleString())||0}),(0,dt.jsx)("div",{className:"w-20 text-center text-blue-600 dark:text-blue-400 text-xs",children:e.rates&&e.is_leaf?a(e.rates.trial_conversion_rate):"-"}),(0,dt.jsx)("div",{className:"w-20 text-center text-green-600 dark:text-green-400 text-xs",children:e.rates&&e.is_leaf?a(e.rates.trial_converted_to_refund_rate):"-"}),(0,dt.jsx)("div",{className:"w-20 text-center text-purple-600 dark:text-purple-400 text-xs",children:e.rates&&e.is_leaf?a(e.rates.initial_purchase_to_refund_rate):"-"}),(0,dt.jsx)("div",{className:"w-16 text-center",children:e.is_leaf&&(0,dt.jsx)("span",{className:"text-xs font-bold ".concat((e.cohort_user_count||0)>=12?e.is_viable?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400":"text-gray-400 dark:text-gray-500"),children:(e.cohort_user_count||0)>=12?e.is_viable?"\u2713":"\u2717":"-"})}),(0,dt.jsx)("div",{className:"w-12 text-center",children:!e.rates_consistent&&(0,dt.jsx)("span",{className:"text-red-600 dark:text-red-400 text-xs font-bold",children:"\u26a0\ufe0f"})})]}),o&&e.is_leaf&&e.users&&e.users.length>0&&(0,dt.jsxs)("div",{className:"ml-8 mt-1 mb-2 bg-gray-50 dark:bg-gray-800 rounded p-2",children:[(0,dt.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:["Individual Users (",e.users.length,"):",e.rate_errors&&e.rate_errors.length>0&&(0,dt.jsxs)("span",{className:"ml-2 text-red-600 dark:text-red-400 font-bold",children:["\u26a0\ufe0f ",e.rate_errors.length," rate inconsistencies detected"]})]}),(0,dt.jsxs)("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[e.users.slice(0,20).map((t,r)=>{const n=new Date,i=new Date(n.getTime()-45792e5),s=new Date(n.getTime()-6912e5),o=new Date(t.credited_date+"T00:00:00"),l=o>=i&&o<=s,c=e.rate_errors&&e.rate_errors.some(e=>e.user_id===t.distinct_id);return(0,dt.jsxs)("div",{className:"text-xs flex justify-between ".concat(c?"text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/30 px-1 rounded":l?"text-green-700 dark:text-green-300 bg-green-50 dark:bg-green-900/20 px-1 rounded":"text-gray-700 dark:text-gray-300"),children:[(0,dt.jsx)("span",{className:"font-mono",children:t.distinct_id}),(0,dt.jsxs)("span",{children:[a(t.trial_conversion_rate)," |",a(t.trial_converted_to_refund_rate)," |",a(t.initial_purchase_to_refund_rate)," |",t.accuracy_score,c&&(0,dt.jsx)("span",{className:"ml-1 text-red-600 dark:text-red-400",children:"\u26a0\ufe0f"}),l&&(0,dt.jsx)("span",{className:"ml-1 text-green-600 dark:text-green-400",children:"\ud83d\udcc5"})]})]},r)}),e.users.length>20&&(0,dt.jsxs)("div",{className:"text-xs text-gray-500 italic",children:["... and ",e.users.length-20," more users"]})]}),(0,dt.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[(0,dt.jsx)("span",{className:"text-green-600 dark:text-green-400",children:"\ud83d\udcc5 = In cohort window (used for rates)"}),e.rate_errors&&e.rate_errors.length>0&&(0,dt.jsx)("span",{className:"ml-3 text-red-600 dark:text-red-400",children:"\u26a0\ufe0f = Rate inconsistency"})]})]})]},s);var d})(e,t))})]}):(0,dt.jsxs)("div",{className:"text-center py-12",children:[(0,dt.jsx)("div",{className:"text-gray-400 text-4xl mb-4",children:"\ud83c\udf33"}),(0,dt.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Hierarchy Data Found"}),(0,dt.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Load the overview data to see the conversion rates hierarchy."})]})},vF=()=>{var e,t,r,n,i,s,o,l,c,d;const[u,h]=(0,a.useState)(!1),[p,m]=(0,a.useState)(!1),[f,g]=(0,a.useState)(null),[x,b]=(0,a.useState)([]),[y,v]=(0,a.useState)([]),[_,k]=(0,a.useState)(null),[j,w]=(0,a.useState)(new Set),[N,S]=(0,a.useState)({product_id:"",min_users:"",max_users:"",show_errors_only:!1,show_viable_only:!1});(0,a.useEffect)(()=>{O()},[]);const O=async()=>{h(!0),k(null);try{const e=await mF.loadOverview();if(e.success){g(e.data.statistics),b(e.data.hierarchy_tree),v(e.data.validation_errors);const t=new Set;e.data.hierarchy_tree.slice(0,10).forEach((e,r)=>{e.level<2&&t.add("".concat(e.level,"_").concat(e.value,"_").concat(r))}),w(t)}else k(e.error||"Failed to load conversion rates data")}catch(e){k("Failed to load conversion rates data: "+e.message)}finally{h(!1)}};return(0,dt.jsx)("div",{className:"p-6 max-w-7xl mx-auto",children:(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"\ud83d\udd0d Conversion Rates Debug"}),(0,dt.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Debug and analyze the hierarchical cohort matching system. Each line shows the actual property values with their conversion rates, user counts, and validation status in a clean tree format."})]}),(0,dt.jsxs)("div",{className:"mb-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,dt.jsxs)("h2",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-3 flex items-center",children:[(0,dt.jsx)("span",{className:"mr-2",children:"\u2139\ufe0f"}),"Tree Structure: product_id \u2192 price \u2192 store \u2192 economic_tier \u2192 country \u2192 region"]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 text-sm",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h3",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"\ud83c\udfaf How to Read the Tree"}),(0,dt.jsxs)("ul",{className:"space-y-1 text-blue-700 dark:text-blue-300",children:[(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Actual Values:"})," Shows real data (US, CA, $9.99, app_store, etc.)"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Level:"})," Depth in hierarchy (0=product, 5=region)"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Status:"}),' conversion_rate, "default", "small cohort", or "ERROR"']}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Users:"})," Total user count for this path"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Viable:"})," \u2713 if \u226512 users, \u2717 if not viable"]})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h3",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"\u26a0\ufe0f Error Detection"}),(0,dt.jsxs)("ul",{className:"space-y-1 text-blue-700 dark:text-blue-300",children:[(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Red Background:"})," Inconsistent rates within same segment"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"\u26a0\ufe0f Icon:"})," Rate validation error detected"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"ERROR Status:"})," Users have different conversion rates"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Click to Expand:"})," View individual user details"]})]})]})]})]}),_&&(0,dt.jsxs)("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[(0,dt.jsx)("h3",{className:"text-red-800 dark:text-red-200 font-medium",children:"Error"}),(0,dt.jsx)("p",{className:"text-red-600 dark:text-red-300",children:_})]}),y&&y.length>0&&(0,dt.jsxs)("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[(0,dt.jsxs)("h3",{className:"text-red-800 dark:text-red-200 font-medium mb-2",children:["\u26a0\ufe0f Validation Errors Found (",y.length,")"]}),(0,dt.jsxs)("div",{className:"max-h-32 overflow-y-auto space-y-2",children:[y.slice(0,5).map((e,t)=>(0,dt.jsxs)("div",{className:"text-sm text-red-600 dark:text-red-300",children:[(0,dt.jsxs)("strong",{children:[e.path,":"]})," ",e.message," (Users: ",e.user_count,")"]},t)),y.length>5&&(0,dt.jsxs)("div",{className:"text-sm text-red-500 italic",children:["... and ",y.length-5," more validation errors"]})]})]}),f&&(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"\ud83d\udcca Hierarchy Statistics"}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,dt.jsx)(xF,{title:"Total Users",value:f.total_users,icon:"\ud83d\udc65",color:"blue"}),(0,dt.jsx)(xF,{title:"Cohort Window Users",value:(null===(e=f.cohort_window_info)||void 0===e?void 0:e.total_cohort_users)||0,icon:"\ud83d\udcc5",color:"purple",subtitle:"".concat(null===(t=f.cohort_window_info)||void 0===t?void 0:t.start_date," to ").concat(null===(r=f.cohort_window_info)||void 0===r?void 0:r.end_date)}),(0,dt.jsx)(xF,{title:"Total Segments",value:f.total_segments,icon:"\ud83c\udff7\ufe0f",color:"orange"}),(0,dt.jsx)(xF,{title:"Valid Segments",value:f.valid_segments,icon:"\u2705",color:"green",subtitle:"Consistent rates"})]}),(0,dt.jsxs)("div",{className:"mb-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[(0,dt.jsx)("h3",{className:"text-yellow-800 dark:text-yellow-200 font-medium mb-2",children:"\u26a0\ufe0f Important: Cohort Window Filtering"}),(0,dt.jsxs)("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:["Rate calculations only use users whose ",(0,dt.jsx)("strong",{children:"credited_date"})," falls within the 45-day cohort window (",null===(n=f.cohort_window_info)||void 0===n?void 0:n.start_date," to ",null===(i=f.cohort_window_info)||void 0===i?void 0:i.end_date,"). If a segment has 13 total users but only 8 cohort window users, it will use default rates since 8 < 12."]})]}),(0,dt.jsx)("div",{className:"mb-4",children:(()=>{const e=f.valid_segments+f.invalid_segments,t=e===f.total_segments;return(0,dt.jsxs)("div",{className:"text-sm px-3 py-2 rounded-md ".concat(t?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800"),children:[(0,dt.jsx)("span",{className:"font-medium",children:t?"\u2705 Segment Math Check: ":"\u274c Segment Math Error: "}),"Valid (",f.valid_segments.toLocaleString(),") + Invalid (",f.invalid_segments.toLocaleString(),") = ",e.toLocaleString()," / Total Segments: ",f.total_segments.toLocaleString(),!t&&" (These should match!)"]})})()}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"\ud83d\udc65 User Accuracy Distribution"}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Distribution of users by accuracy level (should add up to total users):"}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,dt.jsx)(xF,{title:"Very High Accuracy",value:f.accuracy_breakdown.very_high,icon:"\ud83c\udfaf",color:"green",subtitle:"Using all 6 properties including store"}),(0,dt.jsx)(xF,{title:"High Accuracy",value:f.accuracy_breakdown.high,icon:"\ud83d\udd35",color:"blue",subtitle:"Using 5 properties including store"}),(0,dt.jsx)(xF,{title:"Medium Accuracy",value:f.accuracy_breakdown.medium,icon:"\ud83d\udfe1",color:"yellow",subtitle:"Using 4 properties including store"}),(0,dt.jsx)(xF,{title:"Low Accuracy",value:f.accuracy_breakdown.low,icon:"\ud83d\udfe0",color:"orange",subtitle:"Using core 3 properties including store"}),(0,dt.jsx)(xF,{title:"Default Fallback",value:f.accuracy_breakdown.default,icon:"\u2699\ufe0f",color:"red",subtitle:"Fallback rates when cohort too small"})]}),(0,dt.jsx)("div",{className:"mt-3 text-center",children:(()=>{const e=Object.values(f.accuracy_breakdown).reduce((e,t)=>e+t,0),t=e===f.total_users;return(0,dt.jsxs)("div",{className:"text-sm px-3 py-2 rounded-md ".concat(t?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800"),children:[(0,dt.jsx)("span",{className:"font-medium",children:t?"\u2705 User Math Check: ":"\u274c User Math Error: "}),"User accuracy sum: ",e.toLocaleString()," / Total users: ",f.total_users.toLocaleString(),!t&&" (These should match!)"]})})()})]}),(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"\ud83c\udff7\ufe0f Segment Accuracy Distribution"}),(0,dt.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Distribution of segments by accuracy level (should add up to total segments):"}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,dt.jsx)(xF,{title:"Very High Accuracy",value:(null===(s=f.segment_accuracy_breakdown)||void 0===s?void 0:s.very_high)||0,icon:"\ud83c\udfaf",color:"green",subtitle:"Segments using all 6 properties"}),(0,dt.jsx)(xF,{title:"High Accuracy",value:(null===(o=f.segment_accuracy_breakdown)||void 0===o?void 0:o.high)||0,icon:"\ud83d\udd35",color:"blue",subtitle:"Segments using 5 properties"}),(0,dt.jsx)(xF,{title:"Medium Accuracy",value:(null===(l=f.segment_accuracy_breakdown)||void 0===l?void 0:l.medium)||0,icon:"\ud83d\udfe1",color:"yellow",subtitle:"Segments using 4 properties"}),(0,dt.jsx)(xF,{title:"Low Accuracy",value:(null===(c=f.segment_accuracy_breakdown)||void 0===c?void 0:c.low)||0,icon:"\ud83d\udfe0",color:"orange",subtitle:"Segments using 3 properties"}),(0,dt.jsx)(xF,{title:"Default Fallback",value:(null===(d=f.segment_accuracy_breakdown)||void 0===d?void 0:d.default)||0,icon:"\u2699\ufe0f",color:"red",subtitle:"Segments with fallback rates"})]}),(0,dt.jsx)("div",{className:"mt-3 text-center",children:(()=>{const e=f.segment_accuracy_breakdown?Object.values(f.segment_accuracy_breakdown).reduce((e,t)=>e+t,0):0,t=e===f.total_segments;return(0,dt.jsxs)("div",{className:"text-sm px-3 py-2 rounded-md ".concat(t?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800"),children:[(0,dt.jsx)("span",{className:"font-medium",children:t?"\u2705 Segment Math Check: ":"\u274c Segment Math Error: "}),"Segment accuracy sum: ",e.toLocaleString()," / Total segments: ",f.total_segments.toLocaleString(),!t&&" (These should match!)"]})})()})]})]}),(0,dt.jsx)("div",{className:"mb-6",children:(0,dt.jsx)(bF,{filters:N,onFilterChange:(e,t)=>{S(r=>Re(Re({},r),{},{[e]:t}))},onApplyFilters:async()=>{m(!0),k(null);try{const e={};Object.keys(N).forEach(t=>{""!==N[t]&&!1!==N[t]&&(e[t]=N[t])});const t=await mF.loadCohortTree({filters:e});t.success?b(t.data.hierarchy_tree):k(t.error||"Failed to filter conversion rates data")}catch(e){k("Failed to filter conversion rates data: "+e.message)}finally{m(!1)}},onReset:()=>{S({product_id:"",min_users:"",max_users:"",show_errors_only:!1,show_viable_only:!1}),O()},loading:p})}),(0,dt.jsxs)("div",{className:"space-y-4",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,dt.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"\ud83c\udf33 Conversion Rates Hierarchy Tree"}),(0,dt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,dt.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[x.length.toLocaleString()," nodes shown"]}),!u&&(0,dt.jsx)("button",{onClick:O,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md font-medium text-sm",children:"Refresh Data"})]})]}),u?(0,dt.jsxs)("div",{className:"text-center py-12",children:[(0,dt.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,dt.jsx)("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Loading conversion rates hierarchy..."})]}):(0,dt.jsx)(yF,{hierarchyTree:x,expandedNodes:j,onToggleNode:e=>{const t=new Set(j);t.has(e)?t.delete(e):t.add(e),w(t)}})]})]})})},_F=e=>{let{title:t,value:r,icon:n,color:a="blue"}=e;return(0,dt.jsx)("div",{className:"border rounded-lg p-4 ".concat({blue:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200",green:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200",yellow:"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 text-yellow-800 dark:text-yellow-200",red:"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200",purple:"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800 text-purple-800 dark:text-purple-200"}[a]),children:(0,dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("p",{className:"text-sm font-medium opacity-75",children:t}),(0,dt.jsx)("p",{className:"text-2xl font-bold",children:(null===r||void 0===r?void 0:r.toLocaleString())||0})]}),(0,dt.jsx)("div",{className:"text-3xl opacity-75",children:n})]})})},kF=e=>{let{filters:t,onFilterChange:r,onSearch:n,onReset:a,loading:i}=e;return(0,dt.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-4",children:[(0,dt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Filter Controls"}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Product ID"}),(0,dt.jsx)("input",{type:"text",value:t.product_id,onChange:e=>r("product_id",e.target.value),placeholder:"Filter by product ID...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Country"}),(0,dt.jsx)("input",{type:"text",value:t.country,onChange:e=>r("country",e.target.value),placeholder:"Filter by country...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Min Price Bucket"}),(0,dt.jsx)("input",{type:"number",step:"0.01",value:t.min_bucket,onChange:e=>r("min_bucket",e.target.value),placeholder:"Min bucket value...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Max Price Bucket"}),(0,dt.jsx)("input",{type:"number",step:"0.01",value:t.max_bucket,onChange:e=>r("max_bucket",e.target.value),placeholder:"Max bucket value...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Min Users"}),(0,dt.jsx)("input",{type:"number",value:t.min_users,onChange:e=>r("min_users",e.target.value),placeholder:"Min user count...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Max Users"}),(0,dt.jsx)("input",{type:"number",value:t.max_users,onChange:e=>r("max_users",e.target.value),placeholder:"Max user count...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]}),(0,dt.jsxs)("div",{className:"flex gap-2",children:[(0,dt.jsx)("button",{onClick:n,disabled:i,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-4 py-2 rounded-md font-medium",children:i?"Searching...":"Search"}),(0,dt.jsx)("button",{onClick:a,disabled:i,className:"bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-md font-medium",children:"Reset"})]})]})},jF=e=>{let{data:t,onSort:r,sortConfig:n}=e;const a=e=>n.key!==e?(0,dt.jsx)("span",{className:"text-gray-400",children:"\u2195\ufe0f"}):"asc"===n.direction?(0,dt.jsx)("span",{className:"text-blue-600",children:"\u2191"}):(0,dt.jsx)("span",{className:"text-blue-600",children:"\u2193"}),i=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e);return(0,dt.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:(0,dt.jsxs)("div",{className:"overflow-x-auto",children:[(0,dt.jsxs)("table",{className:"w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,dt.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,dt.jsxs)("tr",{children:[(0,dt.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 w-1/6",onClick:()=>r("product_id"),children:(0,dt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,dt.jsx)("span",{children:"Product ID"}),a("product_id")]})}),(0,dt.jsx)("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 w-1/12",onClick:()=>r("country"),children:(0,dt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,dt.jsx)("span",{children:"Country"}),a("country")]})}),(0,dt.jsx)("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 w-1/8",onClick:()=>r("event_type"),children:(0,dt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,dt.jsx)("span",{children:"Event Type"}),a("event_type")]})}),(0,dt.jsx)("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 w-1/8",onClick:()=>r("price_bucket"),children:(0,dt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,dt.jsx)("span",{children:"Price Bucket"}),a("price_bucket")]})}),(0,dt.jsx)("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 w-1/8",onClick:()=>r("user_count"),children:(0,dt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,dt.jsx)("span",{children:"Total Users"}),a("user_count")]})}),(0,dt.jsx)("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 w-1/8",onClick:()=>r("properly_sorted_count"),children:(0,dt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,dt.jsx)("span",{children:"Properly Sorted"}),a("properly_sorted_count")]})}),(0,dt.jsx)("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 w-1/8",onClick:()=>r("inherited_count"),children:(0,dt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,dt.jsx)("span",{children:"Inherited"}),a("inherited_count")]})})]})}),(0,dt.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.map((e,t)=>(0,dt.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,dt.jsx)("td",{className:"px-3 py-3 text-sm font-medium text-gray-900 dark:text-white break-words",children:e.product_id}),(0,dt.jsx)("td",{className:"px-2 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.country}),(0,dt.jsx)("td",{className:"px-2 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:"RC Initial purchase"===e.event_type?(0,dt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"RC Initial purchase"}):"RC Trial converted"===e.event_type?(0,dt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"RC Trial converted"}):(0,dt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:"No Conversion"})}),(0,dt.jsx)("td",{className:"px-2 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:0===e.price_bucket?(0,dt.jsx)("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"$0.00"}):(0,dt.jsx)("span",{className:"font-medium text-green-600 dark:text-green-400",children:i(e.price_bucket)})}),(0,dt.jsx)("td",{className:"px-2 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:(0,dt.jsx)("span",{className:"font-medium",children:e.user_count.toLocaleString()})}),(0,dt.jsx)("td",{className:"px-2 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:(0,dt.jsx)("span",{className:"font-medium text-green-600 dark:text-green-400",children:e.properly_sorted_count.toLocaleString()})}),(0,dt.jsx)("td",{className:"px-2 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:(0,dt.jsx)("span",{className:"font-medium text-yellow-600 dark:text-yellow-400",children:e.inherited_count.toLocaleString()})})]},t))})]}),0===t.length&&(0,dt.jsxs)("div",{className:"text-center py-12",children:[(0,dt.jsx)("div",{className:"text-gray-400 text-4xl mb-4",children:"\ud83d\udcca"}),(0,dt.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Data Found"}),(0,dt.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Try adjusting your filters or load the overview data."})]})]})})},wF=()=>{const[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)(!1),[i,s]=(0,a.useState)(null),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[u,h]=(0,a.useState)(null),[p,m]=(0,a.useState)(!1),[f,g]=(0,a.useState)({product_id:"",country:"",min_bucket:"",max_bucket:"",min_users:"",max_users:""}),[x,b]=(0,a.useState)({key:"product_id",direction:"asc"});(0,a.useEffect)(()=>{y()},[]);const y=async()=>{t(!0),h(null);try{const e=await fF.loadOverview();e.success?(s(e.data.statistics),l(e.data.table_data),d(e.data.table_data),m(!1)):h(e.error||"Failed to load price bucket data")}catch(e){h("Failed to load price bucket data: "+e.message)}finally{t(!1)}},v=(0,a.useMemo)(()=>c?[...c].sort((e,t)=>{let r=e[x.key],n=t[x.key];return"price_bucket"!==x.key&&"user_count"!==x.key&&"properly_sorted_count"!==x.key&&"inherited_count"!==x.key||(r=Number(r),n=Number(n)),"product_id"!==x.key&&"country"!==x.key&&"event_type"!==x.key||(r=String(r),n=String(n)),r<n?"asc"===x.direction?-1:1:r>n?"asc"===x.direction?1:-1:0}):[],[c,x]);return(0,dt.jsx)("div",{className:"p-6 max-w-7xl mx-auto",children:(0,dt.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"\ud83d\udcb0 Price Bucket Debug"}),(0,dt.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Debug and analyze price bucket assignments from the pipeline. View statistics and explore detailed bucket assignments."})]}),(0,dt.jsxs)("div",{className:"mb-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,dt.jsxs)("h2",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-3 flex items-center",children:[(0,dt.jsx)("span",{className:"mr-2",children:"\u2139\ufe0f"}),"Price Bucket Assignment Algorithm (v3 - Iterative Bucketing)"]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 text-sm",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h3",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"\ud83c\udfaf Assignment Process (Two-Pass System)"}),(0,dt.jsxs)("ul",{className:"space-y-1 text-blue-700 dark:text-blue-300",children:[(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Pass 1:"})," Direct conversions + strict backward inheritance"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Pass 2:"})," Closest-time conversion inheritance for remaining users"]}),(0,dt.jsx)("li",{children:"Buckets created using iterative merge algorithm with thresholds"}),(0,dt.jsx)("li",{children:"Groups similar prices: 17.5% difference OR $5.00 absolute difference"})]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h3",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"\ud83d\udcca Assignment Types Explained"}),(0,dt.jsxs)("ul",{className:"space-y-1 text-blue-700 dark:text-blue-300",children:[(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Properly Sorted:"})," Users with direct conversions (RC Initial purchase, RC Trial converted)"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Inherited:"})," Trial users who inherited bucket from prior/closest conversions"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Zero Bucket ($0.00):"})," No conversion events OR events found but price didn't fit any bucket"]}),(0,dt.jsxs)("li",{children:[(0,dt.jsx)("strong",{children:"Properly Sorted vs Inherited:"})," Shows breakdown of direct conversions vs inherited buckets"]})]})]})]}),(0,dt.jsxs)("div",{className:"mt-4 pt-3 border-t border-blue-200 dark:border-blue-700",children:[(0,dt.jsx)("h3",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"\u26a0\ufe0f Important Notes"}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 text-sm text-blue-700 dark:text-blue-300",children:[(0,dt.jsx)("div",{children:(0,dt.jsxs)("ul",{className:"space-y-1",children:[(0,dt.jsxs)("li",{children:["\u2022 ",(0,dt.jsx)("strong",{children:"Country-Specific:"})," Buckets are created per country-product-event combination"]}),(0,dt.jsxs)("li",{children:["\u2022 ",(0,dt.jsx)("strong",{children:"Event-Specific:"}),' Different buckets for "RC Initial purchase" vs "RC Trial converted"']}),(0,dt.jsxs)("li",{children:["\u2022 ",(0,dt.jsx)("strong",{children:"Inheritance Priority:"})," Prior trial conversions \u2192 closest conversion (any type)"]})]})}),(0,dt.jsx)("div",{children:(0,dt.jsxs)("ul",{className:"space-y-1",children:[(0,dt.jsxs)("li",{children:["\u2022 ",(0,dt.jsx)("strong",{children:"Zero Values ($0.00):"})," No conversion/trial events found OR conversion price outside all bucket ranges"]}),(0,dt.jsxs)("li",{children:["\u2022 ",(0,dt.jsx)("strong",{children:"Valid Lifecycle:"})," Only users with valid_lifecycle=1 and valid_user=1 are included"]}),(0,dt.jsxs)("li",{children:["\u2022 ",(0,dt.jsx)("strong",{children:"Bucket Calculation:"})," Uses average price of all conversions in the bucket"]})]})})]})]})]}),u&&(0,dt.jsxs)("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[(0,dt.jsx)("h3",{className:"text-red-800 dark:text-red-200 font-medium",children:"Error"}),(0,dt.jsx)("p",{className:"text-red-600 dark:text-red-300",children:u})]}),i&&(0,dt.jsxs)("div",{className:"mb-6",children:[(0,dt.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"\ud83d\udcca Bucket Assignment Statistics"}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[(0,dt.jsx)(_F,{title:"Total User-Product Pairs",value:i.total_user_product_pairs,icon:"\ud83d\udcca",color:"blue"}),(0,dt.jsx)(_F,{title:"Valid Lifecycle Users",value:i.total_users,icon:"\u2705",color:"green"}),(0,dt.jsx)(_F,{title:"Properly Sorted",value:i.properly_sorted,icon:"\ud83c\udfaf",color:"green"})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,dt.jsx)(_F,{title:"Inherited Buckets",value:i.inherited,icon:"\u2b06\ufe0f",color:"yellow"}),(0,dt.jsx)(_F,{title:"Zero Buckets ($0.00)",value:i.zero_bucket,icon:"0\ufe0f\u20e3",color:"red"}),(0,dt.jsx)(_F,{title:"Unique Buckets",value:i.unique_buckets,icon:"\ud83d\udd22",color:"purple"})]})]}),(0,dt.jsx)("div",{className:"mb-6",children:(0,dt.jsx)(kF,{filters:f,onFilterChange:(e,t)=>{g(r=>Re(Re({},r),{},{[e]:t}))},onSearch:async()=>{n(!0),h(null);try{const e={};Object.keys(f).forEach(t=>{""!==f[t]&&(e[t]=f[t])});const t=await fF.searchData(e);t.success?(d(t.data.filtered_data),m(!0)):h(t.error||"Failed to search price bucket data")}catch(e){h("Failed to search price bucket data: "+e.message)}finally{n(!1)}},onReset:()=>{g({product_id:"",country:"",min_bucket:"",max_bucket:"",min_users:"",max_users:""}),d(o),m(!1)},loading:r})}),(0,dt.jsxs)("div",{className:"space-y-4",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,dt.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["\ud83d\udccb Price Bucket Data ",p&&"(Filtered)"]}),(0,dt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,dt.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",v.length.toLocaleString()," rows"]}),!e&&(0,dt.jsx)("button",{onClick:y,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md font-medium text-sm",children:"Refresh Data"})]})]}),e?(0,dt.jsxs)("div",{className:"text-center py-12",children:[(0,dt.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,dt.jsx)("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Loading price bucket data..."})]}):(0,dt.jsx)(jF,{data:v,onSort:e=>{let t="asc";x.key===e&&"asc"===x.direction&&(t="desc"),b({key:e,direction:t})},sortConfig:x})]})]})})},NF=()=>{const[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(null),[i,s]=(0,a.useState)(!0),[o,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(null);(0,a.useEffect)(()=>{u()},[]);const u=async()=>{try{s(!0);const[e,r]=await Promise.all([gF.loadOverview(),gF.loadExamples()]);e.success&&t(e),r.success&&n(r),l(null)}catch(e){l(e.message)}finally{s(!1)}},h=async(e,t)=>{const r="".concat(e,"-").concat(t);d(r);try{console.log("Refreshing status:",e,t);const r=await gF.refreshStatus(e,t);console.log("Refresh response:",r),r.success?(console.log("Updating examples data with:",r.examples),n(n=>{const a=Re(Re({},n),{},{["".concat(e,"_examples")]:Re(Re({},n["".concat(e,"_examples")]),{},{[t]:r.examples})});return console.log("New examples data:",a),a})):console.error("Refresh failed:",r)}catch(a){console.error("Error refreshing status examples:",a)}finally{d(null)}},p=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e),m=e=>new Intl.NumberFormat("en-US").format(e),f=e=>{let{status:t,count:r,percentage:n,isLast:a}=e;return(0,dt.jsxs)("div",{className:"flex justify-between items-center py-3 px-4 ".concat(a?"":"border-b border-gray-700"," hover:bg-gray-700 transition-colors"),children:[(0,dt.jsx)("div",{className:"flex flex-col",children:(0,dt.jsx)("span",{className:"font-medium text-blue-300",children:t.replace(/_/g," ")})}),(0,dt.jsxs)("div",{className:"text-right",children:[(0,dt.jsx)("div",{className:"text-lg font-bold text-white",children:m(r)}),(0,dt.jsxs)("div",{className:"text-sm text-gray-400",children:[n,"% of total"]})]})]})},g=e=>{let{range:t,count:r,percentage:n,isLast:a}=e;return(0,dt.jsxs)("div",{className:"flex justify-between items-center py-3 px-4 ".concat(a?"":"border-b border-gray-700"," hover:bg-gray-700 transition-colors"),children:[(0,dt.jsx)("div",{className:"flex flex-col",children:(0,dt.jsx)("span",{className:"font-medium text-green-300",children:t})}),(0,dt.jsxs)("div",{className:"text-right",children:[(0,dt.jsx)("div",{className:"text-lg font-bold text-white",children:m(r)}),(0,dt.jsxs)("div",{className:"text-sm text-gray-400",children:[n,"% of total"]})]})]})},x=e=>{let{user:t,index:r}=e;return(0,dt.jsx)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:(0,dt.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"User ID:"}),(0,dt.jsxs)("span",{className:"text-white ml-2 font-mono",children:[t.distinct_id.substring(0,8),"..."]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Value:"}),(0,dt.jsx)("span",{className:"text-green-300 ml-2 font-bold",children:p(t.current_value)})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Product:"}),(0,dt.jsx)("span",{className:"text-white ml-2",children:t.product_id})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Country:"}),(0,dt.jsx)("span",{className:"text-white ml-2",children:t.country||"N/A"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Region:"}),(0,dt.jsx)("span",{className:"text-white ml-2",children:t.region||"N/A"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Start:"}),(0,dt.jsx)("span",{className:"text-white ml-2",children:t.credited_date||"N/A"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Days:"}),(0,dt.jsx)("span",{className:"text-white ml-2",children:t.days_since_start||"N/A"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Accuracy:"}),(0,dt.jsx)("span",{className:"text-yellow-300 ml-2 capitalize",children:t.accuracy_score||"unknown"})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Price Bucket:"}),(0,dt.jsx)("span",{className:"text-green-300 ml-2 font-semibold",children:p(t.price_bucket)})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Trial Conv:"}),(0,dt.jsxs)("span",{className:"text-red-300 ml-2 font-semibold",children:[(100*t.trial_conversion_rate).toFixed(1),"%"]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Trial Refund:"}),(0,dt.jsxs)("span",{className:"text-red-300 ml-2 font-semibold",children:[(100*t.trial_refund_rate).toFixed(1),"%"]})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("span",{className:"text-gray-400",children:"Purchase Refund:"}),(0,dt.jsxs)("span",{className:"text-red-300 ml-2 font-semibold",children:[(100*t.purchase_refund_rate).toFixed(1),"%"]})]})]})})};return i?(0,dt.jsx)("div",{className:"p-6 bg-gray-900 min-h-screen",children:(0,dt.jsxs)("div",{className:"animate-pulse",children:[(0,dt.jsx)("div",{className:"h-8 bg-gray-700 rounded w-1/4 mb-6"}),(0,dt.jsxs)("div",{className:"space-y-4",children:[(0,dt.jsx)("div",{className:"h-32 bg-gray-800 rounded"}),(0,dt.jsx)("div",{className:"h-64 bg-gray-800 rounded"}),(0,dt.jsx)("div",{className:"h-64 bg-gray-800 rounded"})]})]})}):o?(0,dt.jsx)("div",{className:"p-6 bg-gray-900 min-h-screen",children:(0,dt.jsxs)("div",{className:"bg-red-900 border border-red-700 rounded-lg p-4",children:[(0,dt.jsx)("h2",{className:"text-red-300 font-bold mb-2",children:"Error Loading Data"}),(0,dt.jsx)("p",{className:"text-red-200",children:o}),(0,dt.jsx)("button",{onClick:u,className:"mt-4 bg-red-700 hover:bg-red-600 text-white px-4 py-2 rounded transition-colors",children:"Retry"})]})}):(0,dt.jsxs)("div",{className:"p-6 bg-gray-900 min-h-screen text-white",children:[(0,dt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,dt.jsx)("h1",{className:"text-3xl font-bold text-white",children:"\ud83d\udcb0 Value Estimation Debug"}),(0,dt.jsx)("button",{onClick:u,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg transition-colors",children:"Refresh Data"})]}),e&&(0,dt.jsxs)("div",{className:"mb-8",children:[(0,dt.jsx)("h2",{className:"text-xl font-bold mb-4 text-blue-300",children:"\ud83d\udcca Overview Statistics"}),(0,dt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8",children:[(0,dt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-white",children:m(e.statistics.total_user_product_pairs)}),(0,dt.jsx)("div",{className:"text-sm text-gray-400",children:"Total Pairs"})]}),(0,dt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-green-400",children:m(e.statistics.processed_pairs)}),(0,dt.jsx)("div",{className:"text-sm text-gray-400",children:"Processed"})]}),(0,dt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:m(e.statistics.pairs_with_values)}),(0,dt.jsx)("div",{className:"text-sm text-gray-400",children:"With Values"})]}),(0,dt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:p(e.statistics.avg_value)}),(0,dt.jsx)("div",{className:"text-sm text-gray-400",children:"Avg Value"})]}),(0,dt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,dt.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:p(e.statistics.total_estimated_value)}),(0,dt.jsx)("div",{className:"text-sm text-gray-400",children:"Total Value"})]}),(0,dt.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,dt.jsxs)("div",{className:"text-2xl font-bold text-orange-400",children:[e.statistics.processing_rate,"%"]}),(0,dt.jsx)("div",{className:"text-sm text-gray-400",children:"Processing Rate"})]})]}),(0,dt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,dt.jsxs)("div",{className:"bg-gray-800 rounded-lg border border-gray-700",children:[(0,dt.jsxs)("div",{className:"p-4 border-b border-gray-700",children:[(0,dt.jsx)("h3",{className:"text-lg font-bold text-blue-300",children:"\ud83d\udd04 Current Status Breakdown"}),(0,dt.jsx)("p",{className:"text-sm text-gray-400",children:"Chronological user lifecycle progression"})]}),(0,dt.jsx)("div",{className:"max-h-96 overflow-y-auto",children:e.status_breakdown.map((t,r)=>(0,dt.jsx)(f,{status:t.status,count:t.count,percentage:t.percentage,isLast:r===e.status_breakdown.length-1},t.status))})]}),(0,dt.jsxs)("div",{className:"bg-gray-800 rounded-lg border border-gray-700",children:[(0,dt.jsxs)("div",{className:"p-4 border-b border-gray-700",children:[(0,dt.jsx)("h3",{className:"text-lg font-bold text-green-300",children:"\ud83d\udc8e Value Status Breakdown"}),(0,dt.jsx)("p",{className:"text-sm text-gray-400",children:"Value calculation stages"})]}),(0,dt.jsx)("div",{className:"max-h-96 overflow-y-auto",children:e.value_status_breakdown.map((t,r)=>(0,dt.jsx)(f,{status:t.status,count:t.count,percentage:t.percentage,isLast:r===e.value_status_breakdown.length-1},t.status))})]}),(0,dt.jsxs)("div",{className:"bg-gray-800 rounded-lg border border-gray-700",children:[(0,dt.jsxs)("div",{className:"p-4 border-b border-gray-700",children:[(0,dt.jsx)("h3",{className:"text-lg font-bold text-purple-300",children:"\ud83d\udcb0 Current Value Distribution"}),(0,dt.jsx)("p",{className:"text-sm text-gray-400",children:"Value ranges in $20 increments up to $120+"})]}),(0,dt.jsx)("div",{className:"max-h-96 overflow-y-auto",children:e.value_distribution.map((t,r)=>(0,dt.jsx)(g,{range:t.range,count:t.count,percentage:t.percentage,isLast:r===e.value_distribution.length-1},t.range))})]})]})]}),r&&(0,dt.jsxs)("div",{className:"space-y-8",children:[(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h2",{className:"text-xl font-bold mb-4 text-blue-300",children:"\ud83d\udccb Current Status Examples"}),(0,dt.jsx)("p",{className:"text-gray-400 mb-4",children:"Sample users for each current status"}),(0,dt.jsx)("div",{className:"space-y-6",children:Object.entries(r.current_status_examples||{}).map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{className:"bg-gray-800 rounded-lg border border-gray-700",children:[(0,dt.jsxs)("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[(0,dt.jsxs)("h3",{className:"text-lg font-medium text-blue-300",children:[t.replace(/_/g," ")," (",r.length," examples)"]}),(0,dt.jsxs)("button",{onClick:()=>h("current_status",t),disabled:c==="current_status-".concat(t),className:"bg-blue-600 hover:bg-blue-500 disabled:bg-blue-800 text-white px-3 py-1 rounded text-sm transition-colors",children:[c==="current_status-".concat(t)?"\u27f3":"\u21bb"," Refresh"]})]}),r.length>0?(0,dt.jsx)("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map((e,t)=>(0,dt.jsx)(x,{user:e,index:t},"".concat(e.distinct_id,"-").concat(t)))}):(0,dt.jsx)("div",{className:"p-4",children:(0,dt.jsxs)("div",{className:"bg-gray-700 border border-gray-600 rounded-lg p-4 text-center",children:[(0,dt.jsx)("div",{className:"text-gray-400 text-lg mb-2",children:"\u26a0\ufe0f No Examples Available"}),(0,dt.jsx)("div",{className:"text-gray-500 text-sm",children:"This status exists in the system but currently has no user examples."}),(0,dt.jsx)("div",{className:"text-gray-600 text-xs mt-2",children:"Try refreshing to see if new examples become available."})]})})]},t)})})]}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h2",{className:"text-xl font-bold mb-4 text-green-300",children:"\ud83c\udfaf Value Status Examples"}),(0,dt.jsx)("p",{className:"text-gray-400 mb-4",children:"Sample users for each value status"}),(0,dt.jsx)("div",{className:"space-y-6",children:Object.entries(r.value_status_examples||{}).map(e=>{let[t,r]=e;return(0,dt.jsxs)("div",{className:"bg-gray-800 rounded-lg border border-gray-700",children:[(0,dt.jsxs)("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[(0,dt.jsxs)("h3",{className:"text-lg font-medium text-green-300",children:[t.replace(/_/g," ")," (",r.length," examples)"]}),(0,dt.jsxs)("button",{onClick:()=>h("value_status",t),disabled:c==="value_status-".concat(t),className:"bg-green-600 hover:bg-green-500 disabled:bg-green-800 text-white px-3 py-1 rounded text-sm transition-colors",children:[c==="value_status-".concat(t)?"\u27f3":"\u21bb"," Refresh"]})]}),r.length>0?(0,dt.jsx)("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map((e,t)=>(0,dt.jsx)(x,{user:e,index:t},"".concat(e.distinct_id,"-").concat(t)))}):(0,dt.jsx)("div",{className:"p-4",children:(0,dt.jsxs)("div",{className:"bg-gray-700 border border-gray-600 rounded-lg p-4 text-center",children:[(0,dt.jsx)("div",{className:"text-gray-400 text-lg mb-2",children:"\u26a0\ufe0f No Examples Available"}),(0,dt.jsx)("div",{className:"text-gray-500 text-sm",children:"This status exists in the system but currently has no user examples."}),(0,dt.jsx)("div",{className:"text-gray-600 text-xs mt-2",children:"Try refreshing to see if new examples become available."})]})})]},t)})})]})]})]})};const SF=function(){const[e,t]=(0,a.useState)(!1);return(0,dt.jsxs)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200",children:[(0,dt.jsx)("nav",{className:"bg-white dark:bg-gray-800 shadow-md p-4",children:(0,dt.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,dt.jsx)(Ce,{to:"/",className:"text-xl font-bold hover:text-blue-500 transition-colors",children:"Ads Dashboard"}),(0,dt.jsx)("div",{className:"flex items-center space-x-4",children:(0,dt.jsxs)("div",{className:"relative",children:[(0,dt.jsxs)("button",{onClick:()=>t(!e),className:"flex items-center space-x-1 px-3 py-2 text-gray-600 dark:text-gray-300 hover:text-blue-500 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Debug Tools",children:[(0,dt.jsx)(Be,{className:"h-4 w-4"}),(0,dt.jsx)(Ve,{className:"h-3 w-3 transition-transform ".concat(e?"rotate-180":"")})]}),e&&(0,dt.jsx)("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:(0,dt.jsxs)("div",{className:"py-1",children:[(0,dt.jsx)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide border-b border-gray-200 dark:border-gray-700",children:"Debug Tools"}),[{path:"/debug/conversion-rates",label:"Conversion Rates Debug",icon:"\ud83d\udcc8"},{path:"/debug/price-bucket",label:"Price Bucket Debug",icon:"\ud83d\udcb0"},{path:"/debug/value-estimation",label:"Value Estimation Debug",icon:"\ud83d\udcca"},{path:"/debug",label:"Mixpanel Debugger",icon:"\ud83d\udd0d"},{path:"/meta-debug",label:"Meta Debugger",icon:"\ud83c\udfaf"}].map(e=>(0,dt.jsxs)(Ce,{to:e.path,onClick:()=>t(!1),className:"flex items-center space-x-2 px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-blue-500 transition-colors",children:[(0,dt.jsx)("span",{className:"text-base",children:e.icon}),(0,dt.jsx)("span",{children:e.label})]},e.path))]})})]})})]})}),e&&(0,dt.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>t(!1)}),(0,dt.jsx)("div",{className:"w-full",children:(0,dt.jsxs)(ye,{children:[(0,dt.jsx)(xe,{path:"/",element:(0,dt.jsx)(Et,{})}),(0,dt.jsx)(xe,{path:"/cohort-analyzer",element:(0,dt.jsx)(JI,{})}),(0,dt.jsx)(xe,{path:"/cohort-analyzer-v3",element:(0,dt.jsx)(kL,{})}),(0,dt.jsx)(xe,{path:"/conversion-probability",element:(0,dt.jsx)(dF,{})}),(0,dt.jsx)(xe,{path:"/pricing-management",element:(0,dt.jsx)(uF,{})}),(0,dt.jsx)(xe,{path:"/cohort-pipeline",element:(0,dt.jsx)($L,{})}),(0,dt.jsx)(xe,{path:"/pipeline-debug",element:(0,dt.jsx)(hF,{})}),(0,dt.jsx)(xe,{path:"/debug/conversion-rates",element:(0,dt.jsx)(vF,{})}),(0,dt.jsx)(xe,{path:"/debug/price-bucket",element:(0,dt.jsx)(wF,{})}),(0,dt.jsx)(xe,{path:"/debug/value-estimation",element:(0,dt.jsx)(NF,{})}),(0,dt.jsx)(xe,{path:"/debug",element:(0,dt.jsx)(Ha,{})}),(0,dt.jsx)(xe,{path:"/meta-debug",element:(0,dt.jsx)(Ni,{})})]})})]})},OF=e=>{e&&e instanceof Function&&r.e(453).then(r.bind(r,6453)).then(t=>{let{getCLS:r,getFID:n,getFCP:a,getLCP:i,getTTFB:s}=t;r(e),n(e),a(e),i(e),s(e)})};s.createRoot(document.getElementById("root")).render((0,dt.jsx)(Ne,{children:(0,dt.jsx)(SF,{})})),OF()})()})();
//# sourceMappingURL=main.bea61cf8.js.map